<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
</head>
<body>
    <div class="test"></div>
    <script>
        const p=new Proxy({},{
            get(target,key){
                const result=Reflect.get(target,key);
                if(!Array.isArray(result)){
                    Reflect.set(target,key,[]);
                }
                return Reflect.get(target,key);
            },
            set(target,key,value){
                const result=Reflect.get(target,key);
                if(Array.isArray(result)){
                    result.push(value);
                    return Reflect.set(target,key,result);
                }
                return Reflect.set(target,key,[value]);
            }
        });
        p.a=0;
        p.a.push(1);
        p.a=3;
        p.a.push(2);
        p.a='test';
        p.a=[];
        console.log(p.a);

        function createObject(){
            return new Proxy({},{
               set(target,key,value){
                   return Reflect.set(target,key,value);
               },
               get(target,key){
                   const result=Reflect.get(target,key);
                   if(!result){
                       Reflect.set(target,key,createObject());
                   }
                   return Reflect.get(target,key);
               }
            });
        }
        const m=createObject();
        m.a.b.c=1;
        console.log(m.a.b.c);
    </script>
</body>
</html>