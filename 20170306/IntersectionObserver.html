<!DOCTYPE html>
<html>
<head>
    <title></title>
    <style>
        *{
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        body{
            height: 200vh;
        }
        div{
            position: absolute;
            width: 100px;
            height: 100px;
            line-height: 100px;
            top: 50vh;
            background-color: #ff0000;
            left: calc(50vw - 50px);
            text-align: center;
        }
        div:nth-of-type(2){
            top: 150vh;
            background-color: green;
        }
    </style>
</head>
<body>
<div>1</div>
<div>2</div>
<script>
    const divs= [...document.querySelectorAll('div')];
    //只有当有元素的可见性发生变化时才触发
    const intersectionObserver=new IntersectionObserver(function(entrys){
       entrys.forEach(function(item){
          let dom=item.target;
           console.log(`${dom.innerHTML}:${item.intersectionRatio}`);
       });
    });
    for(let i of divs){
        intersectionObserver.observe(i);
    }
</script>
</body>
</html>