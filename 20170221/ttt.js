(function(e){function i(t){if(n[t])return n[t].exports;var r=n[t]={exports:{},id:t,loaded:false};e[t].call(r.exports,r,r.exports,i);r.loaded=true;return r.exports}var t=window["webpackJsonp"];window["webpackJsonp"]=function(s,o){var u,a,f=0,l=[];for(;f<s.length;f++){a=s[f];if(r[a])l.push.apply(l,r[a]);r[a]=0}for(u in o){e[u]=o[u]}if(t)t(s,o);while(l.length)l.shift().call(null,i)};var n={};var r={1:0};i.e=function(t,n){if(r[t]===0)return n.call(null,i);if(r[t]!==undefined){r[t].push(n)}else{r[t]=[n];var s=document.getElementsByTagName("head")[0];var o=document.createElement("script");o.type="text/javascript";o.charset="utf-8";o.async=true;o.src=i.p+""+t+"-chunk@"+{2:"7cacfd0bc68ec193a465",3:"a9cdd4c62e09ddc73b1d",4:"6969625c22637f6441c5",5:"322f079a17f2e595cf3c",6:"78a87a1700f04f78f846",7:"c3f2a928f88ebef91e5b",8:"c20fb3af2c7bbd89a442",9:"5eedb333c6b11028cef5",10:"194b71613f1b3d541f0e",11:"7587fa23c6bf684da747",12:"46e7edf1893be3ef3953",13:"1d5cd4f96ee37ff7c784",14:"d528f36e21afd8cc523d",15:"2a84d2e07b18f3021309",16:"ef7c043207a1199c0200",17:"21a21c5b6f3056ee021b",18:"7fd814e4d2b57d7e2a93",19:"5c0d1d910ac0b04887f5",20:"697c6c9d4345a46e0074",21:"76f0475ea060b6dd0dde",22:"f46df97e6a1e962a132a",23:"bc8b73a2a50ff0e113f7",24:"7b0ddb4550cbb490733b"}[t]+".js";s.appendChild(o)}};i.m=e;i.c=n;i.p="//q.qunarzz.com/train_sino_hy/prd/";return i(0)})([function(e,t,n){e.exports=n(786)},,function(e,t,n){"use strict";var r=n(3);var i=n(24);var s=n(25);var o=n(8);var u=n(38);var a=n(29);var f=n(9);var l=n(4).ArrayBuffer;var c=n(45);var h=s.ArrayBuffer;var p=s.DataView;var d=i.ABV&&l.isView;var v=h.prototype.slice;var m=i.VIEW;var g="ArrayBuffer";r(r.G+r.W+r.F*(l!==h),{ArrayBuffer:h});r(r.S+r.F*!i.CONSTR,g,{isView:function(t){return d&&d(t)||f(t)&&m in t}});r(r.P+r.U+r.F*n(12)(function(){return!(new h(2)).slice(1,undefined).byteLength}),g,{slice:function(t,n){if(v!==undefined&&n===undefined)return v.call(o(this),t);var r=o(this).byteLength;var i=u(t,r);var s=u(n===undefined?r:n,r);var f=new(c(this,h))(a(s-i));var l=new p(this);var d=new p(f);var m=0;while(i<s){d.setUint8(m++,l.getUint8(i++))}return f}});n(46)(g)},function(e,t,n){var r=n(4);var i=n(5);var s=n(6);var o=n(16);var u=n(22);var a="prototype";var f=function(e,t,n){var l=e&f.F;var c=e&f.G;var h=e&f.S;var p=e&f.P;var d=e&f.B;var v=c?r:h?r[t]||(r[t]={}):(r[t]||{})[a];var m=c?i:i[t]||(i[t]={});var g=m[a]||(m[a]={});var y,b,w,E;if(c)n=t;for(y in n){b=!l&&v&&v[y]!==undefined;w=(b?v:n)[y];E=d&&b?u(w,r):p&&typeof w=="function"?u(Function.call,w):w;if(v)o(v,y,w,e&f.U);if(m[y]!=w)s(m,y,E);if(p&&g[y]!=w)g[y]=w}};r.core=i;f.F=1;f.G=2;f.S=4;f.P=8;f.B=16;f.W=32;f.U=64;f.R=128;e.exports=f},function(e,t){var n=e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=n},function(e,t){var n=e.exports={version:"2.6.4"};if(typeof __e=="number")__e=n},function(e,t,n){var r=n(7);var i=n(15);e.exports=n(11)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){e[t]=n;return e}},function(e,t,n){var r=n(8);var i=n(10);var s=n(14);var o=Object.defineProperty;t.f=n(11)?Object.defineProperty:function(t,n,u){r(t);n=s(n,true);r(u);if(i)try{return o(t,n,u)}catch(a){}if("get"in u||"set"in u)throw TypeError("Accessors not supported!");if("value"in u)t[n]=u.value;return t}},function(e,t,n){var r=n(9);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return typeof e==="object"?e!==null:typeof e==="function"}},function(e,t,n){e.exports=!n(11)&&!n(12)(function(){return Object.defineProperty(n(13)("div"),"a",{get:function(){return 7}}).a!=7})},function(e,t,n){e.exports=!n(12)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return true}}},function(e,t,n){var r=n(9);var i=n(4).document;var s=r(i)&&r(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&typeof (n=e.toString)=="function"&&!r(i=n.call(e)))return i;if(typeof (n=e.valueOf)=="function"&&!r(i=n.call(e)))return i;if(!t&&typeof (n=e.toString)=="function"&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}},function(e,t,n){var r=n(4);var i=n(6);var s=n(17);var o=n(18)("src");var u=n(19);var a="toString";var f=(""+u).split(a);n(5).inspectSource=function(e){return u.call(e)};(e.exports=function(e,t,n,u){var a=typeof n=="function";if(a)s(n,"name")||i(n,"name",t);if(e[t]===n)return;if(a)s(n,o)||i(n,o,e[t]?""+e[t]:f.join(String(t)));if(e===r){e[t]=n}else if(!u){delete e[t];i(e,t,n)}else if(e[t]){e[t]=n}else{i(e,t,n)}})(Function.prototype,a,function l(){return typeof this=="function"&&this[o]||u.call(this)})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n=0;var r=Math.random();e.exports=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++n+r).toString(36))}},function(e,t,n){e.exports=n(20)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(5);var i=n(4);var s="__core-js_shared__";var o=i[s]||(i[s]={});(e.exports=function(e,t){return o[e]||(o[e]=t!==undefined?t:{})})("versions",[]).push({version:r.version,mode:n(21)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=false},function(e,t,n){var r=n(23);e.exports=function(e,t,n){r(e);if(t===undefined)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(4);var i=n(6);var s=n(18);var o=s("typed_array");var u=s("view");var a=!!(r.ArrayBuffer&&r.DataView);var f=a;var l=0;var c=9;var h;var p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");while(l<c){if(h=r[p[l++]]){i(h.prototype,o,true);i(h.prototype,u,true)}else f=false}e.exports={ABV:a,CONSTR:f,TYPED:o,VIEW:u}},function(e,t,n){"use strict";function q(e,t,n){var r=new Array(n);var i=n*8-t-1;var s=(1<<i)-1;var o=s>>1;var u=t===23?O(2,-24)-O(2,-77):0;var a=0;var f=e<0||e===0&&1/e<0?1:0;var l,c,h;e=A(e);if(e!=e||e===k){c=e!=e?1:0;l=s}else{l=M(_(e)/D);if(e*(h=O(2,-l))<1){l--;h*=2}if(l+o>=1){e+=u/h}else{e+=u*O(2,1-o)}if(e*h>=2){l++;h/=2}if(l+o>=s){c=0;l=s}else if(l+o>=1){c=(e*h-1)*O(2,t);l=l+o}else{c=e*O(2,o-1)*O(2,t);l=0}}for(;t>=8;r[a++]=c&255,c/=256,t-=8);l=l<<t|c;i+=t;for(;i>0;r[a++]=l&255,l/=256,i-=8);r[--a]|=f*128;return r}function R(e,t,n){var r=n*8-t-1;var i=(1<<r)-1;var s=i>>1;var o=r-7;var u=n-1;var a=e[u--];var f=a&127;var l;a>>=7;for(;o>0;f=f*256+e[u],u--,o-=8);l=f&(1<<-o)-1;f>>=-o;o+=t;for(;o>0;l=l*256+e[u],u--,o-=8);if(f===0){f=1-s}else if(f===i){return l?NaN:a?-k:k}else{l=l+O(2,t);f=f-s}return(a?-1:1)*l*O(2,f-t)}function U(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function z(e){return[e&255]}function W(e){return[e&255,e>>8&255]}function X(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]}function V(e){return q(e,52,8)}function $(e){return q(e,23,4)}function J(e,t,n){v(e[w],t,{get:function(){return this[n]}})}function K(e,t,n,r){var i=+n;var s=p(i);if(s+t>e[F])throw C(S);var o=e[j]._b;var u=s+e[I];var a=o.slice(u,u+t);return r?a:a.reverse()}function Q(e,t,n,r,i,s){var o=+n;var u=p(o);if(u+t>e[F])throw C(S);var a=e[j]._b;var f=u+e[I];var l=r(+i);for(var c=0;c<t;c++)a[f+c]=l[s?c:t-c-1]}var r=n(4);var i=n(11);var s=n(21);var o=n(24);var u=n(6);var a=n(26);var f=n(12);var l=n(27);var c=n(28);var h=n(29);var p=n(30);var d=n(31).f;var v=n(7).f;var m=n(41);var g=n(43);var y="ArrayBuffer";var b="DataView";var w="prototype";var E="Wrong length!";var S="Wrong index!";var x=r[y];var T=r[b];var N=r.Math;var C=r.RangeError;var k=r.Infinity;var L=x;var A=N.abs;var O=N.pow;var M=N.floor;var _=N.log;var D=N.LN2;var P="buffer";var H="byteLength";var B="byteOffset";var j=i?"_b":P;var F=i?"_l":H;var I=i?"_o":B;if(!o.ABV){x=function(t){l(this,x,y);var n=p(t);this._b=m.call(new Array(n),0);this[F]=n};T=function(t,n,r){l(this,T,b);l(t,x,b);var i=t[F];var s=c(n);if(s<0||s>i)throw C("Wrong offset!");r=r===undefined?i-s:h(r);if(s+r>i)throw C(E);this[j]=t;this[I]=s;this[F]=r};if(i){J(x,H,"_l");J(T,P,"_b");J(T,H,"_l");J(T,B,"_o")}a(T[w],{getInt8:function(t){return K(this,1,t)[0]<<24>>24},getUint8:function(t){return K(this,1,t)[0]},getInt16:function(t){var n=K(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=K(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return U(K(this,4,t,arguments[1]))},getUint32:function(t){return U(K(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return R(K(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return R(K(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){Q(this,1,t,z,n)},setUint8:function(t,n){Q(this,1,t,z,n)},setInt16:function(t,n){Q(this,2,t,W,n,arguments[2])},setUint16:function(t,n){Q(this,2,t,W,n,arguments[2])},setInt32:function(t,n){Q(this,4,t,X,n,arguments[2])},setUint32:function(t,n){Q(this,4,t,X,n,arguments[2])},setFloat32:function(t,n){Q(this,4,t,$,n,arguments[2])},setFloat64:function(t,n){Q(this,8,t,V,n,arguments[2])}})}else{if(!f(function(){x(1)})||!f(function(){new x(-1)})||f(function(){new x;new x(1.5);new x(NaN);return x.name!=y})){x=function(t){l(this,x);return new L(p(t))};var G=x[w]=L[w];for(var Y=d(L),Z=0,et;Y.length>Z;){if(!((et=Y[Z++])in x))u(x,et,L[et])}if(!s)G.constructor=x}var tt=new T(new x(2));var nt=T[w].setInt8;tt.setInt8(0,2147483648);tt.setInt8(1,2147483649);if(tt.getInt8(0)||!tt.getInt8(1))a(T[w],{setInt8:function(t,n){nt.call(this,t,n<<24>>24)},setUint8:function(t,n){nt.call(this,t,n<<24>>24)}},true)}g(x,y);g(T,b);u(T[w],o.VIEW,true);t[y]=x;t[b]=T},function(e,t,n){var r=n(16);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||r!==undefined&&r in e){throw TypeError(n+": incorrect invocation!")}return e}},function(e,t){var n=Math.ceil;var r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(28);var i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(28);var i=n(29);e.exports=function(e){if(e===undefined)return 0;var t=r(e);var n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(32);var i=n(40).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(e,t,n){var r=n(17);var i=n(33);var s=n(37)(false);var o=n(39)("IE_PROTO");e.exports=function(e,t){var n=i(e);var u=0;var a=[];var f;for(f in n)if(f!=o)r(n,f)&&a.push(f);while(t.length>u)if(r(n,f=t[u++])){~s(a,f)||a.push(f)}return a}},function(e,t,n){var r=n(34);var i=n(36);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(35);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return r(e)=="String"?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(e==undefined)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(33);var i=n(29);var s=n(38);e.exports=function(e){return function(t,n,o){var u=r(t);var a=i(u.length);var f=s(o,a);var l;if(e&&n!=n)while(a>f){l=u[f++];if(l!=l)return true}else for(;a>f;f++)if(e||f in u){if(u[f]===n)return e||f||0}return!e&&-1}}},function(e,t,n){var r=n(28);var i=Math.max;var s=Math.min;e.exports=function(e,t){e=r(e);return e<0?i(e+t,0):s(e,t)}},function(e,t,n){var r=n(20)("keys");var i=n(18);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){"use strict";var r=n(42);var i=n(38);var s=n(29);e.exports=function(t){var n=r(this);var o=s(n.length);var u=arguments.length;var a=i(u>1?arguments[1]:undefined,o);var f=u>2?arguments[2]:undefined;var l=f===undefined?o:i(f,o);while(l>a)n[a++]=t;return n}},function(e,t,n){var r=n(36);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(7).f;var i=n(17);var s=n(44)("toStringTag");e.exports=function(e,t,n){if(e&&!i(e=n?e:e.prototype,s))r(e,s,{configurable:true,value:t})}},function(e,t,n){var r=n(20)("wks");var i=n(18);var s=n(4).Symbol;var o=typeof s=="function";var u=e.exports=function(e){return r[e]||(r[e]=o&&s[e]||(o?s:i)("Symbol."+e))};u.store=r},function(e,t,n){var r=n(8);var i=n(23);var s=n(44)("species");e.exports=function(e,t){var n=r(e).constructor;var o;return n===undefined||(o=r(n)[s])==undefined?t:i(o)}},function(e,t,n){"use strict";var r=n(4);var i=n(7);var s=n(11);var o=n(44)("species");e.exports=function(e){var t=r[e];if(s&&t&&!t[o])i.f(t,o,{configurable:true,get:function(){return this}})}},function(e,t,n){var r=n(3);r(r.G+r.W+r.F*!n(24).ABV,{DataView:n(25).DataView})},function(e,t,n){n(49)("Int8",1,function(e){return function(n,r,i){return e(this,n,r,i)}})},function(e,t,n){"use strict";if(n(11)){var r=n(21);var i=n(4);var s=n(12);var o=n(3);var u=n(24);var a=n(25);var f=n(22);var l=n(27);var c=n(15);var h=n(6);var p=n(26);var d=n(28);var v=n(29);var m=n(30);var g=n(38);var y=n(14);var b=n(17);var w=n(50);var E=n(9);var S=n(42);var x=n(51);var T=n(53);var N=n(57);var C=n(31).f;var k=n(58);var L=n(18);var A=n(44);var O=n(59);var M=n(37);var _=n(45);var D=n(63);var P=n(52);var H=n(68);var B=n(46);var j=n(41);var F=n(69);var I=n(7);var q=n(70);var R=I.f;var U=q.f;var z=i.RangeError;var W=i.TypeError;var X=i.Uint8Array;var V="ArrayBuffer";var $="Shared"+V;var J="BYTES_PER_ELEMENT";var K="prototype";var Q=Array[K];var G=a.ArrayBuffer;var Y=a.DataView;var Z=O(0);var et=O(2);var tt=O(3);var nt=O(4);var rt=O(5);var it=O(6);var st=M(true);var ot=M(false);var ut=D.values;var at=D.keys;var ft=D.entries;var lt=Q.lastIndexOf;var ct=Q.reduce;var ht=Q.reduceRight;var pt=Q.join;var dt=Q.sort;var vt=Q.slice;var mt=Q.toString;var gt=Q.toLocaleString;var yt=A("iterator");var bt=A("toStringTag");var wt=L("typed_constructor");var Et=L("def_constructor");var St=u.CONSTR;var xt=u.TYPED;var Tt=u.VIEW;var Nt="Wrong length!";var Ct=O(1,function(e,t){return Mt(_(e,e[Et]),t)});var kt=s(function(){return(new X((new Uint16Array([1])).buffer))[0]===1});var Lt=!!X&&!!X[K].set&&s(function(){(new X(1)).set({})});var At=function(e,t){var n=d(e);if(n<0||n%t)throw z("Wrong offset!");return n};var Ot=function(e){if(E(e)&&xt in e)return e;throw W(e+" is not a typed array!")};var Mt=function(e,t){if(!(E(e)&&wt in e)){throw W("It is not a typed array constructor!")}return new e(t)};var _t=function(e,t){return Dt(_(e,e[Et]),t)};var Dt=function(e,t){var n=0;var r=t.length;var i=Mt(e,r);while(r>n)i[n]=t[n++];return i};var Pt=function(e,t,n){R(e,t,{get:function(){return this._d[n]}})};var Ht=function(t){var n=S(t);var r=arguments.length;var i=r>1?arguments[1]:undefined;var s=i!==undefined;var o=k(n);var u,a,l,c,h,p;if(o!=undefined&&!x(o)){for(p=o.call(n),l=[],u=0;!(h=p.next()).done;u++){l.push(h.value)}n=l}if(s&&r>2)i=f(i,arguments[2],2);for(u=0,a=v(n.length),c=Mt(this,a);a>u;u++){c[u]=s?i(n[u],u):n[u]}return c};var Bt=function(){var t=0;var n=arguments.length;var r=Mt(this,n);while(n>t)r[t]=arguments[t++];return r};var jt=!!X&&s(function(){gt.call(new X(1))});var Ft=function $t(){return gt.apply(jt?vt.call(Ot(this)):Ot(this),arguments)};var It={copyWithin:function(t,n){return F.call(Ot(this),t,n,arguments.length>2?arguments[2]:undefined)},every:function(t){return nt(Ot(this),t,arguments.length>1?arguments[1]:undefined)},fill:function(t){return j.apply(Ot(this),arguments)},filter:function(t){return _t(this,et(Ot(this),t,arguments.length>1?arguments[1]:undefined))},find:function(t){return rt(Ot(this),t,arguments.length>1?arguments[1]:undefined)},findIndex:function(t){return it(Ot(this),t,arguments.length>1?arguments[1]:undefined)},forEach:function(t){Z(Ot(this),t,arguments.length>1?arguments[1]:undefined)},indexOf:function(t){return ot(Ot(this),t,arguments.length>1?arguments[1]:undefined)},includes:function(t){return st(Ot(this),t,arguments.length>1?arguments[1]:undefined)},join:function(t){return pt.apply(Ot(this),arguments)},lastIndexOf:function(t){return lt.apply(Ot(this),arguments)},map:function(t){return Ct(Ot(this),t,arguments.length>1?arguments[1]:undefined)},reduce:function(t){return ct.apply(Ot(this),arguments)},reduceRight:function(t){return ht.apply(Ot(this),arguments)},reverse:function(){var t=this;var n=Ot(t).length;var r=Math.floor(n/2);var i=0;var s;while(i<r){s=t[i];t[i++]=t[--n];t[n]=s}return t},some:function(t){return tt(Ot(this),t,arguments.length>1?arguments[1]:undefined)},sort:function(t){return dt.call(Ot(this),t)},subarray:function(t,n){var r=Ot(this);var i=r.length;var s=g(t,i);return new(_(r,r[Et]))(r.buffer,r.byteOffset+s*r.BYTES_PER_ELEMENT,v((n===undefined?i:g(n,i))-s))}};var qt=function(t,n){return _t(this,vt.call(Ot(this),t,n))};var Rt=function(t){Ot(this);var n=At(arguments[1],1);var r=this.length;var i=S(t);var s=v(i.length);var o=0;if(s+n>r)throw z(Nt);while(o<s)this[n+o]=i[o++]};var Ut={entries:function(){return ft.call(Ot(this))},keys:function(){return at.call(Ot(this))},values:function(){return ut.call(Ot(this))}};var zt=function(e,t){return E(e)&&e[xt]&&typeof t!="symbol"&&t in e&&String(+t)==String(t)};var Wt=function(t,n){return zt(t,n=y(n,true))?c(2,t[n]):U(t,n)};var Xt=function(t,n,r){if(zt(t,n=y(n,true))&&E(r)&&b(r,"value")&&!b(r,"get")&&!b(r,"set")&&!r.configurable&&(!b(r,"writable")||r.writable)&&(!b(r,"enumerable")||r.enumerable)){t[n]=r.value;return t}return R(t,n,r)};if(!St){q.f=Wt;I.f=Xt}o(o.S+o.F*!St,"Object",{getOwnPropertyDescriptor:Wt,defineProperty:Xt});if(s(function(){mt.call({})})){mt=gt=function Jt(){return pt.call(this)}}var Vt=p({},It);p(Vt,Ut);h(Vt,yt,Ut.values);p(Vt,{slice:qt,set:Rt,constructor:function(){},toString:mt,toLocaleString:Ft});Pt(Vt,"buffer","b");Pt(Vt,"byteOffset","o");Pt(Vt,"byteLength","l");Pt(Vt,"length","e");R(Vt,bt,{get:function(){return this[xt]}});e.exports=function(e,t,n,a){a=!!a;var f=e+(a?"Clamped":"")+"Array";var c="get"+e;var p="set"+e;var d=i[f];var g=d||{};var y=d&&N(d);var b=!d||!u.ABV;var S={};var x=d&&d[K];var k=function(e,n){var r=e._d;return r.v[c](n*t+r.o,kt)};var L=function(e,n,r){var i=e._d;if(a)r=(r=Math.round(r))<0?0:r>255?255:r&255;i.v[p](n*t+i.o,r,kt)};var A=function(e,t){R(e,t,{get:function(){return k(this,t)},set:function(e){return L(this,t,e)},enumerable:true})};if(b){d=n(function(e,n,r,i){l(e,d,f,"_d");var s=0;var o=0;var u,a,c,p;if(!E(n)){c=m(n);a=c*t;u=new G(a)}else if(n instanceof G||(p=w(n))==V||p==$){u=n;o=At(r,t);var g=n.byteLength;if(i===undefined){if(g%t)throw z(Nt);a=g-o;if(a<0)throw z(Nt)}else{a=v(i)*t;if(a+o>g)throw z(Nt)}c=a/t}else if(xt in n){return Dt(d,n)}else{return Ht.call(d,n)}h(e,"_d",{b:u,o:o,l:a,e:c,v:new Y(u)});while(s<c)A(e,s++)});x=d[K]=T(Vt);h(x,"constructor",d)}else if(!s(function(){d(1)})||!s(function(){new d(-1)})||!H(function(e){new d;new d(null);new d(1.5);new d(e)},true)){d=n(function(e,n,r,i){l(e,d,f);var s;if(!E(n))return new g(m(n));if(n instanceof G||(s=w(n))==V||s==$){return i!==undefined?new g(n,At(r,t),i):r!==undefined?new g(n,At(r,t)):new g(n)}if(xt in n)return Dt(d,n);return Ht.call(d,n)});Z(y!==Function.prototype?C(g).concat(C(y)):C(g),function(e){if(!(e in d))h(d,e,g[e])});d[K]=x;if(!r)x.constructor=d}var O=x[yt];var M=!!O&&(O.name=="values"||O.name==undefined);var _=Ut.values;h(d,wt,true);h(x,xt,f);h(x,Tt,true);h(x,Et,d);if(a?(new d(1))[bt]!=f:!(bt in x)){R(x,bt,{get:function(){return f}})}S[f]=d;o(o.G+o.W+o.F*(d!=g),S);o(o.S,f,{BYTES_PER_ELEMENT:t});o(o.S+o.F*s(function(){g.of.call(d,1)}),f,{from:Ht,of:Bt});if(!(J in x))h(x,J,t);o(o.P,f,It);B(f);o(o.P+o.F*Lt,f,{set:Rt});o(o.P+o.F*!M,f,Ut);if(!r&&x.toString!=mt)x.toString=mt;o(o.P+o.F*s(function(){(new d(1)).slice()}),f,{slice:qt});o(o.P+o.F*(s(function(){return[1,2].toLocaleString()!=(new d([1,2])).toLocaleString()})||!s(function(){x.toLocaleString.call([1,2])})),f,{toLocaleString:Ft});P[f]=M?O:_;if(!r&&!M)h(x,yt,_)}}else e.exports=function(){}},function(e,t,n){var r=n(35);var i=n(44)("toStringTag");var s=r(function(){return arguments}())=="Arguments";var o=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,u;return e===undefined?"Undefined":e===null?"Null":typeof (n=o(t=Object(e),i))=="string"?n:s?r(t):(u=r(t))=="Object"&&typeof t.callee=="function"?"Arguments":u}},function(e,t,n){var r=n(52);var i=n(44)("iterator");var s=Array.prototype;e.exports=function(e){return e!==undefined&&(r.Array===e||s[i]===e)}},function(e,t){e.exports={}},function(e,t,n){var r=n(8);var i=n(54);var s=n(40);var o=n(39)("IE_PROTO");var u=function(){};var a="prototype";var f=function(){var e=n(13)("iframe");var t=s.length;var r="<";var i=">";var o;e.style.display="none";n(56).appendChild(e);e.src="javascript:";o=e.contentWindow.document;o.open();o.write(r+"script"+i+"document.F=Object"+r+"/script"+i);o.close();f=o.F;while(t--)delete f[a][s[t]];return f()};e.exports=Object.create||function(t,n){var s;if(t!==null){u[a]=r(t);s=new u;u[a]=null;s[o]=t}else s=f();return n===undefined?s:i(s,n)}},function(e,t,n){var r=n(7);var i=n(8);var s=n(55);e.exports=n(11)?Object.defineProperties:function(t,n){i(t);var o=s(n);var u=o.length;var a=0;var f;while(u>a)r.f(t,f=o[a++],n[f]);return t}},function(e,t,n){var r=n(32);var i=n(40);e.exports=Object.keys||function(t){return r(t,i)}},function(e,t,n){var r=n(4).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(17);var i=n(42);var s=n(39)("IE_PROTO");var o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){e=i(e);if(r(e,s))return e[s];if(typeof e.constructor=="function"&&e instanceof e.constructor){return e.constructor.prototype}return e instanceof Object?o:null}},function(e,t,n){var r=n(50);var i=n(44)("iterator");var s=n(52);e.exports=n(5).getIteratorMethod=function(e){if(e!=undefined)return e[i]||e["@@iterator"]||s[r(e)]}},function(e,t,n){var r=n(22);var i=n(34);var s=n(42);var o=n(29);var u=n(60);e.exports=function(e,t){var n=e==1;var a=e==2;var f=e==3;var l=e==4;var c=e==6;var h=e==5||c;var p=t||u;return function(t,u,d){var v=s(t);var m=i(v);var g=r(u,d,3);var y=o(m.length);var b=0;var w=n?p(t,y):a?p(t,0):undefined;var E,S;for(;y>b;b++)if(h||b in m){E=m[b];S=g(E,b,v);if(e){if(n)w[b]=S;else if(S)switch(e){case 3:return true;case 5:return E;case 6:return b;case 2:w.push(E)}else if(l)return false}}return c?-1:f||l?l:w}}},function(e,t,n){var r=n(61);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(9);var i=n(62);var s=n(44)("species");e.exports=function(e){var t;if(i(e)){t=e.constructor;if(typeof t=="function"&&(t===Array||i(t.prototype)))t=undefined;if(r(t)){t=t[s];if(t===null)t=undefined}}return t===undefined?Array:t}},function(e,t,n){var r=n(35);e.exports=Array.isArray||function(t){return r(t)=="Array"}},function(e,t,n){"use strict";var r=n(64);var i=n(65);var s=n(52);var o=n(33);e.exports=n(66)(Array,"Array",function(e,t){this._t=o(e);this._i=0;this._k=t},function(){var e=this._t;var t=this._k;var n=this._i++;if(!e||n>=e.length){this._t=undefined;return i(1)}if(t=="keys")return i(0,n);if(t=="values")return i(0,e[n]);return i(0,[n,e[n]])},"values");s.Arguments=s.Array;r("keys");r("values");r("entries")},function(e,t,n){var r=n(44)("unscopables");var i=Array.prototype;if(i[r]==undefined)n(6)(i,r,{});e.exports=function(e){i[r][e]=true}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(21);var i=n(3);var s=n(16);var o=n(6);var u=n(52);var a=n(67);var f=n(43);var l=n(57);var c=n(44)("iterator");var h=!([].keys&&"next"in[].keys());var p="@@iterator";var d="keys";var v="values";var m=function(){return this};e.exports=function(e,t,n,g,y,b,w){a(n,t,g);var E=function(e){if(!h&&e in N)return N[e];switch(e){case d:return function(){return new n(this,e)};case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}};var S=t+" Iterator";var x=y==v;var T=false;var N=e.prototype;var C=N[c]||N[p]||y&&N[y];var k=C||E(y);var L=y?!x?k:E("entries"):undefined;var A=t=="Array"?N.entries||C:C;var O,M,_;if(A){_=l(A.call(new e));if(_!==Object.prototype&&_.next){f(_,S,true);if(!r&&typeof _[c]!="function")o(_,c,m)}}if(x&&C&&C.name!==v){T=true;k=function(){return C.call(this)}}if((!r||w)&&(h||T||!N[c])){o(N,c,k)}u[t]=k;u[S]=m;if(y){O={values:x?k:E(v),keys:b?k:E(d),entries:L};if(w)for(M in O){if(!(M in N))s(N,M,O[M])}else i(i.P+i.F*(h||T),t,O)}return O}},function(e,t,n){"use strict";var r=n(53);var i=n(15);var s=n(43);var o={};n(6)(o,n(44)("iterator"),function(){return this});e.exports=function(e,t,n){e.prototype=r(o,{next:i(1,n)});s(e,t+" Iterator")}},function(e,t,n){var r=n(44)("iterator");var i=false;try{var s=[7][r]();s["return"]=function(){i=true};Array.from(s,function(){throw 2})}catch(o){}e.exports=function(e,t){if(!t&&!i)return false;var n=false;try{var s=[7];var o=s[r]();o.next=function(){return{done:n=true}};s[r]=function(){return o};e(s)}catch(u){}return n}},function(e,t,n){"use strict";var r=n(42);var i=n(38);var s=n(29);e.exports=[].copyWithin||function(t,n){var o=r(this);var u=s(o.length);var a=i(t,u);var f=i(n,u);var l=arguments.length>2?arguments[2]:undefined;var c=Math.min((l===undefined?u:i(l,u))-f,u-a);var h=1;if(f<a&&a<f+c){h=-1;f+=c-1;a+=c-1}while(c-->0){if(f in o)o[a]=o[f];else delete o[a];a+=h;f+=h}return o}},function(e,t,n){var r=n(71);var i=n(15);var s=n(33);var o=n(14);var u=n(17);var a=n(10);var f=Object.getOwnPropertyDescriptor;t.f=n(11)?f:function(t,n){t=s(t);n=o(n,true);if(a)try{return f(t,n)}catch(l){}if(u(t,n))return i(!r.f.call(t,n),t[n])}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){n(49)("Uint8",1,function(e){return function(n,r,i){return e(this,n,r,i)}})},function(e,t,n){n(49)("Uint8",1,function(e){return function(n,r,i){return e(this,n,r,i)}},true)},function(e,t,n){n(49)("Int16",2,function(e){return function(n,r,i){return e(this,n,r,i)}})},function(e,t,n){n(49)("Uint16",2,function(e){return function(n,r,i){return e(this,n,r,i)}})},function(e,t,n){n(49)("Int32",4,function(e){return function(n,r,i){return e(this,n,r,i)}})},function(e,t,n){n(49)("Uint32",4,function(e){return function(n,r,i){return e(this,n,r,i)}})},function(e,t,n){n(49)("Float32",4,function(e){return function(n,r,i){return e(this,n,r,i)}})},function(e,t,n){n(49)("Float64",8,function(e){return function(n,r,i){return e(this,n,r,i)}})},function(e,t,n){"use strict";var r=n(81);var i=n(85);var s="Map";e.exports=n(86)(s,function(e){return function(){return e(this,arguments.length>0?arguments[0]:undefined)}},{get:function(t){var n=r.getEntry(i(this,s),t);return n&&n.v},set:function(t,n){return r.def(i(this,s),t===0?0:t,n)}},r,true)},function(e,t,n){"use strict";var r=n(7).f;var i=n(53);var s=n(26);var o=n(22);var u=n(27);var a=n(82);var f=n(66);var l=n(65);var c=n(46);var h=n(11);var p=n(84).fastKey;var d=n(85);var v=h?"_s":"size";var m=function(e,t){var n=p(t);var r;if(n!=="F")return e._i[n];for(r=e._f;r;r=r.n){if(r.k==t)return r}};e.exports={getConstructor:function(e,t,n,f){var l=e(function(e,r){u(e,l,t,"_i");e._t=t;e._i=i(null);e._f=undefined;e._l=undefined;e[v]=0;if(r!=undefined)a(r,n,e[f],e)});s(l.prototype,{clear:function(){for(var n=d(this,t),r=n._i,i=n._f;i;i=i.n){i.r=true;if(i.p)i.p=i.p.n=undefined;delete r[i.i]}n._f=n._l=undefined;n[v]=0},"delete":function(e){var n=d(this,t);var r=m(n,e);if(r){var i=r.n;var s=r.p;delete n._i[r.i];r.r=true;if(s)s.n=i;if(i)i.p=s;if(n._f==r)n._f=i;if(n._l==r)n._l=s;n[v]--}return!!r},forEach:function(n){d(this,t);var r=o(n,arguments.length>1?arguments[1]:undefined,3);var i;while(i=i?i.n:this._f){r(i.v,i.k,this);while(i&&i.r)i=i.p}},has:function(n){return!!m(d(this,t),n)}});if(h)r(l.prototype,"size",{get:function(){return d(this,t)[v]}});return l},def:function(e,t,n){var r=m(e,t);var i,s;if(r){r.v=n}else{e._l=r={i:s=p(t,true),k:t,v:n,p:i=e._l,n:undefined,r:false};if(!e._f)e._f=r;if(i)i.n=r;e[v]++;if(s!=="F")e._i[s]=r}return e},getEntry:m,setStrong:function(e,t,n){f(e,t,function(e,n){this._t=d(e,t);this._k=n;this._l=undefined},function(){var e=this;var t=e._k;var n=e._l;while(n&&n.r)n=n.p;if(!e._t||!(e._l=n=n?n.n:e._t._f)){e._t=undefined;return l(1)}if(t=="keys")return l(0,n.k);if(t=="values")return l(0,n.v);return l(0,[n.k,n.v])},n?"entries":"values",!n,true);c(t)}}},function(e,t,n){var r=n(22);var i=n(83);var s=n(51);var o=n(8);var u=n(29);var a=n(58);var f={};var l={};var t=e.exports=function(e,t,n,c,h){var p=h?function(){return e}:a(e);var d=r(n,c,t?2:1);var v=0;var m,g,y,b;if(typeof p!="function")throw TypeError(e+" is not iterable!");if(s(p))for(m=u(e.length);m>v;v++){b=t?d(o(g=e[v])[0],g[1]):d(e[v]);if(b===f||b===l)return b}else for(y=p.call(e);!(g=y.next()).done;){b=i(y,d,g.value,t);if(b===f||b===l)return b}};t.BREAK=f;t.RETURN=l},function(e,t,n){var r=n(8);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(s){var o=e["return"];if(o!==undefined)r(o.call(e));throw s}}},function(e,t,n){var r=n(18)("meta");var i=n(9);var s=n(17);var o=n(7).f;var u=0;var a=Object.isExtensible||function(){return true};var f=!n(12)(function(){return a(Object.preventExtensions({}))});var l=function(e){o(e,r,{value:{i:"O"+ ++u,w:{}}})};var c=function(e,t){if(!i(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!s(e,r)){if(!a(e))return"F";if(!t)return"E";l(e)}return e[r].i};var h=function(e,t){if(!s(e,r)){if(!a(e))return true;if(!t)return false;l(e)}return e[r].w};var p=function(e){if(f&&d.NEED&&a(e)&&!s(e,r))l(e);return e};var d=e.exports={KEY:r,NEED:false,fastKey:c,getWeak:h,onFreeze:p}},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";var r=n(4);var i=n(3);var s=n(16);var o=n(26);var u=n(84);var a=n(82);var f=n(27);var l=n(9);var c=n(12);var h=n(68);var p=n(43);var d=n(87);e.exports=function(e,t,n,v,m,g){var y=r[e];var b=y;var w=m?"set":"add";var E=b&&b.prototype;var S={};var x=function(e){var t=E[e];s(E,e,e=="delete"?function(e){return g&&!l(e)?false:t.call(this,e===0?0:e)}:e=="has"?function(n){return g&&!l(n)?false:t.call(this,n===0?0:n)}:e=="get"?function(n){return g&&!l(n)?undefined:t.call(this,n===0?0:n)}:e=="add"?function(n){t.call(this,n===0?0:n);return this}:function(n,r){t.call(this,n===0?0:n,r);return this})};if(typeof b!="function"||!(g||E.forEach&&!c(function(){(new b).entries().next()}))){b=v.getConstructor(t,e,m,w);o(b.prototype,n);u.NEED=true}else{var T=new b;var N=T[w](g?{}:-0,1)!=T;var C=c(function(){T.has(1)});var k=h(function(e){new b(e)});var L=!g&&c(function(){var e=new b;var t=5;while(t--)e[w](t,t);return!e.has(-0)});if(!k){b=t(function(t,n){f(t,b,e);var r=d(new y,t,b);if(n!=undefined)a(n,m,r[w],r);return r});b.prototype=E;E.constructor=b}if(C||L){x("delete");x("has");m&&x("get")}if(L||N)x(w);if(g&&E.clear)delete E.clear}p(b,e);S[e]=b;i(i.G+i.W+i.F*(b!=y),S);if(!g)v.setStrong(b,e,m);return b}},function(e,t,n){var r=n(9);var i=n(88).set;e.exports=function(e,t,n){var s=t.constructor;var o;if(s!==n&&typeof s=="function"&&(o=s.prototype)!==n.prototype&&r(o)&&i){i(e,o)}return e}},function(e,t,n){var r=n(9);var i=n(8);var s=function(e,t){i(e);if(!r(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(22)(Function.call,n(70).f(Object.prototype,"__proto__").set,2);r(e,[]);t=!(e instanceof Array)}catch(i){t=true}return function(n,i){s(n,i);if(t)n.__proto__=i;else r(n,i);return n}}({},false):undefined),check:s}},function(e,t,n){"use strict";var r=n(81);var i=n(85);var s="Set";e.exports=n(86)(s,function(e){return function(){return e(this,arguments.length>0?arguments[0]:undefined)}},{add:function(t){return r.def(i(this,s),t=t===0?0:t,t)}},r)},function(e,t,n){"use strict";var r=n(4);var i=n(59)(0);var s=n(16);var o=n(84);var u=n(91);var a=n(93);var f=n(9);var l=n(85);var c=n(85);var h=!r.ActiveXObject&&"ActiveXObject"in r;var p="WeakMap";var d=o.getWeak;var v=Object.isExtensible;var m=a.ufstore;var g;var y=function(e){return function(){return e(this,arguments.length>0?arguments[0]:undefined)}};var b={get:function(t){if(f(t)){var n=d(t);if(n===true)return m(l(this,p)).get(t);return n?n[this._i]:undefined}},set:function(t,n){return a.def(l(this,p),t,n)}};var w=e.exports=n(86)(p,y,b,a,true,true);if(c&&h){g=a.getConstructor(y,p);u(g.prototype,b);o.NEED=true;i(["delete","has","get","set"],function(e){var t=w.prototype;var n=t[e];s(t,e,function(t,r){if(f(t)&&!v(t)){if(!this._f)this._f=new g;var i=this._f[e](t,r);return e=="set"?this:i}return n.call(this,t,r)})})}},function(e,t,n){"use strict";var r=n(55);var i=n(92);var s=n(71);var o=n(42);var u=n(34);var a=Object.assign;e.exports=!a||n(12)(function(){var e={};var t={};var n=Symbol();var r="abcdefghijklmnopqrst";e[n]=7;r.split("").forEach(function(e){t[e]=e});return a({},e)[n]!=7||Object.keys(a({},t)).join("")!=r})?function(t,n){var a=o(t);var f=arguments.length;var l=1;var c=i.f;var h=s.f;while(f>l){var p=u(arguments[l++]);var d=c?r(p).concat(c(p)):r(p);var v=d.length;var m=0;var g;while(v>m)if(h.call(p,g=d[m++]))a[g]=p[g]}return a}:a},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var r=n(26);var i=n(84).getWeak;var s=n(8);var o=n(9);var u=n(27);var a=n(82);var f=n(59);var l=n(17);var c=n(85);var h=f(5);var p=f(6);var d=0;var v=function(e){return e._l||(e._l=new m)};var m=function(){this.a=[]};var g=function(e,t){return h(e.a,function(e){return e[0]===t})};m.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var n=g(this,e);if(n)n[1]=t;else this.a.push([e,t])},"delete":function(e){var t=p(this.a,function(t){return t[0]===e});if(~t)this.a.splice(t,1);return!!~t}};e.exports={getConstructor:function(e,t,n,s){var f=e(function(e,r){u(e,f,t,"_i");e._t=t;e._i=d++;e._l=undefined;if(r!=undefined)a(r,n,e[s],e)});r(f.prototype,{"delete":function(e){if(!o(e))return false;var n=i(e);if(n===true)return v(c(this,t))["delete"](e);return n&&l(n,this._i)&&delete n[this._i]},has:function(n){if(!o(n))return false;var r=i(n);if(r===true)return v(c(this,t)).has(n);return r&&l(r,this._i)}});return f},def:function(e,t,n){var r=i(s(t),true);if(r===true)v(e).set(t,n);else r[e._i]=n;return e},ufstore:v}},function(e,t,n){"use strict";var r=n(93);var i=n(85);var s="WeakSet";n(86)(s,function(e){return function(){return e(this,arguments.length>0?arguments[0]:undefined)}},{add:function(t){return r.def(i(this,s),t,true)}},r,false,true)},function(e,t,n){var r=n(3);var i=n(23);var s=n(8);var o=(n(4).Reflect||{}).apply;var u=Function.apply;r(r.S+r.F*!n(12)(function(){o(function(){})}),"Reflect",{apply:function(t,n,r){var a=i(t);var f=s(r);return o?o(a,n,f):u.call(a,n,f)}})},function(e,t,n){var r=n(3);var i=n(53);var s=n(23);var o=n(8);var u=n(9);var a=n(12);var f=n(97);var l=(n(4).Reflect||{}).construct;var c=a(function(){function e(){}return!(l(function(){},[],e)instanceof e)});var h=!a(function(){l(function(){})});r(r.S+r.F*(c||h),"Reflect",{construct:function(t,n){s(t);o(n);var r=arguments.length<3?t:s(arguments[2]);if(h&&!c)return l(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var a=[null];a.push.apply(a,n);return new(f.apply(t,a))}var p=r.prototype;var d=i(u(p)?p:Object.prototype);var v=Function.apply.call(t,d,n);return u(v)?v:d}})},function(e,t,n){"use strict";var r=n(23);var i=n(9);var s=n(98);var o=[].slice;var u={};var a=function(e,t,n){if(!(t in u)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";u[t]=Function("F,a","return new F("+r.join(",")+")")}return u[t](e,n)};e.exports=Function.bind||function(t){var n=r(this);var u=o.call(arguments,1);var f=function(){var e=u.concat(o.call(arguments));return this instanceof f?a(n,e.length,e):s(n,e,t)};if(i(n.prototype))f.prototype=n.prototype;return f}},function(e,t){e.exports=function(e,t,n){var r=n===undefined;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(7);var i=n(3);var s=n(8);var o=n(14);i(i.S+i.F*n(12)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,i){s(t);n=o(n,true);s(i);try{r.f(t,n,i);return true}catch(u){return false}}})},function(e,t,n){var r=n(3);var i=n(70).f;var s=n(8);r(r.S,"Reflect",{deleteProperty:function(t,n){var r=i(s(t),n);return r&&!r.configurable?false:delete t[n]}})},function(e,t,n){function f(e,t){var n=arguments.length<3?e:arguments[2];var o,l;if(a(e)===n)return e[t];if(o=r.f(e,t))return s(o,"value")?o.value:o.get!==undefined?o.get.call(n):undefined;if(u(l=i(e)))return f(l,t,n)}var r=n(70);var i=n(57);var s=n(17);var o=n(3);var u=n(9);var a=n(8);o(o.S,"Reflect",{get:f})},function(e,t,n){var r=n(70);var i=n(3);var s=n(8);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return r.f(s(t),n)}})},function(e,t,n){var r=n(3);var i=n(57);var s=n(8);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(s(t))}})},function(e,t,n){var r=n(3);r(r.S,"Reflect",{has:function(t,n){return n in t}})},function(e,t,n){var r=n(3);var i=n(8);var s=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){i(t);return s?s(t):true}})},function(e,t,n){var r=n(3);r(r.S,"Reflect",{ownKeys:n(107)})},function(e,t,n){var r=n(31);var i=n(92);var s=n(8);var o=n(4).Reflect;e.exports=o&&o.ownKeys||function(t){var n=r.f(s(t));var o=i.f;return o?n.concat(o(t)):n}},function(e,t,n){var r=n(3);var i=n(8);var s=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{if(s)s(t);return true}catch(n){return false}}})},function(e,t,n){function c(e,t,n){var u=arguments.length<4?e:arguments[3];var h=i.f(f(e),t);var p,d;if(!h){if(l(d=s(e))){return c(d,t,n,u)}h=a(0)}if(o(h,"value")){if(h.writable===false||!l(u))return false;if(p=i.f(u,t)){if(p.get||p.set||p.writable===false)return false;p.value=n;r.f(u,t,p)}else r.f(u,t,a(0,n));return true}return h.set===undefined?false:(h.set.call(u,n),true)}var r=n(7);var i=n(70);var s=n(57);var o=n(17);var u=n(3);var a=n(15);var f=n(8);var l=n(9);u(u.S,"Reflect",{set:c})},function(e,t,n){var r=n(3);var i=n(88);if(i)r(r.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{i.set(t,n);return true}catch(r){return false}}})},function(e,t,n){"use strict";var r=n(21);var i=n(4);var s=n(22);var o=n(50);var u=n(3);var a=n(9);var f=n(23);var l=n(27);var c=n(82);var h=n(45);var p=n(112).set;var d=n(113)();var v=n(114);var m=n(115);var g=n(116);var y=n(117);var b="Promise";var w=i.TypeError;var E=i.process;var S=E&&E.versions;var x=S&&S.v8||"";var T=i[b];var N=o(E)=="process";var C=function(){};var k,L,A,O;var M=L=v.f;var _=!!function(){try{var e=T.resolve(1);var t=(e.constructor={})[n(44)("species")]=function(e){e(C,C)};return(N||typeof PromiseRejectionEvent=="function")&&e.then(C)instanceof t&&x.indexOf("6.6")!==0&&g.indexOf("Chrome/66")===-1}catch(r){}}();var D=function(e){var t;return a(e)&&typeof (t=e.then)=="function"?t:false};var P=function(e,t){if(e._n)return;e._n=true;var n=e._c;d(function(){var r=e._v;var i=e._s==1;var s=0;var o=function(t){var n=i?t.ok:t.fail;var s=t.resolve;var o=t.reject;var u=t.domain;var a,f,l;try{if(n){if(!i){if(e._h==2)j(e);e._h=1}if(n===true)a=r;else{if(u)u.enter();a=n(r);if(u){u.exit();l=true}}if(a===t.promise){o(w("Promise-chain cycle"))}else if(f=D(a)){f.call(a,s,o)}else s(a)}else o(r)}catch(c){if(u&&!l)u.exit();o(c)}};while(n.length>s)o(n[s++]);e._c=[];e._n=false;if(t&&!e._h)H(e)})};var H=function(e){p.call(i,function(){var t=e._v;var n=B(e);var r,s,o;if(n){r=m(function(){if(N){E.emit("unhandledRejection",t,e)}else if(s=i.onunhandledrejection){s({promise:e,reason:t})}else if((o=i.console)&&o.error){o.error("Unhandled promise rejection",t)}});e._h=N||B(e)?2:1}e._a=undefined;if(n&&r.e)throw r.v})};var B=function(e){return e._h!==1&&(e._a||e._c).length===0};var j=function(e){p.call(i,function(){var t;if(N){E.emit("rejectionHandled",e)}else if(t=i.onrejectionhandled){t({promise:e,reason:e._v})}})};var F=function(e){var t=this;if(t._d)return;t._d=true;t=t._w||t;t._v=e;t._s=2;if(!t._a)t._a=t._c.slice();P(t,true)};var I=function(e){var t=this;var n;if(t._d)return;t._d=true;t=t._w||t;try{if(t===e)throw w("Promise can't be resolved itself");if(n=D(e)){d(function(){var r={_w:t,_d:false};try{n.call(e,s(I,r,1),s(F,r,1))}catch(i){F.call(r,i)}})}else{t._v=e;t._s=1;P(t,false)}}catch(r){F.call({_w:t,_d:false},r)}};if(!_){T=function(t){l(this,T,b,"_h");f(t);k.call(this);try{t(s(I,this,1),s(F,this,1))}catch(n){F.call(this,n)}};k=function(t){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};k.prototype=n(26)(T.prototype,{then:function(t,n){var r=M(h(this,T));r.ok=typeof t=="function"?t:true;r.fail=typeof n=="function"&&n;r.domain=N?E.domain:undefined;this._c.push(r);if(this._a)this._a.push(r);if(this._s)P(this,false);return r.promise},"catch":function(e){return this.then(undefined,e)}});A=function(){var e=new k;this.promise=e;this.resolve=s(I,e,1);this.reject=s(F,e,1)};v.f=M=function(e){return e===T||e===O?new A(e):L(e)}}u(u.G+u.W+u.F*!_,{Promise:T});n(43)(T,b);n(46)(b);O=n(5)[b];u(u.S+u.F*!_,b,{reject:function(t){var n=M(this);var r=n.reject;r(t);return n.promise}});u(u.S+u.F*(r||!_),b,{resolve:function(t){return y(r&&this===O?T:this,t)}});u(u.S+u.F*!(_&&n(68)(function(e){T.all(e)["catch"](C)})),b,{all:function(t){var n=this;var r=M(n);var i=r.resolve;var s=r.reject;var o=m(function(){var e=[];var r=0;var o=1;c(t,false,function(t){var u=r++;var a=false;e.push(undefined);o++;n.resolve(t).then(function(t){if(a)return;a=true;e[u]=t;--o||i(e)},s)});--o||i(e)});if(o.e)s(o.v);return r.promise},race:function(t){var n=this;var r=M(n);var i=r.reject;var s=m(function(){c(t,false,function(e){n.resolve(e).then(r.resolve,i)})});if(s.e)i(s.v);return r.promise}})},function(e,t,n){var r=n(22);var i=n(98);var s=n(56);var o=n(13);var u=n(4);var a=u.process;var f=u.setImmediate;var l=u.clearImmediate;var c=u.MessageChannel;var h=u.Dispatch;var p=0;var d={};var v="onreadystatechange";var m,g,y;var b=function(){var e=+this;if(d.hasOwnProperty(e)){var t=d[e];delete d[e];t()}};var w=function(e){b.call(e.data)};if(!f||!l){f=function(t){var n=[];var r=1;while(arguments.length>r)n.push(arguments[r++]);d[++p]=function(){i(typeof t=="function"?t:Function(t),n)};m(p);return p};l=function(t){delete d[t]};if(n(35)(a)=="process"){m=function(e){a.nextTick(r(b,e,1))}}else if(h&&h.now){m=function(e){h.now(r(b,e,1))}}else if(c){g=new c;y=g.port2;g.port1.onmessage=w;m=r(y.postMessage,y,1)}else if(u.addEventListener&&typeof postMessage=="function"&&!u.importScripts){m=function(e){u.postMessage(e+"","*")};u.addEventListener("message",w,false)}else if(v in o("script")){m=function(e){s.appendChild(o("script"))[v]=function(){s.removeChild(this);b.call(e)}}}else{m=function(e){setTimeout(r(b,e,1),0)}}}e.exports={set:f,clear:l}},function(e,t,n){var r=n(4);var i=n(112).set;var s=r.MutationObserver||r.WebKitMutationObserver;var o=r.process;var u=r.Promise;var a=n(35)(o)=="process";e.exports=function(){var e,t,n;var f=function(){var r,i;if(a&&(r=o.domain))r.exit();while(e){i=e.fn;e=e.next;try{i()}catch(s){if(e)n();else t=undefined;throw s}}t=undefined;if(r)r.enter()};if(a){n=function(){o.nextTick(f)}}else if(s&&!(r.navigator&&r.navigator.standalone)){var l=true;var c=document.createTextNode("");(new s(f)).observe(c,{characterData:true});n=function(){c.data=l=!l}}else if(u&&u.resolve){var h=u.resolve(undefined);n=function(){h.then(f)}}else{n=function(){i.call(r,f)}}return function(r){var i={fn:r,next:undefined};if(t)t.next=i;if(!e){e=i;n()}t=i}}},function(e,t,n){"use strict";function i(e){var t,n;this.promise=new e(function(e,r){if(t!==undefined||n!==undefined)throw TypeError("Bad Promise constructor");t=e;n=r});this.resolve=r(t);this.reject=r(n)}var r=n(23);e.exports.f=function(e){return new i(e)}},function(e,t){e.exports=function(e){try{return{e:false,v:e()}}catch(t){return{e:true,v:t}}}},function(e,t,n){var r=n(4);var i=r.navigator;e.exports=i&&i.userAgent||""},function(e,t,n){var r=n(8);var i=n(9);var s=n(114);e.exports=function(e,t){r(e);if(i(t)&&t.constructor===e)return t;var n=s.f(e);var o=n.resolve;o(t);return n.promise}},function(e,t,n){"use strict";var r=n(4);var i=n(17);var s=n(11);var o=n(3);var u=n(16);var a=n(84).KEY;var f=n(12);var l=n(20);var c=n(43);var h=n(18);var p=n(44);var d=n(119);var v=n(120);var m=n(121);var g=n(62);var y=n(8);var b=n(9);var w=n(33);var E=n(14);var S=n(15);var x=n(53);var T=n(122);var N=n(70);var C=n(7);var k=n(55);var L=N.f;var A=C.f;var O=T.f;var M=r.Symbol;var _=r.JSON;var D=_&&_.stringify;var P="prototype";var H=p("_hidden");var B=p("toPrimitive");var j={}.propertyIsEnumerable;var F=l("symbol-registry");var I=l("symbols");var q=l("op-symbols");var R=Object[P];var U=typeof M=="function";var z=r.QObject;var W=!z||!z[P]||!z[P].findChild;var X=s&&f(function(){return x(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a!=7})?function(e,t,n){var r=L(R,t);if(r)delete R[t];A(e,t,n);if(r&&e!==R)A(R,t,r)}:A;var V=function(e){var t=I[e]=x(M[P]);t._k=e;return t};var $=U&&typeof M.iterator=="symbol"?function(e){return typeof e=="symbol"}:function(e){return e instanceof M};var J=function(t,n,r){if(t===R)J(q,n,r);y(t);n=E(n,true);y(r);if(i(I,n)){if(!r.enumerable){if(!i(t,H))A(t,H,S(1,{}));t[H][n]=true}else{if(i(t,H)&&t[H][n])t[H][n]=false;r=x(r,{enumerable:S(0,false)})}return X(t,n,r)}return A(t,n,r)};var K=function(t,n){y(t);var r=m(n=w(n));var i=0;var s=r.length;var o;while(s>i)J(t,o=r[i++],n[o]);return t};var Q=function(t,n){return n===undefined?x(t):K(x(t),n)};var G=function st(e){var t=j.call(this,e=E(e,true));if(this===R&&i(I,e)&&!i(q,e))return false;return t||!i(this,e)||!i(I,e)||i(this,H)&&this[H][e]?t:true};var Y=function(t,n){t=w(t);n=E(n,true);if(t===R&&i(I,n)&&!i(q,n))return;var r=L(t,n);if(r&&i(I,n)&&!(i(t,H)&&t[H][n]))r.enumerable=true;return r};var Z=function(t){var n=O(w(t));var r=[];var s=0;var o;while(n.length>s){if(!i(I,o=n[s++])&&o!=H&&o!=a)r.push(o)}return r};var et=function(t){var n=t===R;var r=O(n?q:w(t));var s=[];var o=0;var u;while(r.length>o){if(i(I,u=r[o++])&&(n?i(R,u):true))s.push(I[u])}return s};if(!U){M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:undefined);var n=function(e){if(this===R)n.call(q,e);if(i(this,H)&&i(this[H],t))this[H][t]=false;X(this,t,S(1,e))};if(s&&W)X(R,t,{configurable:true,set:n});return V(t)};u(M[P],"toString",function ot(){return this._k});N.f=Y;C.f=J;n(31).f=T.f=Z;n(71).f=G;n(92).f=et;if(s&&!n(21)){u(R,"propertyIsEnumerable",G,true)}d.f=function(e){return V(p(e))}}o(o.G+o.W+o.F*!U,{Symbol:M});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;tt.length>nt;)p(tt[nt++]);for(var rt=k(p.store),it=0;rt.length>it;)v(rt[it++]);o(o.S+o.F*!U,"Symbol",{"for":function(e){return i(F,e+="")?F[e]:F[e]=M(e)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var n in F)if(F[n]===t)return n},useSetter:function(){W=true},useSimple:function(){W=false}});o(o.S+o.F*!U,"Object",{create:Q,defineProperty:J,defineProperties:K,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Z,getOwnPropertySymbols:et});_&&o(o.S+o.F*(!U||f(function(){var e=M();return D([e])!="[null]"||D({a:e})!="{}"||D(Object(e))!="{}"})),"JSON",{stringify:function(t){var n=[t];var r=1;var i,s;while(arguments.length>r)n.push(arguments[r++]);s=i=n[1];if(!b(i)&&t===undefined||$(t))return;if(!g(i))i=function(e,t){if(typeof s=="function")t=s.call(this,e,t);if(!$(t))return t};n[1]=i;return D.apply(_,n)}});M[P][B]||n(6)(M[P],B,M[P].valueOf);c(M,"Symbol");c(Math,"Math",true);c(r.JSON,"JSON",true)},function(e,t,n){t.f=n(44)},function(e,t,n){var r=n(4);var i=n(5);var s=n(21);var o=n(119);var u=n(7).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=s?{}:r.Symbol||{});if(e.charAt(0)!="_"&&!(e in t))u(t,e,{value:o.f(e)})}},function(e,t,n){var r=n(55);var i=n(92);var s=n(71);e.exports=function(e){var t=r(e);var n=i.f;if(n){var o=n(e);var u=s.f;var a=0;var f;while(o.length>a)if(u.call(e,f=o[a++]))t.push(f)}return t}},function(e,t,n){var r=n(33);var i=n(31).f;var s={}.toString;var o=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var u=function(e){try{return i(e)}catch(t){return o.slice()}};e.exports.f=function(t){return o&&s.call(t)=="[object Window]"?u(t):i(r(t))}},function(e,t,n){var r=n(9);var i=n(84).onFreeze;n(124)("freeze",function(e){return function(n){return e&&r(n)?e(i(n)):n}})},function(e,t,n){var r=n(3);var i=n(5);var s=n(12);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e];var o={};o[e]=t(n);r(r.S+r.F*s(function(){n(1)}),"Object",o)}},function(e,t,n){var r=n(9);var i=n(84).onFreeze;n(124)("seal",function(e){return function(n){return e&&r(n)?e(i(n)):n}})},function(e,t,n){var r=n(9);var i=n(84).onFreeze;n(124)("preventExtensions",function(e){return function(n){return e&&r(n)?e(i(n)):n}})},function(e,t,n){var r=n(9);n(124)("isFrozen",function(e){return function(n){return r(n)?e?e(n):false:true}})},function(e,t,n){var r=n(9);n(124)("isSealed",function(e){return function(n){return r(n)?e?e(n):false:true}})},function(e,t,n){var r=n(9);n(124)("isExtensible",function(e){return function(n){return r(n)?e?e(n):true:false}})},function(e,t,n){var r=n(33);var i=n(70).f;n(124)("getOwnPropertyDescriptor",function(){return function(t,n){return i(r(t),n)}})},function(e,t,n){var r=n(42);var i=n(57);n(124)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(e,t,n){var r=n(42);var i=n(55);n(124)("keys",function(){return function(t){return i(r(t))}})},function(e,t,n){n(124)("getOwnPropertyNames",function(){return n(122).f})},function(e,t,n){var r=n(3);r(r.S+r.F,"Object",{assign:n(91)})},function(e,t,n){var r=n(3);r(r.S,"Object",{is:n(136)})},function(e,t){e.exports=Object.is||function(t,n){return t===n?t!==0||1/t===1/n:t!=t&&n!=n}},function(e,t,n){var r=n(3);r(r.S,"Object",{setPrototypeOf:n(88).set})},function(e,t,n){var r=n(7).f;var i=Function.prototype;var s=/^\s*function ([^ (]*)/;var o="name";o in i||n(11)&&r(i,o,{configurable:true,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},function(e,t,n){var r=n(3);var i=n(33);var s=n(29);r(r.S,"String",{raw:function(t){var n=i(t.raw);var r=s(n.length);var o=arguments.length;var u=[];var a=0;while(r>a){u.push(String(n[a++]));if(a<o)u.push(String(arguments[a]))}return u.join("")}})},function(e,t,n){var r=n(3);var i=n(38);var s=String.fromCharCode;var o=String.fromCodePoint;r(r.S+r.F*(!!o&&o.length!=1),"String",{fromCodePoint:function(t){var n=[];var r=arguments.length;var o=0;var u;while(r>o){u=+arguments[o++];if(i(u,1114111)!==u)throw RangeError(u+" is not a valid code point");n.push(u<65536?s(u):s(((u-=65536)>>10)+55296,u%1024+56320))}return n.join("")}})},function(e,t,n){"use strict";var r=n(3);var i=n(142)(false);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(e,t,n){var r=n(28);var i=n(36);e.exports=function(e){return function(t,n){var s=String(i(t));var o=r(n);var u=s.length;var a,f;if(o<0||o>=u)return e?"":undefined;a=s.charCodeAt(o);return a<55296||a>56319||o+1===u||(f=s.charCodeAt(o+1))<56320||f>57343?e?s.charAt(o):a:e?s.slice(o,o+2):(a-55296<<10)+(f-56320)+65536}}},function(e,t,n){var r=n(3);r(r.P,"String",{repeat:n(144)})},function(e,t,n){"use strict";var r=n(28);var i=n(36);e.exports=function(t){var n=String(i(this));var s="";var o=r(t);if(o<0||o==Infinity)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))if(o&1)s+=n;return s}},function(e,t,n){"use strict";var r=n(3);var i=n(29);var s=n(146);var o="startsWith";var u=""[o];r(r.P+r.F*n(148)(o),"String",{startsWith:function(t){var n=s(this,t,o);var r=i(Math.min(arguments.length>1?arguments[1]:undefined,n.length));var a=String(t);return u?u.call(n,a,r):n.slice(r,r+a.length)===a}})},function(e,t,n){var r=n(147);var i=n(36);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(9);var i=n(35);var s=n(44)("match");e.exports=function(e){var t;return r(e)&&((t=e[s])!==undefined?!!t:i(e)=="RegExp")}},function(e,t,n){var r=n(44)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{t[r]=false;return!"/./"[e](t)}catch(i){}}return true}},function(e,t,n){"use strict";var r=n(3);var i=n(29);var s=n(146);var o="endsWith";var u=""[o];r(r.P+r.F*n(148)(o),"String",{endsWith:function(t){var n=s(this,t,o);var r=arguments.length>1?arguments[1]:undefined;var a=i(n.length);var f=r===undefined?a:Math.min(i(r),a);var l=String(t);return u?u.call(n,l,f):n.slice(f-l.length,f)===l}})},function(e,t,n){"use strict";var r=n(3);var i=n(146);var s="includes";r(r.P+r.F*n(148)(s),"String",{includes:function(t){return!!~i(this,t,s).indexOf(t,arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){if(n(11)&&/./g.flags!="g")n(7).f(RegExp.prototype,"flags",{configurable:true,get:n(152)})},function(e,t,n){"use strict";var r=n(8);e.exports=function(){var e=r(this);var t="";if(e.global)t+="g";if(e.ignoreCase)t+="i";if(e.multiline)t+="m";if(e.unicode)t+="u";if(e.sticky)t+="y";return t}},function(e,t,n){"use strict";var r=n(8);var i=n(29);var s=n(154);var o=n(155);n(156)("match",1,function(e,t,n,u){return[function(r){var i=e(this);var s=r==undefined?undefined:r[t];return s!==undefined?s.call(r,i):(new RegExp(r))[t](String(i))},function(e){var t=u(n,e,this);if(t.done)return t.value;var a=r(e);var f=String(this);if(!a.global)return o(a,f);var l=a.unicode;a.lastIndex=0;var c=[];var h=0;var p;while((p=o(a,f))!==null){var d=String(p[0]);c[h]=d;if(d==="")a.lastIndex=s(f,i(a.lastIndex),l);h++}return h===0?null:c}]})},function(e,t,n){"use strict";var r=n(142)(true);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){"use strict";var r=n(50);var i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if(typeof n==="function"){var s=n.call(e,t);if(typeof s!=="object"){throw new TypeError("RegExp exec method returned something other than an Object or null")}return s}if(r(e)!=="RegExp"){throw new TypeError("RegExp#exec called on incompatible receiver")}return i.call(e,t)}},function(e,t,n){"use strict";n(157);var r=n(16);var i=n(6);var s=n(12);var o=n(36);var u=n(44);var a=n(158);var f=u("species");var l=!s(function(){var e=/./;e.exec=function(){var e=[];e.groups={a:"7"};return e};return"".replace(e,"$<a>")!=="7"});var c=function(){var e=/(?:)/;var t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return n.length===2&&n[0]==="a"&&n[1]==="b"}();e.exports=function(e,t,n){var h=u(e);var p=!s(function(){var t={};t[h]=function(){return 7};return""[e](t)!=7});var d=p?!s(function(){var t=false;var n=/a/;n.exec=function(){t=true;return null};if(e==="split"){n.constructor={};n.constructor[f]=function(){return n}}n[h]("");return!t}):undefined;if(!p||!d||e==="replace"&&!l||e==="split"&&!c){var v=/./[h];var m=n(o,h,""[e],function(t,n,r,i,s){if(n.exec===a){if(p&&!s){return{done:true,value:v.call(n,r,i)}}return{done:true,value:t.call(r,n,i)}}return{done:false}});var g=m[0];var y=m[1];r(String.prototype,e,g);i(RegExp.prototype,h,t==2?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}}},function(e,t,n){"use strict";var r=n(158);n(3)({target:"RegExp",proto:true,forced:r!==/./.exec},{exec:r})},function(e,t,n){"use strict";var r=n(152);var i=RegExp.prototype.exec;var s=String.prototype.replace;var o=i;var u="lastIndex";var a=function(){var e=/a/,t=/b*/g;i.call(e,"a");i.call(t,"a");return e[u]!==0||t[u]!==0}();var f=/()??/.exec("")[1]!==undefined;var l=a||f;if(l){o=function(t){var n=this;var o,l,c,h;if(f){l=new RegExp("^"+n.source+"$(?!\\s)",r.call(n))}if(a)o=n[u];c=i.call(n,t);if(a&&c){n[u]=n.global?c.index+c[0].length:o}if(f&&c&&c.length>1){s.call(c[0],l,function(){for(h=1;h<arguments.length-2;h++){if(arguments[h]===undefined)c[h]=undefined}})}return c}}e.exports=o},function(e,t,n){"use strict";var r=n(8);var i=n(42);var s=n(29);var o=n(28);var u=n(154);var a=n(155);var f=Math.max;var l=Math.min;var c=Math.floor;var h=/\$([$&`']|\d\d?|<[^>]*>)/g;var p=/\$([$&`']|\d\d?)/g;var d=function(e){return e===undefined?e:String(e)};n(156)("replace",2,function(e,t,n,v){function m(e,t,r,s,o,u){var a=r+e.length;var f=s.length;var l=p;if(o!==undefined){o=i(o);l=h}return n.call(u,l,function(n,i){var u;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(a);case"<":u=o[i.slice(1,-1)];break;default:var l=+i;if(l===0)return n;if(l>f){var h=c(l/10);if(h===0)return n;if(h<=f)return s[h-1]===undefined?i.charAt(1):s[h-1]+i.charAt(1);return n}u=s[l-1]}return u===undefined?"":u})}return[function(i,s){var o=e(this);var u=i==undefined?undefined:i[t];return u!==undefined?u.call(i,o,s):n.call(String(o),i,s)},function(e,t){var i=v(n,e,this,t);if(i.done)return i.value;var c=r(e);var h=String(this);var p=typeof t==="function";if(!p)t=String(t);var g=c.global;if(g){var y=c.unicode;c.lastIndex=0}var b=[];while(true){var w=a(c,h);if(w===null)break;b.push(w);if(!g)break;var E=String(w[0]);if(E==="")c.lastIndex=u(h,s(c.lastIndex),y)}var S="";var x=0;for(var T=0;T<b.length;T++){w=b[T];var N=String(w[0]);var C=f(l(o(w.index),h.length),0);var k=[];for(var L=1;L<w.length;L++)k.push(d(w[L]));var A=w.groups;if(p){var O=[N].concat(k,C,h);if(A!==undefined)O.push(A);var M=String(t.apply(undefined,O))}else{M=m(N,h,C,k,A,t)}if(C>=x){S+=h.slice(x,C)+M;x=C+N.length}}return S+h.slice(x)}]})},function(e,t,n){"use strict";var r=n(147);var i=n(8);var s=n(45);var o=n(154);var u=n(29);var a=n(155);var f=n(158);var l=n(12);var c=Math.min;var h=[].push;var p="split";var d="length";var v="lastIndex";var m=4294967295;var g=!l(function(){RegExp(m,"y")});n(156)("split",2,function(e,t,n,l){var y;if("abbc"[p](/(b)*/)[1]=="c"||"test"[p](/(?:)/,-1)[d]!=4||"ab"[p](/(?:ab)*/)[d]!=2||"."[p](/(.?)(.?)/)[d]!=4||"."[p](/()()/)[d]>1||""[p](/.?/)[d]){y=function(e,t){var i=String(this);if(e===undefined&&t===0)return[];if(!r(e))return n.call(i,e,t);var s=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"");var u=0;var a=t===undefined?m:t>>>0;var l=new RegExp(e.source,o+"g");var c,p,g;while(c=f.call(l,i)){p=l[v];if(p>u){s.push(i.slice(u,c.index));if(c[d]>1&&c.index<i[d])h.apply(s,c.slice(1));g=c[0][d];u=p;if(s[d]>=a)break}if(l[v]===c.index)l[v]++}if(u===i[d]){if(g||!l.test(""))s.push("")}else s.push(i.slice(u));return s[d]>a?s.slice(0,a):s}}else if("0"[p](undefined,0)[d]){y=function(e,t){return e===undefined&&t===0?[]:n.call(this,e,t)}}else{y=n}return[function(r,i){var s=e(this);var o=r==undefined?undefined:r[t];return o!==undefined?o.call(r,s,i):y.call(String(s),r,i)},function(e,t){var r=l(y,e,this,t,y!==n);if(r.done)return r.value;var f=i(e);var h=String(this);var p=s(f,RegExp);var d=f.unicode;var v=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(g?"y":"g");var b=new p(g?f:"^(?:"+f.source+")",v);var w=t===undefined?m:t>>>0;if(w===0)return[];if(h.length===0)return a(b,h)===null?[h]:[];var E=0;var S=0;var x=[];while(S<h.length){b.lastIndex=g?S:0;var T=a(b,g?h:h.slice(S));var N;if(T===null||(N=c(u(b.lastIndex+(g?0:S)),h.length))===E){S=o(h,S,d)}else{x.push(h.slice(E,S));if(x.length===w)return x;for(var C=1;C<=T.length-1;C++){x.push(T[C]);if(x.length===w)return x}S=E=N}}x.push(h.slice(E));return x}]})},function(e,t,n){"use strict";var r=n(8);var i=n(136);var s=n(155);n(156)("search",1,function(e,t,n,o){return[function(r){var i=e(this);var s=r==undefined?undefined:r[t];return s!==undefined?s.call(r,i):(new RegExp(r))[t](String(i))},function(e){var t=o(n,e,this);if(t.done)return t.value;var u=r(e);var a=String(this);var f=u.lastIndex;if(!i(f,0))u.lastIndex=0;var l=s(u,a);if(!i(u.lastIndex,f))u.lastIndex=f;return l===null?-1:l.index}]})},function(e,t,n){"use strict";var r=n(22);var i=n(3);var s=n(42);var o=n(83);var u=n(51);var a=n(29);var f=n(163);var l=n(58);i(i.S+i.F*!n(68)(function(e){Array.from(e)}),"Array",{from:function(t){var n=s(t);var i=typeof this=="function"?this:Array;var c=arguments.length;var h=c>1?arguments[1]:undefined;var p=h!==undefined;var d=0;var v=l(n);var m,g,y,b;if(p)h=r(h,c>2?arguments[2]:undefined,2);if(v!=undefined&&!(i==Array&&u(v))){for(b=v.call(n),g=new i;!(y=b.next()).done;d++){f(g,d,p?o(b,h,[y.value,d],true):y.value)}}else{m=a(n.length);for(g=new i(m);m>d;d++){f(g,d,p?h(n[d],d):n[d])}}g.length=d;return g}})},function(e,t,n){"use strict";var r=n(7);var i=n(15);e.exports=function(e,t,n){if(t in e)r.f(e,t,i(0,n));else e[t]=n}},function(e,t,n){"use strict";var r=n(3);var i=n(163);r(r.S+r.F*n(12)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){var t=0;var n=arguments.length;var r=new(typeof this=="function"?this:Array)(n);while(n>t)i(r,t,arguments[t++]);r.length=n;return r}})},function(e,t,n){var r=n(3);r(r.P,"Array",{copyWithin:n(69)});n(64)("copyWithin")},function(e,t,n){"use strict";var r=n(3);var i=n(59)(5);var s="find";var o=true;if(s in[])Array(1)[s](function(){o=false});r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:undefined)}});n(64)(s)},function(e,t,n){"use strict";var r=n(3);var i=n(59)(6);var s="findIndex";var o=true;if(s in[])Array(1)[s](function(){o=false});r(r.P+r.F*o,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:undefined)}});n(64)(s)},function(e,t,n){var r=n(3);r(r.P,"Array",{fill:n(41)});n(64)("fill")},function(e,t,n){var r=n(3);var i=n(4).isFinite;r(r.S,"Number",{isFinite:function(t){return typeof t=="number"&&i(t)}})},function(e,t,n){var r=n(3);r(r.S,"Number",{isInteger:n(171)})},function(e,t,n){var r=n(9);var i=Math.floor;e.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(e,t,n){var r=n(3);var i=n(171);var s=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&s(t)<=9007199254740991}})},function(e,t,n){var r=n(3);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(e,t,n){var r=n(3);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(3);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(3);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(3);var i=n(178);var s=Math.sqrt;var o=Math.acosh;r(r.S+r.F*!(o&&Math.floor(o(Number.MAX_VALUE))==710&&o(Infinity)==Infinity),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+s(t-1)*s(t+1))}})},function(e,t){e.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(e,t,n){function s(e){return!isFinite(e=+e)||e==0?e:e<0?-s(-e):Math.log(e+Math.sqrt(e*e+1))}var r=n(3);var i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:s})},function(e,t,n){var r=n(3);var i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return(t=+t)==0?t:Math.log((1+t)/(1-t))/2}})},function(e,t,n){var r=n(3);var i=n(182);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(e,t){e.exports=Math.sign||function(t){return(t=+t)==0||t!=t?t:t<0?-1:1}},function(e,t,n){var r=n(3);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(3);var i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(e,t,n){var r=n(3);var i=n(186);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(t){return(t=+t)==0?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(e,t,n){var r=n(3);r(r.S,"Math",{fround:n(188)})},function(e,t,n){var r=n(182);var i=Math.pow;var s=i(2,-52);var o=i(2,-23);var u=i(2,127)*(2-o);var a=i(2,-126);var f=function(e){return e+1/s-1/s};e.exports=Math.fround||function(t){var n=Math.abs(t);var i=r(t);var l,c;if(n<a)return i*f(n/a/o)*a*o;l=(1+o/s)*n;c=l-(l-n);if(c>u||c!=c)return i*Infinity;return i*c}},function(e,t,n){var r=n(3);var i=Math.abs;r(r.S,"Math",{hypot:function(t,n){var r=0;var s=0;var o=arguments.length;var u=0;var a,f;while(s<o){a=i(arguments[s++]);if(u<a){f=u/a;r=r*f*f+1;u=a}else if(a>0){f=a/u;r+=f*f}else r+=a}return u===Infinity?Infinity:u*Math.sqrt(r)}})},function(e,t,n){var r=n(3);var i=Math.imul;r(r.S+r.F*n(12)(function(){return i(4294967295,5)!=-5||i.length!=2}),"Math",{imul:function(t,n){var r=65535;var i=+t;var s=+n;var o=r&i;var u=r&s;return 0|o*u+((r&i>>>16)*u+o*(r&s>>>16)<<16>>>0)}})},function(e,t,n){var r=n(3);r(r.S,"Math",{log1p:n(178)})},function(e,t,n){var r=n(3);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(e,t,n){var r=n(3);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(e,t,n){var r=n(3);r(r.S,"Math",{sign:n(182)})},function(e,t,n){var r=n(3);var i=n(186);var s=Math.exp;r(r.S+r.F*n(12)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(s(t-1)-s(-t-1))*(Math.E/2)}})},function(e,t,n){var r=n(3);var i=n(186);var s=Math.exp;r(r.S,"Math",{tanh:function(t){var n=i(t=+t);var r=i(-t);return n==Infinity?1:r==Infinity?-1:(n-r)/(s(t)+s(-t))}})},function(e,t,n){var r=n(3);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(e,t,n){"use strict";var r=n(3);var i=n(37)(true);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:undefined)}});n(64)("includes")},function(e,t,n){var r=n(3);var i=n(200)(false);r(r.S,"Object",{values:function(t){return i(t)}})},function(e,t,n){var r=n(55);var i=n(33);var s=n(71).f;e.exports=function(e){return function(t){var n=i(t);var o=r(n);var u=o.length;var a=0;var f=[];var l;while(u>a)if(s.call(n,l=o[a++])){f.push(e?[l,n[l]]:n[l])}return f}}},function(e,t,n){var r=n(3);var i=n(200)(true);r(r.S,"Object",{entries:function(t){return i(t)}})},function(e,t,n){var r=n(3);var i=n(107);var s=n(33);var o=n(70);var u=n(163);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var n=s(t);var r=o.f;var a=i(n);var f={};var l=0;var c,h;while(a.length>l){h=r(n,c=a[l++]);if(h!==undefined)u(f,c,h)}return f}})},function(e,t,n){"use strict";var r=n(3);var i=n(204);var s=n(116);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(s),"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:undefined,true)}})},function(e,t,n){var r=n(29);var i=n(144);var s=n(36);e.exports=function(e,t,n,o){var u=String(s(e));var a=u.length;var f=n===undefined?" ":String(n);var l=r(t);if(l<=a||f=="")return u;var c=l-a;var h=i.call(f,Math.ceil(c/f.length));if(h.length>c)h=h.slice(0,c);return o?h+u:u+h}},function(e,t,n){"use strict";var r=n(3);var i=n(204);var s=n(116);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(s),"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:undefined,false)}})},function(e,t,n){var r=n(4);var i=n(3);var s=n(116);var o=[].slice;var u=/MSIE .\./.test(s);var a=function(e){return function(t,n){var r=arguments.length>2;var i=r?o.call(arguments,2):false;return e(r?function(){(typeof t=="function"?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*u,{setTimeout:a(r.setTimeout),setInterval:a(r.setInterval)})},function(e,t,n){var r=n(3);var i=n(112);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){var r=n(63);var i=n(55);var s=n(16);var o=n(4);var u=n(6);var a=n(52);var f=n(44);var l=f("iterator");var c=f("toStringTag");var h=a.Array;var p={CSSRuleList:true,CSSStyleDeclaration:false,CSSValueList:false,ClientRectList:false,DOMRectList:false,DOMStringList:false,DOMTokenList:true,DataTransferItemList:false,FileList:false,HTMLAllCollection:false,HTMLCollection:false,HTMLFormElement:false,HTMLSelectElement:false,MediaList:true,MimeTypeArray:false,NamedNodeMap:false,NodeList:true,PaintRequestList:false,Plugin:false,PluginArray:false,SVGLengthList:false,SVGNumberList:false,SVGPathSegList:false,SVGPointList:false,SVGStringList:false,SVGTransformList:false,SourceBufferList:false,StyleSheetList:true,TextTrackCueList:false,TextTrackList:false,TouchList:false};for(var d=i(p),v=0;v<d.length;v++){var m=d[v];var g=p[m];var y=o[m];var b=y&&y.prototype;var w;if(b){if(!b[l])u(b,l,h);if(!b[c])u(b,c,m);a[m]=h;if(g)for(w in r)if(!b[w])s(b,w,r[w],true)}}},function(e,t){(function(t){!function(t){"use strict";function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y;var s=Object.create(i.prototype);var o=new M(r||[]);s._invoke=k(e,n,o);return s}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function y(){}function b(){}function w(){}function N(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function C(e){function n(t,i,s,o){var u=h(e[t],e,i);if(u.type==="throw"){o(u.arg)}else{var a=u.arg;var f=a.value;if(f&&typeof f==="object"&&r.call(f,"__await")){return Promise.resolve(f.__await).then(function(e){n("next",e,s,o)},function(e){n("throw",e,s,o)})}return Promise.resolve(f).then(function(e){a.value=e;s(a)},o)}}function s(e,t){function r(){return new Promise(function(r,i){n(e,t,r,i)})}return i=i?i.then(r,r):r()}if(typeof t.process==="object"&&t.process.domain){n=t.process.domain.bind(n)}var i;this._invoke=s}function k(e,t,n){var r=p;return function(s,o){if(r===v){throw new Error("Generator is already running")}if(r===m){if(s==="throw"){throw o}return D()}n.method=s;n.arg=o;while(true){var u=n.delegate;if(u){var a=L(u,n);if(a){if(a===g)continue;return a}}if(n.method==="next"){n.sent=n._sent=n.arg}else if(n.method==="throw"){if(r===p){r=m;throw n.arg}n.dispatchException(n.arg)}else if(n.method==="return"){n.abrupt("return",n.arg)}r=v;var f=h(e,t,n);if(f.type==="normal"){r=n.done?m:d;if(f.arg===g){continue}return{value:f.arg,done:n.done}}else if(f.type==="throw"){r=m;n.method="throw";n.arg=f.arg}}}}function L(e,t){var n=e.iterator[t.method];if(n===i){t.delegate=null;if(t.method==="throw"){if(e.iterator.return){t.method="return";t.arg=i;L(e,t);if(t.method==="throw"){return g}}t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=h(n,e.iterator,t.arg);if(r.type==="throw"){t.method="throw";t.arg=r.arg;t.delegate=null;return g}var s=r.arg;if(!s){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return g}if(s.done){t[e.resultName]=s.value;t.next=e.nextLoc;if(t.method!=="return"){t.method="next";t.arg=i}}else{return s}t.delegate=null;return g}function A(e){var t={tryLoc:e[0]};if(1 in e){t.catchLoc=e[1]}if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(A,this);this.reset(true)}function _(e){if(e){var t=e[o];if(t){return t.call(e)}if(typeof e.next==="function"){return e}if(!isNaN(e.length)){var n=-1,s=function u(){while(++n<e.length){if(r.call(e,n)){u.value=e[n];u.done=false;return u}}u.value=i;u.done=true;return u};return s.next=s}}return{next:D}}function D(){return{value:i,done:true}}var n=Object.prototype;var r=n.hasOwnProperty;var i;var s=typeof Symbol==="function"?Symbol:{};var o=s.iterator||"@@iterator";var u=s.asyncIterator||"@@asyncIterator";var a=s.toStringTag||"@@toStringTag";var f=typeof e==="object";var l=t.regeneratorRuntime;if(l){if(f){e.exports=l}return}l=t.regeneratorRuntime=f?e.exports:{};l.wrap=c;var p="suspendedStart";var d="suspendedYield";var v="executing";var m="completed";var g={};var E={};E[o]=function(){return this};var S=Object.getPrototypeOf;var x=S&&S(S(_([])));if(x&&x!==n&&r.call(x,o)){E=x}var T=w.prototype=y.prototype=Object.create(E);b.prototype=T.constructor=w;w.constructor=b;w[a]=b.displayName="GeneratorFunction";l.isGeneratorFunction=function(e){var t=typeof e==="function"&&e.constructor;return t?t===b||(t.displayName||t.name)==="GeneratorFunction":false};l.mark=function(e){if(Object.setPrototypeOf){Object.setPrototypeOf(e,w)}else{e.__proto__=w;if(!(a in e)){e[a]="GeneratorFunction"}}e.prototype=Object.create(T);return e};l.awrap=function(e){return{__await:e}};N(C.prototype);C.prototype[u]=function(){return this};l.AsyncIterator=C;l.async=function(e,t,n,r){var i=new C(c(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})};N(T);T[a]="Generator";T[o]=function(){return this};T.toString=function(){return"[object Generator]"};l.keys=function(e){var t=[];for(var n in e){t.push(n)}t.reverse();return function r(){while(t.length){var n=t.pop();if(n in e){r.value=n;r.done=false;return r}}r.done=true;return r}};l.values=_;M.prototype={constructor:M,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=i;this.done=false;this.delegate=null;this.method="next";this.arg=i;this.tryEntries.forEach(O);if(!e){for(var t in this){if(t.charAt(0)==="t"&&r.call(this,t)&&!isNaN(+t.slice(1))){this[t]=i}}}},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if(t.type==="throw"){throw t.arg}return this.rval},dispatchException:function(e){function n(n,r){u.type="throw";u.arg=e;t.next=n;if(r){t.method="next";t.arg=i}return!!r}if(this.done){throw e}var t=this;for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s];var u=o.completion;if(o.tryLoc==="root"){return n("end")}if(o.tryLoc<=this.prev){var a=r.call(o,"catchLoc");var f=r.call(o,"finallyLoc");if(a&&f){if(this.prev<o.catchLoc){return n(o.catchLoc,true)}else if(this.prev<o.finallyLoc){return n(o.finallyLoc)}}else if(a){if(this.prev<o.catchLoc){return n(o.catchLoc,true)}}else if(f){if(this.prev<o.finallyLoc){return n(o.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}if(s&&(e==="break"||e==="continue")&&s.tryLoc<=t&&t<=s.finallyLoc){s=null}var o=s?s.completion:{};o.type=e;o.arg=t;if(s){this.method="next";this.next=s.finallyLoc;return g}return this.complete(o)},complete:function(e,t){if(e.type==="throw"){throw e.arg}if(e.type==="break"||e.type==="continue"){this.next=e.arg}else if(e.type==="return"){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else if(e.type==="normal"&&t){this.next=t}return g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e){this.complete(n.completion,n.afterLoc);O(n);return g}}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if(r.type==="throw"){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){this.delegate={iterator:_(e),resultName:t,nextLoc:n};if(this.method==="next"){this.arg=i}return g}}}(typeof t==="object"?t:typeof window==="object"?window:typeof self==="object"?self:this)}).call(t,function(){return this}())},,,,,,,,,,,,,,,,,function(e,t){"use strict";var n=function(t){t=t.toUpperCase();if(!/(^\d{15}$)|(^\d{17}([0-9]|X)$)/i.test(t)){return-1}var n,r;n=t.length;if(n==15){r=new RegExp(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/i);var i=t.match(r);var s=new Date("19"+i[2]+"/"+i[3]+"/"+i[4]);var o=s.getYear()==Number(i[2])&&s.getMonth()+1==Number(i[3])&&s.getDate()==Number(i[4]);if(!o){return-2}else{return 0}}if(n==18){r=new RegExp(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/i);var i=t.match(r);var s=new Date(i[2]+"/"+i[3]+"/"+i[4]);var o=s.getFullYear()==Number(i[2])&&s.getMonth()+1==Number(i[3])&&s.getDate()==Number(i[4]);if(!o){return-2}else{var u;var a=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];var f=["1","0","X","9","8","7","6","5","4","3","2"];var l=0,c;for(c=0;c<17;c++){l+=t.substr(c,1)*a[c]}u=f[l%11];if(u!=t.substr(17,1)){return-2}return 0}}return-2};e.exports=n},,,,,,,,function(e,t){"use strict";var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r=r||window;window.Kami=window.Kami||{};var i=function(){function _(e){return e==null?String(e):T[N.call(e)]||"object"}function D(e){return _(e)=="function"}function P(e){return e!=null&&e==e.window}function H(e){return e!=null&&e.nodeType==e.DOCUMENT_NODE}function B(e){return _(e)=="object"}function j(e){return B(e)&&!P(e)&&Object.getPrototypeOf(e)==Object.prototype}function F(e){return typeof e.length=="number"}function I(e){return u.call(e,function(e){return e!=null})}function q(e){return e.length>0?r.fn.concat.apply([],e):e}function R(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function U(e){return e in l?l[e]:l[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function z(e,t){return typeof t=="number"&&!c[R(e)]?t+"px":t}function W(e){var t,n;if(!f[e]){t=a.createElement(e);a.body.appendChild(t);n=getComputedStyle(t,"").getPropertyValue("display");t.parentNode.removeChild(t);n=="none"&&(n="block");f[e]=n}return f[e]}function X(e){return"children"in e?o.call(e.children):r.map(e.childNodes,function(e){if(e.nodeType==1)return e})}function V(n,r,i){for(t in r){if(i&&(j(r[t])||M(r[t]))){if(j(r[t])&&!j(n[t]))n[t]={};if(M(r[t])&&!M(n[t]))n[t]=[];V(n[t],r[t],i)}else if(r[t]!==e)n[t]=r[t]}}function $(e,t){return t==null?r(e):r(e).filter(t)}function J(e,t,n,r){return D(t)?t.call(e,n,r):t}function K(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Q(t,n){var r=t.className,i=r&&r.baseVal!==e;if(n===e)return i?r.baseVal:r;i?r.baseVal=n:t.className=n}function G(e){var t;try{return e?e=="true"||(e=="false"?false:e=="null"?null:!/^0/.test(e)&&!isNaN(t=Number(e))?t:/^[\[\{]/.test(e)?r.parseJSON(e):e):e}catch(n){return e}}function Y(e,t){t(e);for(var n=0,r=e.childNodes.length;n<r;n++){Y(e.childNodes[n],t)}}var e,t,r,i,s=[],o=s.slice,u=s.filter,a=window.document,f={},l={},c={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},h=/^\s*<(\w+|!)[^>]*>/,p=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,d=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,v=/^(?:body|html)$/i,m=/([A-Z])/g,g=["val","css","html","text","data","width","height","offset"],y=["after","prepend","before","append"],b=a.createElement("table"),w=a.createElement("tr"),E={tr:a.createElement("tbody"),tbody:b,thead:b,tfoot:b,td:w,th:w,"*":a.createElement("div")},S=/complete|loaded|interactive/,x=/^[\w-]*$/,T={},N=T.toString,C={},k,L,A=a.createElement("div"),O={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},M=Array.isArray||function(e){return e instanceof Array};C.matches=function(e,t){if(!t||!e||e.nodeType!==1)return false;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,s=!i;if(s)(i=A).appendChild(e);r=~C.qsa(i,t).indexOf(e);s&&A.removeChild(e);return r};k=function(t){return t.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})};L=function(t){return u.call(t,function(e,n){return t.indexOf(e)==n})};C.fragment=function(t,n,i){var s,u,f;if(p.test(t))s=r(a.createElement(RegExp.$1));if(!s){if(t.replace)t=t.replace(d,"<$1></$2>");if(n===e)n=h.test(t)&&RegExp.$1;if(!(n in E))n="*";f=E[n];f.innerHTML=""+t;s=r.each(o.call(f.childNodes),function(){f.removeChild(this)})}if(j(i)){u=r(s);r.each(i,function(e,t){if(g.indexOf(e)>-1)u[e](t);else u.attr(e,t)})}return s};C.Z=function(e,t){e=e||[];e.__proto__=r.fn;e.selector=t||"";return e};C.isZ=function(e){return e instanceof C.Z};C.init=function(t,n){var i;if(!t)return C.Z();else if(typeof t=="string"){t=t.trim();if(t[0]=="<"&&h.test(t))i=C.fragment(t,RegExp.$1,n),t=null;else if(n!==e)return r(n).find(t);else i=C.qsa(a,t)}else if(D(t))return r(a).ready(t);else if(C.isZ(t))return t;else{if(M(t))i=I(t);else if(B(t))i=[t],t=null;else if(h.test(t))i=C.fragment(t.trim(),RegExp.$1,n),t=null;else if(n!==e)return r(n).find(t);else i=C.qsa(a,t)}return C.Z(i,t)};r=function(t,n){return C.init(t,n)};r.extend=function(e){var t,n=o.call(arguments,1);if(typeof e=="boolean"){t=e;e=n.shift()}n.forEach(function(n){V(e,n,t)});return e};C.qsa=function(e,t){var n,r=t[0]=="#",i=!r&&t[0]==".",s=r||i?t.slice(1):t,u=x.test(s);return H(e)&&u&&r?(n=e.getElementById(s))?[n]:[]:e.nodeType!==1&&e.nodeType!==9?[]:o.call(u&&!r?i?e.getElementsByClassName(s):e.getElementsByTagName(t):e.querySelectorAll(t))};r.contains=function(e,t){return e!==t&&e.contains(t)};r.type=_;r.isFunction=D;r.isWindow=P;r.isArray=M;r.isPlainObject=j;r.isEmptyObject=function(e){var t;for(t in e){return false}return true};r.inArray=function(e,t,n){return s.indexOf.call(t,e,n)};r.camelCase=k;r.trim=function(e){return e==null?"":String.prototype.trim.call(e)};r.uuid=0;r.support={};r.expr={};r.map=function(e,t){var n,r=[],i,s;if(F(e))for(i=0;i<e.length;i++){n=t(e[i],i);if(n!=null)r.push(n)}else for(s in e){n=t(e[s],s);if(n!=null)r.push(n)}return q(r)};r.each=function(e,t){var n,r;if(F(e)){for(n=0;n<e.length;n++){if(t.call(e[n],n,e[n])===false)return e}}else{for(r in e){if(t.call(e[r],r,e[r])===false)return e}}return e};r.grep=function(e,t){return u.call(e,t)};if(window.JSON)r.parseJSON=JSON.parse;r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){T["[object "+t+"]"]=t.toLowerCase()});r.fn={forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,indexOf:s.indexOf,concat:s.concat,map:function(t){return r(r.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return r(o.apply(this,arguments))},ready:function(t){if(S.test(a.readyState)&&a.body)t(r);else a.addEventListener("DOMContentLoaded",function(){t(r)},false);return this},get:function(n){return n===e?o.call(this):this[n>=0?n:n+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){if(this.parentNode!=null)this.parentNode.removeChild(this)})},each:function(t){s.every.call(this,function(e,n){return t.call(e,n,e)!==false});return this},filter:function(t){if(D(t))return this.not(this.not(t));return r(u.call(this,function(e){return C.matches(e,t)}))},add:function(t,n){return r(L(this.concat(r(t,n))))},is:function(t){return this.length>0&&C.matches(this[0],t)},not:function(n){var i=[];if(D(n)&&n.call!==e)this.each(function(e){if(!n.call(this,e))i.push(this)});else{var s=typeof n=="string"?this.filter(n):F(n)&&D(n.item)?o.call(n):r(n);this.forEach(function(e){if(s.indexOf(e)<0)i.push(e)})}return r(i)},has:function(t){return this.filter(function(){return B(t)?r.contains(this,t):r(this).find(t).size()})},eq:function(t){return t===-1?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!B(t)?t:r(t)},last:function(){var t=this[this.length-1];return t&&!B(t)?t:r(t)},find:function(t){var i,o=this;if(!t)i=[];else if((typeof t==="undefined"?"undefined":n(t))=="object")i=r(t).filter(function(){var e=this;return s.some.call(o,function(t){return r.contains(t,e)})});else if(this.length==1)i=r(C.qsa(this[0],t));else i=this.map(function(){return C.qsa(this,t)});return i},closest:function(t,i){var s=this[0],o=false;if((typeof t==="undefined"?"undefined":n(t))=="object")o=r(t);while(s&&!(o?o.indexOf(s)>=0:C.matches(s,t))){s=s!==i&&!H(s)&&s.parentNode}return r(s)},parents:function(t){var n=[],i=this;while(i.length>0){i=r.map(i,function(e){if((e=e.parentNode)&&!H(e)&&n.indexOf(e)<0){n.push(e);return e}})}return $(n,t)},parent:function(t){return $(L(this.pluck("parentNode")),t)},children:function(t){return $(this.map(function(){return X(this)}),t)},contents:function(){return this.map(function(){return o.call(this.childNodes)})},siblings:function(t){return $(this.map(function(e,t){return u.call(X(t.parentNode),function(e){return e!==t})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return r.map(this,function(e){return e[t]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display="");if(getComputedStyle(this,"").getPropertyValue("display")=="none")this.style.display=W(this.nodeName)})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=D(t);if(this[0]&&!n)var i=r(t).get(0),s=i.parentNode||this.length>1;return this.each(function(e){r(this).wrapAll(n?t.call(this,e):s?i.cloneNode(true):i)})},wrapAll:function(t){if(this[0]){r(this[0]).before(t=r(t));var n;while((n=t.children()).length){t=n.first()}r(t).append(this)}return this},wrapInner:function(t){var n=D(t);return this.each(function(e){var i=r(this),s=i.contents(),o=n?t.call(this,e):t;s.length?s.wrapAll(o):i.append(o)})},unwrap:function(){this.parent().each(function(){r(this).replaceWith(r(this).children())});return this},clone:function(){return this.map(function(){return this.cloneNode(true)})},hide:function(){return this.css("display","none")},toggle:function(n){return this.each(function(){var t=r(this);(n===e?t.css("display")=="none":n)?t.show():t.hide()})},prev:function(t){return r(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return r(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;r(this).empty().append(J(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=J(this,t,e,this.textContent);this.textContent=n==null?"":""+n}):0 in this?this[0].textContent:null},attr:function(r,i){var s;return typeof r=="string"&&!(1 in arguments)?!this.length||this[0].nodeType!==1?e:!(s=this[0].getAttribute(r))&&r in this[0]?this[0][r]:s:this.each(function(e){if(this.nodeType!==1)return;if(B(r))for(t in r){K(this,t,r[t])}else K(this,r,J(this,i,e,this.getAttribute(r)))})},removeAttr:function(t){return this.each(function(){this.nodeType===1&&K(this,t)})},prop:function(t,n){t=O[t]||t;return 1 in arguments?this.each(function(e){this[t]=J(this,n,e,this[t])}):this[0]&&this[0][t]},data:function Z(t,n){var r="data-"+t.replace(m,"-$1").toLowerCase();var Z=1 in arguments?this.attr(r,n):this.attr(r);return Z!==null?G(Z):e},val:function(t){return 0 in arguments?this.each(function(e){this.value=J(this,t,e,this.value)}):this[0]&&(this[0].multiple?r(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=r(this),i=J(this,t,e,n.offset()),s=n.offsetParent().offset(),o={top:i.top-s.top,left:i.left-s.left};if(n.css("position")=="static")o["position"]="relative";n.css(o)});if(!this.length)return null;var n=this[0].getBoundingClientRect();return{left:n.left+window.pageXOffset,top:n.top+window.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function et(e,n){if(arguments.length<2){var i=this[0],s=getComputedStyle(i,"");if(!i)return;if(typeof e=="string")return i.style[k(e)]||s.getPropertyValue(e);else if(M(e)){var o={};r.each(M(e)?e:[e],function(e,t){o[t]=i.style[k(t)]||s.getPropertyValue(t)});return o}}var et="";if(_(e)=="string"){if(!n&&n!==0)this.each(function(){this.style.removeProperty(R(e))});else et=R(e)+":"+z(e,n)}else{for(t in e){if(!e[t]&&e[t]!==0)this.each(function(){this.style.removeProperty(R(t))});else et+=R(t)+":"+z(t,e[t])+";"}}return this.each(function(){this.style.cssText+=";"+et})},index:function(t){return t?this.indexOf(r(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){if(!t)return false;return s.some.call(this,function(e){return this.test(Q(e))},U(t))},addClass:function(t){if(!t)return this;return this.each(function(e){i=[];var n=Q(this),s=J(this,t,e,n);s.split(/\s+/g).forEach(function(e){if(!r(this).hasClass(e))i.push(e)},this);i.length&&Q(this,n+(n?" ":"")+i.join(" "))})},removeClass:function(n){return this.each(function(t){if(n===e)return Q(this,"");i=Q(this);J(this,n,t,i).split(/\s+/g).forEach(function(e){i=i.replace(U(e)," ")});Q(this,i.trim())})},toggleClass:function(n,i){if(!n)return this;return this.each(function(t){var s=r(this),o=J(this,n,t,Q(this));o.split(/\s+/g).forEach(function(t){(i===e?!s.hasClass(t):i)?s.addClass(t):s.removeClass(t)})})},scrollTop:function(n){if(!this.length)return;var r="scrollTop"in this[0];if(n===e)return r?this[0].scrollTop:this[0].pageYOffset;return this.each(r?function(){this.scrollTop=n}:function(){this.scrollTo(this.scrollX,n)})},scrollLeft:function(n){if(!this.length)return;var r="scrollLeft"in this[0];if(n===e)return r?this[0].scrollLeft:this[0].pageXOffset;return this.each(r?function(){this.scrollLeft=n}:function(){this.scrollTo(n,this.scrollY)})},position:function(){if(!this.length)return;var t=this[0],n=this.offsetParent(),i=this.offset(),s=v.test(n[0].nodeName)?{top:0,left:0}:n.offset();i.top-=parseFloat(r(t).css("margin-top"))||0;i.left-=parseFloat(r(t).css("margin-left"))||0;s.top+=parseFloat(r(n[0]).css("border-top-width"))||0;s.left+=parseFloat(r(n[0]).css("border-left-width"))||0;return{top:i.top-s.top,left:i.left-s.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||a.body;while(e&&!v.test(e.nodeName)&&r(e).css("position")=="static"){e=e.offsetParent}return e})}};r.fn.detach=r.fn.remove;["width","height"].forEach(function(t){var n=t.replace(/./,function(e){return e[0].toUpperCase()});r.fn[t]=function(i){var s,o=this[0];if(i===e)return P(o)?o["inner"+n]:H(o)?o.documentElement["scroll"+n]:(s=this.offset())&&s[t];else return this.each(function(e){o=r(this);o.css(t,J(this,i,e,o[t]()))})}});y.forEach(function(e,t){var n=t%2;r.fn[e]=function(){var e,i=r.map(arguments,function(t){e=_(t);return e=="object"||e=="array"||t==null?t:C.fragment(t)}),s,o=this.length>1;if(i.length<1)return this;return this.each(function(e,u){s=n?u:u.parentNode;u=t==0?u.nextSibling:t==1?u.firstChild:t==2?u:null;var f=a.documentElement.contains(s);i.forEach(function(e){if(o)e=e.cloneNode(true);else if(!s)return r(e).remove();s.insertBefore(e,u);if(f)Y(e,function(e){if(e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&!e.src)window["eval"].call(window,e.innerHTML)})})})};r.fn[n?e+"To":"insert"+(t?"Before":"After")]=function(t){r(t)[e](this);return this}});C.Z.prototype=r.fn;C.uniq=L;C.deserializeValue=G;r.zepto=C;return r}();(function(e){function c(e){return e._zid||(e._zid=t++)}function h(e,t,n,r){t=p(t);if(t.ns)var i=d(t.ns);return(o[c(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||c(e.fn)===c(n))&&(!r||e.sel==r)})}function p(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function d(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function v(e,t){return e.del&&!a&&e.e in f||!!t}function m(e){return l[e]||a&&f[e]||e}function g(t,r,i,s,u,a,f){var h=c(t),d=o[h]||(o[h]=[]);r.split(/\s/).forEach(function(r){if(r=="ready")return e(document).ready(i);var o=p(r);o.fn=i;o.sel=u;if(o.e in l)i=function(n){var r=n.relatedTarget;if(!r||r!==this&&!e.contains(this,r))return o.fn.apply(this,arguments)};o.del=a;var c=a||i;o.proxy=function(e){e=x(e);if(e.isImmediatePropagationStopped())return;e.data=s;var r=c.apply(t,e._args==n?[e]:[e].concat(e._args));if(r===false)e.preventDefault(),e.stopPropagation();return r};o.i=d.length;d.push(o);if("addEventListener"in t)t.addEventListener(m(o.e),o.proxy,v(o,f))})}function y(e,t,n,r,i){var s=c(e);(t||"").split(/\s/).forEach(function(t){h(e,t,n,r).forEach(function(t){delete o[s][t.i];if("removeEventListener"in e)e.removeEventListener(m(t.e),t.proxy,v(t,i))})})}function x(t,r){if(r||!t.isDefaultPrevented){r||(r=t);e.each(S,function(e,n){var i=r[e];t[e]=function(){this[n]=b;return i&&i.apply(r,arguments)};t[n]=w});if(r.defaultPrevented!==n?r.defaultPrevented:"returnValue"in r?r.returnValue===false:r.getPreventDefault&&r.getPreventDefault())t.isDefaultPrevented=b}return t}function T(e){var t,r={originalEvent:e};for(t in e){if(!E.test(t)&&e[t]!==n)r[t]=e[t]}return x(r,e)}var t=1,n,r=Array.prototype.slice,i=e.isFunction,s=function(t){return typeof t=="string"},o={},u={},a="onfocusin"in window,f={focus:"focusin",blur:"focusout"},l={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents";e.event={add:g,remove:y};e.proxy=function(t,n){var o=2 in arguments&&r.call(arguments,2);if(i(t)){var u=function(){return t.apply(n,o?o.concat(r.call(arguments)):arguments)};u._zid=c(t);return u}else if(s(n)){if(o){o.unshift(t[n],t);return e.proxy.apply(null,o)}else{return e.proxy(t[n],t)}}else{throw new TypeError("expected function")}};e.fn.bind=function(e,t,n){return this.on(e,t,n)};e.fn.unbind=function(e,t){return this.off(e,t)};e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var b=function(){return true},w=function(){return false},E=/^([A-Z]|returnValue$|layer[XY]$)/,S={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)};e.fn.undelegate=function(e,t,n){return this.off(t,e,n)};e.fn.live=function(t,n){e(document.body).delegate(this.selector,t,n);return this};e.fn.die=function(t,n){e(document.body).undelegate(this.selector,t,n);return this};e.fn.on=function(t,o,u,a,f){var l,c,h=this;if(t&&!s(t)){e.each(t,function(e,t){h.on(e,o,u,t,f)});return h}if(!s(o)&&!i(a)&&a!==false)a=u,u=o,o=n;if(i(u)||u===false)a=u,u=n;if(a===false)a=w;return h.each(function(n,i){if(f)l=function(t){y(i,t.type,a);return a.apply(this,arguments)};if(o)c=function(n){var s,u=e(n.target).closest(o,i).get(0);if(u&&u!==i){s=e.extend(T(n),{currentTarget:u,liveFired:i});return(l||a).apply(u,[s].concat(r.call(arguments,1)))}};g(i,t,a,u,o,c||l)})};e.fn.off=function(t,r,o){var u=this;if(t&&!s(t)){e.each(t,function(e,t){u.off(e,r,t)});return u}if(!s(r)&&!i(o)&&o!==false)o=r,r=n;if(o===false)o=w;return u.each(function(){y(this,t,o,r)})};e.fn.trigger=function(t,n){t=s(t)||e.isPlainObject(t)?e.Event(t):x(t);t._args=n;return this.each(function(){if("dispatchEvent"in this)this.dispatchEvent(t);else e(this).triggerHandler(t,n)})};e.fn.triggerHandler=function(t,n){var r,i;this.each(function(o,u){r=T(s(t)?e.Event(t):t);r._args=n;r.target=u;e.each(h(u,t.type||t),function(e,t){i=t.proxy(r);if(r.isImmediatePropagationStopped())return false})});return i};("focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select keydown keypress keyup error").split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}});["focus","blur"].forEach(function(t){e.fn[t]=function(e){if(e)this.bind(t,e);else this.each(function(){try{this[t]()}catch(e){}});return this}});e.Event=function(e,t){if(!s(e))t=e,e=t.type;var n=document.createEvent(u[e]||"Events"),r=true;if(t)for(var i in t){i=="bubbles"?r=!!t[i]:n[i]=t[i]}n.initEvent(e,r,true);return x(n)}})(i);(function(e){function f(e,t,n,r){return Math.abs(e-t)>=Math.abs(n-r)?e-t>0?"Left":"Right":n-r>0?"Up":"Down"}function l(){o=null;if(t.last){t.el.trigger("longTap");t={}}}function c(){if(o)clearTimeout(o);o=null}function h(){if(n)clearTimeout(n);if(i)clearTimeout(i);if(s)clearTimeout(s);if(o)clearTimeout(o);n=i=s=o=null;t={}}function p(e){return(e.pointerType=="touch"||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function d(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var t={},n,i,s,o,u=750,a;e(document).ready(function(){var v,m,g=0,y=0,b,w;if("MSGesture"in window){a=new MSGesture;a.target=document.body}e(document).bind("MSGestureEnd",function(e){var n=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;if(n){if(t&&t.el){t.el.trigger("swipe");t.el.trigger("swipe"+n)}}}).on("touchstart MSPointerDown pointerdown",function(r){if((w=d(r,"down"))&&!p(r))return;b=w?r:r.touches[0];if(r.touches&&r.touches.length===1&&t.x2){t.x2=undefined;t.y2=undefined}v=Date.now();m=v-(t.last||v);t.el=e("tagName"in b.target?b.target:b.target.parentNode);n&&clearTimeout(n);t.x1=b.pageX;t.y1=b.pageY;if(m>0&&m<=250)t.isDoubleTap=true;t.last=v;o=setTimeout(l,u);if(a&&w)a.addPointer(r.pointerId)}).on("touchmove MSPointerMove pointermove",function(e){if((w=d(e,"move"))&&!p(e))return;b=w?e:e.touches[0];c();t.x2=b.pageX;t.y2=b.pageY;g+=Math.abs(t.x1-t.x2);y+=Math.abs(t.y1-t.y2)}).on("touchend MSPointerUp pointerup",function(o){if((w=d(o,"up"))&&!p(o))return;c();if(t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30)s=setTimeout(function(){if(t&&t.el){t.el.trigger("swipe");t.el.trigger("swipe"+f(t.x1,t.x2,t.y1,t.y2))}t={}},0);else if("last"in t)if(g<30&&y<30){i=setTimeout(function(){if(!!!r.Kami.disableTapEvent){var i=e.Event("tap");i.cancelTouch=h;if(t.el)t.el.trigger(i)}if(t.isDoubleTap){if(t.el)t.el.trigger("doubleTap");t={}}else{n=setTimeout(function(){n=null;if(t.el)t.el.trigger("singleTap");t={}},250)}},0)}else{t={}}g=y=0}).on("touchcancel MSPointerCancel pointercancel",h);e(window).on("scroll",h)});["tap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})})(i);(function(e){function t(e,t){var n=this.os={},r=this.browser={},i=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),s=e.match(/(Android);?[\s\/]+([\d.]+)?/),o=!!e.match(/\(Macintosh\; Intel /),u=e.match(/(iPad).*OS\s([\d_]+)/),a=e.match(/(iPod)(.*OS\s([\d_]+))?/),f=!u&&e.match(/(iPhone\sOS)\s([\d_]+)/),l=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=/Win\d{2}|Windows/.test(t),h=e.match(/Windows Phone ([\d.]+)/),p=l&&e.match(/TouchPad/),d=e.match(/Kindle\/([\d.]+)/),v=e.match(/Silk\/([\d._]+)/),m=e.match(/(BlackBerry).*Version\/([\d.]+)/),g=e.match(/(BB10).*Version\/([\d.]+)/),y=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),b=e.match(/PlayBook/),w=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),E=e.match(/Firefox\/([\d.]+)/),S=e.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),x=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),T=!w&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),N=T||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);if(r.webkit=!!i)r.version=i[1];if(s)n.android=true,n.version=s[2];if(f&&!a)n.ios=n.iphone=true,n.version=f[2].replace(/_/g,".");if(u)n.ios=n.ipad=true,n.version=u[2].replace(/_/g,".");if(a)n.ios=n.ipod=true,n.version=a[3]?a[3].replace(/_/g,"."):null;if(h)n.wp=true,n.version=h[1];if(l)n.webos=true,n.version=l[2];if(p)n.touchpad=true;if(m)n.blackberry=true,n.version=m[2];if(g)n.bb10=true,n.version=g[2];if(y)n.rimtabletos=true,n.version=y[2];if(b)r.playbook=true;if(d)n.kindle=true,n.version=d[1];if(v)r.silk=true,r.version=v[1];if(!v&&n.android&&e.match(/Kindle Fire/))r.silk=true;if(w)r.chrome=true,r.version=w[1];if(E)r.firefox=true,r.version=E[1];if(S)n.firefoxos=true,n.version=S[1];if(x)r.ie=true,r.version=x[1];if(N&&(o||n.ios||c)){r.safari=true;if(!n.ios)r.version=N[1]}if(T)r.webview=true;n.tablet=!!(u||b||s&&!e.match(/Mobile/)||E&&e.match(/Tablet/)||x&&!e.match(/Phone/)&&e.match(/Touch/));n.phone=!!(!n.tablet&&!n.ipod&&(s||f||l||m||g||w&&e.match(/Android/)||w&&e.match(/CriOS\/([\d.]+)/)||E&&e.match(/Mobile/)||x&&e.match(/Touch/)))}t.call(e,navigator.userAgent,navigator.platform);e.__detect=t})(i);e.exports=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){var n=[];var r=true;var i=false;var s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=true;s=a}finally{try{if(!r&&o["return"])o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var s=n(311);var o=u(s);var f=n(319);var l=n(365)("util:pc:pc12306");var c=n(396);var h=n(384);var p=n(402);var d=new p;var v=c.lowestSeatType,m=c.getStationCode,g=c.getStationName,y=c.bin216,b=c.Base32,w=c.returnDay8,E=c.encode32,S=c.setGlobalState,x=c.getGlobalState,T=c.clearGlobalState,N=c.getAjaxObj,C=c.ajax;var k=function(){};k.prototype={constructor:k,lowestSeatType:v,getStationCode:m,getStationName:g,setGlobalState:S,getGlobalState:x,clearGlobalState:T,htmlPageState:{},pendingAjaxObjs:{},ajaxObjGid:0,ajaxAbortTag:false,create:function(){return new k},ajax:function(t){function o(){delete this.pendingAjaxObjs[i];if(this.ajaxAbortTag){return a()}return r.resolve.apply(r,arguments)}function u(){delete this.pendingAjaxObjs[i];if(this.ajaxAbortTag){return a()}return r.reject.apply(r,arguments)}function a(){return r.reject("aborted")}var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=$.Deferred();if(this.ajaxAbortTag){return a()}var i=this.ajaxObjGid++;var s=C(t,n).then(o.bind(this),u.bind(this));this.pendingAjaxObjs[i]=N();return s},cancelAjax:function(){Object.entries(this.pendingAjaxObjs).forEach(function(e){var t=i(e,2),n=t[0],r=t[1];r&&r.abort&&r.abort()})},getAjaxAbortTag:function(){return this.ajaxAbortTag},ajaxAbort:function(){this.ajaxAbortTag=true},ajaxAllow:function(){this.ajaxAbortTag=false},abortAll:function(){this.cancelAjax();this.ajaxAbort()},post:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return this.ajax(t,{type:"post",data:n})},get:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return this.ajax(t,{type:"get",data:n})},submitToken:function(){return this.getGlobalState("globalRepeatSubmitToken")},keyChange:function(){return this.getGlobalState("ticketInfoForPassengerForm.key_check_isChange")},queryUrl:function(){return this.getGlobalState("CLeftTicketUrl")},queryUrlEnhanced:function(){function r(){var e=this.queryUrl();if(e)return n.resolve(e);return i()}function i(){console.warn("get CLeftTicketUrl fail:",arguments);return n.resolve("leftTicket/query")}var t=this.queryUrl();var n=$.Deferred();if(t)return n.resolve(t);return this.getLoginKey("query").then(r.bind(this),i)},isAsync:function(){return this.getGlobalState("ticketInfoForPassengerForm.isAsync")},loginKey:function(){return this.getGlobalState("loginKey")},checkUser:function(){var t="otn/login/checkUser";return this.post(t)},checkLogin:function(){var t="otn/userSecurity/loginPwd";return this.ajax(t,{type:"post",noRetry:"true"})},passportLogin:function(t,n){var r={username:t,password:n,appid:"otn"};var i="passport/web/login";return this.post(i,r)},passportUAMToken:function(){var t="passport/web/auth/uamtk";var n={appid:"otn"};return this.post(t,n)},uamtk:function(){var t="passport/web/auth/uamtk";var n={uamtk:"",appid:"member"};return this.post(t,n)},isStationMember:function(){var t="otn/index/isStationMember";return this.post(t)},otnUAMAuthClient:function(t){var n="otn/uamauthclient";var r={tk:t};return this.post(n,r)},otnLoginAysnSuggest:function(t,n,i){var s={"loginUserDTO.user_name":t,"userDTO.password":n,randCode_validate:"",myversion:"undefined"};if(i){s.randCode=i}var o=this.loginKey();if(o){s=r({},s,o)}var u="otn/login/loginAysnSuggest";return this.post(u,s)},getLoginKey:function(t,n){function o(){if(r.loginKey()&&!n){i.resolve(r.loginKey())}r.ajax(s[t],{dataType:"html"}).then(r.getCaptchaTypeFromData.bind(r,t)).then(u,f)}function u(e,t,n,i){e=e||t;r.getLoginKeyFormData(e).then(a,f)}function a(){i.resolve.apply(i,arguments)}function f(e){i.reject.apply(i,arguments)}this.updateApiStateOfPsgRead("fail");var r=this,i=$.Deferred();t=t||"login";var s={login:"otn/login/init",query:"otn/leftTicket/init"};o();return i.promise()},getCaptchaTypeFromData:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}var s=r[0]||r[1];var o=$.Deferred();if(!s||typeof s!=="string"){return o.reject.apply(o,r)}var u="passport";if(/otn\/resources\/js\/newpasscode\/new\.js/.test(s)){u="otn"}this.setGlobalState(a({},t+"CaptchaType",u));if(t==="login"){window.sendWatchMessage({key:"hyBuy_img_isCaptcha",isSuccessful:u==="passport"})}return o.resolve.apply(o,r)},getLoginKeyFormData:function(t){function o(e){var t="otn/dynamicJs/"+e,n={type:"get",dataType:"html"};return i.ajax(t,n)}function u(e,t){var n="otn/dynamicJs/"+e;return i.post(n,t)}function a(e,t){e=e||t;var r;var s;if(e){r=e.match(/function gc\(\)\{var \w+=\'\w+\'/)}else{return n.resolve.apply(n,arguments)}if(r){r=r[0].split("=")[1].replace("'","").replace("'","");var o=e.match(/ready[\s\S]{1,100}'\/otn\/dynamicJs\/(\w+)'/);s=o?o[1]:null}else{return n.resolve.apply(n,arguments)}var a=[r,"1111"];var f={};f[r]=E(y(b.encrypt(a[1],a[0])));i.setGlobalState({loginKey:f});if(s){u(s,{}).always(function(){n.resolve(f)})}else{n.resolve(f)}}function f(){n.reject.apply(n,arguments)}var n=$.Deferred(),r;var i=this;var s=t&&t.match(/<script src\="\/otn\/dynamicJs\/(\w+)"/);l("matchUrl:",s);if(s&&s.length){r=s[1]}else{return n.reject.apply(n,arguments)}o(r).then(a,f);return n.promise()},getTokens:function(t){function n(e){if(e.hasDynamicJs){return this.getLoginKeyFormData(e.html)}return $.Deferred().reject("no dynamicJs")}return this._getTokens(t).then(n.bind(this))},getPsgTokens:function(){function t(e){if(e.hasDynamicJs){return this.getLoginKeyFormData(e.html)}return e}return(0,o.default)(this._getTokens.bind(this)).then(t.bind(this))},_getTokens:function(t){function s(e,t){e=e||t;if(!e||typeof e!=="string"){var n=$.Deferred();return n.reject.apply(n,arguments)}var r=this.submitToken();var i=this.keyChange();var s=e.indexOf("dynamicJs")!==-1;if(!window.secKillOn){this.ajax("https://kyfw.12306.cn/otn/HttpZF/GetJS")}return{token:r,keyChange:i,hasDynamicJs:s,html:e}}var n=t==="Gc"?"Gc":"Dc";var r="otn/confirmPassenger/init"+n;var i={type:"post",dataType:"html"};return this.ajax(r,i).then(s.bind(this))},getPassCodeUrl:function(t,n){var r="";if(t!="login"){if(this.isAsync()=="1"){r=n?"https://kyfw.12306.cn/otn/passcodeNew/getPassCodeNew?module=passenger&rand=randp&"+Math.random():"https://kyfw.12306.cn/passport/captcha/captcha-image?login_site=E&module=passenger&rand=randp&"+Math.random()}else{r=n?"https://kyfw.12306.cn/passport/captcha/captcha-image?login_site=E&module=passenger&rand=randp&"+Math.random():"https://kyfw.12306.cn/otn/passcodeNew/getPassCodeNew?module=passenger&rand=randp&"+Math.random()}}else{r="https://kyfw.12306.cn/passport/captcha/captcha-image?login_site=E&module=login&rand=sjrand&"+Math.random()}return r},_checkRandCodeAnsyn:function(t,n,r){l("_checkRandCodeAnsyn:",arguments);l("this.isAsync:",this.isAsync());if(this.isAsync()=="1"){return r?this.checkRandCodeAnsynRebook(t,n):this.checkRandCodeAnsyn(t,n)}else{return r?this.checkRandCodeAnsyn(t,n):this.checkRandCodeAnsynRebook(t,n)}},checkRandCodeAnsyn:function(t,n){var r=["","sjrand","randp"];var i="passport/captcha/captcha-check";var s={answer:n,rand:r[t],login_site:"E"};return this.post(i,s)},changePassword_checkRandCodeAnsyn:function(t){function i(e){l("changePassword_checkRandCodeAnsyn fail:",arguments);var t="randCodeError";return Common.lookUp(t)}var n="otn/passcodeNew/checkRandCodeAnsyn";var r={randCode:t,rand:"sjrand",randCode_validate:""};return this.post(n,r).then(undefined,i)},checkRandCodeAnsynRebook:function(t,n){function o(e){l("changePassword_checkRandCodeAnsyn fail:",arguments);var t="randCodeError";return Common.lookUp(t)}var r=["","sjrand","randp"];var i="otn/passcodeNew/checkRandCodeAnsyn";var s={randCode:n,rand:r[t]};return this.post(i,s).then(undefined,o)},getPassengerTickets:function(t,n){var r="";for(var i=0;i<t.length;i++){var s=n+",0,"+t[i].ticket_type+","+t[i].passenger_name+","+t[i].passenger_id_type_code+","+t[i].passenger_id_no+","+""+","+"N";r+=s+"_"}return r.substring(0,r.length-1)},getOldPassengers:function(t){var n=[];$.each(t,function(e,t){n.push([t.passenger_name,t.passenger_id_type_code,t.passenger_id_no,t.passenger_type].join(","))});return n.join("_")+"_"},leftTicketQuery:function(t,n,i,s,o){function h(e,s,o,a){if(e&&e.data&&e.data.length){l.resolve.apply(l,arguments)}else if(e&&e.data&&e.data.flag==1){if(a.serverIP){e.serverIP=a.serverIP}var f={data:e,saveTime:(new Date).getTime().toString(),key:{from:t,to:n,date:i}};var h=Common.deepGet(a,"headers.Date");h=Date.parse(h);Common.storeInfo("leftTicketData",f,true);var v=r({},e);var m=u.analysisYpInfo(e.data.result,e.data.map);e.data=m;e.originYpInfo=v;e.updateTime=h||null;l.resolve(e)}else if(c&&e&&e.c_url){c--;p()}else{d.apply(null,arguments)}}function p(){function e(e){var t=e||"leftTicket/query";var n="otn/"+t;var i={data:f};if(o){i=r({},i,o)}u.ajax(n,i).then(h,d)}u.queryUrlEnhanced().then(e)}function d(e){l.reject.apply(l,arguments)}this.updateApiStateOfPsgRead("depending");var u=this;var a=s?"0X00":"ADULT";var f={"leftTicketDTO.train_date":i,"leftTicketDTO.from_station":t,"leftTicketDTO.to_station":n,purpose_codes:a};var l=$.Deferred(),c=o&&o.ipMode==="group"?0:3;p();return l.promise()},checkOrderInfo:function(t,n,r,i){function a(e){if(!(e&&e.data&&e.data.submitStatus)){f.apply(null,arguments)}else{s.resolve.apply(s,arguments)}}function f(e){s.reject.apply(s,arguments)}var s=$.Deferred();var o="otn/confirmPassenger/checkOrderInfo";var u={cancel_flag:2,bed_level_order_num:"000000000000000000000000000000",passengerTicketStr:t,oldPassengerStr:n,tour_flag:i,randCode:r,whatsSelect:"1"};this.post(o,u).then(a,f);return s.promise()},getQueueCount:function(t,n){var r=n.queryLeftNewDTO;var i="otn/confirmPassenger/getQueueCount";var s={train_date:Common.parseDateTime(r.start_train_date).toString(),train_no:r.train_no,stationTrainCode:r.station_train_code,seatType:t,fromStationTelecode:r.from_station_telecode,toStationTelecode:r.to_station_telecode,leftTicket:r.yp_info,purpose_codes:"00",train_location:r.location_code};return this.post(i,s)},_confirmSinglerProcess:function(t,n,r,i,s,o){function f(e){if(!(e&&e.data&&e.data.submitStatus)){l.apply(null,arguments)}else{a.resolve.apply(a,arguments)}}function l(e){a.reject.apply(a,arguments)}function c(){u.post(s,{passengerTicketStr:t,oldPassengerStr:n,randCode:r||"",key_check_isChange:u.keyChange(),leftTicketStr:i.yp_info,purpose_codes:"00",choose_seats:o.choose_seats||"",seatDetailType:"000",roomType:"00",dwAll:"N",whatsSelect:"1",train_location:i.location_code}).then(f,l)}o=o||{};var u=this,a=$.Deferred();c();return a.promise()},confirmSingleForQueue:function(t,n,r,i,s){var o="otn/confirmPassenger/confirmSingleForQueue";return this._confirmSinglerProcess(t,n,r,i,o,s)},confirmSingle:function(t,n,r,i,s){var o="otn/confirmPassenger/confirmSingle";return this._confirmSinglerProcess(t,n,r,i,o,s)},queryOrderWaitTime:function(t){function s(){return Common.getServerTime().then(o)}function o(e){return n.get("https://kyfw.12306.cn/otn/confirmPassenger/queryOrderWaitTime",{random:e.getTime(),tourFlag:r}).then(u)}function u(e){if(e&&e.data&&e.data.queryOrderWaitTimeStatus){if(e&&e.data&&e.data.msg)i.resolve(e);else i.resolve.apply(i,arguments)}else{if(e&&e.data&&e.data.msg)i.resolve(e);else i.reject.apply(i,arguments)}}var n=this;var r=t==="gc"?"gc":"dc";var i=$.Deferred();s();return i.promise()},cancelQueueNoCompleteMyOrder:function(t){function o(e){if(e.status){if(e&&e.data&&e.data.existError=="N"){n.resolve.apply(n,arguments)}else{u.apply(null,arguments)}}else{u.apply(null,arguments)}}function u(e){n.reject.apply(n,arguments)}var n=$.Deferred();var r=t=="gc"?"gc":"dc";var i="otn/queryOrder/cancelQueueNoCompleteMyOrder",s={tourFlag:r};this.post(i,s).then(o,u);return n.promise()},resultOrderFroDcQueue:function(t){function i(e){var t=$.Deferred();if(e&&e.data&&e.data.submitStatus){t.resolve.apply(t,arguments)}else{t.reject.apply(t,arguments)}return t.promise()}var n="otn/confirmPassenger/resultOrderForDcQueue",r={orderSequence_no:t};return this.post(n,r).then(i)},updateApiStateOfPsgRead:function(t){Common.storeInfo("apiStatePsgRead",t,true)},submitOrderRequest:function(t,n,r){function u(){var e=t.queryLeftNewDTO.start_train_date;if(!e.indexOf("-")>-1){e=e.substring(0,4)+"-"+e.substring(4,6)+"-"+e.substring(6,8)}var r="otn/leftTicket/submitOrderRequest";var o={secretStr:decodeURIComponent(t.secretStr),train_date:e,back_train_date:w(new Date),tour_flag:n,purpose_codes:s,query_from_station_name:t.queryLeftNewDTO.from_station_name,query_to_station_name:t.queryLeftNewDTO.to_station_name,"undefined":""};i.post(r,o).then(a,f)}function a(e){if(!(e&&e.status)){f.apply(null,arguments)}else{i.updateApiStateOfPsgRead("done");o.resolve.apply(o,arguments)}}function f(e){i.updateApiStateOfPsgRead("fail");o.reject.apply(o,arguments)}this.updateApiStateOfPsgRead("depending");var i=this;var s=r?"0X00":"ADULT";var o=$.Deferred();u();return o.promise()},leftTicketInit:function(){return this.get("otn/leftTicket/init").then(this.getCaptchaTypeFromData.bind(this,"query"))},autoSubmitOrderRequest:function(t,n,r,i){var s=i?"0X00":"ADULT";var o=this.getPassengerTickets(n,r);var u=this.getOldPassengers(n);var a=t.queryLeftNewDTO.start_train_date;if(!a.indexOf("-")>-1){a=a.substring(0,4)+"-"+a.substring(4,6)+"-"+a.substring(6,8)}var f=this.getGlobalState("_json_att");f=f?"&_json_att="+encodeURIComponent(f):"";var l={secretStr:decodeURIComponent(t.secretStr),train_date:a,tour_flag:"dc",purpose_codes:s,query_from_station_name:t.queryLeftNewDTO.from_station_name,query_to_station_name:t.queryLeftNewDTO.to_station_name,cancel_flag:2,bed_level_order_num:"000000000000000000000000000000",passengerTicketStr:o,oldPassengerStr:u};return this.ajax("otn/confirmPassenger/autoSubmitOrderRequest",{type:"post",data:l,header:{Referer:"https://kyfw.12306.cn/otn/leftTicket/init"}})},getQueueCountAsync:function(t,n,r){var i=t.queryLeftNewDTO;var s="otn/confirmPassenger/getQueueCountAsync";var o=new Date;var u=+i.start_train_date.slice(0,4);var a=+i.start_train_date.slice(4,6)-1;var f=+i.start_train_date.slice(6,8);o.setFullYear(u,a,f);var l={train_date:o.toString(),train_no:i.train_no,stationTrainCode:i.station_train_code,seatType:n,fromStationTelecode:i.from_station_telecode,toStationTelecode:i.to_station_telecode,leftTicket:i.yp_info,purpose_codes:"ADULT",isCheckOrderInfo:r};return this.ajax(s,{type:"post",data:l,header:{Referer:"https://kyfw.12306.cn/otn/leftTicket/init"}})},confirmSingleForQueueAsys:function(t,n,r,i,s){function l(e){if(!(e&&e.data&&e.data.submitStatus)){c.apply(null,arguments)}else{a.resolve.apply(a,arguments)}}function c(e){a.reject.apply(a,arguments)}function d(){var e={passengerTicketStr:o,oldPassengerStr:u,randCode:i||"",purpose_codes:"ADULT",key_check_isChange:t[1],leftTicketStr:t[2],train_location:t[0],choose_seats:s.choose_seats||"",seatDetailType:""};if(h!=="1"){e.tour_flag="dc"}f.ajax("otn/confirmPassenger/"+p,{type:"post",data:e,header:{Referer:"https://kyfw.12306.cn/otn/leftTicket/init"}}).then(l,c)}var o=this.getPassengerTickets(n,r);var u=this.getOldPassengers(n);s=s||{};var a=$.Deferred();var f=this;var h=t[3];var p=h==="1"?"confirmSingleForQueueAsys":"confirmSingle";d();return a.promise()},initNoComplete:function(){if(window.secKillOn){return $.Deferred().resolve()}var t="otn/queryOrder/initNoComplete";return this.post(t)},queryMyOrderNoComplete:function(){return this.initNoComplete().then(this._queryMyOrderNoComplete.bind(this))},_queryMyOrderNoComplete:function(){function n(e){var t=$.Deferred();if(e&&e.data&&e.data.to_page=="cache"){return t.resolve.apply(t,arguments)}return t.reject.apply(t,arguments)}var t="otn/queryOrder/queryMyOrderNoComplete";return this.post(t).then(undefined,n)},cancelNoCompleteMyOrder:function(t,n){function u(e){console.log("alwaysFunc:",arguments);if(e.status){if(e&&e.data&&e.data.existError=="N"){r.resolve(arguments)}else{r.reject.apply(r,arguments)}}else{r.reject.apply(r,arguments)}}var r=$.Deferred();var i=n==="cancel_resign"?"cancel_resign":"cancel_order";var s="otn/queryOrder/cancelNoCompleteMyOrder",o={cancel_flag:i,sequence_no:t};this.post(s,o).then(u);return r.promise()},_convert12306TicketToConfirmSingleSuccess:function(t){var n=t.stationTrainDTO.start_time.split(" ")[1].replace(/:/g,""),r=t.stationTrainDTO.arrive_time.split(" ")[1].replace(/:/g,"");var i={passenger_id_no:t.passengerDTO.passenger_id_no,ticket_status_name:t.ticket_status_name,train_date:t.train_date.split(" ")[0].replace(/-/g,""),seat_name:t.seat_name,to_station_telecode:t.stationTrainDTO.to_station_telecode,coach_no:t.caach_no,pay_limit_time:t.pay_limit_time.replace(/[-:\s]/g,""),start_time:n.substr(0,4),confirm_flag:t.confirm_flag,print_eticket_flag:t.print_eticket_flag,passenger_name:t.passengerDTO.passenger_name,coach_name:t.coach_name,cancel_flag:t.cancel_flag,passenger_id_type_name:t.passengerDTO.passenger_id_type_name,limit_time:t.limit_time.replace(/[-:\s]/g,""),lose_time:t.pay_limit_time.replace(/[-:\s]/g,""),ticket_price:t.ticket_price/100+"",seat_type_code:t.seat_type_code,return_flag:t.return_flag,resign_flag:t.resign_flag,ticket_type_code:t.ticket_type_code,batch_no:t.batch_no,seat_flag:t.seat_flag,ticket_status_code:t.ticket_status_code,station_train_code:t.stationTrainDTO.station_train_code,reserve_time:t.reserve_time.replace(/[-:\s]/g,""),pay_mode_code:t.pay_mode_code,passenger_id_type_code:t.passengerDTO.passenger_id_type_code,distance:t.stationTrainDTO.distance,arrive_time:r.substr(0,4),from_station_telecode:t.stationTrainDTO.from_station_telecode,eticket_flag:t.print_eticket_flag,flat_msg:"",seat_no:t.seat_no,sequence_no:t.sequence_no};return i},convert12306OrderTicket3WToConfirmSingleSuccessMobile:function(t){var n=this;var r={succ_flag:"1",error_msg:"",isSuccessful:true,ticketResult:[]};var i=t.data&&t.data.orderDBList;if(i){r.ticketResult=i[0].tickets.map(function(e){return n._convert12306TicketToConfirmSingleSuccess(e)})}var s={myTicketList:r.ticketResult};r["orderList"]=[s];return r},convert12306OrderTicket3WToOrderTicketMobile:function(t){var n=this;var r={succ_flag:"1",error_msg:"",isSuccessful:true,orderList:[{myTicketList:[]}]};var i=t.data&&t.data.orderDBList;if(i){r.orderList[0].myTicketList=i[0].tickets.map(function(e){return n._convert12306TicketToConfirmSingleSuccess(e)})}return r},parseYpInfo:function(t){var n={},r=h._seat;var i=t.seat_types;$.each(r,function(e,r){var s=t[r+"_num"];if(s&&s!=="--"){var o=e;if(o==="noSeat"){if(i.replace(/[^O]/g,"").length>i.replace(/[^1]/g,"").length){o="O"}else{o="1"}}n[e]={seatTypeCode:o,ticket:s==="æ"?21:+s||0}}});return n},getPriorSeatType:function(t,n){var r={result:"-1",origin:n.seats[0],seats:n.seats};n["ypObj"]=t;if(!t){r.result="parseYpInfoFail";return r}var i;n.seats.some(function(e,s){i=t[e]||{};if(i.ticket>=Number(n.ticket_type_order_num)){r.result=i["seatTypeCode"];r.origin=e;return true}return false});return r},queryLeftTicketSuccessHandler:function(t,n){if(!t.yp_info)return t.message||"noYpInfoProvided";var r=this.parseYpInfo(t);var i=this.getPriorSeatType(r,n);var s=i.result;n.priorSeatType=i;if(s==="parseYpInfoFail")s=i.origin;if(i.result==="-1"){return"ypNotEnough"}return true},findOutParticularCheci:function(t,n,r){function u(){var e=null;if(s.length===0)return e;s.some(function(t,n){var i=t.queryLeftNewDTO;var s=i.start_train_date+i.start_time;s=s.replace(":","");if(s===r){e=t;return true}return false});e=e||s[0];return e}var i=null;var s=[];var o=n.split("/");t.some(function(e,t){if(o.indexOf(e.queryLeftNewDTO.station_train_code)>=0){s.push(e);return false}return false});i=u();return i},getYpInfoOfOneTrainFromResp:function(t,n){var r=this.analysisYpInfoFromResp(t);var i={};for(var s in r){if(r[s].queryLeftNewDTO.station_train_code==n){i=r[s].queryLeftNewDTO;break}}l("getYpInfoOfOneTrainFromResp:",this.getSeatYpMap3W(i));return this.getSeatYpMap3W(i)},getSeatYpMap3W:function(t){var n=t.seat_types;var r=n.split("").sort();var i={};for(var s=0;s<r.length;s++){if(r[s]==r[s+1]){r[s]="0";break}}r.forEach(function(e){if(t[Common.seatTypeMap[e]]=="æ"){i[h._seat_type[e]]=21}else if(t[Common.seatTypeMap[e]]=="æ "){i[h._seat_type[e]]=0}else{i[h._seat_type[e]]=+t[Common.seatTypeMap[e]]}});if("0"in i){i["-"]=i["0"];delete i["0"]}return i},analysisYpInfoFromResp:function(t){var n=[];if(!(t&&t.data&&t.data.result&&t.data.map)){return n}return this.analysisYpInfo(t.data.result,t.data.map)},analysisYpInfo:function(t,n){var r=t,i=n;var s=[];for(var o=0;o<r.length;o++){var u={};var a=r[o].split("|");if(a.length!==38&&a.length!==39){console.warn("Error: analysisYpInfo result schema changed!, last length 38 or 39, current:",a.length)}u.secretHBStr=a[36];u.secretStr=a[0];u.buttonTextInfo=a[1];var f={};f.train_no=a[2];f.station_train_code=a[3];f.start_station_telecode=a[4];f.end_station_telecode=a[5];f.from_station_telecode=a[6];f.to_station_telecode=a[7];f.start_time=a[8];f.arrive_time=a[9];f.lishi=a[10];f.canWebBuy=a[11];f.yp_info=a[12];f.start_train_date=a[13];f.train_seat_feature=a[14];f.location_code=a[15];f.from_station_no=a[16];f.to_station_no=a[17];f.is_support_card=a[18];f.controlled_train_flag=a[19];f.gg_num=a[20]?a[20]:"--";f.gr_num=a[21]?a[21]:"--";f.qt_num=a[22]?a[22]:"--";f.rw_num=a[23]?a[23]:"--";f.rz_num=a[24]?a[24]:"--";f.tz_num=a[25]?a[25]:"--";f.wz_num=a[26]?a[26]:"--";f.yb_num=a[27]?a[27]:"--";f.yw_num=a[28]?a[28]:"--";f.yz_num=a[29]?a[29]:"--";f.ze_num=a[30]?a[30]:"--";f.zy_num=a[31]?a[31]:"--";f.swz_num=a[32]?a[32]:"--";f.srrb_num=a[33]?a[33]:"--";f.yp_ex=a[34];f.seat_types=a[35];f.exchange_train_flag=a[36];f.houbu_train_flag=a[37];if(a.length>38){f.houbu_seat_limit=a[38]}f.from_station_name=i[a[6]];f.to_station_name=i[a[7]];u.queryLeftNewDTO=f;s.push(u)}return s},checkAliPayResultByPcUrl:function(t){function i(e,t){var r=t.match(/"status":"([^"]*)"/),i="";if(r&&r.length){i=r[1];console.log("status:",i);switch(i){case"3":case"2":n.reject("noPay");break;case"0":n.resolve("paySuc")}}n.reject("payNoResult")}function s(e){n.reject.apply(n,arguments)}console.log("checkAliPayResultByPcUrl:",arguments);var n=$.Deferred();var r=t+(new Date).getTime();this.get(r).then(i,s);return n.promise()},queryLeftTicket:function(t,n,r,i){var s=this.getStationCode;var o=/[a-zA-Z]/.test(t);var u=o?t:s(t),a=o?n:s(n);var f=this,l=Common.getStoredInfo("leftTicketData");var c;if(l&&l.key.from==u&&l.key.to==a&&l.key.date==r){c=true}else{c=false}if(c){var h=l.saveTime,p=(new Date).getTime().toString(),d=1*60*1e3;if(p-h<d){var v=f.analysisYpInfo(l.data.data.result,l.data.data.map);l.data.data=v;return l.data}else{return f.leftTicketQuery(u,a,r,i)}}else{return f.leftTicketQuery(u,a,r,i)}},resignTicket:function(t,n,r){function f(){return i.post(a,u).then(l,c)}function l(e){if(e&&e.data&&e.data.existError==="N"){s.resolve.apply(s,["ä¸å­å¨æªå®æè®¢å"])}else if(o&&e&&e.data&&e.data.existError==="Y"){if(e.data.errorMsg.indexOf("å­å¨æªå®æè®¢å")>-1){s.resolve.apply(s,["å­å¨æªå®æè®¢å"])}else{o--;setTimeout(f,2*1e3)}}else{c.apply(null,arguments)}}function c(e){s.reject.apply(s,arguments)}var i=this;var s=$.Deferred(),o=2;var u={ticketkey:t,sequenceNo:n,changeTSFlag:r};var a="otn/queryOrder/resginTicket";f();return s.promise()},confirmResign:function(t,n,r,i,s,o){function h(){return u.post(c,l).then(p,v)}function p(e){if(e&&e.data&&e.data.submitStatus){a.resolve.apply(a,arguments)}else if(f&&e&&!e.data.submitStatus&&e.data.errMsg.indexOf("éªè¯ç è¾å¥éè¯¯")>-1){f--;var t=false;d.selfCoding(t,{needRandCode:true}).then(function(e){l.randCode=e;h()})}else if(f&&e&&!e.data.submitStatus){f--;h()}else{v.apply(null,arguments)}}function v(e){a.reject.apply(a,arguments)}var u=this,a=$.Deferred(),f=2;var l={passengerTicketStr:t,oldPassengerStr:n,tour_flag:"gc",randCode:i,REPEAT_SUBMIT_TOKEN:r||u.submitToken(),key_check_isChange:u.keyChange(),purpose_codes:"00",train_location:s.queryLeftNewDTO.location_code,choose_seats:o||"",seatDetailType:"000"};var c="otn/confirmPassenger/confirmResign";h();return a.promise()},confirmResignForQueue:function(t,n,r,i,s,o){function h(){return u.post(c,l).then(p,v)}function p(e){if(e&&e.data&&e.data.submitStatus){a.resolve.apply(a,arguments)}else if(f&&e&&!e.data.submitStatus&&e.data.errMsg.indexOf("éªè¯ç è¾å¥éè¯¯")>-1){f--;var t=false;d.selfCoding(t,{needRandCode:true}).then(function(e){l.randCode=e;h()})}else if(f&&e&&!e.data.submitStatus){f--;h()}else{v.apply(null,arguments)}}function v(e){a.reject.apply(a,arguments)}var u=this,a=$.Deferred(),f=2;var l={passengerTicketStr:t,oldPassengerStr:n,randCode:i,purpose_codes:"00",key_check_isChange:u.keyChange(),leftTicketStr:s.queryLeftNewDTO.yp_info,train_location:s.queryLeftNewDTO.location_code,choose_seats:o||"",seatDetailType:"000",roomType:"00",REPEAT_SUBMIT_TOKEN:r||u.submitToken()};var c="otn/confirmPassenger/confirmResignForQueue";h();return a.promise()},resultOrderForGcQueue:function(t){function s(e){if(e&&e.data&&e.data.submitStatus){return e}else{return o(arguments)}}function o(e){return n.reject.apply(n,arguments)}var n=$.Deferred();var r="otn/confirmPassenger/resultOrderForGcQueue";var i={orderSequence_no:t};return this.post(r,i).then(s,o)},submitOrder:function(t,n,r){function u(){return s}var i=this;var s=i.querySelectedTrainInfo(t,n);var o=r==="gc"?"gc":"dc";if(!s)return $.Deferred().reject("noTrainData");if(s.buttonTextInfo!="é¢è®¢"){return $.Deferred().reject({messages:[s.buttonTextInfo]})}return this.checkUser().then(this.submitOrderRequest.bind(this,s,o,false)).then(this.getTokens.bind(this,"Gc")).then(u)},querySelectedTrainInfo:function(t,n){var r=t.find(function(e){return e.queryLeftNewDTO&&e.queryLeftNewDTO.station_train_code==n});return r},parseReturnMoney:function(t){var n=t.indexOf(":"),r=t.indexOf(","),i=t.slice(n+1,r);return i},parseReturnMoneyRate:function(t){var n=t.indexOf(":"),r=t.indexOf(","),i=t.slice(n+2,r-1);return i},parseDTOJson:function(t){var n=t.replace(/[\\]/g,"");var r=JSON.parse(n);return r},getReturnMoney:function(t){function o(e,t){e=e||t;if(typeof e!=="string"){r.reject.apply(r,arguments)}var i=null,s=null,o=null,a=null,f=null,l=null,c=null;var h,p,d,v,m,g;if(e){h=e.match(/'return_fact':(\d+).(\d+),/gi);p=e.match(/'return_total':(\d+).(\d+),/gi);d=e.match(/'return_cost':(\d+).(\d+),/gi);v=e.match(/'return_rate':'(\d+)',/gi);l=e.match(/parOrderDTOJson = '(.*)';/i);c=e.match(/oldTicketDTOJson = '(.*)';/i);if(h&&h.length>=1){i=n.parseReturnMoney(h[0])}if(p&&p.length>=1){s=n.parseReturnMoney(p[0])*p.length;s=s.toString()}if(d&&d.length>=1){o=n.parseReturnMoney(d[0])}if(v&&v.length>=1){a=n.parseReturnMoneyRate(v[0])}if(l&&l.length>=1){m=n.parseDTOJson(l[1])}if(c&&c.length>=1){g=n.parseDTOJson(c[1])}var y=m,b=y.sequence_no;f={sequence_no:b,returnMoneyFact:i,returnMoneyTotal:s,returnMoneyCost:o,returnMoneyRate:a,parOrderDTOJson:m,oldTicketDTOJson:g};Common.storeInfo("returnMoneyObj",f,true);r.resolve.apply(r,arguments)}else{u.apply(null,arguments)}}function u(){r.reject.apply(r,arguments)}var n=this,r=$.Deferred();var i=t?"otn/payOrder/init":"otn//payOrder/init?random="+Math.random();var s={type:"post",dataType:"html"};this.ajax(i,s).then(o,u);return r.promise()},confirmResignOrder:function(t,n,r,i,s,o){var u=this;if(u.isAsync()=="1"){return u.confirmResignForQueue(t,n,r,i,s,o).then(d.getWaitTimeForResign.bind(d)).then(u.resultOrderForGcQueue.bind(u)).then(u.getReturnMoney.bind(u,false)).then(u.queryMyOrderNoComplete.bind(u))}return u.confirmResign(t,n,r,i,s,o).then(u.getReturnMoney.bind(u)).then(u.queryMyOrderNoComplete.bind(u))},getPayParams:function(t){function n(e){l("_getPayParams fail:",arguments);if(e==="existErrorUndefined"){return this.queryMyOrderNoComplete().then(this._getPayParams.bind(this,t))}}return this._getPayParams(t).then(undefined,n.bind(this))},_getPayParams:function(t){function a(e){var t="otn/queryOrder/continuePayNoCompleteMyOrder";return n.post(t,u)}function f(e){if(e){if(e.data&&e.data.existError=="N")return e;else return i.reject("existErrorUndefined")}else{return i.reject.apply(i,arguments)}}function l(){var e="otn/payOrder/paycheckNew",t={batch_nos:"",coach_nos:"",seat_nos:"",passenger_id_types:"",passenger_id_nos:"",passenger_names:"",insure_price_all:"",insure_types:"",if_buy_insure_only:"N",hasBoughtIns:""};return n.post(e,t)}function c(e){if(e&&e.data&&e.data.flag){var t=e.data.payForm;return t}else{return i.reject.apply(i,arguments)}}function h(e){var t=e.epayurl,i={interfaceName:e.interfaceName,interfaceVersion:e.interfaceVersion,tranData:e.tranData,merSignMsg:e.merSignMsg,appId:e.appId,transType:e.transType};r=t;return n.post(t,i)}function p(e,t){if(typeof t==="string"&&t.indexOf("form")>-1){var n=Common.getObjFromInputsWithFormAttributes(t);n=Common.adaptAction(n,r);console.log("epaySuc params:",arguments);return i.resolve(n)}else{return i.reject.apply(i,arguments)}}var n=this;var r="";var i=$.Deferred();var s=t.sequence_no,o=t.arrive_time_str,u={sequence_no:s,pay_flag:"pay",arrive_time_str:o};if(t.gq_flag){u.pay_flag="resign"}return a(s).then(f).then(l).then(c).then(h).then(p)},queryFinishOrderTrack:function(t){function s(e){if(e&&e.data){if(e.data.flag){n.resolve(e.data)}else{n.reject(e.messages&&e.messages[0]||"è®¢åå·æªå¹éå·²æ¯ä»è®¢å")}}else{n.reject.apply(n,arguments)}return n.promise()}var n=$.Deferred(),r="otn/orderdetail/queryOrderDetail";var i={sequence_no:t};return this.post(r,i).then(s)},payConfirm:function(t,n,r,i,s){function a(e){if(e&&e.data&&e.data.resignStatus){return o.resolve.apply(o,arguments)}else{return f(arguments)}}function f(){return o.reject.apply(o,arguments)}var o=$.Deferred();var u={parOrderDTOJson:JSON.stringify(n),oldTicketDTOJson:JSON.stringify(r),sequence_no:i,batch_no:s};return this.post(t,u).then(a,f)},getUserInfo:function(){var t="otn/modifyUser/initQueryUserInfoApi",n={type:"post",dataType:"html"};return this.ajax(t,n)},passengersQuery:function(){var t="otn/passengers/query";var n={pageIndex:1,pageSize:30};return this.post(t,n)},getUserStatus:function(){function r(e,t){e=e||t;var n={};var r;try{r=e.match(/notify_TWO_1=\'(.*)\'/);n.notify_TWO_1=r?r[1]:null;r=e.match(/notify_TWO_2=\'(.*)\'/);n.notify_TWO_2=r?r[1]:null;r=e.match(/notify_THREE=\'(.*)\'/);n.notify_THREE=r?r[1]:null;r=e.match(/notify_FOUR=\'(.*)\'/);n.notify_FOUR=r?r[1]:null;r=e.match(/notify_FIVE=\'(.*)\'/);n.notify_FIVE=r?r[1]:null}catch(i){}return n}var t="otn/index/initMy12306",n={type:"post",dataType:"html"};return this.ajax(t,n).then(r)},getUserMobileVerification:function(){var t="otn/userSecurity/bindTel",n={type:"post",dataType:"html"};return this.ajax(t,n)},checkMobileCode:function(t,n){function s(e){var t=$.Deferred();if(e&&e.data&&e.data.errorMsg)t.reject(e.data.errorMsg);else t.resolve(e);return t}var r="otn/userSecurity/checkMobileCode",i={type:"post",async:false,data:{mobile:t,randCode:n}};return this.ajax(r,i).then(s)},getMobileCode:function(t){var n="otn/userSecurity/getMobileCode",r={mobile:t};return this.post(n,r)},editUserMobile:function(t,n){var r="otn/userSecurity/doEditTel",i={mobile_no:t,_loginPwd:n};return this.post(r,i)},getMyPassengers:function(){if(this.submitToken())return this._getMyPassengers();return this.getPsgTokens().then(this._getMyPassengers.bind(this))},_getMyPassengers:function(){function n(e){var t=$.Deferred();if(e&&e.data&&e.data.normal_passengers){return e.data.normal_passengers}else{return t.reject.apply(t,arguments)}}var t="otn/confirmPassenger/getPassengerDTOs";return this.post(t).then(n)},querySinglePassenger:function(t){function i(e,t){var n=$(t);var r=n.find("#_editForm");if(r.length===0)return $.Deferred().reject("ç¨æ·æªç»å½");var i=r.serializeArray();var s={};i.forEach(function(e,t){s[e.name]=e.value});var o="";var u=n.find("span.label");for(var a=0;a<u.length;a++){if(u[a].innerText.trim()==="æ ¸éªç¶æï¼"){o=u.eq(a).next("div").find("span").first().text().trim();break}}s["authorizeStatus"]=o;return s}function s(e){return e}var n={passenger_name:"",passenger_id_type_code:"",passenger_id_no:"",passenger_type:""};t=$.extend(n,t);var r="otn/passengers/show";return this.post(r,t).then(i,s)},addMyPassengers:function(t){function i(e){var t=$.Deferred();if(e&&e.data&&e.data.flag){return e.data.message}else{var n=Common.getError3W(e);return t.reject(n)}}var n={passenger_name:"",sex_code:"M",_birthDate:"",country_code:"CN",passenger_id_type_code:"1",passenger_id_no:"",mobile_no:"",phone_no:"",email:"",address:"",postalcode:"",passenger_type:"","studentInfoDTO.province_code":"","studentInfoDTO.school_code":"","studentInfoDTO.school_name":"","studentInfoDTO.department":"","studentInfoDTO.school_class":"","studentInfoDTO.student_no":"","studentInfoDTO.school_system":"","studentInfoDTO.enter_year":"","studentInfoDTO.preference_card_no":"","studentInfoDTO.preference_from_station_name":"","studentInfoDTO.preference_from_station_code":"","studentInfoDTO.preference_to_station_name":"","studentInfoDTO.preference_to_station_code":""};n.passenger_name=t.name;n.passenger_id_type_code=t.card_type;n.passenger_id_no=t.card_no;n.passenger_type=t.passenger_type;if(t.province_code){n["studentInfoDTO.province_code"]=t.province_code;n["studentInfoDTO.school_code"]=t.school_code;n["studentInfoDTO.student_no"]=t.student_no;n["studentInfoDTO.school_system"]=t.school_system;n["studentInfoDTO.enter_year"]=t.enter_year;n["studentInfoDTO.preference_from_station_code"]=t.preference_from_station_code;n["studentInfoDTO.preference_to_station_code"]=t.preference_to_station_code}var r="otn/passengers/add";return this.post(r,n).then(i.bind(this))},editMyPassengers:function(t){function i(e){var t=$.Deferred();if(e&&e.data&&e.data.flag){return e.data.message}else{return t.reject.apply(t,arguments)}}var n={passenger_name:t.name,old_passenger_name:t.old_name,sex_code:t.sex_code,_birthDate:t.born_date,country_code:"CN",passenger_id_type_code:t.card_type,old_passenger_id_type_code:t.old_card_type,passenger_id_no:t.card_no,old_passenger_id_no:t.old_card_no,mobile_no:"",phone_no:"",email:"",address:"",postalcode:"",passenger_type:t.passenger_type,"studentInfoDTO.province_code":t.province_code,"studentInfoDTO.school_code":t.school_code,"studentInfoDTO.school_name":"","studentInfoDTO.department":"","studentInfoDTO.school_class":"","studentInfoDTO.student_no":t.student_no,"studentInfoDTO.school_system":t.school_system,"studentInfoDTO.enter_year":t.enter_year,"studentInfoDTO.preference_card_no":"","studentInfoDTO.preference_from_station_name":"","studentInfoDTO.preference_from_station_code":t.preference_from_station_code,"studentInfoDTO.preference_to_station_name":"","studentInfoDTO.preference_to_station_code":t.preference_to_station_code};t=n;var r="otn/passengers/edit";return this.post(r,t).then(i)},deleteMyPassengers:function(t,n,r){var i="otn/passengers/delete",s={passenger_name:t,passenger_id_type_code:n,passenger_id_no:r,isUserSelf:"N"};return this.post(i,s)},queryTicketPrice:function(t){var n="otn/leftTicket/queryTicketPrice";t={train_no:t.train_no,from_station_no:t.from_station_no,to_station_no:t.to_station_no,seat_types:t.seat_types,train_date:t.train_date};return this.get(n,t)},getMyOrder:function(){function t(e){return $.Deferred().resolve(e.data)}return this.queryMyOrderNoComplete.apply(this,arguments).then(t)},getMyOldOrder_advanced:function(){function o(e){return e}function u(e){return Common.getError3W(e,"æå¡å¨ç¹å¿ï¼è¯·ç¨ååè¯")}var t,n;var r=new Date;t=Common.formatDate(r);var i=60*24*3600*1e3;var s=new Date(r.valueOf()-i);n=Common.formatDate(s);return this.getMyOldOrder(n,t).then(o,u)},getMyOldOrder:function(t,n,r,i){var s=arguments;i=typeof i=="number"?i:0;var o={queryType:1,queryStartDate:t,queryEndDate:n,come_from_flag:"my_order",pageSize:8,pageIndex:i,query_where:"G",sequeue_train_name:r||""};var u="otn/queryOrder/queryMyOrder";var a=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=t.data,r=t.status;var i=$.Deferred();if(r&&n&&n.OrderDTODataList)return n;else return i.reject.apply(i,s)};return this.post(u,o).then(a)},returnTicketAffirm:function(t){var n="otn/queryOrder/returnTicketAffirm",r={batch_no:t.batch_no,coach_name:t.coach_name,coach_no:t.coach_no,from_station_name:t.from_station_name,passenger_name:t.passenger_name,seat_name:t.seat_name,seat_no:t.seat_no,seat_type_name:t.seat_type_name,sequence_no:t.sequence_no,start_time:t.start_time,start_train_date_page:t.start_train_date_page,to_station_name:t.to_station_name,train_code:t.train_code,train_date:t.train_date};return this.post(n,r)},deleteMyFinishedOrder_advanced:function(t){function i(e){var t="otn/queryOrder/returnTicket";var n=$.Deferred();if(e.data&&e.data.submitStatus==false){return n.reject(e.data)}else{return r.post(t)}}var n="otn/queryOrder/returnTicketAffirm";var r=this;return this.post(n,t).then(i)},deleteMyFinishedOrder:function(t){function s(){var e=void 0;if(t.tickets&&t.tickets.length>0){e={batch_no:t.tickets[t.index].batch_no,coach_name:t.tickets[t.index].coach_no,coach_no:t.tickets[t.index].coach_no,from_station_name:t.from_station_name,passenger_name:t.tickets[t.index].passenger_name,seat_name:t.tickets[t.index].seat_name,sequence_no:t.sequence_no,start_time:"1970-01-01"+" "+t.start_time+":00",start_train_date_page:t.start_train_date_page,to_station_name:t.to_station_name,train_code:t.train_no,seat_type_name:t.tickets[t.index].seat_type_name,seat_no:t.tickets[t.index].seat_no,train_date:t.train_date.split(" ")[0]+" "+"00:00:00"}}else{e={batch_no:t.batch_no,coach_name:t.coach_no,coach_no:t.coach_no,from_station_name:t.from_station,passenger_name:t.passenger_name,seat_name:t.seat_name,sequence_no:t.sequence_no,start_time:"1970-01-01"+" "+t.start_time+":00",to_station_name:t.to_station,train_code:t.train_no,seat_type_name:t.seat_type_name,seat_no:t.seat_no,train_date:t.train_date.split(" ")[0]+" "+"00:00:00"}}return e}function o(e){var t="otn/queryOrder/returnTicket";var n=$.Deferred();if(e&&e.status){if(e.data&&e.data.submitStatus==false){return n.reject(e.data)}else{return i.post(t)}}else{return n.reject.apply(n,arguments)}}var n=s(),r="otn/queryOrder/returnTicketAffirm";var i=this;return this.post(r,n).then(o)},handleSuccessResultWithExistError:function(t,n){var r=$.Deferred();if(!(t&&t.data&&t.data.existError=="Y")){return r.resolve(t)}var i=$.isArray(t.messages)&&t.messages[0];i=i||n||"æå¡å¨ç¹å¿è¯·ç¨ååè¯";return r.reject(i)},changePassword_checkByEmail:function(t,n,r,i,s){function a(e){l("changePassword_checkByEmail success:",arguments);return this.handleSuccessResultWithExistError(e,"æ¾åå¯ç å¤±è´¥ï¼è¯·ç¨åéè¯")}function f(e){l("changePassword_checkByEmail fail:",arguments);if(typeof e==="string"&&e.trim()=="æ¾åå¯ç å¤±è´¥ã"){e="æ¾åå¯ç å¤±è´¥ãæ¨å¯è½ä¸æ¯ç¨è¯¥é®ç®±åè¯ä»¶æ³¨åçè´¦å·ï¼æèæ¯ä¸æ¯å¡«éäºï¼ï¼è¯·ç¡®è®¤ååè¯ã"}return e}var o="otn/forgetPassword/findPasswordByEmail";var u={"userDTO.email":t,"userDTO.loginUserDTO.id_type_code":n,"userDTO.loginUserDTO.id_no":r,randCode:i,randCode_validate:s};return this.post(o,u).then(a.bind(this)).then(undefined,f.bind(this))},changePassword_checkByPhone_checkUserInfo:function(t,n,r,i){var s="otn/forgetPassword/checkUserInfo";var o={mobile_no:t,"loginUserDTO.id_type_code":n,"loginUserDTO.id_no":r,randCode:i};return this.post(s,o)},changePassword_checkByPhone_mobileCode:function(t,n,r){var i="otn/forgetPassword/mobileCode";var s={mobile_no:t,"loginUserDTO.id_type_code":n,"loginUserDTO.id_no":r};return this.post(i,s)},changePassword_checkByPhone_checkMobileCode:function(t,n,r,i){var s="otn/forgetPassword/checkMobileCode";var o={"userDTO.mobile_no":t,"userDTO.loginUserDTO.id_type_code":n,"userDTO.loginUserDTO.id_no":r,randCode:i};return this.post(s,o)},changePassword_checkByPhone_editPwdByMobileCode:function(t,n,r,i,s){var o="otn/forgetPassword/editPwdByMobileCode";var u={"userDTO.mobile_no":t,"userDTO.loginUserDTO.id_type_code":n,"userDTO.loginUserDTO.id_no":r,"userDTO.password_new":i,confirmPassWord:s};return this.post(o,u)},changePassword_getTokens:function(){var t="otn/forgetPassword/initforgetMyPassword",n={type:"post",dataType:"html"};return this.ajax(t,n)},modifyUserInfo:function(t,n,r){var i={"userDTO.loginUserDTO.user_name":n.user_name,"userDTO.loginUserDTO.name":t.name,"userDTO.loginUserDTO.id_type_code":t.card_type,"userDTO.loginUserDTO.id_no":t.card_no,"userDTO.loginUserDTO.user_type":t.passenger_type,"userDTO.password":t.pass_word,isInputPassword:r,"userDTO.studentInfoDTO.province_name":t.province_name,"userDTO.studentInfoDTO.province_code":t.province_code,"userDTO.studentInfoDTO.school_name":t.school_name,"userDTO.studentInfoDTO.school_code":t.school_code,"userDTO.studentInfoDTO.department":"","userDTO.studentInfoDTO.school_class":"","userDTO.studentInfoDTO.student_no":t.student_no,"userDTO.studentInfoDTO.school_system":t.school_system,"userDTO.studentInfoDTO.enter_year":t.enter_year,"userDTO.studentInfoDTO.preference_card_no":"","userDTO.studentInfoDTO.preference_from_province_code":"","userDTO.studentInfoDTO.preference_to_province_code":"","userDTO.studentInfoDTO.preference_from_station_name":"","userDTO.studentInfoDTO.preference_from_station_code":t.preference_from_station_code,"userDTO.studentInfoDTO.preference_to_station_name":"","userDTO.studentInfoDTO.preference_to_station_code":t.preference_to_station_code};var s="otn/modifyUser/saveModifyUserInfo";return this.post(s,i)},checkUserName:function(t){function i(e){l("checkUserName success",e);if(e.status){return e.data?Promise.reject():Promise.resolve()}else{return Promise.reject(e)}}function s(e){l("checkUserName fail",e);return Promise.reject(e)}var n="otn/regist/checkUserName",r={data:{user_name:t},type:"get",dataType:"html"};return this.ajax(n,r).then(i,s)},logout:function(){return this.get("https://kyfw.12306.cn/otn/login/loginOut")},getRandCode:function(t){var n="otn/regist/getRandCode";var r=t.id_no.replace(/^\d{6}(\d{4})(\d{2})(\d{2})(.{4})$/,"$1-$2-$3");var i={"loginUserDTO.user_name":t.user_name,"userDTO.password":t.password,confirmPassWord:t.confirmPassWord,"loginUserDTO.name":t.name,"loginUserDTO.id_type_code":"1","loginUserDTO.id_no":t.id_no,"userDTO.country_code":"CN","userDTO.born_date":r,"userDTO.email":"","userDTO.mobile_no":t.mobile_no,passenger_type:"1"};var s={data:i,type:"post",dataType:"html"};return this.ajax(n,s)},subDetail:function(t){var n="otn/regist/subDetail";var r=t.id_no.replace(/^\d{6}(\d{4})(\d{2})(\d{2})(.{4})$/,"$1-$2-$3");var i={"loginUserDTO.user_name":t.user_name,"userDTO.password":t.password,confirmPassWord:t.confirmPassWord,"loginUserDTO.name":t.name,"loginUserDTO.id_type_code":"1","loginUserDTO.id_no":t.id_no,"userDTO.country_code":"CN","userDTO.born_date":r,"userDTO.email":"","userDTO.mobile_no":t.mobile_no,passenger_type:"1",randCode:t.randCode};var s={data:i,type:"post",dataType:"html"};return this.ajax(n,s)},studentPassengerDetail:function(t){function i(e,n,r,i){if(n&&r==200){var s=/<select.*name="studentInfoDTO\.province_code">[\s\S]*?selected=.*<span>(.*)<\/span>/;var o=/<select.*name="studentInfoDTO\.province_code">[\s\S]*?selected.*value="(.*)"/;var u=/<input name="studentInfoDTO.school_code".*value="(.*)"/;var a=/<input.*name="studentInfoDTO.school_name".*value="(.*?)"/;var f=/<input id="student_no" name="studentInfoDTO.student_no".*value="(.*?)"/;var l=/<select.*name="studentInfoDTO.school_system"[\s\S]*?selected=.*<span>(.*)<\/span>/;var c=/<select.*name="studentInfoDTO.enter_year">[\s\S]*selected="selected".*<span>(.*)<\/span>/;var h=/<input.*name="studentInfoDTO.preference_from_station_name".*value="(.*?)"/;var p=/<input name="studentInfoDTO.preference_from_station_code".*value="(.*)"/;var d=/<input.*name="studentInfoDTO.preference_to_station_name".*value="(.*?)"/;var v=/<input name="studentInfoDTO.preference_to_station_code".*value="(.*)"/;s=(s.exec(n)||[""]).pop();o=(o.exec(n)||[""]).pop();u=(u.exec(n)||[""]).pop();a=(a.exec(n)||[""]).pop();f=(f.exec(n)||[""]).pop();l=(l.exec(n)||[""]).pop();c=(c.exec(n)||[""]).pop();h=(h.exec(n)||[""]).pop();p=(p.exec(n)||[""]).pop();d=(d.exec(n)||[""]).pop();v=(v.exec(n)||[""]).pop();t.studentExt={};t.studentExt={discountSectionBegin:h||t.studentExt.discountSectionBegin,discountSectionBeginCode:p||t.studentExt.discountSectionBeginCode,discountSectionEnd:d||t.studentExt.discountSectionEnd,discountSectionEndCode:v||t.studentExt.discountSectionEndCode,intendedTime:c||t.studentExt.intendedTime,provinceCode:o||t.studentExt.provinceCode,province:s||t.studentExt.province,schoolName:a||t.studentExt.schoolName,schoolCode:u||t.studentExt.schoolCode,schooling:l||t.studentExt.schooling,studentNo:f||t.studentExt.studentNo}}return t}if(!t&&t.ticketType==2){return $.Deferred().reject("è¯·æ±åæ°éè¯¯")}var n={"æ¤ç§":"B","æ¸¯æ¾³éè¡è¯":"C","å°æ¹¾éè¡è¯":"G","èº«ä»½è¯":1};var r={passenger_name:t.name,passenger_id_type_code:n[t.certType.name]||1,passenger_id_no:t.certNo,passenger_type:3};return this.post("https://kyfw.12306.cn/otn/passengers/show",r).then(i)},passportCaptchaImage64:function(t){return this.get(t)},continuePayNoCompleteMyOrder:function(t){function u(){return n.post(o,s).then(a,f)}function a(e){if(e&&e.data&&e.data.existError==="N"){r.resolve()}else if(i>0){i--;setTimeout(u,2*1e3)}else{f.apply(null,arguments)}}function f(e){r.reject.apply(r,arguments)}var n=this;var r=$.Deferred(),i=3;var s={sequence_no:t.sequence_no,pay_flag:"resign",arrive_time_str:t.arrive_time_str,_json_att:""};var o="otn/queryOrder/continuePayNoCompleteMyOrder";u();return r.promise()},queryQssj:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"wx";if(/^[A-Z]+$/i.test(t)){t=this.getStationName(t)}var r={wx:"https://mobile.12306.cn/weixin/wxcore/queryQssj",hzfw:"http://hzfw.12306.cn/zgzfw/wxcore/queryQssj?type=zgzfw"}[n];return this.ajax(r,{passDFPCheck:true,data:{stationName:t}})},getSameCityCodes:function(t){var n=this;var r=function(t){if(t&&t.data&&t.data.length){return t.data.map(function(e){return n.getStationCode(e.name)})}return $.Deferred().reject(Common.getError3W(t))};return this.queryQssj(t,"wx").then(undefined,this.queryQssj.bind(this,t,"hzfw")).then(r)},loginConf:function(){var t="otn/login/conf";return this.post(t)},uaMtkStatic:function(){var t="passport/web/auth/uamtk-static",n={appid:"otn"};return this.post(t,n)},createQr64:function(){var t="passport/web/create-qr64",n={appid:"otn"};return this.post(t,n)},checkQr:function(t){var n="passport/web/checkqr",r={appid:"otn",uuid:t};return this.post(n,r)},userLogin:function(){var t="otn/login/userLogin";return this.post(t)}};e.exports=k},function(e,t,n){"use strict";function s(){this.loginFirstTimeLimit=25}var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=n(312);s.prototype={constructor:s,init:function(t,n){this.func=t;this.params=n},getLastLoginSuccessTimeOffset:function(){var t=60*60*1e3;var n=Common.getStoredInfo("loginUser")||{};var r=n.timeStampPc||0;t=+(new Date)-r;return t},shouldRunTuskFirst:function(){var t=this.getLastLoginSuccessTimeOffset();if(t>this.loginFirstTimeLimit*60*1e3)return false;return true},runTask:function(){return this.func.apply(null,this.params)},loginAndRunTask:function(){return i.run().then(this.runTask.bind(this))},failDueToNotLoginRunTask:function(){function n(e){var n="";if(e&&(typeof e==="undefined"?"undefined":r(e))==="object"){n=e.type;if(typeof n!=="string"){n=Common.getError3W(e)}}else if(typeof e==="string")n=e;if(n&&/notLogin|ç»å½/.test(n)){return this.loginAndRunTask()}if(n&&n.indexOf("302 moved temporarily")!==-1){return this.loginAndRunTask()}return t.reject.apply(t,arguments)}var t=$.Deferred();return this.runTask().then(undefined,n.bind(this))},run:function(t,n){this.init.apply(this,arguments);if(this.shouldRunTuskFirst())return this.failDueToNotLoginRunTask();else return this.loginAndRunTask()}};var o=new s;e.exports=o.run.bind(o)},function(e,t,n){"use strict";function s(){this.runOnceTaskRunner=null;this.lastLoginResult=null;this.messages={fetchUserInfoFail:"fetchUserInfoFail",notNextTick:"notNextTick",hasLoggedIn:"hasLoggedIn",usernameOrPasswordNotProvided:"usernameOrPasswordNotProvided"}}var r=n(313);var i=n(314);s.prototype={constructor:s,getCachedUserInfo:function(){var t=Common.getUserInfo();if(t&&t.user_name&&t.pwd){return{username:t.user_name,password:t.pwd}}return null},fetchUserInfo:function(){var t=$.Deferred(),n={};if(this.username&&this.password){n={username:this.username,password:this.password};return t.resolve(n)}var r=this.getCachedUserInfo();if(r)return t.resolve(r);var i=Common.getUserInfo()||{};if(!i.user_name&&!i.pwd){return Common.pull12306UserData()}return t.reject(this.messages.usernameOrPasswordNotProvided)},genuineLogin:function(){return(new i).login(this.username,this.password)},genuineLoginRunOnce:function(){function t(e){var t=$.Deferred();var n=arguments.length;if(arguments[n-1]==="missionAccomplished"){this.runOnceTaskRunner=null;return this.genuineLoginRunOnce()}return t.resolve.apply(t,arguments)}if(!this.runOnceTaskRunner){this.runOnceTaskRunner=new r.RunOnce}return this.runOnceTaskRunner.run(this.genuineLogin,this,[]).then(t.bind(this))},init:function(t,n){if(this.username&&this.password&&(this.username!==t||this.password!==n)){this.runOnceTaskRunner=null}this.username=t;this.password=n},_run:function(t,n){function r(e){this.username=e.username;this.password=e.password;return e}this.init.apply(this,arguments);return this.fetchUserInfo().then(r.bind(this)).then(this.genuineLoginRunOnce.bind(this))},run:function(t,n){function r(e){this.lastLoginResult=e}return Common.calculateTimeConsuming(this._run.bind(this),arguments).progress(r.bind(this))}};e.exports=new s},function(e,t){"use strict";function r(){this.queue=[];this.isMissionAccomplished=false;this.isTaskStarted=false;this.result=[];this.resultDefer=$.Deferred()}var n={execAsyncFunctionInExactInterval:function(t,n,r,i,s,o){function f(){if(u.times<=0){clearInterval(u.intervalHandler);return}a&&a.abort&&a.abort();u.times--;if(!o)a=t.apply(n);else a=t.apply(n,o);a.then(l,c)}function l(e){clearInterval(u.intervalHandler);u.result.resolve.apply(u.result,arguments)}function c(e){if(u.times<=0)u.result.reject.apply(u.result,arguments)}var u={times:r,interval:i,intervalHandler:null,result:$.Deferred()};var a;if(s===undefined||s===true)f.bind(n)();u.intervalHandler=setInterval(f.bind(n),u.interval);return u.result},execAsyncFunctionInApproximateInterval:function(t,n,r,i,s,o,u){function f(){if(a.times<=0)return;a.times--;if(!o)t.apply(n).then(l,c);else t.apply(n,o).then(l,c)}function l(e){a.result.notify.apply(null,arguments);a.result.resolve(e)}function c(e,t){a.result.notify.apply(null,arguments);var r=false;if(typeof u==="function")r=u.apply(null,arguments);if(r||a.times<=0)a.result.reject.apply(null,arguments);else{if(a.interval>0)setTimeout(f.bind(n),a.interval);else f.bind(n)()}}var a={times:r,interval:i,result:$.Deferred()};if(s===undefined||s===true||!a.interval)f.bind(n)();else setTimeout(f.bind(n),a.interval);return a.result},oneByOne:function(t){function r(){function e(){n=false}if(n)return $.Deferred().reject("processing");n=true;return t.apply(this,arguments).always(e)}var n=false;return r},execAsyncFunctionInExactIntervalAndSharedTimeout:function(t,n,r,i,s,o){function l(){var e;if(u.times<=0){clearInterval(u.intervalHandler);return}u.times--;if(!o)e=t.apply(n);else e=t.apply(n,o);e.then(c,h).always(p);a.push(e)}function c(e){u.result.resolve.apply(u.result,arguments)}function h(e){u.result.reject.apply(u.result,arguments)}function p(){if(f){return}f=true;clearInterval(u.intervalHandler);a.forEach(function(e){e&&e.abort&&e.abort()})}var u={times:r,interval:i,intervalHandler:null,result:$.Deferred()};var a=[],f=false;if(s===undefined||s===true)l.bind(n)();u.intervalHandler=setInterval(l.bind(n),u.interval);return u.result},RunOnce:r};r.prototype={constructor:r,run:function(t,n,r){var i=[];var s=$.Deferred();if(this.isMissionAccomplished){i=[].slice.call(this.result[this.result.length-1].args);i.push("missionAccomplished");return s.resolve.apply(s,i)}this.composeTask(t,n,r);if(this.queue.length===1)return this.nextRound();return this.resultDefer},composeTask:function(t,n,r){var i={func:t,context:n||null,paramsArr:r||[]};if({}.toString.call(i.paramsArr)!=="[object Array]")i.paramsArr=[i.paramsArr];this.queue.push(i)},storeResult:function(t,n){n=[].slice.call(n||[]);var r={isSuccessful:t,args:n};this.result.push(r)},getResult:function(){return this.result},getLatestResult:function(){var t=this.result.length;if(t===0)return null;return this.result[t-1]},success:function(t){var n=$.Deferred();this.isMissionAccomplished=true;this.storeResult(true,arguments);this.resultDefer.resolve(t,"notTheFirstTask");return n.resolve.apply(n,arguments)},fail:function(t){var n=$.Deferred();if(this.queue.length>0)return this.nextRound();this.storeResult(false,arguments);return n.reject.apply(n,arguments)},always:function(){this.queue.shift()},nextRound:function(){this.isTaskStarted=true;var t=this.queue[0];return t.func.apply(t.context,t.paramsArr).always(this.always.bind(this)).then(this.success.bind(this),this.fail.bind(this))}};e.exports=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(315);var s=o(i);var a=n(318);var f=n(385);var l=n(394);var c=n(393);var h=n(365)("util:pc:login");var p=void 0;var d=function(){function e(t){u(this,e);this.username="";this.password="";this.type=t||"login";this.retryCounter={};this.stateTTL=40;this.defaultLoginProviderStrategy=["uamLogin","localLogin"];this.retryCount=3;this.loginProviders={localLogin:f,uamLogin:l,scanQrCode:s.default}}r(e,[{key:"login",value:function(t,n){return this.avoidParallelLogin(t,n)}},{key:"loginAndSaveUserInfo",value:function(t,n){return this.avoidParallelLogin(t,n,true)}},{key:"avoidParallelLogin",value:function(t,n,r){if(p&&Date.now()-p.timestamp<60*1e3){if(p.username===t&&p.password===n){if(p.needSaveUserInfo===!!r||!r){return p.dfd}return p.dfd.then(this.getUserInfo.bind(this))}else{p.abort()}}p=this;return this._login(t,n,r)}},{key:"_login",value:function(t,n,r){function o(){Common.clearCache("3w");var e=this.fastLogin().then(undefined,this.decideHardWayLogin.bind(this)).done(u.bind(this)).done(this.saveLoginUser.bind(this)).fail(this.decideClearPassword.bind(this));if(r){return e.then(this.getUserInfo.bind(this))}return e}function u(){Common.event.trigger("loginSuccess",{providerId:"3w"})}this.username=t;this.password=n;this.needSaveUserInfo=!!r;this.timestamp=Date.now();this.pc12306=pc12306.create();this.retryCounter={};this.dfd=$.Deferred();this.dfd.always(function(){p=null});if(!this.username||!this.password){return this.dfd.reject("usernameOrPasswordNotProvided")}var i=function(){return this.dfd.resolve.apply(this.dfd,arguments)};var s=function(){return this.dfd.reject.apply(this.dfd,arguments)};this.hasLogin().done(this.saveLoginUser.bind(this)).then(this.getUserInfoFromCache.bind(this),o.bind(this)).then(i.bind(this),s.bind(this));return this.dfd}},{key:"abort",value:function(){h("aborted");this.dfd.reject("aborted");this.pc12306.abortAll()}},{key:"shouldRetry",value:function(t){if(!(t.id&&t.display)){t=Common.getError3W(t);t=Common.lookUp(t)}if(!(t.id in this.retryCounter)){this.retryCounter[t.id]=0}else{this.retryCounter[t.id]++}if(this.retryCounter[t.id]<t.retryCount){h("Login fail should retry",t);return true}h("Login fail should not retry",t);return false}},{key:"getLoginProviderStrategy",value:function(){var t=["scanQrCode","uamLogin"];return t}},{key:"runLoginProviderByLoginConf",value:function(t){function i(e){console.log("chooseLoginProvider:",arguments);var i=e&&e.data||{};var o=i.is_uam_login,u=i.is_login_passCode,a=i.is_sweep_login;if(!$.isEmptyObject(i)&&o=="Y"){if(a=="Y"){return n.runBestLoginProvider(t)}r="uamLogin"}else if(!$.isEmptyObject(i)&&o=="N"){r="localLogin"}var f=this.loginProviders[r];if(t){return(new f(this.username,this.password,this.pc12306,r,u)).runFast().then(undefined,s.bind(this,e))}return(new f(this.username,this.password,this.pc12306,r,u)).run().then(undefined,s.bind(this,e))}function s(e,t){var n=Common.getError3W(t),r=Common.lookUp(n);if(r&&r.retryCount>0&&this.retryCount>0){this.retryCount--;return i.call(this,e)}var s=$.Deferred();return s.reject.apply(s,arguments)}var n=this,r="uamLogin";return this.pc12306.loginConf().then(i)}},{key:"runBestLoginProvider",value:function(t){function r(){var e=n.shift();var r=this.loginProviders[e];if(t){return(new r(this.username,this.password,this.pc12306)).runFast().then(undefined,i.bind(this))}return(new r(this.username,this.password,this.pc12306)).run().then(undefined,i.bind(this))}function i(e){var t=Common.getError3W(e),i=Common.lookUp(t);if(n.length&&i.retryCount>0){return r.call(this)}var s=$.Deferred();return s.reject.apply(s,arguments)}var n=this.getLoginProviderStrategy();return r.call(this)}},{key:"saveLoginUser",value:function(){var t=Common.isSameUser(this.username);var n=Common.getLoginUser();var r=void 0;if(t&&n.name!==this.username&&!this.needSaveUserInfo){r=Common.getUserInfo()}Common.saveLoginUser(this.username,this.password,"pc");if(r){Common.setUserInfo(r,true)}}},{key:"hasLogin",value:function(){return this.isInPeriod().then(this.checkUser.bind(this))}},{key:"isInPeriod",value:function(){var t=Common.isLastLoginWithin("3w",this.stateTTL,this.username,this.password);var n=$.Deferred();return t?n.resolve(t):n.reject("login expires")}},{key:"checkUser",value:function(){function t(e){var t={key:"hyBuy_3W_checkLogin",isSuccessful:e};window.sendWatchMessage(t)}return this.pc12306.checkLogin().done(t.bind(this,true)).fail(t.bind(this,false))}},{key:"passportSession",value:function(t){function r(e){var t={key:"hyBuy_3W_passportSession",isSuccessful:e};window.sendWatchMessage(t)}var n=this.pc12306.getGlobalState("loginCaptchaType");if(t&&t.id==="notLogin"&&n==="passport"){return this.pc12306.passportUAMToken().then(this.pc12306.otnUAMAuthClient.bind(pc12306)).done(this.saveLoginUser.bind(this)).done(r.bind(this,true)).fail(r.bind(this,false))}return t}},{key:"fastLogin",value:function(){var t=true;return this.runLoginProviderByLoginConf(t)}},{key:"hardWayLogin",value:function(){return this.getLoginCaptchaType().then(this.runLoginProviderByLoginConf.bind(this))}},{key:"decideHardWayLogin",value:function(t){if(this.shouldRetry(t)){return c(this.hardWayLogin).call(this)}return t}},{key:"decideClearPassword",value:function(t){if(!(t.id&&t.display)){t=Common.getError3W(t);t=Common.lookUp(t)}if(t&&t.id==="passwordNotCorrect"){Common.clearWrongPassword(this.username,this.password);this.password=""}}},{key:"getLoginCaptchaType",value:function(){return this.pc12306.getLoginKey("login",true)}},{key:"getUserInfoFromCache",value:function(){return Common.getUserInfo()}},{key:"getUserInfo",value:function(){logger.d("Login3W.getUserInfo:",arguments);return this.pc12306.getUserInfo().then(this.handleUserInfo.bind(this)).then(this.getUserMobileVerification.bind(this)).then(this.getUserFaceVerification.bind(this)).then(this.getPassengers.bind(this))}},{key:"saveUserInfo",value:function(t){var n=Common.getUserInfo();if(n.tk){t.tk=n.tk;t.survey_encode_str=n.survey_encode_str}this.keepLastFaceIdentified(n,t);Common.deleteUserInfo();Common.setUserInfo(t,true)}},{key:"keepLastFaceIdentified",value:function(t,n){if(!t||!n){return}if(typeof t.faceIdentified!="undefined"&&typeof n.faceIdentified=="undefined"){n.faceIdentified=t.faceIdentified}}},{key:"handleUserInfo",value:function(t){logger.d("Login3W.getUserInfo.success:",arguments);var n=t&&t.data&&t.data.userDTO;Common.saveLoginUser(this.username,this.password,"pc");if(n){var r={name:this.username,pwd:this.password,nickname:n.loginUserDTO.name,id_no:n.loginUserDTO.id_no,user_name:n.loginUserDTO.user_name,mobile:n.mobile_no,email:n.email,mobileNo:n.mobile_no,id_type_code:n.loginUserDTO.id_type_code,verifyStatus:t.data.notice==="å·²éè¿",mobileVerify:t.data.isMobileCheck};console.log("userInfo:",r);this.saveUserInfo(r);return r}return $.Deferred().reject("æªè·åå°è´¦å·ä¿¡æ¯")}},{key:"getUserMobileVerification",value:function(t){return t}},{key:"getUserFaceVerification",value:function(t){function r(e){console.log("Login3W.getUserFaceVerification.success:",arguments);s(true);if(e&&parseInt(e.member_status)==0){t.faceIdentified=true}else{t.faceIdentified=false}this.saveUserInfo(t);return t}function i(){console.log("Login3W.getUserFaceVerification.fail:",arguments);s(false);return $.Deferred().resolve(t)}function s(e){var t={key:"hyBuy_3W_CX_checkLogin",isSuccessful:e};window.sendWatchMessage(t)}var n=window.cx12306;return c(n.runCheckLogin.bind(n))().then(r.bind(this),i.bind(this))}},{key:"getPassengers",value:function(t){function n(e){var n=new a(t);n.updatePassengers("pc",e);return t}function r(e){return $.Deferred().resolve(t)}logger.d("Login3WHelper.getPassengers:",arguments);return Common.delay(0).then(this.pc12306.passengersQuery.bind(this.pc12306)).then(n,r)}}]);return e}();e.exports=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=n(316);var o=function(){function e(t,n,r){i(this,e);this.username=t;this.password=n;this.pc12306=r;this.checkQrTimer=null;this.isStopCheckQr=false;this.retryCount=3;this.isUseStoredTK=true}r(e,[{key:"run",value:function(){function r(){return n._run().then(i,s)}function i(){console.log("ScanQrCodeLogin_run_succ",arguments);n.stopCheckQr();n.isUseStoredTK=true;return t.resolve.apply(t,arguments)}function s(e){console.log("ScanQrCodeLogin_run_fail",arguments);n.stopCheckQr();n.isUseStoredTK=false;return n.handleFailReason(e)}var t=$.Deferred(),n=this;return r()}},{key:"runFast",value:function(){return this.run()}},{key:"_run",value:function(){this.isStopCheckQr=false;return this.pc12306.uaMtkStatic().then(this.createQr64.bind(this)).then(this.pcScanQr.bind(this)).then(this.qrCallBack.bind(this)).then(this.passportUAM.bind(this))}},{key:"handleFailReason",value:function(t){var n=Common.getError3W(t),r=Common.lookUp(n),i=$.Deferred();if(r&&r.id=="notLogin"&&this.retryCount>0){this.retryCount--;return Common.delay(1e3).then(this.run.bind(this))}return i.reject.apply(i,arguments)}},{key:"passportUAM",value:function(){return Common.delay(1e3).then(this.pc12306.passportUAMToken.bind(this.pc12306)).then(this.pc12306.otnUAMAuthClient.bind(this.pc12306)).then(this.pc12306.loginConf.bind(this.pc12306)).then(this.loginConfSucc.bind(this))}},{key:"loginConfSucc",value:function(t){var n=$.Deferred();if(t&&t.data&&t.data.name&&t.data.is_login=="Y"){return n.resolve.apply(n,arguments)}else{return n.reject.apply(n,arguments)}}},{key:"stopCheckQr",value:function(){this.isStopCheckQr=true}},{key:"createQr64",value:function(){function r(e){console.log("createQr64Succ:",arguments);if(e&&e.result_code=="0"&&e.image&&e.uuid){t.checkQrTimer=setTimeout(t.checkQr.bind(t,e.uuid),1e3);return n.resolve(e.uuid)}return n.reject.apply(n,arguments)}var t=this,n=$.Deferred();clearTimeout(t.checkQrTimer);return this.pc12306.createQr64().then(r)}},{key:"checkQr",value:function(t){function r(){if(!n.isStopCheckQr){setTimeout(n.checkQr.bind(n,t),1e3)}}var n=this;clearTimeout(n.checkQrTimer);this.pc12306.checkQr(t).then(r)}},{key:"pcScanQr",value:function(t){console.log("pcScanQr:",arguments);return Common.delay(0).then(this.getQrStr.bind(this,t)).then(this._pcScanQr.bind(this))}},{key:"_pcScanQr",value:function(t){console.log("_pcScanQr:",arguments);return Common.delay(0).then(wireless12306.pcScanQr.bind(wireless12306,t))}},{key:"qrCallBack",value:function(t){console.log("qrCallBack:",arguments);if(t&&t.succ_flag==1){return Common.delay(0).then(wireless12306.qrCallBack.bind(wireless12306))}}},{key:"getTokenKey",value:function(t){var n=t.length;if(n>=7){var r=t.charAt(n-7).toString();console.log("seven:",r);var i="0123456789=-_".indexOf(r);if(i<0){i="ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(r.toUpperCase())}if(i>=0){if(n>=i+16){var s=t.substring(i,i+16);return s}}}return""}},{key:"_getQrStr",value:function(t,n){var r=$.Deferred();var i=this.getBytes(t);var s=this.getTokenKey(n.tk||"");var o=this.RC4Base(i,s);var u=this.arrToBase64(o);console.log("ultraResult:",u);return r.resolve(u)}},{key:"RC4Base",value:function(t,n){var r=0;var i=0;var s=this.initKey(n);var o=[];for(var u=0;u<t.length;u++){r=r+1&255;i=(s[r]&255)+i&255;var a=s[r];s[r]=s[i];s[i]=a;o[u]=t[u]^s[(s[r]&255)+(s[i]&255)&255]}return o}},{key:"initKey",value:function(t){var n=void 0;var r=this.getBytes(t);var i=[];for(n=0;n<256;n++){i[n]=n}var s=0;var o=0;if(!r||r&&r.length==0){return null}for(n=0;n<256;n++){o=(r[s]&255)+(i[n]&255)+o&255;var u=i[n];i[n]=i[o];i[o]=u;s=(s+1)%r.length}return i}},{key:"getBytes",value:function(t){var n=[];for(var r=0;r<t.length;r++){n.push(t[r].charCodeAt())}return n}},{key:"arrToBase64",value:function(t){var n=new Uint8Array(t.length);t.forEach(function(e,t){n[t]=e});var r="";for(var i=n.byteLength,s=0;s<i;s++){r+=String.fromCharCode(n[s])}console.log("binary:",r);var o=window.btoa(r);console.log("result:",o);return o}},{key:"getQrStr",value:function(t){var n=Common.getUserInfo()||{};var r=this.username||n.user_name;var i=this.password||n.pwd;console.log("getQrStr,username,password:",arguments,r,i);if(!r||!i){this.stopCheckQr();QunarAPI.train.openView({viewName:"login12306"});return}if(n.tk&&this.isUseStoredTK&&Common.isSameUser(r)){return this._getQrStr(t,{tk:n.tk})}var o=new s(r,i);return o.run().then(this._getQrStr.bind(this,t))}}]);return e}();e.exports=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=n(317);var o=n(318);var u=function(){function e(t,n){i(this,e);this.userInfo={username:t,password:n}}r(e,[{key:"prepareLocalUserInfo",value:function(){var t=$.Deferred();if(this.userInfo.username&&this.userInfo.password){return t.resolve(this.userInfo)}return t.reject("pleaseFetchUserInfoFromQunar")}},{key:"fetchUserInfo",value:function(){function t(e){this.userInfo.username=e.user_name;this.userInfo.password=e.pwd}return(new s).run().then(t.bind(this))}},{key:"login",value:function(){return wireless12306.login(this.userInfo.username,this.userInfo.password)}},{key:"loginSuccessAffairs",value:function(t){var n=t.display_control_flag==2||t.display_control_flag==4?false:true;var r=t.user_name;var i=this.userInfo.password;var s=parseInt(t.member_status)==0;var u={name:r,pwd:i,nickname:t.name,id_no:t.id_no,user_name:t.user_name,mobile:t.mobileNo,id_type_code:t.id_type_code,user_type:t.user_type,display_control_flag:t.display_control_flag,verifyStatus:n,tk:t.tk,survey_encode_str:t.survey_encode_str,mobileVerify:t.is_receive,faceIdentified:s};console.log("userInfo:",u,t);Common.saveLoginUser(r,i,"mobile");Common.setUserInfo(u,true);Common.event.trigger("loginSuccess",{providerId:"mobile"});var a=t.passengerResult||[];t.passengerResult=Common.atopOwner(a);var f=new o(u);f.updatePassengers("mobile",t.passengerResult||[]);return t}},{key:"loginFailAffairs",value:function(t){var n=$.Deferred(),r=t;if(t&&typeof t=="string"&&(t.indexOf("PCFET")>-1||t.indexOf("PGh0b")>-1)){try{r=Common.base64Decode(t)}catch(i){console.log(i)}}return n.reject(r)}},{key:"loginFail",value:function(t){t=Common.lookUp(t);if(t&&t.id==="passwordNotCorrect"){Common.clearWrongPassword(this.userInfo.username,this.userInfo.password);this.userInfo.password=""}}},{key:"run",value:function(){return this.prepareLocalUserInfo().then(undefined,this.fetchUserInfo.bind(this)).then(this.login.bind(this)).then(this.loginSuccessAffairs.bind(this),this.loginFailAffairs.bind(this)).fail(this.loginFail.bind(this))}}]);return e}();e.exports=u},function(e,t){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=function(){function e(){r(this,e)}n(e,[{key:"getUserInfoFromLocal",value:function(){var t=$.Deferred();var n=Common.getUserInfo();if(n&&n.user_name){return t.resolve(n)}return t.reject("not found user info in localStorage")}},{key:"getUserInfoFromQunar",value:function(){function t(e){console.log("pull12306UserData:",arguments);e.user_name=e.user_name||e.username;e.pwd=e.pwd||e.password;return e}return Common.pull12306UserData().then(t)}},{key:"run",value:function(){return this.getUserInfoFromLocal().then(undefined,this.getUserInfoFromQunar.bind(this))}}]);return e}();e.exports=i},function(e,t,n){"use strict";function o(e){return e.replace(/"\[/g,"[").replace(/]"/g,"]").replace(/"{/g,"{").replace(/}"/g,"}")}function u(e){var t={ID:"1",PP:"B",NI:"1",TB:"G",GA:"C"};var n={B:"PP",1:"NI",G:"TB",C:"GA"};var i={M:"1",F:"2",N:"0"};var o={1:"M",2:"F",0:"N"};var u={0:"æäººç¥¨",1:"å¿ç«¥ç¥¨",2:"å­¦çç¥¨",3:"ä¼¤æ®åè­¦"};var a={1:"æäºº",2:"å¿ç«¥",3:"å­¦ç",4:"ä¼¤æ®åè­¦"};var f={1:"0",2:"1",3:"2",4:"3"};var l={0:"1",1:"2",2:"3",3:"4"};this._12306_passenger_type_map=a;this._qunar_passenger_type_map=u;this._passenger_type_to_qunar=f;this.userInfo=e||r.getUserInfo();this.idTypeTo12306=function(e){return t[e]||""};this.idTypeToQunar=function(e){return n[e]||""};this.genderTo12306=function(e){return o[e]||""};this.passengerTypeToQunar=function(e){return u[e]||""};this.passengerTypeTo12306=function(e){return l[e]||""};this.updatePassengers=function(e,t){var n=this;var r=[];if(t&&t.length){t.forEach(function(t,i){var s=n[e=="pc"?"_getItemFromPcAPI":"_getItemFromMobileAPI"](t);$.extend(s,{certNo:s.card.certID,certType:{name:s.card.name,code:s.card.type},phone:s.mobile.value});r.push(s)})}if(r.length){n.storePassengers(r);return r}else{return[]}};this.getPassengersForBackUp=function(){var e=this,n=[];var r=this.getStoredPassengers();var i=r&&r.passengers;if(i&&i.length){i.forEach(function(r){if(r.selectable){n[n.length]={user_identity_name:r.name,cert_no:r.card&&r.card.certID,cert_type:t[r.card.type],passengerType:l[r.ticketType],email:r.email||"",mobile:r.mobile&&r.mobile.value,isUserSelf:e.isUserSelf(r)?"Y":"N"}}})}return n};this.getStoredPassengers=function(){if(!this.userInfo){return{passengers:[]}}var e=r.getStoredInfo(this.userInfo.user_name+"_passengers");e=e&&e.passengers||[];if(e[0]&&e[0].certNo){return{passengers:e}}e.forEach(function(e,t){var n=e.card||{};$.extend(e,{certNo:n.certID,certType:{name:n.name,code:n.type},phone:e.mobile&&e.mobile.value})});this.storePassengers(e);window.sendWatchMessage({key:"hyBuy_localPassenger_FormatConvert",isSuccessful:true,duration:""});return{passengers:e}};this.isUserSelf=function(e){return r.isUserSelf(this.userInfo,e)};this.getShowDataPassengers=function(e,t){var n=this,r=[];for(var i=0,s=e.length;i<s;i++){var o=e[i];r[i]=$.extend({},o);r[i].passenger_type_desc=u[r[i].ticketType];r[i].deletable=!n.isUserSelf(o)?"true":undefined;r[i].idx=i}return r};this.storePassengers=function(e){this.storePassengersByKey(this.userInfo.user_name+"_passengers",e);this.storePassengersByKey((this.userInfo.user_name_actual||this.userInfo.user_name)+"_passengers",this.removeOtherPassengersPhone(e))};this.storePassengersByKey=function(e,t){r.storeInfo(e,{passengers:t||[]},true)};this.removeOtherPassengersPhone=function(e){var t=this,n=[];if(e&&e.length){e.forEach(function(e){if(!t.isUserSelf(e)){if(e.mobile)e.mobile.value=""}n[n.length]=$.extend({},e)})}return n};this.getStatus=function(e){var t="æªéè¿",n=e.total_times,r=e.id_type||e.passenger_id_type_code;if(r=="2"){t="æªéè¿"}else{if(n=="95"||n=="97"){t="å·²éè¿"}else{if(n=="93"||n=="99"){if(r=="1"){t="å·²éè¿"}else{t="é¢éè¿"}}else{if(n=="94"||n=="96"){if(r=="1"){t="æªéè¿"}else{t="æªéè¿"}}else{if(n=="92"||n=="98"){if(r=="B"||r=="C"||r=="G"){t="è¯·æ¥éª"}else{t="å¾æ ¸éª"}}else{if(n=="91"){if(r=="B"||r=="C"||r=="G"){t="è¯·æ¥éª"}}else{t="è¯·æ¥éª"}}}}}}return t};this._getItemFromMobileAPI=function(e){var t=this,n,r;r=t.getStatus(e);n={id:"",name:e.user_name,gender:i[e.sex_code||"N"],birthday:"",ticketType:f[e.user_type],prenum:"",mobile:{value:e.mobile_no,display:""},certs:[{numberObj:{display:"",value:e.id_no},name:s[e.id_type]?s[e.id_type].name:"",type:s[e.id_type]?s[e.id_type].type:"",certID:e.id_no}],statusDesc:r,selectable:r=="å·²éè¿"||r=="è¯·æ¥éª"||r=="é¢éè¿"?1:0,studentExt:null,email:e.email};if(e.id_type=="1"&&!n.birthday){n.birthday=e.id_no.slice(6,10)+"-"+e.id_no.slice(10,12)+"-"+e.id_no.slice(12,14)}n.card=n.certs[0];if(e.user_type=="3"){n.studentExt={province:"åäº¬",provinceCode:"11",schoolName:"qunar",schoolCode:"10000",studentNo:"20151314",schooling:4,intendedTime:"2015",discountSectionBegin:"åäº¬",discountSectionBeginCode:"11",discountSectionEnd:"ä¸æµ·",discountSectionEndCode:"31"}}return n};this._getItemFromPcAPI=function(e){var t=this,n,r;r=t.getStatus(e);n={id:"",name:e.passenger_name,gender:i[e.sex_code||"N"],birthday:e.born_date.substr(0,10),ticketType:f[e.passenger_type],prenum:"",mobile:{value:e.mobile_no,display:""},certs:[{numberObj:{display:"",value:e.passenger_id_no},name:s[e.passenger_id_type_code]?s[e.passenger_id_type_code].name:"",type:s[e.passenger_id_type_code]?s[e.passenger_id_type_code].type:"",certID:e.passenger_id_no}],statusDesc:r,selectable:r=="å·²éè¿"||r=="è¯·æ¥éª"||r=="é¢éè¿"?1:0,studentExt:null};n.card=n.certs[0];if(e.passenger_type=="3"){n.studentExt={province:"åäº¬",provinceCode:"11",schoolName:"qunar",schoolCode:"10000",studentNo:"20151314",schooling:4,intendedTime:"2015",discountSectionBegin:"åäº¬",discountSectionBeginCode:"11",discountSectionEnd:"ä¸æµ·",discountSectionEndCode:"31"}}return n};this.getPassengersMap=function(e){var t={};e.forEach(function(e,n){var r=[e.name,e.certNo||"nokey"];t[r.join("_")]=e});return t}}var r=n(319);var i=n(384);var s=i._mapCert;$.extend(r.data,{certTypeCode:{ID:"1",PP:"B",NI:"1",TB:"G",GA:"C"}});u.prototype={hasStduentPassenger:function(t){for(var n=0,r=t.length;n<r;n++){if(t[n].ticket_type_code==3){return true}}return false},passengerType_12306_to_qunar:function(t){return this._passenger_type_to_qunar[t]}};e.exports=u},function(e,t,n){"use strict";function c(e){return e&&e.__esModule?e:{"default":e}}function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function F(e,t){var n=-e.getTimezoneOffset()/60;return new Date(e.getTime()+(t-n)*60*60*1e3)}var r=function(){function e(e,t){var n=[];var r=true;var i=false;var s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=true;s=a}finally{try{if(!r&&o["return"])o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var s=n(320);var o=c(s);var u=n(321);var a=c(u);var f=n(323);var l=c(f);var p=n(324);var d=n(358);var v=n(359);var m=n(360);var g=n(364);var y=n(366);var b=new g;var w=n(367);var E=n(368);var S=n(369);var x=n(370);var T=n(371);var N=n(372);var C=n(376);var k=n(377);var L=n(381);var A=n(365)("util:Common");S.on(E.postLogs.bind(E));var O=i({event:new y,crypto:p,safeTimers:k,calculateHashCode:x,runtimeErrorCollector:E,unloadAffairs:S},o.default,{touchDomainHelper:new l.default});var M=new d("localStorage","mobileAgentBuy_");var _=n(382);var D=n(383);String.prototype.includes=String.prototype.includes||function(e){return this.indexOf(e)>-1};Array.prototype.includes=Array.prototype.includes||function(e){return this.indexOf(e)>-1};O.watch=b.sendDetail.bind(b);O.getCookie=function(e){if(!e){return null}if(!$.isArray(e)){e=[e]}var t={};e.forEach(function(e){var n,r=new RegExp("(^| )"+e+"=([^;]*)(;|$)");n=document.cookie.match(r);if(n){t[e]=unescape(n[2])||""}});if(e.length==1){return t[e[0]]}return t};var P,H;QunarAPI.hy.getDeviceInfo({success:function(t){P=QApp.sniff.ios&&t.vid>=80011123||QApp.sniff.android&&t.atomversion.train>=80;if(QApp.sniff.ios&&t.osVersion){var n=t.osVersion.substr(0,t.osVersion.indexOf("."));if(n>=11&&t.vid<80011148){P=false}}H=QApp.sniff.ios&&t.vid>=80011133||QApp.sniff.android&&t.atomversion.train>=100}});(function(){if(QApp.sniff.android){$(document).on("touchstart",".yo-btn",function(){var e=this;$(this).addClass("yo-btnActive");setTimeout(function(){$(e).removeClass("yo-btnActive")},250)})}})();$.extend(O,{isStartWithChinese:function(t){var n=t.trim().charCodeAt(0)>255;var r=!Number.isNaN(Number(t.trim()[0]));return n||r},isInWhiteList:function(t){var n=["ä¸å¯å é¤","ä¸åè®¸å é¤"];return n.some(function(e){return t.includes(e)})},isHTML:function(t){if(typeof t==="string"&&t.toUpperCase().indexOf("<!DOCTYPE")>=0){return true}return false},parseTipsToReadable:function(t){var n=false;var r=typeof t=="string"&&t.trim().length>0;if(r)n=O.isInWhiteList(t)||O.isStartWithChinese(t);if(n)return t;else{b.sendDetail("nonChineseAlert",false);if(O.isHTML(t))t="html";return"æå¡å¨ç¹å¿ï¼è¯·ç¨ååè¯[FAIL: "+t+"]"}},alert:function(t){if(typeof t=="string"){t={content:t};t.title=t.title||"å°é©¼æ¸©é¦¨æç¤º"}if(t.title&&!t.content){t.title=O.parseTipsToReadable(t.title)}else{t.content=O.parseTipsToReadable(t.content)}if(t.onOk){t.onok=t.onOk;delete t.onOk}if(!t.okText){t.okText="ç¡®å®"}if(P){QunarAPI.train.showAlert({title:t.title,content:t.content,buttons:[t.okText],success:function(){t.onok&&t.onok()}})}else{QApp.Kami.alert.show(t)}},confirm:function(t){if(typeof t=="string"){t={content:t}}if(t.onOk){t.onok=t.onOk;delete t.onOk}if(t.onCancel){t.oncancel=t.onCancel;delete t.onCancel}if(!t.okText){t.okText="ç¡®å®"}if(!t.cancelText){t.cancelText="åæ¶"}if(t.title&&!t.content){t.title=O.parseTipsToReadable(t.title)}else{t.content=O.parseTipsToReadable(t.content)}if(P){QunarAPI.train.showAlert({title:t.title||"",content:t.content,buttons:[t.okText,t.cancelText],success:function(n){switch(n.index){case 0:t.onok&&t.onok();break;case 1:t.oncancel&&t.oncancel()}}})}else{QApp.Kami.confirm.show(t)}},toastNative:function(t){if(typeof t=="string"){t={msg:O.parseTipsToReadable(t)}}if(H){QunarAPI.train.showToast({msg:t.msg||"",duration:t.duration||"2000",durationAdr:0})}else{O.alert(t.msg)}}});O.showLoading=function(e,t){if(!this.loading){this.loading=QApp.showWidget("loading",{content:e||"è¯·ç¨ç­â¦"})}else{e&&$(".yo-loading p").text(e)}};O.hideLoading=function(){if(this.loading){this.loading.destroy();delete this.loading}};O.storeInfo=function(e,t,n){var r=M.get(e),i;i=r;i=i||{};if(n){i=t}else{i=$.extend(i,t)}try{M.set(e,i)}catch(s){A("localStorage store error ,",s)}};O.getStoredInfo=function(e){return M.get(e)};O.getError3W=function(e,t){return w.run(e,t)};O.requestCache={};O.postRequestWithCache=function(e,t,n){var r=$.Deferred();n=e+n||"";if(this.requestCache[n]){r.resolve(this.requestCache[n]);return r}else{return this.postRequest(e,t).then(function(t){if(t.bstatus&&t.bstatus.code==0){O.requestCache[n]=t.data}return t})}};O.postRequest=function(e,t){function r(){n.reject("æå¡å¨æªååºï¼è¯·ç¨ååè¯",null)}A("Common.postRequest, "+e+":",arguments);var n=$.Deferred();QunarAPI.train.qunarRequest({serviceType:e,param:t,success:function(i){A(e+" success:",arguments);if(i.bstatus&&i.bstatus.code==0){n.resolve(i.data)}else{n.reject(i.bstatus&&i.bstatus.des,i)}O.postRequestLogs(e,t,i)},fail:function(i){A(e+" fail:",arguments);n.reject(i&&i.errmsg,null);O.postRequestLogs(e,t,i)}});setTimeout(r,10*1e3);return n.promise()};O.data={identityType:[{text:"æ¤ç§",value:"B"},{text:"å°èè¯",value:"G"},{text:"èº«ä»½è¯",value:"1"},{text:"åä¹¡è¯",value:"C"}],gender:[{text:"ç·",value:"1"},{text:"å¥³",value:"2"}],psgtype:[{text:"æäººç¥¨",value:"1"},{text:"å¿ç«¥ç¥¨",value:"2"},{text:"å­¦çç¥¨",value:"3"}],unionpayPageCredentialTypeList:[{value:"01",text:"èº«ä»½è¯"},{value:"02",text:"åå®è¯"},{value:"03",text:"æ¤ç§"},{value:"04",text:"åä¹¡è¯"},{value:"05",text:"å°èè¯"},{value:"06",text:"è­¦å®è¯"},{value:"07",text:"å£«åµè¯"}]};O.getPhoneSchema=function(){var e=(navigator.userAgent.toLowerCase().match(/qunar(\w*)[ia]phone(\w*)/)||["qunaraphone"])[0]+"://";return e};O.sendSchema=function(e){var t=$('<iframe style="display:none" ></iframe>');t.appendTo($("body"));document.documentElement.appendChild(t.get(0));t.attr("src",e);setTimeout(function(){t.remove()},500)};var B=function(t){if(typeof t!=="string"||t.length===0)return t;return t.substr(0,1).toUpperCase()+(t||"").substr(1).toLowerCase()};var j=function(t,n){n=B(n);return{}.toString.call(t)==="[object "+n+"]"};O.isArrayNotEmpty=function(e){return $.isArray(e)&&e.length>=1};O.isObject=function(e){return j(e,"Object")};O.isDate=function(e){return j(e,"Date")};O.isNumber=function(e){return j(e,"Number")};O.serialize=function(e,t){e=e||{};var n,r,i=[];if(!(t&&t.length>0)){t=[];for(var s in e){t.push(s)}}t.forEach(function(t){n=e[t];if(O.isObject(n)){n=O.base64Encode(JSON.stringify(n))}else if($.isArray(n)){n.forEach(function(e,n){i.push(t+"="+(e||""))});return}i.push(t+"="+(n||""))});r=i.join("&");if(r)r="?"+r;return r};O.openTrainSino=function(e,t,n){var r="/train_sino_hy/index.html?hybridid=train_sino_hy#/";var s=location.origin+r+e;s+=this.serialize(t||{});s=encodeURI(s);var o=i({url:s,name:e},n);QunarAPI.hy.openWebView(o)};O.sendSms=function(e,t){O.sendSchema(O.getPhoneSchema()+"railway/sms"+"?recipient="+e+"&body="+t)};O.setWifi=function(){var e=$.Deferred();O.confirm({title:"å°é©¼æ¸©é¦¨æç¤º",content:"ç½ç»è®¿é®å¯è½è¢«12306éå¶ãæ¨å°è¯åæ¢å°å«ç WiFi æ 4G/5G ç½ç»ï¼æèå¼å³ä¸æ¬¡é£è¡æ¨¡å¼åéè¯ã",okText:"å»è®¾ç½®ç½ç»",cancelText:"ç¥éäº",onok:function(){O.sendSchema(O.getPhoneSchema()+"railway/wifi?");e.resolve("ok")},oncancel:function(){e.resolve("cancel")}});return e.promise()};O._manipulateQunarPassengers=function(e){function t(t){e=e||{};e.uuid=t.uuid||"";return O.postRequest("t_tPassengerList",e)}return O.getQunarUserInfo().then(t)};O._crudQunarPassengers=function(e,t){var n={type:e||0,passengerListJson:t||"[]"};return O._manipulateQunarPassengers(n)};O.queryQunarPassengers=function(e){return O._manipulateQunarPassengers(e)};O.addQunarPassengers=function(e){return O._crudQunarPassengers(1,e)};O.updateQunarPassengers=function(e){return O._crudQunarPassengers(2,e)};O.deleteQunarPassengers=function(e){return O._crudQunarPassengers(3,e)};O.getQunarContact=function(){var e=$.Deferred(),t=function(){QunarAPI.train.jumpOutterSchema({serviceName:"getContact",success:function(n){e.resolve(n)},fail:function(t){n(t)}})};var n=function(n){e.reject(n)};QunarAPI.hy.login({shouldOpenLogin:false,success:function(n){t()},fail:function(r){QunarAPI.hy.login({shouldOpenLogin:true,success:function(n){t()},fail:function(t){n(t)}})}});return e};O.isQunarLoggedIn=function(e){var t=$.Deferred();QunarAPI.hy.login({shouldOpenLogin:e||false,success:function(){t.resolve.apply(t,arguments)},fail:function(){t.reject.apply(t,arguments)}});return t};O.may12306LoggedIn=function(){var e=O.getUserInfo()||{};return!!(e.user_name&&e.pwd)};O.bothAccontLoginResult=function(){function n(){var n={may12306LoggedIn:t,isQunarLoggedIn:true};e.resolve(n)}function r(){var n={may12306LoggedIn:t,isQunarLoggedIn:false};if(t)e.resolve(n);else e.reject(n)}var e=$.Deferred();var t=O.may12306LoggedIn();O.isQunarLoggedIn().then(n,r);return e};O.getQunarAddress=function(){var e=$.Deferred();QunarAPI.train.jumpOutterSchema({serviceName:"getAddress",success:function(n){e.resolve(n)},fail:function(n){e.reject(n)}});return e};O.getAppConfig=function(e){if(!e||e===undefined){if(!this.keys){this.keys=[]}e=this.keys}var t=$.Deferred();QunarAPI.ready(function(){QunarAPI.train.getConfig({keys:e,success:function(n){t.resolve(n||{})},fail:function(n){t.reject(n)}})});return t.promise()};O.parseUrl=function(e){var t={};var n=/(https?:\/\/)([^\/]+)([^?#]*)(.*)/i.exec(e);if(n&&n[1]){t.protocol=n[1];t.host=n[2];t.path=n[3];t.rest=n[4]}return t};O.getRenamedConfig=function(){function s(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};t.forEach(function(t){var r=o(e[t]);if(r!==undefined){i[n[t]]=r}})}function o(e){if(!e){return e}try{e=JSON.parse(e)}catch(t){}return e}function u(){return $.Deferred().resolve(i)}var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=[];var n={};var i={};Object.entries(e).forEach(function(e){var i=r(e,2),s=i[0],o=i[1];t.push(o);n[o]=s});return O.getAppConfig(t).then(s).then(u,u)};O.getUserInfo=function(e){var t=O.getStoredInfo("loginUser");if(e)t={name:e};if(t&&t.name){var n=O.getStoredInfo(t.name+"_userInfo01");if(n&&n.user_name){n.user_name_actual=n.user_name;n.user_name=n.name||n.user_name;n.pwd=t.pwd||n.pwd;n.provider=t.provider;return n}else{t.user_name=t.user_name||t.name;if(t.user_name&&t.pwd){return t}return null}}else{return null}};O.setUserInfo=function(e,t){var n=O.getStoredInfo("loginUser");if(n&&n.name){O.storeInfo(n.name+"_userInfo01",e,t)}};O._alterLoginUser=function(e,t){O.setCurrentLoginUser({name:e,pwd:t});var n=O.getUserInfo()||{};n.user_name=e;n.pwd=t;O.setUserInfo(n,true)};O.alterPassword=function(e){var t=O.getUserInfo()||{};if(t.user_name)O._alterLoginUser(t.user_name,e)};O.deleteUserInfo=function(e){var t=O.getStoredInfo("loginUser");if(t&&t.name){O.storeInfo(t.name+"_userInfo01",{},true);if(e){O.setCurrentLoginUser({})}}};O.getCurrentLoginUser=function(e){return O.getStoredInfo("loginUser")};O.getDeviceNoFromCache=function(){var e=O.getUserInfo()||{};var t=e.survey_encode_str||"";if(!t)return"";var n=O.base62Decode(t).split("#");console.log("arr:",n);var r="WiZ6+aYjBBgDAKVP5d6ibZxK";if(n[4]===r)return"";return n[4]};O.setCurrentLoginUser=function(e){O.storeInfo("loginUser",e,true);O.setHasLoginedUser(e.name)};O.setHasLoginedUser=function(e){var t=O.getStoredInfo("hasLoginedUsers")||[];var n=O.arrCheck(t);if(n&&n[e]&&n[e]>1){return}t.push(e);O.storeInfo("hasLoginedUsers",t,true)};O.hasLoginedUserOrNot=function(e){var t=O.getStoredInfo("hasLoginedUsers")||[];if(!e||t.indexOf(e)==-1){return false}return true};O.hasLoginedUserTwiceOrNot=function(e){var t=O.getStoredInfo("hasLoginedUsers")||[];var n=O.arrCheck(t);if(!e||t.indexOf(e)==-1){return false}if(n&&n[e]&&n[e]>1){return true}return false};O.getCurrentLoginUserNeedUpdatePsg=function(){var e=O.getUserInfo()||{};if(!e.user_name)return false;var t=e.user_name;var n=O.getStoredInfo("loginUserNeedUpdatePsg")||[];var r=n.indexOf(t);if(r>-1){n.splice(r,1);O.storeInfo("loginUserNeedUpdatePsg",n,true);return true}return false};O.setCurrentLoginUserNeedUpdatePsg=function(){var e=O.getUserInfo()||{};if(!e.user_name)return;var t=e.user_name;var n=O.getStoredInfo("loginUserNeedUpdatePsg")||[];n.indexOf(t)==-1?n.push(t):null;O.storeInfo("loginUserNeedUpdatePsg",n,true)};O.base64Encode=function(e){return _.base64encode(e)};O.base64Decode=function(e){return _.base64decode(e)};O.base62Encode=function(e){return D.base62encode(e)};O.base62Decode=function(e){return D.base62decode(e)};O.getQunarUserInfo=function(){var e=$.Deferred(),t={},n=$.Deferred(),r=$.Deferred();QunarAPI.train.getQunarUserInfo({success:function(r){t=$.extend(t,r);n.resolve()},fail:function(){n.resolve()}});QunarAPI.hy.login({shouldOpenLogin:false,success:function(n){t=$.extend(t,n);r.resolve()},fail:function(t){r.resolve()}});$.when(n,r).then(function(){e.resolve(t)});return e};O.pull12306UserData=function(){function e(e){var t={uuid:e.uuid,userName:e.userName,userId:e.qunarID};return O.postRequest("t_tget12306Account",t)}function t(e){var t=$.Deferred();var n=e.user12306Info;if(n&&n.account&&n.password)t.resolve({username:n.account,password:n.password,certNo:n.certNo,certType:n.certType,mobile:n.mobile,status:n.status,name:n.name,passengers:n.accountPassengers});else t.reject("usernameOrPasswordNotProvided");return t}return O.getQunarUserInfo().then(e).then(t)};O._feed12306UserData=function(e,t,n,r,i,s){function o(o){t=t||"";n=n||"";r=r===undefined?true:r;i=i||"";s=s===undefined?true:s;e["password"]=t;var f={isLoginSuccessful:r,failReason:i,login:e,initUser:n};var l;try{l=JSON.stringify(f)}catch(c){return}var h={userBind:s?"yes":"no",accountMsg:l,uuid:o.uuid,cat:a()};A("t_tTrain12306AccountMsg",h);return O.postRequest("t_tTrain12306AccountMsg",h).then(u)}function u(t){A("t_tTrain12306AccountMsg:",arguments);if(t&&t.code==0){var n={name:e.user_name,isFirstLogin:t.firstLogin};O.storeInfo("firstLoginUser",n,true);setTimeout(function(){O.storeInfo("firstLoginUser",{},true)},10*1e3)}else if(s&&t&&t.code===17005){b.sendDetail("clearWrongUserAccount");O.clearWrongUserAccount(e.user_name,e.password);O.clearCache("3w");O.clearCache("mobile")}return $.Deferred().resolve.apply(undefined,arguments)}function a(){var e=O.getQueryStringObj(window.location.href)||{};return e["hy_source"]||""}return O.getQunarUserInfo().then(o)};O.push12306UserData=function(e,t,n,r,i){return O._feed12306UserData(e,t,n,r,i,true)};O.delete12306UserData=function(e){return O._feed12306UserData({user_name:e},"","",false,"",false)};O.clearWrongPassword=function(e,t){return O.clearWrongUserAccount(e,t,true)};O.clearWrongUserAccount=function(e,t,n){function u(n){var r=n.username===e||n.mobile===e;var i=o&&(s.name===n.username||s.user_name===n.username||s.mobile===n.mobile);if(n.password===t&&(r||i)){return O.delete12306UserData(n.username)}}function a(){var e={};if(i.pwd===t){i.pwd="";if(!n){i={}}O.storeInfo("loginUser",i,true)}r.forEach(function(t){var n=s[t];if(n&&!e[n]){e[n]=true;f(n)}})}function f(e){var r=O.getStoredInfo(e+"_userInfo01")||{};if(r.pwd===t){r.pwd="";if(!n){r={}}O.storeInfo(e+"_userInfo01",r,true)}}var r=["name","user_name","mail","mobile"];var i=O.getStoredInfo("loginUser")||{};var s=O.getStoredInfo(i.name+"_userInfo01")||{};var o=i.name===e||r.some(function(t){return s[t]===e});if(o){a()}O.pull12306UserData().then(u)};O.getServerTime=function(){function n(){var e=O.getStoredInfo("localTimeOffset")||{};if(!e.timeStamp)return null;var t=2;var n=Date.now()-e.timeStamp;if(n<=0||n>t*60*60*1e3)return null;return new Date(Date.now()+ +e.timeDiff)}function r(t){if(!t||!t.serverTime)return i();var n=O.parseDateTime(t.serverTime);e.resolve(n)}function i(){if(e.state()!=="pending"){return}e.resolve(new Date);b.sendDetail("getServerTimeFail",false)}var e=$.Deferred();var t=n();if(t)return e.resolve(t);console.warn("12306 time is not adopted!");QunarAPI.train.getServerTime({success:r,fail:i});setTimeout(i,5*1e3);return e};O.getTimeOffsetType=function(e,t){var n=Date.now();var r=n-(e+t);var i="";if(r<0){i="nega";r=Math.abs(r)}if(r>=0&&r<5*1e3){i+="0to5"}if(r>=5*1e3&&r<10*1e3){i+="5to10"}if(r>=10*1e3&&r<30*1e3){i+="10to30"}if(r>=30*1e3&&r<60*1e3){i+="30to60"}if(r>=60*1e3&&r<120*1e3){i+="60to120"}if(r>=120*1e3){i+="others"}return i};O.getServerTimeFromBaidu=function(){var e=Date.now();var t=O.getStoredInfo("serverTimeBaidu")||{};if(t.time&&e-t.time<30*60*1e3){var n=new Date(e-t.offset);return $.Deferred().resolve(n)}var r=function(t,n,r,i){if(i&&i.headers&&i.headers.Date&&typeof i.headers.Date==="string"){var s=Date.now();var o=new Date(Date.parse(i.headers.Date));var u=s- +o;O.storeInfo("serverTimeBaidu",{time:s,offset:u});window.sendWatchMessage({key:"timeOffsetFromBaidu",isSuccessful:u>0,duration:Math.abs(u)});return o}return O.getServerTime()};return m("https://www.baidu.com/nocache/fesplg/time.gif",{noRetry:true,header:{Pragma:"no-cache","Cache-Control":"no-cache"}}).then(r,O.getServerTime.bind(O))};O.getWorkTime12306=function(){var e={rebook:"06:00-22:50",normal:"06:00-23:00"};var t=function(t){var n={rebook:"06:00-22:50",normal:"06:00-23:00"};var r=function(t){return t.replace(/ï¼/g,":").replace(/\s+/g,"").replace(/^\d:/g,"0$&")||""};try{var i=JSON.parse(t["json.12306WorkTime"]);for(var s in i){var o=i[s];i[s]=r(o)}n=i}catch(u){}return n};var n=$.Deferred();if(window.workTime12306){n.resolve()}else{O.getAppConfig(["json.12306WorkTime"]).then(t,function(){return e}).done(function(e){window.workTime12306=e;n.resolve()})}return n};O._isWorkTime=function(){function t(e){var t=r(e,2),n=t[1];i(n)}function n(e){i(e)}function i(t){var n=window.workTime12306&&window.workTime12306.normal||["-"];var r=n.split("-");var i=+r[0].slice(0,2);var s=+r[0].slice(3,5);var o=+r[1].slice(0,2);var u=+r[1].slice(3,5);var a=null;var f=null;if({}.toString.call(t)!=="[object Date]"){t=new Date(Date.now());a=new Date(Date.now());f=new Date(Date.now())}else{a=new Date(t.getTime());f=new Date(t.getTime())}a.setHours(i,s,0);f.setHours(o,u,0);if(t>=a&&t<f)e.resolve(t);else e.reject(t)}var e=$.Deferred();Promise.all([O.getWorkTime12306(),O.getServerTime()]).then(t,n);return e};O._isLoginTime=function(e,t){function r(r){if({}.toString.call(r)!=="[object Date]")r=new Date(Date.now());var i=r.getHours();if(i>=e&&i<t)n.resolve(r);else n.reject(r)}e=e;t=t;var n=$.Deferred();O.getServerTime().always(r);return n};O.isLoginTime=function(){return O._isLoginTime(6,24)};O.isWorkTime=function(){function e(e){return e}function t(e){return e}return O._isWorkTime().then(e,t)};O.show12306Closed=function(e){QunarAPI.train.openView({viewName:"12306Closed",params:{backVCName:e}})};O.log=function(){var e=[];for(var t=0,n=arguments.length;t<n;t++){try{e[e.length]=JSON.stringify(arguments[t])}catch(r){e[e.length]=arguments[t]}}QunarAPI.hy.log(e.join("     "))};O.parseDateTime=function(e){function i(e){var t=[];e.some(function(e,n){if(!e)return true;t.push(+e);return false});t[1]=t[1]-1;return new Date(Date.UTC.apply(null,t)-8*60*60*1e3)}if({}.toString.call(e)==="[object Date]")return e;var t,n,r=/[- :\/]/;if(/^\d+$/.test(e))n="yyyyMMddhhmmss";else if(r.test(e))n="yyyy-MM-dd hh:mm:ss";switch(n){case"yyyyMMddhhmmss":e.replace(/^(\d{4})(\d{2})(\d{2})?(\d{2})?(\d{2})?(\d{2})?$/,function(){t=[].slice.call(arguments,1,7)});break;case"yyyy-MM-dd hh:mm:ss":t=e.split(r);break}return O.getTimeBJTimezone(i(t))};O.formatDate=function(e,t){var n=this,r=["æ¥","ä¸","äº","ä¸","å","äº","å­"];t=t||"YYYY-MM-dd";var i=function(t){return t<10?"0"+t:t+""};if(!(e instanceof Date)){e=n.parseDateTime(e);if(!e){return""}}var s=e.getDay();return t.replace("YYYY",e.getFullYear()).replace("MM",i(e.getMonth()+1)).replace("MI",i(e.getMinutes())).replace("dd",i(e.getDate())).replace("M",e.getMonth()+1).replace("d",e.getDate()).replace("YY",String(e.getFullYear()).substr(2)).replace("HH",i(e.getHours())).replace("hh",e.getHours()).replace("mm",e.getMinutes()).replace("SS",i(e.getSeconds())).replace("ss",e.getSeconds()).replace("WEEKS",r[s])};O.getWeekFromDate=function(e,t){t=t||"å¨";var n=["æ¥","ä¸","äº","ä¸","å","äº","å­"];if(typeof e==="string")e=O.parseDateTime(e);return t+n[e.getDay()]};O.aCertainTimeFrom=function(e,t,n,r){if(typeof e==="string")e=O.parseDateTime(e);t=t||0;n=n||0;r=r||0;var i=e.getFullYear();var s=e.getMonth();var o=e.getDate();var u=new Date(i+ +t,s+ +n,o+ +r);return u};O.getQueryStringObj=function(e){var t={};e.replace(/(\?|&)([^\?&#]+)=([^\?&#]*)(?=&|#|$)/gi,function(e,n,r,i){t[r]=decodeURIComponent(i)});return t};O.checkNamespaceExist=function(e,t){var n=t.split(".");var r=/\[(\d+)\]/;if(e){while(n.length){var i=n.shift(),s=-1;if(r.test(i)){s=RegExp.$1}i=i.replace(r,"");e=e[i];if(~s){e=e[s]}if(typeof e=="undefined"){return false}}return true}return false};O.getValueByNamespace=function(e,t){var n=t.split(".");var r=/\[(\d+)\]/;if(e){while(n.length){var i=n.shift(),s=-1;if(r.test(i)){s=RegExp.$1}i=i.replace(r,"");e=e[i];if(~s){e=e[s]}if(typeof e=="undefined"){return undefined}}return e}return undefined};O.postLog=function(e){if(!e.key)return;var t="//touch.qunar.com/h5/train/TrainLog?log=";var n=O.getStoredInfo("loginUser");e["timeStamp"]=O.formatDate(new Date,"YYYY-MM-dd HH:MI:SS");e["productTag"]="hyBuy";e["os"]=QApp.sniff.os+QApp.sniff.osVersion;e["loginUserName"]=n?n.name:"";e=JSON.stringify(e);(new Image).src=t+encodeURIComponent(e)};O.getAppVersionIOS=function(){var e=navigator.userAgent.toLowerCase().match(/(^|\s)(qunar[^\/]+)\/([\d\.]+)/),t=e&&e[3];return parseInt(t)};O.getAppVersionADR=function(){var e=$.Deferred();QunarAPI.hy.getDeviceInfo({success:function(n){e.resolve(n)},fail:function(){e.reject("get Android app version fail")}});return e};O.recursive=function(e){var t=e.repeater;t.call(null,e)};O.curry=function(e){var t=[].slice.call(arguments,1);return function(){return e.apply(this,t.concat([].slice.call(arguments,0)))}};O.debounce=function(e,t){function r(){var r=this,i=arguments;clearTimeout(n);n=setTimeout(function(){e.apply(r,i)},t)}var n;return r};O.throttle=function(e,t,n){function i(){r=true;setTimeout(function(){r=false},t)}function s(){if(r===true)return;if(r===false||r===undefined&&n===true){i();return e.apply(this,arguments)}else if(r===undefined&&n!==true){i()}}var r;return s};O.dataBindRender=function(e,t){var n;$(e).find("[data-bind]").each(function(e,r){n=$(r).attr("data-bind");if(t[n]||t[n]===0)$(r).html(t[n])})};O.navRefresh=function(e,t){var n={title:{style:"text",text:e||""},right:{style:"text",text:t||""}};QunarAPI.hy.navRefresh(n)};O.boolPurify=function(e){return e==="true"||e===true||e=="1"};O.isAndroidVersionHigherThan=function(e){function t(t){var n=t.atomversion.train;if(n>e)return t;return $.Deferred().reject(t)}function n(e){return e}if(!QApp.sniff.android)return $.Deferred().reject(QApp.sniff.os);return O.getAppVersionADR().then(t,n)};O.unique=function(e,t){var n=[],r=false;t=t||function(e,t){return e===t};e.forEach(function(e,i){r=n.some(function(n,r){if(t(e,n))return true;return false});if(!r)n.push(e)});return n};O.convertToLegibleForm=function(e,t){t=t||"æå¡å¨ç¹å¿ï¼è¯·ç¨ååè¯";if(typeof e!=="string")e=t;e=e.trim();if(!e||/<.*>/.test(e))e="æªç¥éè¯¯";if(!/[\u4e00-\u9fa5]+/m.test(e))e=t+"[FAIL:"+e+"]";return e};O.convertToLegibleFormAndRemindRetry=function(e){var t="æå¡å¨åçéè¯¯ï¼è¯·éè¯";return O.convertToLegibleForm(e,t)};O.getBirthdayFromId=function(e){var t=e.substr(6,8).split("");t.splice(6,0,"-");t.splice(4,0,"-");t=t.join("");return t};O.openLogin=function(e){var t={switchUser:false};e=$.extend(true,t,e||{});var n={viewName:"login12306",params:e};QunarAPI.train.openView(n)};O.delay=function(e,t,n,r){function s(){if(typeof t!=="function"){i.resolve({delay:e});return}var s=t.apply(n||this,r||[]);if(s&&typeof s.then==="function")s.then(o,u,a);else i.resolve(s)}function o(){i.resolve.apply(i,arguments)}function u(){i.reject.apply(i,arguments)}function a(){i.reject.apply(i,arguments)}var i=$.Deferred();setTimeout(s,e);return i};O.safeDelay=function(e){var t=$.Deferred();k.setTimeout(t.resolve.bind(t,{delay:e}),e);return t};O.getToptip=function(e,t){function r(e){var n=e.webViews||[];if(t===true)s(n);return n}function i(e,t){var n,r=$(".toptip",t||"body").find(".tip");if(r.length===0&&e.length===0)return;e.some(function(e,t){n=r.eq(t);if(n.length!==0&&e.msg){var i={"background-color":e.msgBgColor,color:e.msgColor};n.text(e.msg);n.closest(".toptip").css(i).show();return true}return false})}function s(e){$("qapp-view").forEach(function(t,n){i(e,t)})}var n={pageCode:e};return O.postRequest("t_tTrainWebViewList",n).then(r)};O.renderTopTips=function(e,t){var n=$(e+" .toptip").find(".tip");if(!t){n.closest(".toptip").hide()}else{n.text(t);n.closest(".toptip").show()}};O.showCallup=function(e,t){var n=[];var r=e.split(",");var i=r.length;if(i>0){r.forEach(function(e,t){n.push({phoneNum:e})});QApp.show("callUp",{ani:{name:"actionSheet",distance:(i+1)*50},param:{data:n,callback:t}})}};O.logToProxy=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++){n[r-1]=arguments[r]}if({buildType:"prd",deployType:"prod"}.buildType!=="prd"){m("http://logs.qunar/"+e,{type:"post",dataType:"json",data:n})}};O.postRequestLogs=function(e,t,n){O.logToProxy("postRequest/"+e,t,n)};O.clearIDFV=function(){localStorage.removeItem("mobileAgentBuy_IDFV")};O.clearDeviceInfoResponse=function(){localStorage.removeItem("mobileAgentBuy_deviceInfoResponse")};O.resetLoginTimeStamp=function(e){var t=O.getStoredInfo("loginUser")||{};if(!(t.name&&t.pwd))return;if(e==="3w"){t.timeStampPc=0}else{t.timeStamp=0}O.storeInfo("loginUser",t,true)};O.clearCache=function(e){if(e==="3w"){var t=["tk","JSESSIONID","BIGipServerotn","BIGipServerpool_passport","BIGipServerpassport","route","current_captcha_type"];QunarAPI.train.ajaxCleanCookie({"https://kyfw.12306.cn":t,"https://kyfw.12306.cn/otn":t,"https://kyfw.12306.cn/passport":["_passport_session","_passport_ct","uamtk"]});var n=["pcGetTokens_token","pcGetTokens_key_change","loginKey","apiStatePsgRead"];n.forEach(function(e){return O.storeInfo(e,null,true)});O.resetLoginTimeStamp("3w");return}QunarAPI.train.ajaxCleanCookie({"https://mobile.12306.cn":["JSESSIONID","AlteonP","altmobile","BIGipServernginxformobile","BIGipServerworklight","BIGipServernginxforweixin_pool"],"https://mobile.12306.cn/otsmobile":["JSESSIONID","__NRF"]});localStorage.removeItem("mobileAgentBuy_environmentInfo");O.resetLoginTimeStamp("mobile")};O.isDefered=function(e){return e&&e.then&&e.done&&e.fail};O.setClientCookie=function(e){function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:";";var n=Object.entries(e).map(function(e){return e.join("=")}).join(t);return n}function n(e){var n="https://kyfw.12306.cn/otn";var r={type:"post",timeout:1,httpTimeout:1,data:{cookie:t(e,",")}};m(n,r);return O.delay()}function r(e){var n="https://kyfw.12306.cn/otn/resources/css/validation.css";var r={dataType:"css",header:{Cookie:t(e,";")}};return m(n,r)}return QApp.sniff.android?n(e):r(e)};O.calculateTimeConsuming=function(e){function s(){u([].slice.call(arguments),true)}function o(){u([].slice.call(arguments),false)}function u(e,t){var r={result:e,isSuccessful:t,timeConsuming:a(n),timeStamp:+(new Date)};i.notify(r);if(t)i.resolve.apply(i,e);else i.reject.apply(i,e)}function a(e){var t=new Date;e=e||t;var n=((t-e)/1e3).toFixed(2);return n}var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var n=new Date;var r=e.apply(null,t);var i=$.Deferred();if(O.isDefered(r)){r.then(s,o)}else{s(r)}return i.promise()};O.concatFailReason=function(e,t){var n=e;if(t)n=n+" [FAIL:"+t+"]";return n};O.logout12306AllInOne=function(){function n(t){O.deleteUserInfo(true);QunarAPI.train.triggerEvent({event:"LogoutSuccessEvent",data:{name:e.name,pwd:e.pwd}})}function r(e){n()}var e=O.getUserInfo();var t=O.delete12306UserData(e.name);return t.then(n,r)};O.saveLoginUser=function(e,t,n){function a(){if(u)return;O.storeInfo(r.name+"_userInfo01",{},true);O.storeInfo(r.name+"passengers",{},true);if(n==="mobile"){O.clearCache("3w");return}O.clearCache("mobile");f()}function f(){delete i.tk;O.setUserInfo(i,true)}var r=O.getStoredInfo("loginUser")||{};var i=O.getUserInfo()||{};var s=+(new Date);var o={name:e,pwd:t,provider:"mobile",timeStamp:s,timeStampPc:s};var u=(r.name===o.name||i.name===o.name||i.user_name===o.name||i.user_name_actual===o.name||i.email===o.name||i.mail===o.name||i.mobile===o.name||i.mobileNo===o.name)&&r.pwd===o.pwd;if(n!=="mobile"){o.provider="pc";if(u)o.timeStamp=r.timeStamp||0;else o.timeStamp=0}else{if(u)o.timeStampPc=r.timeStampPc||0;else o.timeStampPc=0}a();O.setCurrentLoginUser(o)};O.isSameUser=function(e,t){if(!t){t=O.getUserInfo()||{}}var n=t,r=n.name,i=n.user_name,s=n.username,o=n.user_name_actual,u=n.email,a=n.mail,f=n.mobile,l=n.mobileNo;return[r,i,s,o,u,a,f,l].includes(e)};O.getLoginUser=function(){return O.getStoredInfo("loginUser")||{}};O.getObjFromInputsWithFormAttributes=function(e){e=e||"";if(typeof e!=="string")return e;var t=e.search(/<\s*form/);if(t<0)return O.getObjFromInputs(e);var n=e.search(/<\/\s*form\s*>/);if(n<t)n=e.length-1;var r=e.substring(t,n);r+="</form>";A("str:",r);var i=document.createElement("div");i.innerHTML=r;A("div:",i);var s=i.children[0];A("form:",s);var o=/action=\\?"([^\\"]*)\\?"/;var u=(r.match(o)||[])[1]||"";var a={action:u,method:s.method,name:s.name};var f={},l=null;var c=s.getElementsByTagName("input");for(var h=0;h<c.length;h++){l=c[h];if(!l.name)continue;f[l.name]=l.value}f.formAttributes=a;A("getObjFromInputsWithFormAttributes:",f);return f};O.getObjFromInputs=function(e){e=e||"";if(typeof e!=="string")return e;var t=/<input[^>]*type=\\*"hidden\\*"[^>]*>/g;var n=/(\\|")/g;var r=e.match(t),i={};if(r&&r.length){var s=document.createElement("div");r.forEach(function(e,t){s.innerHTML=e;var r=s.getElementsByTagName("input")[0].name,o=s.getElementsByTagName("input")[0].value;if(!r)return;r=(r||"").replace(n,"");o=(o||"").replace(n,"");i[r]=o})}A("getObjFromInputs:",i);return i};O.environment=function(e){var t=/^https?:\/\/([^\/]+)\/.*$/;var n=e&&e.replace(t,"$1")||"";var r=n.toLowerCase()||location.host.toLowerCase();var i="unrecognized";var s=/^fetrain([a-z])\.beta/;if(r==="hy.train.qunar.com")i="online";else if(r==="hytrain.beta.qunar.com")i="dev";else if(s.test(r))i="beta "+r.match(s)[1].toUpperCase();return i};O.getBankCardUrls=function(){function t(){if(O.environment()!="online"){e.bindCardUrl=e.bindCardUrlBeta;e.queryCardInfoUrl=e.queryCardInfoUrlBeta}else{e.bindCardUrl=e.bindCardUrlPrd;e.queryCardInfoUrl=e.queryCardInfoUrlPrd}}var e={bindCardUrlBeta:"https://membermobilebetak.qunar.com/mobile/h5/member/bindCard/index.htm",queryCardInfoUrlBeta:"https://paybetak.qunar.com/odin/api/card/QueryCardInfo",bindCardUrlPrd:"https://pay.qunar.com/mobile/h5/member/bindCard/index.htm",queryCardInfoUrlPrd:"https://pay.qunar.com/odin/api/card/QueryCardInfo",bindCardUrl:"",queryCardInfoUrl:""};if(!e.bindCardUrl){t()}return{bindCardUrl:e.bindCardUrl,queryCardInfoUrl:e.queryCardInfoUrl}};O.getCardInfoFromQunar=function(e){var t=O.getBankCardUrls().queryCardInfoUrl;return C(t,{type:"post",noCookie:true,data:{version:"20160606",cardIndex:e},beforeSend:function(t){t.setRequestHeader("cookie",document.cookie)}})};O.isValidityAppVersion=function(e){function s(){function e(e){var t=e.atomversion.train;if(t>n)return e;return $.Deferred().reject(e)}function t(e){return e}return O.getAppVersionADR().then(e,t)}function o(){return O.getAppVersionIOS()>r}function u(){function e(e){var t=e.vid;if(t>i)return e;return $.Deferred().reject(e)}function t(e){return e}return O.getAppVersionADR().then(e,t)}var t=$.Deferred();var n=e.adrVersion,r=e.iosVersion,i=e.adrQunarVersion;if(QApp.sniff.android){if(n){s().done(function(){t.resolve()}).fail(function(){t.reject()})}else{u().done(function(){t.resolve()}).fail(function(){t.reject()})}}else{if(o()){return t.resolve()}else{return t.reject()}}return t.promise()};O.statiAjax=function(e,t,n){function i(e,i){var s=+(new Date)-r;var o={type:"ajax",id:t,provider:n,isSuccessful:e,failReason:i||"",duration:+(s/1e3).toFixed(2),timeStamp:r};return o}function s(e){var t=i(true,"");N.addLogLater(t);O.event.trigger("ajax12306",t)}function o(e){var t=i(false,e);N.addLogLater(t);O.event.trigger("ajax12306",t)}var r=+(new Date);return e().done(s).fail(o)};O.arrCheck=function(e){var t={};for(var n=0;n<e.length;n++){var r=e[n];var i=0;for(var s=0;s<e.length;s++){if(e[s]==r){i++}}if(r!=-1){t[r]=i}}return t};O.clearYpAndGoal=function(e){if(e==="3w"){localStorage.removeItem("mobileAgentBuy_preoccupationUltimateGoal3W");localStorage.removeItem("mobileAgentBuy_preSubmitOrderQueue3W");localStorage.removeItem("mobileAgentBuy_ticketQueue3W");return}localStorage.removeItem("mobileAgentBuy_ticketQueue");localStorage.removeItem("mobileAgentBuy_preoccupationUltimateGoal")};O.getTrainABTestRules=function(e){function r(e){if(e&&e.code==0){t.resolve(e.results)}else{i.apply(undefined,arguments)}}function i(){t.reject.apply(t,arguments)}var t=$.Deferred();var n={expIds:e};O.postRequest("t_tTrainABTest",n).then(r,i);return t.promise()};O.getRenamedABTest=function(){function s(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];e.forEach(function(e){i[n[e.expId]]=e.slot})}function o(){return $.Deferred().resolve(i)}var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=[];var n={};var i={};Object.entries(e).forEach(function(e){var s=r(e,2),o=s[0],u=s[1];i[o]="A";t.push(u);n[u]=o});return O.getTrainABTestRules(t).then(s).then(o,o)};O.isAccordABTestWithKey=function(e,t){function r(e){var t=e.some(s);if(t){n.resolve.apply(n,arguments)}else{i.apply(undefined,arguments)}}function i(){n.reject.apply(n,arguments)}function s(n){if(n.expId==e){var r=n.slot;var i=t.some(o.bind(this,r));if(i){return true}}}function o(e,t){if(t==e){return true}}var n=$.Deferred();O.getTrainABTestRules([].concat(e)).then(r,i);return n.promise()};O.isOrderTimeOut=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=$.Deferred();if(!e){return n.reject()}O.getServerTime().then(function(r){var i=e;if(r.getTime()>O.parseDateTime(i).getTime()+t){n.reject()}else{n.resolve()}});return n.promise()};O.isOrderInTime=O.isOrderTimeOut;O.getOwnerIndex=function(e){var t=-1;var n=O.getUserInfo()||{};e.some(function(e,r){if((e.user_name||e.name)===n.nickname&&(e.id_no||e.certNo)===n.id_no){t=r;return true}return false});return t};O.atopOwner=function(e){var t=O.getOwnerIndex(e);var n=[],r=null;if(t>=0){n=e.splice(t,1);r=n[0]}else{r=O.fakeOwner()}if(r)e.unshift(r);return e};O.fakeOwner=function(){return null};O.toSecond=function(e){return+(e/1e3).toFixed(2)};O.isSingleApp=function(){var e=navigator.userAgent,t;t=e.match(/qunar[ia]phonetrain/i);if(t){return true}else{return false}};O.getCertsFromPassenger=function(e){e=e||{};var t={};var n=e.certs&&e.certs[0];var r=e.card;if(n){t={certID:n.certID,name:n.name,type:n.type}}if(r){t.certID=t.certID||r.certID;t.name=t.name||r.name;t.type=t.type||r.type}t.certID=t.certID||e.certNo;t.name=t.name||e.certType||e.certType.name;t.type=t.type||e.certType||e.certType.code;return t};O.isOnline=function(){return location.host==="hy.train.qunar.com"};O.sendSchemaOutter=function(e){function t(){}QunarAPI.ready(function(){QunarAPI.train.scheme({url:e,success:t})})};O.range=function(e,t){var n=t-e;var r=e+n*Math.random();return Math.round(r)};O.MD5=function(e){return O.crypto.enc.Hex.stringify(O.crypto.MD5(e))};O.getDeviceInfo=function(){var e=$.Deferred();var t={success:e.resolve.bind(e),fail:e.resolve.bind(e,{})};QunarAPI.hy.getDeviceInfo(t);return e};O.randomMac=function(){var e="",t=[],n="";for(var r=0;r<6;r++){n=O.range(0,255).toString(16);n=("00"+n).substr(-2);t.push(n)}e=t.join(":");return e};O.isUserSelf=function(e,t){var n=false;var r=t&&t.certs;r=r&&r[0]&&r[0].certID;r=r||t.card_no;if(t.belongTo&&t.belongTo.indexOf("12306")<0)return false;if(e.nickname==t.name&&e.id_no==r){n=true}return n};O.canGetSino=function(){var e=function(t){var n=t.vid;var r=n[0]==="8"?80011135:60001166;return+n>=r?Promise.resolve():Promise.reject()};return O.getAppVersion().then(e)};O.openSino=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var r="/train_sino_hy/index.html?hybridid=train_sino_hy#/";var s=location.origin+r+e+this.serialize(t);s=encodeURI(s);t=i(n,{url:s});QunarAPI.hy.openWebView(t)};O.lookUp=function(e){var t=T.lookUp(e);return t};O.getAppVersion=function(e){function n(n){var r=true;if(n.atomversion&&n.atomversion.train<e)r=false;return r?t.resolve(n):t.reject("Android version is too low")}var t=$.Deferred();QunarAPI.hy.getDeviceInfo({success:e?n:t.resolve,fail:t.reject.bind(null,"get App version fail")});return t.promise()};O.compareObject=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];if(this.isObject(e)&&this.isObject(t)){n=Array.isArray(n)?n:[n];return n.every(function(n){return e[n]===t[n]})}else{return false}};O.clearLocalStorage=function(){for(var e in localStorage){localStorage.removeItem(e)}};O.getUserInfoAsync=function(e,t){function n(){var e=O.getUserInfo();if(e&&e.user_name&&e.pwd){var t=e.mobile||e.mobileNo;return{username:e.user_name,mobile:t,password:e.pwd}}return null}function r(){var r=$.Deferred();if(e&&t){return r.resolve({username:e,password:t})}var i=n();if(i)return r.resolve(i);var s=O.getUserInfo()||{};if(!s.user_name&&!s.pwd)return O.pull12306UserData();return r.reject("usernameOrPasswordNotProvided")}return r()};O.getTimeBJTimezone=function(e){return I(e)};var I=function(t){var n;try{n=F(new Date(t),8)}catch(r){n=null}return n};O.postOrderLogs=function(e,t){var n={orderNo:e,operator:6,info:t};return O.postRequest("t_tTrainOrderApiOrderLog",n)};O.harness12306Date=function(e,t){function o(e){e=e||0;var t=(e/1e3/60/60).toFixed(2);if(t>=1||t<=-1){console.warn("12306 time is greatly different from local time, please check:",t+" h")}}var n=t&&t.headers||{};n=n.redirectHeaders&&n.redirectHeaders[0]&&n.redirectHeaders[0].responseHeader||n;if(!(typeof e==="string"&&(e.indexOf("mobile.12306.cn")>=0||e.indexOf("kyfw.12306.cn")>=0)&&n&&typeof n["Date"]==="string")){return}if(e.indexOf(".css")>=0||e.indexOf(".js")>=0){return}var r=O.getTimeBJTimezone(n["Date"]);var i,s;if(r){i=r-new Date;o(i);s={timeDiff:i,testOnly:true,timeStamp:Date.now()};O.storeInfo("localTimeOffset",s,true)}};O.isAppVersionEqualOrGreaterThan=function(){function n(n){var r=QApp,i=r.sniff,s=n.vid,o=n.atomversion;var u=false;switch(i.os){case"ios":u=+s>=e;break;case"android":u=+o.train>=t;break;default:u=false}var a=$.Deferred();u?a.resolve():a.reject(i.os+" App version is too low");return a.promise()}var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:80011135;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:109;return O.getAppVersion().then(n)};O.deepGet=function(e,t,n){if(typeof t==="string"){t=t.split(".")}var r=-1;var i=t.length;if(!i){i=1;e=undefined}while(++r<i){var s=e==null?undefined:e[t[r]];if(s===undefined){r=i;s=n}e=s}return e};O.isLastLoginWithin=function(e,t,n,r){var i=O.getStoredInfo("loginUser")||{};var s=e==="mobile"?"timeStamp":"timeStampPc";var o=+i[s]||0;var u=((+(new Date)-o)/1e3/60).toFixed(4);var a=u<t;if(n&&!O.isSameUser(n)||r&&r!==i.pwd){a=false}A("isLastLoginWithin span:",u,a);return a};O.humanizeTime=function(e){function u(e){return+e.toFixed(t)}var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var n=["ç§","åé","å°æ¶","å¤©","æ","å¹´"];var r=365.242199174;var i=[60,60,24,r/12,12];var s=e;var o=0;while(i[o]&&s>=i[o]){s=s/i[o];o++}return u(s)+n[o]};O.isSameDayBJTimezone=function(e,t){var n=1e3*60*60*24;var r=-8*60*60*1e3;return Math.floor((+e-r)/n)===Math.floor((+t-r)/n)};O.isTV=function(){var e=/pf=tv/;return e.test(location.href)};O.batchWatcher=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=e.map(function(t,n){var r=t.key,i=t.count,s=t.duration;if(!r){console.error("empty key",e,n);return}if(/[^a-zA-Z0-9_]/.test(r)){console.error("invalid character in wather key",r);return}var o=[r,i||1];if(s){o.push(s)}return o.join(",")}).filter(function(e){return!!e}).join(";");if(!t){return}t=t+";";return m("http://touch.qunar.com/h5/train/TrainMonitorBatch",{data:{monitorText:t},type:"post",header:{Connection:"keep-alive"}})};O.watcherLater=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1e3;if(!O.watcherLater.data){O.watcherLater.data=[]}if(Array.isArray(e)){var n;(n=O.watcherLater.data).push.apply(n,h(e))}else{O.watcherLater.data.push(e)}setTimeout(function(){if(O.watcherLater.data.length){O.batchWatcher(O.watcherLater.data);O.watcherLater.data=[]}},t)};O.sendWatchMessageLater=function(e,t){var n=e.key,r=e.isSuccessful,i=r===undefined?true:r,s=e.duration;O.watcherLater({key:n,count:1,duration:s},t);var o=n+"_"+(i?"Success":"Fail");O.watcherLater({key:o,count:1,duration:s},t)};var q={findOutParticularCheci:function(t,n,r){function u(){var e=null;if(i.length===1){e=i[0]}else if(i.length>1){i.some(function(t,n){var i=t.start_train_date+t.start_time;i=i.replace(":","");if(i===r){e=t;return true}return false});e=e||i[0]}return e}var i=[];var s=null;var o=n.split("/");t.some(function(e,t){if(o.indexOf(e.station_train_code)>=0){i.push(e);return false}return false});s=u();return s},parseYpInfo:function(t){function u(e){var t=e.yp_info_cover;var n=e.yp_info;var r=/^(\w\d{9})+$/i,i="";if(r.test(n))i=n;else if(r.test(t))i=t;return i}var n=u(t);if(!n)return null;var r={};var i;var s;for(var o=0;o<n.length;o+=10){i=n.substr(o,10);s={};s["seatTypeCode"]=i[0];s["price"]=parseInt(i.substr(1,5),10)/10;if(parseInt(i.substr(6,1),10)>=3){s["ticket"]=parseInt(i.substr(7),10);r["noSeat"]=s}else{s["ticket"]=parseInt(i.substr(6),10);r[i[0]]=s}}return r},getPriorSeatType:function(t,n){var r={result:"-1",origin:n.seats[0],seats:n.seats};var i=this.parseYpInfo(t);n["ypObj"]=i;if(!i){r.result="parseYpInfoFail";return r}var s;n.seats.some(function(e,t){s=i[e]||{};if(s.ticket>=Number(n.ticket_type_order_num)){r.result=s["seatTypeCode"];r.origin=e;return true}return false});return r},adaptAction:function(t,n){A("adaptAction:",arguments);var r=t&&t.formAttributes&&t.formAttributes.action||"";if(r.indexOf("http")===0)return t;var i=n.indexOf("/",9);var s=n.substr(0,i);A("origin:",s);t.formAttributes.action=s+t.formAttributes.action;return t},filterOutFormAttributes:function(t){var n={};for(var r in t){if(r==="formAttributes")continue;n[r]=t[r]}A("filterOutFormAttributes:",t,n);return n},getUrlFromFormAttributes:function(t){var n="";if(t&&t.formAttributes){n=t.formAttributes.action||""}A("getUrlFromFormAttributes:",n);return n},getBankId:function(){var t=window.QApp&&window.QApp.getViewSync("cashierPage")||null;var n=t&&t.handledData&&t.handledData.payChannnelResult||"";var r="";switch(n){case"wechat":r="33000020";break;case"alipayClient":case"alipayTouch":r="33000010";break;case"unionpay":r="00011000";break;default:}A("getBankId:",r);return r},getPayFormFromRailWay:function(t){function s(e,t){if(t.indexOf("wapBusiness")>=0){if(!e.bankId||!e.businessType){window.sendWatchMessage({key:"wapPayGateway_newVersion",isSuccessful:true})}else{window.sendWatchMessage({key:"wapPayGateway_newVersion",isSuccessful:false})}window.sendWatchMessage({key:"wapPayGateway_mobile",isSuccessful:true})}else{window.sendWatchMessage({key:"wapPayGateway_mobile",isSuccessful:false})}}A("getPayFormFromRailWay:",arguments);var n=$.Deferred();var r="https://epay.12306.cn/pay/webBusiness";var i=this;if(t&&t.formAttributes){r=t.formAttributes.action;if(r.indexOf("http")!==0){r="https://epay.12306.cn"+r}}s(t,r);if(!t.bankId){t.bankId=O.getBankId()}t.businessType=t.businessType||"1";if(!t.bankId){n.reject("noBankIdProvided");return n.promise()}C(r,{data:O.filterOutFormAttributes(t),type:"POST"}).then(function(e,t){i._wapBusinessData=O.getObjFromInputs(t);n.resolve(t)},function(){n.reject("getPayChannelSchemeFail")});return n.promise()},checkPayResultByUrl:function(t,n,r){function u(e){var t=o.test(e),n="";if(t){n=RegExp.$1;n=n.replace("\n","");C(n,{data:{temp:1},type:"POST"}).then(function(e,t){s.resolve(t)},function(){s.reject.apply(s,arguments)})}else{s.reject("payFail")}}var i="http://epay.12306.cn/pay/wapResponse?TRANS_ID="+t+"&bankId="+n;A("checkPayResultByUrl this._wapBusinessData:",this._wapBusinessData);if(this._wapBusinessData&&this._wapBusinessData.notify_url){i=this._wapBusinessData.notify_url}if(r){i=r+"?TRANS_ID="+t+"&bankId="+n}var s=$.Deferred();var o=new RegExp(/<form[^>]*action="([^"]*)"/g);C(i,{}).then(function(e,t){u(t)},function(){s.reject.apply(s,arguments)});return s.promise()},isServerOccupationOrderNo:function(t){if(typeof t==="string"&&t.length===20&&t.indexOf("qgpww")<0){return true}return false},notifyC2SyncOrder:function(t){function i(e){var t=$.Deferred();window.sendWatchMessage({key:"notifyC2SyncOrder",isSuccessful:true});return t.resolve.apply(t,arguments)}function s(e){var t=$.Deferred();window.sendWatchMessage({key:"notifyC2SyncOrder",isSuccessful:false});return t.reject.apply(t,arguments)}var n=$.Deferred();if(!O.isServerOccupationOrderNo(t)){return n.reject("notCOrderNo")}var r={orderNo:t};return O.postRequest("t_tReqCtripVerifyOrderPayStatus",r).then(i,s)},fetchQunarOrderStatus:function(t){function i(e){var t=[20,30,40,50,31,32,51];var n=$.Deferred();window.sendWatchMessage({key:"fetchQunarOrderStatus",isSuccessful:true});if(e&&t.indexOf(+e.orderStatus)>=0){return n.resolve.apply(n,arguments)}return n.reject.apply(n,arguments)}function s(e){var t=$.Deferred();window.sendWatchMessage({key:"fetchQunarOrderStatus",isSuccessful:false});return t.reject.apply(t,arguments)}var n=$.Deferred();if(!O.isServerOccupationOrderNo(t)){return n.reject("notCOrderNo")}var r={orderNo:t};return O.postRequest("t_tTrainOrderStatus",r).then(i,s)},checkAliPayResultByUrl:function(t,n,r,i){function o(e){var t="æ¯ä»å·²æå";var n=e.indexOf(t);if(n>0){return s.resolve("paySuc")}else{return u("payFail")}}function u(e){return O.fetchQunarOrderStatus(i).then(s.resolve.bind(s,"paySuc"),s.reject.bind(s,"payFail"))}console.log("checkAliPayResultByUrl:",arguments);var s=$.Deferred();return this.checkPayResultByUrl(t,n,r).then(o,u)},syncRefundResult:function(t,n){function r(){var e={orderNo:t["sequence_no"],passengers:[]};var r;t.tickets.forEach(function(t,i){r={};var s=t.passenger_id_no===n.passenger_id_no;r["certNo"]=t["passenger_id_no"];r["ticketType"]=t["ticket_type_code"];r["ticketStatus"]=s?"c":t["ticket_status_code"];e.passengers.push(r)});var i={type:0,content:JSON.stringify(e)};return i}return O.postRequest("t_tTrainNotifyServer",r())},queryLeftTicketSuccessHandler:function(t,n){var r={station_train_code:t.station_train_code,location_code:t.location_code,yp_info:t.yp_info||t.yp_info_cover,train_no:t.train_no,seat_type_codes:""};if(!t.yp_info&&!t.yp_info_cover)return t.message||"noYpInfoProvided";var i=this.getPriorSeatType(t,n);var s=i.result;n.priorSeatType=i;if(s==="parseYpInfoFail")s=i.origin;if(i.result==="-1"){return"ypNotEnough"}r.seat_type_codes=Array(+n.ticket_type_order_num).join(s+",")+s;delete n.seats;$.extend(n,r);return true},getCurrentProvider:function(){function n(e){var n=[].slice.call(e.provider,0);var r="";if(n.length>0)r=n.shift();t.resolve(r)}var t=$.Deferred();fusion12306.getProvider().then(n.bind(this));return t.promise()},formatDuration:function(t){var n=+t.slice(0,2),r=+t.slice(3,5);var i=n*60+r;return i.toString()},getSameCityCode:function(t){return L.find(function(e){return e.indexOf(t)!==-1})},seatTypeMap:{D:"qt_num",E:"qt_num",F:"srrb_num",G:"qt_num",A:"qt_num",B:"qt_num",C:"qt_num",L:"qt_num",M:"zy_num",O:"ze_num",H:"qt_num",I:"qt_num",J:"qt_num",K:"qt_num",Q:"qt_num",P:"tz_num",S:"qt_num",3:"yw_num",2:"rz_num",1:"yz_num",0:"wz_num",7:"qt_num",6:"gr_num",5:"qt_num",4:"rw_num",9:"swz_num",8:"qt_num"},domainTouch:new a.default,scaleImg:function(t,n,r){function o(){var e=i.width;var o=i.height;var f=a(e,o);var l=f.getContext("2d");var c=u(e,o,n);l.drawImage(i,0,0,c.w,c.h);l.drawImage(i,0,0);var h=f.toDataURL("image/jpeg",r||1);console.log("origin base64Img length:",t.length);console.log("scaled base64Img length:",h.length);console.log("ratio:",(h.length/t.length).toFixed(2));s.resolve(h)}function u(e,t,n){n=n||1;var r={w:parseInt(e*n),h:parseInt(t*n)};console.log("origin w & h:",e,t);console.log("scaled w & h:",r.w,r.h);return r}function a(e,t){var n=document.createElement("canvas");n.width=e;n.height=t;return n}var i=new Image;var s=$.Deferred();i.onload=o;i.onerror=s.reject.bind(s);i.src=t;i.setAttribute("crossOrigin","Anonymous");return s}};O.maskID=function(e){if(e&&e.length>15){return e.replace(/^(...)(.*)(....)$/,function(e,t,n,r){return t+n.replace(/./g,"*")+r})}return e};window.artTemplate&&window.artTemplate.helper("maskID",O.maskID);$.extend(O,q);O.ajax=C;window.Common=O;O.getWorkTime12306();e.exports=O},function(e,t){"use strict";var n={getSystemInfo:function(){var t=this._getSystemInfo();if(typeof t!=="string")return t;try{t=JSON.parse(t)}catch(n){}return t},_getSystemInfo:function(){try{if(navigator.userAgent.match(/[(iPad)|(iPod)|(iPhone)].*OS\s([\d_]+)/)){if(typeof __getSystemInfo!=="undefined"){return __getSystemInfo}}else if(navigator.userAgent.match(/(Android);?[\s\/]+([\d.]+)?/)){if(typeof WebViewJavascriptBridgeNative!=="undefined"&&WebViewJavascriptBridgeNative.__getSystemInfo){return WebViewJavascriptBridgeNative.__getSystemInfo()}}}catch(t){}return null},isPhoneX:function(){var t=[{width:375,height:812},{width:414,height:896}];var n=window.screen&&window.screen.width;var r=window.screen&&window.screen.height;var i=navigator.userAgent.match(/(iPhone\sOS)\s([\d_]+)/)?true:false;var s=i&&n&&r&&t.some(function(e){return n===e.width&&r===e.height||n===e.height&&r===e.width});return s},isNotch:function(){var t=this.getSystemInfo();var n=t&&t.notchInfo&&t.notchInfo.notch;return n},isImmersive:function(){var t=this.getSystemInfo();var n=t&&t.immersiveInfo&&t.immersiveInfo.immersive;return n},getImmersiveOffset:function(){var t=this.getSystemInfo();var n=t&&t.immersiveInfo&&t.notchInfo.immersiveOffset;return n},setStatusBarStyle:function(t){function r(){console.log("setStatusBarStyle success:",arguments)}function i(){console.log("setStatusBarStyle fail:",arguments)}if(!window.hysdk)return;t=t||"dark";var n={color:t,success:r,fail:i};hysdk.app.setStatusBarStyle(n)},safeAreaInsets:function(){if(n.isPhoneX()){return{top:44,left:0,bottom:34,right:0}}else if(this.isNotch()){return{top:44,left:0,bottom:0,right:0}}return{top:20,left:0,bottom:0,right:0}},cssSuffix:function(t,r){if(r){return t+(n.isPhoneX()?r:"")}return t+(n.isPhoneX()?"-for-x":"")}};e.exports=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}Object.defineProperty(t,"__esModule",{value:true});t.default=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(322);var s=o(i);var l=function(e){function t(e){u(this,t);return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}f(t,e);r(t,[{key:"getDomainDictionary",value:function(){var t={online:{reg:/touch\.train\.qunar\.com/i,domain:"touch.train.qunar.com",protocol:"https"},beta:{reg:/tmt\.train([a-z])\.beta\.qunar\.com/i,domain:"tmt.train[index].beta.qunar.com",protocol:"http"},dev:{reg:/tmt\.train([a-z])\.dev\.qunar\.com/i,domain:"tmt.train[index].dev.qunar.com",protocol:"http"}};return t}},{key:"inAccordWithHyEnvironment",value:function(t){var n=(new s.default).environment(location.href);var r=this.getDomainDictionary();var i=this.replaceDomain(t,n);i=i.replace(/^https?/,function(e){var t=r[n[0]];if(t&&t.protocol){return t.protocol}return e});return i}}]);return t}(s.default);t.default=l},function(e,t){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i="x";var s=function(){function e(){r(this,e)}n(e,[{key:"getDomainDictionary",value:function(){var t={online:{reg:/hy\.train\.qunar\.com/i,domain:"hy.train.qunar.com"},beta:{reg:/fetrain([a-z])\.beta\.qunar\.com/i,domain:"fetrain[index].beta.qunar.com"},dev:{reg:/hytrain\.beta\.qunar\.com/i,domain:"hytrain.beta.qunar.com"}};return t}},{key:"environment",value:function(t){t=t||location.href;var n=this.getDomainDictionary();var r=null,i=null;for(var s in n){r=t.match(n[s].reg);r&&(i=[s,r[1]||""])}return i||["unrecognized",""]}},{key:"replaceDomain",value:function(t,n){var r=this.getDomainDictionary();var s=this.environment(t);var o=r[s[0]];var u=r[n[0]];if(!o||!u)return t;var a=t.replace(o.reg,function(e){var t=u.domain||"";return t.replace("[index]",n[1]||i)});return a}}]);return e}();t.default=s},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var o=function(){function e(){s(this,e);this.allTouchDomains=["touch.train.qunar.com","tmt.train.beta.qunar.com","tmt.traina.beta.qunar.com","tmt.trainb.beta.qunar.com","tmt.trainc.beta.qunar.com","tmt.traind.beta.qunar.com","tmt.traine.beta.qunar.com","tmt.trainnoah.beta.qunar.com","tmt.trainnoaha.beta.qunar.com","tmt.trainnoahb.beta.qunar.com","tmt.trainnoahc.beta.qunar.com","tmt.trainnoahd.beta.qunar.com","tmt.trainnoahe.beta.qunar.com","tmt.trainnoahf.beta.qunar.com","tmttraina.beta.qunar.com","tmttrainb.beta.qunar.com","tmttrainc.beta.qunar.com","tmttraind.beta.qunar.com","tmttrainnoaha.beta.qunar.com","tmttrainnoahf.beta.qunar.com","touch.train.beta.qunar.com","touch.traina.beta.qunar.com","touch.trainb.beta.qunar.com","touch.trainc.beta.qunar.com","touch.traind.beta.qunar.com","touch.traine.beta.qunar.com","touch.trainnoaha.beta.qunar.com","touch.trainnoahb.beta.qunar.com","touch.trainnoahc.beta.qunar.com","touch.trainnoahd.beta.qunar.com","touch.trainnoahe.beta.qunar.com","touch.trainnoahf.beta.qunar.com"]}i(e,[{key:"getSubList",value:function(){var t=[];this.allTouchDomains.forEach(function(e){var n={name:"",value:e},r=e.split(".");if(e=="touch.train.qunar.com"){n.name="çº¿ä¸åå: "+e}else{if(e.includes("touch")){n.name+="ètouch "}else{n.name+="æ°touch "}if(r.length==4){var i=r[0].slice(8),s="Beta";if(i.includes("noah")){s="Noah"}n.name+="å®å¨åå "+s+r[0].slice(-1).toUpperCase()+": "+e}else{var o=r[1].slice(5),u="";if(r[1]=="train"){u="Beta"}else if(o.includes("noah")){u="N"+o.slice(1,4)+o.slice(4,5).toUpperCase()}else{u="Beta"+r[1].slice(-1).toUpperCase()}n.name+=u+": "+e}}t.push(n)});return t}},{key:"storeValue",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=Common.getStoredInfo("touchDomainObj")||{};var i=r({},n,t);Common.storeInfo("touchDomainObj",i,true)}},{key:"getTouchUrl",value:function(t){var n="https://touch.train.qunar.com";if({buildType:"prd",deployType:"prod"}.deployType&&{buildType:"prd",deployType:"prod"}.deployType=="prod"){return t.replace(/^(http:|https:)?(\/\/)?(touch|tmt)\.train([^(\/|?)]*)\.qunar\.com/i,n)}var r=Common.getStoredInfo("touchDomainObj")||{};if($.isEmptyObject(r)){return t.replace(/^(http:|https:)?(\/\/)?(touch|tmt)\.train([^(\/|?)]*)\.qunar\.com/i,n)}var i=r.isUseHttps===false?"http://":"https://";var s=i+r.domain;return t.replace(/^(http:|https:)?(\/\/)?(touch|tmt)\.train([^(\/|?)]*)\.qunar\.com/i,s)}}]);return e}();t.default=o},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357))}else if(typeof define==="function"&&define.amd){define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],i)}else{r.CryptoJS=i(r.CryptoJS)}})(this,function(e){return e})},function(e,t,n){(function(n,r){if(true){e.exports=t=r()}else if(typeof define==="function"&&define.amd){define([],r)}else{n.CryptoJS=r()}})(this,function(){var e=e||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;e.prototype=t;n=new e;e.prototype=null;return n}}();var r={};var i=r.lib={};var s=i.Base=function(){return{extend:function(e){var t=n(this);if(e){t.mixIn(e)}if(!t.hasOwnProperty("init")||this.init===t.init){t.init=function(){t.$super.init.apply(this,arguments)}}t.init.prototype=t;t.$super=this;return t},create:function(){var e=this.extend();e.init.apply(e,arguments);return e},init:function(){},mixIn:function(e){for(var t in e){if(e.hasOwnProperty(t)){this[t]=e[t]}}if(e.hasOwnProperty("toString")){this.toString=e.toString}},clone:function(){return this.init.prototype.extend(this)}}}();var o=i.WordArray=s.extend({init:function(e,n){e=this.words=e||[];if(n!=t){this.sigBytes=n}else{this.sigBytes=e.length*4}},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words;var n=e.words;var r=this.sigBytes;var i=e.sigBytes;this.clamp();if(r%4){for(var s=0;s<i;s++){var o=n[s>>>2]>>>24-s%4*8&255;t[r+s>>>2]|=o<<24-(r+s)%4*8}}else{for(var s=0;s<i;s+=4){t[r+s>>>2]=n[s>>>2]}}this.sigBytes+=i;return this},clamp:function(){var t=this.words;var n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8;t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);e.words=this.words.slice(0);return e},random:function(t){var n=[];var r=function(t){var t=t;var n=987654321;var r=4294967295;return function(){n=36969*(n&65535)+(n>>16)&r;t=18e3*(t&65535)+(t>>16)&r;var i=(n<<16)+t&r;i/=4294967296;i+=.5;return i*(e.random()>.5?1:-1)}};for(var i=0,s;i<t;i+=4){var u=r((s||e.random())*4294967296);s=u()*987654071;n.push(u()*4294967296|0)}return new o.init(n,t)}});var u=r.enc={};var a=u.Hex={stringify:function(e){var t=e.words;var n=e.sigBytes;var r=[];for(var i=0;i<n;i++){var s=t[i>>>2]>>>24-i%4*8&255;r.push((s>>>4).toString(16));r.push((s&15).toString(16))}return r.join("")},parse:function(e){var t=e.length;var n=[];for(var r=0;r<t;r+=2){n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4}return new o.init(n,t/2)}};var f=u.Latin1={stringify:function(e){var t=e.words;var n=e.sigBytes;var r=[];for(var i=0;i<n;i++){var s=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){var t=e.length;var n=[];for(var r=0;r<t;r++){n[r>>>2]|=(e.charCodeAt(r)&255)<<24-r%4*8}return new o.init(n,t)}};var l=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}};var c=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init;this._nDataBytes=0},_append:function(e){if(typeof e=="string"){e=l.parse(e)}this._data.concat(e);this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data;var r=n.words;var i=n.sigBytes;var s=this.blockSize;var u=s*4;var a=i/u;if(t){a=e.ceil(a)}else{a=e.max((a|0)-this._minBufferSize,0)}var f=a*s;var l=e.min(f*4,i);if(f){for(var c=0;c<f;c+=s){this._doProcessBlock(r,c)}var h=r.splice(0,f);n.sigBytes-=l}return new o.init(h,l)},clone:function(){var e=s.clone.call(this);e._data=this._data.clone();return e},_minBufferSize:0});var h=i.Hasher=c.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e);this.reset()},reset:function(){c.reset.call(this);this._doReset()},update:function(e){this._append(e);this._process();return this},finalize:function(e){if(e){this._append(e)}var t=this._doFinalize();return t},blockSize:512/32,_createHelper:function(e){return function(t,n){return(new e.init(n)).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return(new p.HMAC.init(e,n)).finalize(t)}}});var p=r.algo={};return r}(Math);return e})},function(e,t,n){(function(r,i){if(true){e.exports=t=i(n(325))}else if(typeof define==="function"&&define.amd){define(["./core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(t){var n=e;var r=n.lib;var i=r.Base;var s=r.WordArray;var o=n.x64={};var u=o.Word=i.extend({init:function(e,t){this.high=e;this.low=t}});var a=o.WordArray=i.extend({init:function(e,n){e=this.words=e||[];if(n!=t){this.sigBytes=n}else{this.sigBytes=e.length*8}},toX32:function(){var e=this.words;var t=e.length;var n=[];for(var r=0;r<t;r++){var i=e[r];n.push(i.high);n.push(i.low)}return s.create(n,this.sigBytes)},clone:function(){var e=i.clone.call(this);var t=e.words=this.words.slice(0);var n=t.length;for(var r=0;r<n;r++){t[r]=t[r].clone()}return e}})})();return e})},function(e,t,n){(function(r,i){if(true){e.exports=t=i(n(325))}else if(typeof define==="function"&&define.amd){define(["./core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){if(typeof ArrayBuffer!="function"){return}var t=e;var n=t.lib;var r=n.WordArray;var i=r.init;var s=r.init=function(e){if(e instanceof ArrayBuffer){e=new Uint8Array(e)}if(e instanceof Int8Array||typeof Uint8ClampedArray!=="undefined"&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array){e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}if(e instanceof Uint8Array){var t=e.byteLength;var n=[];for(var r=0;r<t;r++){n[r>>>2]|=e[r]<<24-r%4*8}i.call(this,n,t)}else{i.apply(this,arguments)}};s.prototype=r})();return e.lib.WordArray})},function(e,t,n){(function(r,i){if(true){e.exports=t=i(n(325))}else if(typeof define==="function"&&define.amd){define(["./core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){function o(e){return e<<8&4278255360|e>>>8&16711935}var t=e;var n=t.lib;var r=n.WordArray;var i=t.enc;var s=i.Utf16=i.Utf16BE={stringify:function(e){var t=e.words;var n=e.sigBytes;var r=[];for(var i=0;i<n;i+=2){var s=t[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){var t=e.length;var n=[];for(var i=0;i<t;i++){n[i>>>1]|=e.charCodeAt(i)<<16-i%2*16}return r.create(n,t*2)}};i.Utf16LE={stringify:function(e){var t=e.words;var n=e.sigBytes;var r=[];for(var i=0;i<n;i+=2){var s=o(t[i>>>2]>>>16-i%4*8&65535);r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){var t=e.length;var n=[];for(var i=0;i<t;i++){n[i>>>1]|=o(e.charCodeAt(i)<<16-i%2*16)}return r.create(n,t*2)}}})();return e.enc.Utf16})},function(e,t,n){(function(r,i){if(true){e.exports=t=i(n(325))}else if(typeof define==="function"&&define.amd){define(["./core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){function o(e,t,n){var i=[];var s=0;for(var o=0;o<t;o++){if(o%4){var u=n[e.charCodeAt(o-1)]<<o%4*2;var a=n[e.charCodeAt(o)]>>>6-o%4*2;i[s>>>2]|=(u|a)<<24-s%4*8;s++}}return r.create(i,s)}var t=e;var n=t.lib;var r=n.WordArray;var i=t.enc;var s=i.Base64={stringify:function(e){var t=e.words;var n=e.sigBytes;var r=this._map;e.clamp();var i=[];for(var s=0;s<n;s+=3){var o=t[s>>>2]>>>24-s%4*8&255;var u=t[s+1>>>2]>>>24-(s+1)%4*8&255;var a=t[s+2>>>2]>>>24-(s+2)%4*8&255;var f=o<<16|u<<8|a;for(var l=0;l<4&&s+l*.75<n;l++){i.push(r.charAt(f>>>6*(3-l)&63))}}var c=r.charAt(64);if(c){while(i.length%4){i.push(c)}}return i.join("")},parse:function(e){var t=e.length;var n=this._map;var r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<n.length;i++){r[n.charCodeAt(i)]=i}}var s=n.charAt(64);if(s){var u=e.indexOf(s);if(u!==-1){t=u}}return o(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();return e.enc.Base64})},function(e,t,n){(function(r,i){if(true){e.exports=t=i(n(325))}else if(typeof define==="function"&&define.amd){define(["./core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(t){function f(e,t,n,r,i,s,o){var u=e+(t&n|~t&r)+i+o;return(u<<s|u>>>32-s)+t}function l(e,t,n,r,i,s,o){var u=e+(t&r|n&~r)+i+o;return(u<<s|u>>>32-s)+t}function c(e,t,n,r,i,s,o){var u=e+(t^n^r)+i+o;return(u<<s|u>>>32-s)+t}function h(e,t,n,r,i,s,o){var u=e+(n^(t|~r))+i+o;return(u<<s|u>>>32-s)+t}var n=e;var r=n.lib;var i=r.WordArray;var s=r.Hasher;var o=n.algo;var u=[];(function(){for(var e=0;e<64;e++){u[e]=t.abs(t.sin(e+1))*4294967296|0}})();var a=o.MD5=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n;var i=e[r];e[r]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360}var s=this._hash.words;var o=e[t+0];var a=e[t+1];var p=e[t+2];var d=e[t+3];var v=e[t+4];var m=e[t+5];var g=e[t+6];var y=e[t+7];var b=e[t+8];var w=e[t+9];var E=e[t+10];var S=e[t+11];var x=e[t+12];var N=e[t+13];var C=e[t+14];var k=e[t+15];var L=s[0];var A=s[1];var O=s[2];var M=s[3];L=f(L,A,O,M,o,7,u[0]);M=f(M,L,A,O,a,12,u[1]);O=f(O,M,L,A,p,17,u[2]);A=f(A,O,M,L,d,22,u[3]);L=f(L,A,O,M,v,7,u[4]);M=f(M,L,A,O,m,12,u[5]);O=f(O,M,L,A,g,17,u[6]);A=f(A,O,M,L,y,22,u[7]);L=f(L,A,O,M,b,7,u[8]);M=f(M,L,A,O,w,12,u[9]);O=f(O,M,L,A,E,17,u[10]);A=f(A,O,M,L,S,22,u[11]);L=f(L,A,O,M,x,7,u[12]);M=f(M,L,A,O,N,12,u[13]);O=f(O,M,L,A,C,17,u[14]);A=f(A,O,M,L,k,22,u[15]);L=l(L,A,O,M,a,5,u[16]);M=l(M,L,A,O,g,9,u[17]);O=l(O,M,L,A,S,14,u[18]);A=l(A,O,M,L,o,20,u[19]);L=l(L,A,O,M,m,5,u[20]);M=l(M,L,A,O,E,9,u[21]);O=l(O,M,L,A,k,14,u[22]);A=l(A,O,M,L,v,20,u[23]);L=l(L,A,O,M,w,5,u[24]);M=l(M,L,A,O,C,9,u[25]);O=l(O,M,L,A,d,14,u[26]);A=l(A,O,M,L,b,20,u[27]);L=l(L,A,O,M,N,5,u[28]);M=l(M,L,A,O,p,9,u[29]);O=l(O,M,L,A,y,14,u[30]);A=l(A,O,M,L,x,20,u[31]);L=c(L,A,O,M,m,4,u[32]);M=c(M,L,A,O,b,11,u[33]);O=c(O,M,L,A,S,16,u[34]);A=c(A,O,M,L,C,23,u[35]);L=c(L,A,O,M,a,4,u[36]);M=c(M,L,A,O,v,11,u[37]);O=c(O,M,L,A,y,16,u[38]);A=c(A,O,M,L,E,23,u[39]);L=c(L,A,O,M,N,4,u[40]);M=c(M,L,A,O,o,11,u[41]);O=c(O,M,L,A,d,16,u[42]);A=c(A,O,M,L,g,23,u[43]);L=c(L,A,O,M,w,4,u[44]);M=c(M,L,A,O,x,11,u[45]);O=c(O,M,L,A,k,16,u[46]);A=c(A,O,M,L,p,23,u[47]);L=h(L,A,O,M,o,6,u[48]);M=h(M,L,A,O,y,10,u[49]);O=h(O,M,L,A,C,15,u[50]);A=h(A,O,M,L,m,21,u[51]);L=h(L,A,O,M,x,6,u[52]);M=h(M,L,A,O,d,10,u[53]);O=h(O,M,L,A,E,15,u[54]);A=h(A,O,M,L,a,21,u[55]);L=h(L,A,O,M,b,6,u[56]);M=h(M,L,A,O,k,10,u[57]);O=h(O,M,L,A,g,15,u[58]);A=h(A,O,M,L,N,21,u[59]);L=h(L,A,O,M,v,6,u[60]);M=h(M,L,A,O,S,10,u[61]);O=h(O,M,L,A,p,15,u[62]);A=h(A,O,M,L,w,21,u[63]);s[0]=s[0]+L|0;s[1]=s[1]+A|0;s[2]=s[2]+O|0;s[3]=s[3]+M|0},_doFinalize:function(){var e=this._data;var n=e.words;var r=this._nDataBytes*8;var i=e.sigBytes*8;n[i>>>5]|=128<<24-i%32;var s=t.floor(r/4294967296);var o=r;n[(i+64>>>9<<4)+15]=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360;n[(i+64>>>9<<4)+14]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360;e.sigBytes=(n.length+1)*4;this._process();var u=this._hash;var a=u.words;for(var f=0;f<4;f++){var l=a[f];a[f]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360}return u},clone:function(){var e=s.clone.call(this);e._hash=this._hash.clone();return e}});n.MD5=s._createHelper(a);n.HmacMD5=s._createHmacHelper(a)})(Math);return e.MD5})},function(e,t,n){(function(r,i){if(true){e.exports=t=i(n(325))}else if(typeof define==="function"&&define.amd){define(["./core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){var t=e;var n=t.lib;var r=n.WordArray;var i=n.Hasher;var s=t.algo;var o=[];var u=s.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){var n=this._hash.words;var r=n[0];var i=n[1];var s=n[2];var u=n[3];var a=n[4];for(var f=0;f<80;f++){if(f<16){o[f]=e[t+f]|0}else{var l=o[f-3]^o[f-8]^o[f-14]^o[f-16];o[f]=l<<1|l>>>31}var c=(r<<5|r>>>27)+a+o[f];if(f<20){c+=(i&s|~i&u)+1518500249}else if(f<40){c+=(i^s^u)+1859775393}else if(f<60){c+=(i&s|i&u|s&u)-1894007588}else{c+=(i^s^u)-899497514}a=u;u=s;s=i<<30|i>>>2;i=r;r=c}n[0]=n[0]+r|0;n[1]=n[1]+i|0;n[2]=n[2]+s|0;n[3]=n[3]+u|0;n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data;var t=e.words;var n=this._nDataBytes*8;var r=e.sigBytes*8;t[r>>>5]|=128<<24-r%32;t[(r+64>>>9<<4)+14]=Math.floor(n/4294967296);t[(r+64>>>9<<4)+15]=n;e.sigBytes=t.length*4;this._process();return this._hash},clone:function(){var e=i.clone.call(this);e._hash=this._hash.clone();return e}});t.SHA1=i._createHelper(u);t.HmacSHA1=i._createHmacHelper(u)})();return e.SHA1})},function(e,t,n){(function(r,i){if(true){e.exports=t=i(n(325))}else if(typeof define==="function"&&define.amd){define(["./core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(t){var n=e;var r=n.lib;var i=r.WordArray;var s=r.Hasher;var o=n.algo;var u=[];var a=[];(function(){function e(e){var n=t.sqrt(e);for(var r=2;r<=n;r++){if(!(e%r)){return false}}return true}function n(e){return(e-(e|0))*4294967296|0}var r=2;var i=0;while(i<64){if(e(r)){if(i<8){u[i]=n(t.pow(r,1/2))}a[i]=n(t.pow(r,1/3));i++}r++}})();var f=[];var l=o.SHA256=s.extend({_doReset:function(){this._hash=new i.init(u.slice(0))},_doProcessBlock:function(e,t){var n=this._hash.words;var r=n[0];var i=n[1];var s=n[2];var o=n[3];var u=n[4];var l=n[5];var c=n[6];var h=n[7];for(var p=0;p<64;p++){if(p<16){f[p]=e[t+p]|0}else{var d=f[p-15];var v=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3;var m=f[p-2];var g=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;f[p]=v+f[p-7]+g+f[p-16]}var y=u&l^~u&c;var b=r&i^r&s^i&s;var w=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22);var E=(u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25);var S=h+E+y+a[p]+f[p];var x=w+b;h=c;c=l;l=u;u=o+S|0;o=s;s=i;i=r;r=S+x|0}n[0]=n[0]+r|0;n[1]=n[1]+i|0;n[2]=n[2]+s|0;n[3]=n[3]+o|0;n[4]=n[4]+u|0;n[5]=n[5]+l|0;n[6]=n[6]+c|0;n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data;var n=e.words;var r=this._nDataBytes*8;var i=e.sigBytes*8;n[i>>>5]|=128<<24-i%32;n[(i+64>>>9<<4)+14]=t.floor(r/4294967296);n[(i+64>>>9<<4)+15]=r;e.sigBytes=n.length*4;this._process();return this._hash},clone:function(){var e=s.clone.call(this);e._hash=this._hash.clone();return e}});n.SHA256=s._createHelper(l);n.HmacSHA256=s._createHmacHelper(l)})(Math);return e.SHA256})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(332))}else if(typeof define==="function"&&define.amd){define(["./core","./sha256"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){var t=e;var n=t.lib;var r=n.WordArray;var i=t.algo;var s=i.SHA256;var o=i.SHA224=s.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=s._doFinalize.call(this);e.sigBytes-=4;return e}});t.SHA224=s._createHelper(o);t.HmacSHA224=s._createHmacHelper(o)})();return e.SHA224})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(326))}else if(typeof define==="function"&&define.amd){define(["./core","./x64-core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){function a(){return s.create.apply(s,arguments)}var t=e;var n=t.lib;var r=n.Hasher;var i=t.x64;var s=i.Word;var o=i.WordArray;var u=t.algo;var f=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)];var l=[];(function(){for(var e=0;e<80;e++){l[e]=a()}})();var c=u.SHA512=r.extend({_doReset:function(){this._hash=new o.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(e,t){var n=this._hash.words;var r=n[0];var i=n[1];var s=n[2];var o=n[3];var u=n[4];var a=n[5];var c=n[6];var h=n[7];var p=r.high;var d=r.low;var v=i.high;var m=i.low;var g=s.high;var y=s.low;var b=o.high;var w=o.low;var E=u.high;var S=u.low;var x=a.high;var T=a.low;var N=c.high;var C=c.low;var k=h.high;var L=h.low;var A=p;var O=d;var M=v;var _=m;var D=g;var P=y;var H=b;var B=w;var j=E;var F=S;var I=x;var q=T;var R=N;var U=C;var z=k;var X=L;for(var V=0;V<80;V++){var $=l[V];if(V<16){var J=$.high=e[t+V*2]|0;var Q=$.low=e[t+V*2+1]|0}else{var G=l[V-15];var Y=G.high;var Z=G.low;var et=(Y>>>1|Z<<31)^(Y>>>8|Z<<24)^Y>>>7;var tt=(Z>>>1|Y<<31)^(Z>>>8|Y<<24)^(Z>>>7|Y<<25);var nt=l[V-2];var rt=nt.high;var it=nt.low;var st=(rt>>>19|it<<13)^(rt<<3|it>>>29)^rt>>>6;var ot=(it>>>19|rt<<13)^(it<<3|rt>>>29)^(it>>>6|rt<<26);var ut=l[V-7];var at=ut.high;var ft=ut.low;var lt=l[V-16];var ct=lt.high;var ht=lt.low;var Q=tt+ft;var J=et+at+(Q>>>0<tt>>>0?1:0);var Q=Q+ot;var J=J+st+(Q>>>0<ot>>>0?1:0);var Q=Q+ht;var J=J+ct+(Q>>>0<ht>>>0?1:0);$.high=J;$.low=Q}var pt=j&I^~j&R;var dt=F&q^~F&U;var vt=A&M^A&D^M&D;var mt=O&_^O&P^_&P;var gt=(A>>>28|O<<4)^(A<<30|O>>>2)^(A<<25|O>>>7);var yt=(O>>>28|A<<4)^(O<<30|A>>>2)^(O<<25|A>>>7);var bt=(j>>>14|F<<18)^(j>>>18|F<<14)^(j<<23|F>>>9);var wt=(F>>>14|j<<18)^(F>>>18|j<<14)^(F<<23|j>>>9);var Et=f[V];var St=Et.high;var xt=Et.low;var Tt=X+wt;var Nt=z+bt+(Tt>>>0<X>>>0?1:0);var Tt=Tt+dt;var Nt=Nt+pt+(Tt>>>0<dt>>>0?1:0);var Tt=Tt+xt;var Nt=Nt+St+(Tt>>>0<xt>>>0?1:0);var Tt=Tt+Q;var Nt=Nt+J+(Tt>>>0<Q>>>0?1:0);var Ct=yt+mt;var kt=gt+vt+(Ct>>>0<yt>>>0?1:0);z=R;X=U;R=I;U=q;I=j;q=F;F=B+Tt|0;j=H+Nt+(F>>>0<B>>>0?1:0)|0;H=D;B=P;D=M;P=_;M=A;_=O;O=Tt+Ct|0;A=Nt+kt+(O>>>0<Tt>>>0?1:0)|0}d=r.low=d+O;r.high=p+A+(d>>>0<O>>>0?1:0);m=i.low=m+_;i.high=v+M+(m>>>0<_>>>0?1:0);y=s.low=y+P;s.high=g+D+(y>>>0<P>>>0?1:0);w=o.low=w+B;o.high=b+H+(w>>>0<B>>>0?1:0);S=u.low=S+F;u.high=E+j+(S>>>0<F>>>0?1:0);T=a.low=T+q;a.high=x+I+(T>>>0<q>>>0?1:0);C=c.low=C+U;c.high=N+R+(C>>>0<U>>>0?1:0);L=h.low=L+X;h.high=k+z+(L>>>0<X>>>0?1:0)},_doFinalize:function(){var e=this._data;var t=e.words;var n=this._nDataBytes*8;var r=e.sigBytes*8;t[r>>>5]|=128<<24-r%32;t[(r+128>>>10<<5)+30]=Math.floor(n/4294967296);t[(r+128>>>10<<5)+31]=n;e.sigBytes=t.length*4;this._process();var i=this._hash.toX32();return i},clone:function(){var e=r.clone.call(this);e._hash=this._hash.clone();return e},blockSize:1024/32});t.SHA512=r._createHelper(c);t.HmacSHA512=r._createHmacHelper(c)})();return e.SHA512})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(326),n(334))}else if(typeof define==="function"&&define.amd){define(["./core","./x64-core","./sha512"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){var t=e;var n=t.x64;var r=n.Word;var i=n.WordArray;var s=t.algo;var o=s.SHA512;var u=s.SHA384=o.extend({_doReset:function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=o._doFinalize.call(this);e.sigBytes-=16;return e}});t.SHA384=o._createHelper(u);t.HmacSHA384=o._createHmacHelper(u)})();return e.SHA384})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(326))}else if(typeof define==="function"&&define.amd){define(["./core","./x64-core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(t){var n=e;var r=n.lib;var i=r.WordArray;var s=r.Hasher;var o=n.x64;var u=o.Word;var a=n.algo;var f=[];var l=[];var c=[];(function(){var e=1,t=0;for(var n=0;n<24;n++){f[e+5*t]=(n+1)*(n+2)/2%64;var r=t%5;var i=(2*e+3*t)%5;e=r;t=i}for(var e=0;e<5;e++){for(var t=0;t<5;t++){l[e+5*t]=t+(2*e+3*t)%5*5}}var s=1;for(var o=0;o<24;o++){var a=0;var h=0;for(var p=0;p<7;p++){if(s&1){var d=(1<<p)-1;if(d<32){h^=1<<d}else{a^=1<<d-32}}if(s&128){s=s<<1^113}else{s<<=1}}c[o]=u.create(a,h)}})();var h=[];(function(){for(var e=0;e<25;e++){h[e]=u.create()}})();var p=a.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){var e=this._state=[];for(var t=0;t<25;t++){e[t]=new u.init}this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){var n=this._state;var r=this.blockSize/2;for(var i=0;i<r;i++){var s=e[t+2*i];var o=e[t+2*i+1];s=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360;o=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360;var u=n[i];u.high^=o;u.low^=s}for(var a=0;a<24;a++){for(var p=0;p<5;p++){var d=0,v=0;for(var m=0;m<5;m++){var u=n[p+5*m];d^=u.high;v^=u.low}var g=h[p];g.high=d;g.low=v}for(var p=0;p<5;p++){var y=h[(p+4)%5];var b=h[(p+1)%5];var w=b.high;var E=b.low;var d=y.high^(w<<1|E>>>31);var v=y.low^(E<<1|w>>>31);for(var m=0;m<5;m++){var u=n[p+5*m];u.high^=d;u.low^=v}}for(var S=1;S<25;S++){var u=n[S];var x=u.high;var N=u.low;var C=f[S];if(C<32){var d=x<<C|N>>>32-C;var v=N<<C|x>>>32-C}else{var d=N<<C-32|x>>>64-C;var v=x<<C-32|N>>>64-C}var k=h[l[S]];k.high=d;k.low=v}var L=h[0];var A=n[0];L.high=A.high;L.low=A.low;for(var p=0;p<5;p++){for(var m=0;m<5;m++){var S=p+5*m;var u=n[S];var O=h[S];var M=h[(p+1)%5+5*m];var _=h[(p+2)%5+5*m];u.high=O.high^~M.high&_.high;u.low=O.low^~M.low&_.low}}var u=n[0];var D=c[a];u.high^=D.high;u.low^=D.low;}},_doFinalize:function(){var e=this._data;var n=e.words;var r=this._nDataBytes*8;var s=e.sigBytes*8;var o=this.blockSize*32;n[s>>>5]|=1<<24-s%32;n[(t.ceil((s+1)/o)*o>>>5)-1]|=128;e.sigBytes=n.length*4;this._process();var u=this._state;var a=this.cfg.outputLength/8;var f=a/8;var l=[];for(var c=0;c<f;c++){var h=u[c];var p=h.high;var d=h.low;p=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360;d=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360;l.push(d);l.push(p)}return new i.init(l,a)},clone:function(){var e=s.clone.call(this);var t=e._state=this._state.slice(0);for(var n=0;n<25;n++){t[n]=t[n].clone()}return e}});n.SHA3=s._createHelper(p);n.HmacSHA3=s._createHmacHelper(p)})(Math);return e.SHA3})},function(e,t,n){(function(r,i){if(true){e.exports=t=i(n(325))}else if(typeof define==="function"&&define.amd){define(["./core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(t){function d(e,t,n){return e^t^n}function v(e,t,n){return e&t|~e&n}function m(e,t,n){return(e|~t)^n}function g(e,t,n){return e&n|t&~n}function y(e,t,n){return e^(t|~n)}function b(e,t){return e<<t|e>>>32-t}var n=e;var r=n.lib;var i=r.WordArray;var s=r.Hasher;var o=n.algo;var u=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]);var a=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]);var f=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]);var l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]);var c=i.create([0,1518500249,1859775393,2400959708,2840853838]);var h=i.create([1352829926,1548603684,1836072691,2053994217,0]);var p=o.RIPEMD160=s.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n;var i=e[r];e[r]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360}var s=this._hash.words;var o=c.words;var p=h.words;var w=u.words;var E=a.words;var S=f.words;var x=l.words;var T,N,C,k,L;var A,O,M,_,D;A=T=s[0];O=N=s[1];M=C=s[2];_=k=s[3];D=L=s[4];var P;for(var n=0;n<80;n+=1){P=T+e[t+w[n]]|0;if(n<16){P+=d(N,C,k)+o[0]}else if(n<32){P+=v(N,C,k)+o[1]}else if(n<48){P+=m(N,C,k)+o[2]}else if(n<64){P+=g(N,C,k)+o[3]}else{P+=y(N,C,k)+o[4]}P=P|0;P=b(P,S[n]);P=P+L|0;T=L;L=k;k=b(C,10);C=N;N=P;P=A+e[t+E[n]]|0;if(n<16){P+=y(O,M,_)+p[0]}else if(n<32){P+=g(O,M,_)+p[1]}else if(n<48){P+=m(O,M,_)+p[2]}else if(n<64){P+=v(O,M,_)+p[3]}else{P+=d(O,M,_)+p[4]}P=P|0;P=b(P,x[n]);P=P+D|0;A=D;D=_;_=b(M,10);M=O;O=P}P=s[1]+C+_|0;s[1]=s[2]+k+D|0;s[2]=s[3]+L+A|0;s[3]=s[4]+T+O|0;s[4]=s[0]+N+M|0;s[0]=P},_doFinalize:function(){var e=this._data;var t=e.words;var n=this._nDataBytes*8;var r=e.sigBytes*8;t[r>>>5]|=128<<24-r%32;t[(r+64>>>9<<4)+14]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360;e.sigBytes=(t.length+1)*4;this._process();var i=this._hash;var s=i.words;for(var o=0;o<5;o++){var u=s[o];s[o]=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360}return i},clone:function(){var e=s.clone.call(this);e._hash=this._hash.clone();return e}});n.RIPEMD160=s._createHelper(p);n.HmacRIPEMD160=s._createHmacHelper(p)})(Math);return e.RIPEMD160})},function(e,t,n){(function(r,i){if(true){e.exports=t=i(n(325))}else if(typeof define==="function"&&define.amd){define(["./core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){var t=e;var n=t.lib;var r=n.Base;var i=t.enc;var s=i.Utf8;var o=t.algo;var u=o.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init;if(typeof t=="string"){t=s.parse(t)}var n=e.blockSize;var r=n*4;if(t.sigBytes>r){t=e.finalize(t)}t.clamp();var i=this._oKey=t.clone();var o=this._iKey=t.clone();var u=i.words;var a=o.words;for(var f=0;f<n;f++){u[f]^=1549556828;a[f]^=909522486}i.sigBytes=o.sigBytes=r;this.reset()},reset:function(){var e=this._hasher;e.reset();e.update(this._iKey)},update:function(e){this._hasher.update(e);return this},finalize:function(e){var t=this._hasher;var n=t.finalize(e);t.reset();var r=t.finalize(this._oKey.clone().concat(n));return r}})})()})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(331),n(338))}else if(typeof define==="function"&&define.amd){define(["./core","./sha1","./hmac"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){var t=e;var n=t.lib;var r=n.Base;var i=n.WordArray;var s=t.algo;var o=s.SHA1;var u=s.HMAC;var a=s.PBKDF2=r.extend({cfg:r.extend({keySize:128/32,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var n=this.cfg;var r=u.create(n.hasher,e);var s=i.create();var o=i.create([1]);var a=s.words;var f=o.words;var l=n.keySize;var c=n.iterations;while(a.length<l){var h=r.update(t).finalize(o);r.reset();var p=h.words;var d=p.length;var v=h;for(var m=1;m<c;m++){v=r.finalize(v);r.reset();var g=v.words;for(var y=0;y<d;y++){p[y]^=g[y]}}s.concat(h);f[0]++}s.sigBytes=l*4;return s}});t.PBKDF2=function(e,t,n){return a.create(n).compute(e,t)}})();return e.PBKDF2})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(331),n(338))}else if(typeof define==="function"&&define.amd){define(["./core","./sha1","./hmac"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){var t=e;var n=t.lib;var r=n.Base;var i=n.WordArray;var s=t.algo;var o=s.MD5;var u=s.EvpKDF=r.extend({cfg:r.extend({keySize:128/32,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var n=this.cfg;var r=n.hasher.create();var s=i.create();var o=s.words;var u=n.keySize;var a=n.iterations;while(o.length<u){if(f){r.update(f)}var f=r.update(e).finalize(t);r.reset();for(var l=1;l<a;l++){f=r.finalize(f);r.reset()}s.concat(f)}s.sigBytes=u*4;return s}});t.EvpKDF=function(e,t,n){return u.create(n).compute(e,t)}})();return e.EvpKDF})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(340))}else if(typeof define==="function"&&define.amd){define(["./core","./evpkdf"],i)}else{i(r.CryptoJS)}})(this,function(e){e.lib.Cipher||function(t){var n=e;var r=n.lib;var i=r.Base;var s=r.WordArray;var o=r.BufferedBlockAlgorithm;var u=n.enc;var a=u.Utf8;var f=u.Base64;var l=n.algo;var c=l.EvpKDF;var h=r.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n);this._xformMode=e;this._key=t;this.reset()},reset:function(){o.reset.call(this);this._doReset()},process:function(e){this._append(e);return this._process()},finalize:function(e){if(e){this._append(e)}var t=this._doFinalize();return t},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){if(typeof e=="string"){return C}else{return x}}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()});var p=r.StreamCipher=h.extend({_doFinalize:function(){var e=this._process(!!"flush");return e},blockSize:1});var d=n.mode={};var v=r.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e;this._iv=t}});var m=d.CBC=function(){function n(e,n,r){var i=this._iv;if(i){var s=i;this._iv=t}else{var s=this._prevBlock}for(var o=0;o<r;o++){e[n+o]^=s[o]}}var e=v.extend();e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher;var i=r.blockSize;n.call(this,e,t,i);r.encryptBlock(e,t);this._prevBlock=e.slice(t,t+i)}});e.Decryptor=e.extend({processBlock:function(e,t){var r=this._cipher;var i=r.blockSize;var s=e.slice(t,t+i);r.decryptBlock(e,t);n.call(this,e,t,i);this._prevBlock=s}});return e}();var g=n.pad={};var y=g.Pkcs7={pad:function(e,t){var n=t*4;var r=n-e.sigBytes%n;var i=r<<24|r<<16|r<<8|r;var o=[];for(var u=0;u<r;u+=4){o.push(i)}var a=s.create(o,r);e.concat(a)},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}};var b=r.BlockCipher=h.extend({cfg:h.cfg.extend({mode:m,padding:y}),reset:function(){h.reset.call(this);var e=this.cfg;var t=e.iv;var n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE){var r=n.createEncryptor}else{var r=n.createDecryptor;this._minBufferSize=1}if(this._mode&&this._mode.__creator==r){this._mode.init(this,t&&t.words)}else{this._mode=r.call(n,this,t&&t.words);this._mode.__creator=r}},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!!"flush")}else{var t=this._process(!!"flush");e.unpad(t)}return t},blockSize:128/32});var w=r.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}});var E=n.format={};var S=E.OpenSSL={stringify:function(e){var t=e.ciphertext;var n=e.salt;if(n){var r=s.create([1398893684,1701076831]).concat(n).concat(t)}else{var r=t}return r.toString(f)},parse:function(e){var t=f.parse(e);var n=t.words;if(n[0]==1398893684&&n[1]==1701076831){var r=s.create(n.slice(2,4));n.splice(0,4);t.sigBytes-=16}return w.create({ciphertext:t,salt:r})}};var x=r.SerializableCipher=i.extend({cfg:i.extend({format:S}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);var s=i.finalize(t);var o=i.cfg;return w.create({ciphertext:s,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){r=this.cfg.extend(r);t=this._parse(t,r.format);var i=e.createDecryptor(n,r).finalize(t.ciphertext);return i},_parse:function(e,t){if(typeof e=="string"){return t.parse(e,this)}else{return e}}});var T=n.kdf={};var N=T.OpenSSL={execute:function(e,t,n,r){if(!r){r=s.random(64/8)}var i=c.create({keySize:t+n}).compute(e,r);var o=s.create(i.words.slice(t),n*4);i.sigBytes=t*4;return w.create({key:i,iv:o,salt:r})}};var C=r.PasswordBasedCipher=x.extend({cfg:x.cfg.extend({kdf:N}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=r.kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var s=x.encrypt.call(this,e,t,i.key,r);s.mixIn(i);return s},decrypt:function(e,t,n,r){r=this.cfg.extend(r);t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);r.iv=i.iv;var s=x.decrypt.call(this,e,t,i.key,r);return s}})}()})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){e.mode.CFB=function(){function n(e,t,n,r){var i=this._iv;if(i){var s=i.slice(0);this._iv=undefined}else{var s=this._prevBlock}r.encryptBlock(s,0);for(var o=0;o<n;o++){e[t+o]^=s[o]}}var t=e.lib.BlockCipherMode.extend();t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher;var i=r.blockSize;n.call(this,e,t,i,r);this._prevBlock=e.slice(t,t+i)}});t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher;var i=r.blockSize;var s=e.slice(t,t+i);n.call(this,e,t,i,r);this._prevBlock=s}});return t}();return e.mode.CFB})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend();var n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher;var r=n.blockSize;var i=this._iv;var s=this._counter;if(i){s=this._counter=i.slice(0);this._iv=undefined}var o=s.slice(0);n.encryptBlock(o,0);s[r-1]=s[r-1]+1|0;for(var u=0;u<r;u++){e[t+u]^=o[u]}}});t.Decryptor=n;return t}();return e.mode.CTR})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){e.mode.CTRGladman=function(){function n(e){if((e>>24&255)===255){var t=e>>16&255;var n=e>>8&255;var r=e&255;if(t===255){t=0;if(n===255){n=0;if(r===255){r=0}else{++r}}else{++n}}else{++t}e=0;e+=t<<16;e+=n<<8;e+=r}else{e+=1<<24}return e}function r(e){if((e[0]=n(e[0]))===0){e[1]=n(e[1])}return e}var t=e.lib.BlockCipherMode.extend();var i=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher;var i=n.blockSize;var s=this._iv;var o=this._counter;if(s){o=this._counter=s.slice(0);this._iv=undefined}r(o);var u=o.slice(0);n.encryptBlock(u,0);for(var a=0;a<i;a++){e[t+a]^=u[a]}}});t.Decryptor=i;return t}();return e.mode.CTRGladman})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend();var n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher;var r=n.blockSize;var i=this._iv;var s=this._keystream;if(i){s=this._keystream=i.slice(0);this._iv=undefined}n.encryptBlock(s,0);for(var o=0;o<r;o++){e[t+o]^=s[o]}}});t.Decryptor=n;return t}();return e.mode.OFB})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}});t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}});return t}();return e.mode.ECB})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes;var r=t*4;var i=r-n%r;var s=n+i-1;e.clamp();e.words[s>>>2]|=i<<24-s%4*8;e.sigBytes+=i},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}};return e.pad.Ansix923})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){e.pad.Iso10126={pad:function(t,n){var r=n*4;var i=r-t.sigBytes%r;t.concat(e.lib.WordArray.random(i-1)).concat(e.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}};return e.pad.Iso10126})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1));e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t);t.sigBytes--}};return e.pad.Iso97971})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){e.pad.ZeroPadding={pad:function(e,t){var n=t*4;e.clamp();e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words;var n=e.sigBytes-1;while(!(t[n>>>2]>>>24-n%4*8&255)){n--}e.sigBytes=n+1}};return e.pad.ZeroPadding})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){e.pad.NoPadding={pad:function(){},unpad:function(){}};return e.pad.NoPadding})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(t){var n=e;var r=n.lib;var i=r.CipherParams;var s=n.enc;var o=s.Hex;var u=n.format;var a=u.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return i.create({ciphertext:t})}}})();return e.format.Hex})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(329),n(330),n(340),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){var t=e;var n=t.lib;var r=n.BlockCipher;var i=t.algo;var s=[];var o=[];var u=[];var a=[];var f=[];var l=[];var c=[];var h=[];var p=[];var d=[];(function(){var e=[];for(var t=0;t<256;t++){if(t<128){e[t]=t<<1}else{e[t]=t<<1^283}}var n=0;var r=0;for(var t=0;t<256;t++){var i=r^r<<1^r<<2^r<<3^r<<4;i=i>>>8^i&255^99;s[n]=i;o[i]=n;var v=e[n];var m=e[v];var g=e[m];var y=e[i]*257^i*16843008;u[n]=y<<24|y>>>8;a[n]=y<<16|y>>>16;f[n]=y<<8|y>>>24;l[n]=y;var y=g*16843009^m*65537^v*257^n*16843008;c[i]=y<<24|y>>>8;h[i]=y<<16|y>>>16;p[i]=y<<8|y>>>24;d[i]=y;if(!n){n=r=1}else{n=v^e[e[e[g^v]]];r^=e[e[r]]}}})();var v=[0,1,2,4,8,16,32,64,128,27,54];var m=i.AES=r.extend({_doReset:function(){if(this._nRounds&&this._keyPriorReset===this._key){return}var e=this._keyPriorReset=this._key;var t=e.words;var n=e.sigBytes/4;var r=this._nRounds=n+6;var i=(r+1)*4;var o=this._keySchedule=[];for(var u=0;u<i;u++){if(u<n){o[u]=t[u]}else{var a=o[u-1];if(!(u%n)){a=a<<8|a>>>24;a=s[a>>>24]<<24|s[a>>>16&255]<<16|s[a>>>8&255]<<8|s[a&255];a^=v[u/n|0]<<24}else if(n>6&&u%n==4){a=s[a>>>24]<<24|s[a>>>16&255]<<16|s[a>>>8&255]<<8|s[a&255]}o[u]=o[u-n]^a}}var f=this._invKeySchedule=[];for(var l=0;l<i;l++){var u=i-l;if(l%4){var a=o[u]}else{var a=o[u-4]}if(l<4||u<=4){f[l]=a}else{f[l]=c[s[a>>>24]]^h[s[a>>>16&255]]^p[s[a>>>8&255]]^d[s[a&255]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,u,a,f,l,s)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3];e[t+3]=n;this._doCryptBlock(e,t,this._invKeySchedule,c,h,p,d,o);var n=e[t+1];e[t+1]=e[t+3];e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,s,o,u){var a=this._nRounds;var f=e[t]^n[0];var l=e[t+1]^n[1];var c=e[t+2]^n[2];var h=e[t+3]^n[3];var p=4;for(var d=1;d<a;d++){var v=r[f>>>24]^i[l>>>16&255]^s[c>>>8&255]^o[h&255]^n[p++];var m=r[l>>>24]^i[c>>>16&255]^s[h>>>8&255]^o[f&255]^n[p++];var g=r[c>>>24]^i[h>>>16&255]^s[f>>>8&255]^o[l&255]^n[p++];var y=r[h>>>24]^i[f>>>16&255]^s[l>>>8&255]^o[c&255]^n[p++];f=v;l=m;c=g;h=y}var v=(u[f>>>24]<<24|u[l>>>16&255]<<16|u[c>>>8&255]<<8|u[h&255])^n[p++];var m=(u[l>>>24]<<24|u[c>>>16&255]<<16|u[h>>>8&255]<<8|u[f&255])^n[p++];var g=(u[c>>>24]<<24|u[h>>>16&255]<<16|u[f>>>8&255]<<8|u[l&255])^n[p++];var y=(u[h>>>24]<<24|u[f>>>16&255]<<16|u[l>>>8&255]<<8|u[c&255])^n[p++];e[t]=v;e[t+1]=m;e[t+2]=g;e[t+3]=y},keySize:256/32});t.AES=r._createHelper(m)})();return e.AES})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(329),n(330),n(340),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){function h(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n;this._lBlock^=n<<e}function p(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n;this._rBlock^=n<<e}var t=e;var n=t.lib;var r=n.WordArray;var i=n.BlockCipher;var s=t.algo;var o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4];var u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32];var a=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28];var f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}];var l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679];var c=s.DES=i.extend({_doReset:function(){var e=this._key;var t=e.words;var n=[];for(var r=0;r<56;r++){var i=o[r]-1;n[r]=t[i>>>5]>>>31-i%32&1}var s=this._subKeys=[];for(var f=0;f<16;f++){var l=s[f]=[];var c=a[f];for(var r=0;r<24;r++){l[r/6|0]|=n[(u[r]-1+c)%28]<<31-r%6;l[4+(r/6|0)]|=n[28+(u[r+24]-1+c)%28]<<31-r%6}l[0]=l[0]<<1|l[0]>>>31;for(var r=1;r<7;r++){l[r]=l[r]>>>(r-1)*4+3}l[7]=l[7]<<5|l[7]>>>27}var h=this._invSubKeys=[];for(var r=0;r<16;r++){h[r]=s[15-r]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t];this._rBlock=e[t+1];h.call(this,4,252645135);h.call(this,16,65535);p.call(this,2,858993459);p.call(this,8,16711935);h.call(this,1,1431655765);for(var r=0;r<16;r++){var i=n[r];var s=this._lBlock;var o=this._rBlock;var u=0;for(var a=0;a<8;a++){u|=f[a][((o^i[a])&l[a])>>>0]}this._lBlock=o;this._rBlock=s^u}var c=this._lBlock;this._lBlock=this._rBlock;this._rBlock=c;h.call(this,1,1431655765);p.call(this,8,16711935);p.call(this,2,858993459);h.call(this,16,65535);h.call(this,4,252645135);e[t]=this._lBlock;e[t+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});t.DES=i._createHelper(c);var d=s.TripleDES=i.extend({_doReset:function(){var e=this._key;var t=e.words;this._des1=c.createEncryptor(r.create(t.slice(0,2)));this._des2=c.createEncryptor(r.create(t.slice(2,4)));this._des3=c.createEncryptor(r.create(t.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t);this._des2.decryptBlock(e,t);this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t);this._des2.encryptBlock(e,t);this._des1.decryptBlock(e,t)},keySize:192/32,ivSize:64/32,blockSize:64/32});t.TripleDES=i._createHelper(d)})();return e.TripleDES})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(329),n(330),n(340),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){function o(){var e=this._S;var t=this._i;var n=this._j;var r=0;for(var i=0;i<4;i++){t=(t+1)%256;n=(n+e[t])%256;var s=e[t];e[t]=e[n];e[n]=s;r|=e[(e[t]+e[n])%256]<<24-i*8}this._i=t;this._j=n;return r}var t=e;var n=t.lib;var r=n.StreamCipher;var i=t.algo;var s=i.RC4=r.extend({_doReset:function(){var e=this._key;var t=e.words;var n=e.sigBytes;var r=this._S=[];for(var i=0;i<256;i++){r[i]=i}for(var i=0,s=0;i<256;i++){var o=i%n;var u=t[o>>>2]>>>24-o%4*8&255;s=(s+r[i]+u)%256;var a=r[i];r[i]=r[s];r[s]=a}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=o.call(this)},keySize:256/32,ivSize:0});t.RC4=r._createHelper(s);var u=i.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var e=this.cfg.drop;e>0;e--){o.call(this)}}});t.RC4Drop=r._createHelper(u)})();return e.RC4})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(329),n(330),n(340),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){function f(){var e=this._X;var t=this._C;for(var n=0;n<8;n++){o[n]=t[n]}t[0]=t[0]+1295307597+this._b|0;t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0;t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0;t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0;t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0;t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0;t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0;t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0;this._b=t[7]>>>0<o[7]>>>0?1:0;for(var n=0;n<8;n++){var r=e[n]+t[n];var i=r&65535;var s=r>>>16;var a=((i*i>>>17)+i*s>>>15)+s*s;var f=((r&4294901760)*r|0)+((r&65535)*r|0);u[n]=a^f}e[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0;e[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0;e[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0;e[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0;e[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0;e[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0;e[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0;e[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}var t=e;var n=t.lib;var r=n.StreamCipher;var i=t.algo;var s=[];var o=[];var u=[];var a=i.Rabbit=r.extend({_doReset:function(){var e=this._key.words;var t=this.cfg.iv;for(var n=0;n<4;n++){e[n]=(e[n]<<8|e[n]>>>24)&16711935|(e[n]<<24|e[n]>>>8)&4278255360}var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16];var i=this._C=[e[2]<<16|e[2]>>>16,e[0]&4294901760|e[1]&65535,e[3]<<16|e[3]>>>16,e[1]&4294901760|e[2]&65535,e[0]<<16|e[0]>>>16,e[2]&4294901760|e[3]&65535,e[1]<<16|e[1]>>>16,e[3]&4294901760|e[0]&65535];this._b=0;for(var n=0;n<4;n++){f.call(this)}for(var n=0;n<8;n++){i[n]^=r[n+4&7]}if(t){var s=t.words;var o=s[0];var u=s[1];var a=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360;var l=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360;var c=a>>>16|l&4294901760;var h=l<<16|a&65535;i[0]^=a;i[1]^=c;i[2]^=l;i[3]^=h;i[4]^=a;i[5]^=c;i[6]^=l;i[7]^=h;for(var n=0;n<4;n++){f.call(this)}}},_doProcessBlock:function(e,t){var n=this._X;f.call(this);s[0]=n[0]^n[5]>>>16^n[3]<<16;s[1]=n[2]^n[7]>>>16^n[5]<<16;s[2]=n[4]^n[1]>>>16^n[7]<<16;s[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++){s[r]=(s[r]<<8|s[r]>>>24)&16711935|(s[r]<<24|s[r]>>>8)&4278255360;e[t+r]^=s[r]}},blockSize:128/32,ivSize:64/32});t.Rabbit=r._createHelper(a)})();return e.Rabbit})},function(e,t,n){(function(r,i,s){if(true){e.exports=t=i(n(325),n(329),n(330),n(340),n(341))}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],i)}else{i(r.CryptoJS)}})(this,function(e){(function(){function f(){var e=this._X;var t=this._C;for(var n=0;n<8;n++){o[n]=t[n]}t[0]=t[0]+1295307597+this._b|0;t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0;t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0;t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0;t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0;t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0;t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0;t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0;this._b=t[7]>>>0<o[7]>>>0?1:0;for(var n=0;n<8;n++){var r=e[n]+t[n];var i=r&65535;var s=r>>>16;var a=((i*i>>>17)+i*s>>>15)+s*s;var f=((r&4294901760)*r|0)+((r&65535)*r|0);u[n]=a^f}e[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0;e[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0;e[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0;e[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0;e[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0;e[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0;e[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0;e[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}var t=e;var n=t.lib;var r=n.StreamCipher;var i=t.algo;var s=[];var o=[];var u=[];var a=i.RabbitLegacy=r.extend({_doReset:function(){var e=this._key.words;var t=this.cfg.iv;var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16];var r=this._C=[e[2]<<16|e[2]>>>16,e[0]&4294901760|e[1]&65535,e[3]<<16|e[3]>>>16,e[1]&4294901760|e[2]&65535,e[0]<<16|e[0]>>>16,e[2]&4294901760|e[3]&65535,e[1]<<16|e[1]>>>16,e[3]&4294901760|e[0]&65535];this._b=0;for(var i=0;i<4;i++){f.call(this)}for(var i=0;i<8;i++){r[i]^=n[i+4&7]}if(t){var s=t.words;var o=s[0];var u=s[1];var a=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360;var l=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360;var c=a>>>16|l&4294901760;var h=l<<16|a&65535;r[0]^=a;r[1]^=c;r[2]^=l;r[3]^=h;r[4]^=a;r[5]^=c;r[6]^=l;r[7]^=h;for(var i=0;i<4;i++){f.call(this)}}},_doProcessBlock:function(e,t){var n=this._X;f.call(this);s[0]=n[0]^n[5]>>>16^n[3]<<16;s[1]=n[2]^n[7]>>>16^n[5]<<16;s[2]=n[4]^n[1]>>>16^n[7]<<16;s[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++){s[r]=(s[r]<<8|s[r]>>>24)&16711935|(s[r]<<24|s[r]>>>8)&4278255360;e[t+r]^=s[r]}},blockSize:128/32,ivSize:64/32});t.RabbitLegacy=r._createHelper(a)})();return e.RabbitLegacy})},function(e,t){"use strict";var n=function(){};n.prototype={getItem:function(t){var n,r=0;QunarAPI.train.getData({key:t,success:function(t){n=t}});while(n==undefined){r++;if(r>1e4){return null}}return n},setItem:function(t,n){var r,i=0;QunarAPI.train.restoreData({key:t,value:n,success:function(t){r=t}});while(r==undefined){i++;if(i>1e4){return null}}return r}};var r=function(t,r){t=t||"sessionStorage";var i=null,s=(new Date).valueOf();if(t=="localStorage"||t=="sessionStorage"){try{if(window[t]&&window[t].setItem("test"+s,"test")==undefined){window[t].removeItem("test"+s);this.isSupported=true;i=window[t]}else{this.isSupported=false;i={}}}catch(o){i={}}}else if(t=="nativeStoreage"){i=new n}else{i={}}this.storage=i;this.prefix=r||""};r.prototype={get:function(t){var n=this.storage.getItem(this.prefix+t);var r=null;if(n){try{r=JSON.parse(n)}catch(i){console.log("StorageOp.get('"+t+"') "+i)}}return r},set:function(t,n){this.storage.setItem(this.prefix+t,JSON.stringify(n))}};e.exports=r},function(e,t){"use strict";var n=navigator.userAgent,r=n.match(/qunariphone/i)?"ios":"android",i,s,o=true;if(r=="ios"){}else{var u=new RegExp("(^| )QN241=([^;]*)(;|$)"),a;s=document.cookie.match(u);a=s&&s[2];try{i=JSON.parse(a).atomversion.train}catch(f){i=-1}o=i&&i>=51}var l={versionFlag:o};e.exports=l},function(e,t,n){"use strict";function p(){var e=0;return function(){return e++}}function v(){this.keys={}}function m(e,t){var n=this;n.dfd=t;n.requestId=e;n.setResponseHeaders=function(e){n.headers=e||{}};n.getResponseHeader=function(e){return n.headers&&n.headers[e]};n.getResponseHeaders=function(){return n.headers};n.abort=function(){QunarAPI.train.ajaxCancel({reqId:n.requestId,success:function(){n.dfd.reject({error:"abort"})}})}}function g(e){function n(n,r,i,s){s=s||{};t.setResponseHeaders(s.headers);t.resolve.apply(e,arguments)}function r(n){n=n||{};t.setResponseHeaders(n.headers);t.reject.apply(e,arguments)}var t=y();e.then(n,r);return t}function y(){var e=QApp.hash.getInfo().view,t=$.Deferred(),n;e=e||"";n=e+d();t=$.extend(t,new m(n,t));return t}function b(e){var t=function(t){return t&&Object.entries(t).some(function(e){var t=s(e,2),n=t[0],r=t[1];return n.toLowerCase()==="content-type"&&r.includes("application/json")})};if(QApp.sniff.android&&t(e.headers)&&!e.binaryData){e.binaryData=true;e.data=Common.base64Encode(e.data);e.responseNeedBase=true}return e}function w(e,t){var n=QApp.hash.getInfo().view,s=$.Deferred(),o=new v,h,p;n=n||"";p=n+d();s=$.extend(s,new m(p,s));o.setRequestHeader("X-Requested-With","XMLHttpRequest");t.beforeSend&&t.beforeSend(o);if(t.data&&i(t.data)=="object"){if((t.dataType&&t.dataType.toLowerCase())=="json"){h=JSON.stringify(t.data)}else{var g=[],y=t.data;for(var w in y){y[w]!==undefined&&(g[g.length]=encodeURIComponent(w)+"="+encodeURIComponent(y[w]))}h=g.join("&")}}else{h=t.data}t.type=t.type||"GET";if(t.type.toUpperCase()=="GET"&&h){e.indexOf("?")>-1?h="&"+h:h="?"+h;e+=h}t.timeout=Math.round(t.timeout||30*1e3+1);t.httpTimeout=Math.round(t.httpTimeout||30*1e3+1);QunarAPI.ready(function(){var n={timeout:t.timeout,httpTimeout:t.httpTimeout,noCookie:t.noCookie,maxRequests:30,reqId:p,url:e,method:t.type,decipher:t.decipher?t.decipher:"",data:t.type.toUpperCase()=="GET"?"":h,binaryData:t.binaryData===true?true:false,headers:$.extend(o.getRequestHeader(),t.header||{}),responseNeedBase:t.responseNeedBase=="not"?false:true};var i=function(){if(t.jsCookie){var i=Common.parseUrl(e);if(i.host&&i.path){var s=n.headers.Cookie;var o=a.getCookies(u(i.host,i.path));var f=[];o.forEach(function(e){f.push(e.name+"="+e.value)});if(f.length>0){n.headers.Cookie=s?s+"; "+f.join("; "):f.join("; ")}}n.noCookie=true}};var d=function(r){if(t.jsCookie&&r.headers&&r.headers["Set-Cookie"]){var i=r.headers["Set-Cookie"];if(i[0]==="["){try{i=JSON.parse(i)}catch(s){i=[]}}else{i=i.replace(/(Sun|Mon|Tue|Wed|Thu|Fri|Sat),/g,"$1é").split(",").map(function(e){return e.trim().replace(/é/g,",")})}i.forEach(function(t){var n=new f(t);var r=Common.parseUrl(e);a.setCookie(t,r.host,n.path)})}};i();n=b(n);if({buildType:"prd",deployType:"prod"}.buildType!=="prd"&&!n.url.includes("logs.qunar")){c("options",n.url,n)}var v=Date.now();QunarAPI.train.ajax(r({},n,{success:function(n){Common.harness12306Date(e,n);d(n);s.setResponseHeaders(n.headers);var r="";if(n.headers.dataIsBase64=="true"){r=Common.base64Decode(n.data)}else{r=n.data}l.accumulateChallengeCalculatorLog(r,e);var i={status:n.status,responseText:r,headers:n.headers};if(n&&(n.status=="200"||n.status=="302")){var o;try{o=JSON.parse(r)}catch(u){}s.resolve(o,i.responseText,i.status,i,n)}else{if(!i.responseText)i.responseText=i.status+" with empty response";s.reject(i)}},fail:function(n){c("trainAjax Fail",Date.now()-v,n);if(n&&n.errmsg==="Api Timeout"){QunarAPI.train.ajaxCancel({reqId:p})}l.accumulateChallengeCalculatorLog(n,e);var r={status:"404",responseText:"åéè¯·æ±å¤±è´¥",errmsg:n.errmsg,errcode:n.errcode};s.reject(r)}}))});return s}function E(e,t){if(t==200||typeof e!=="string")return;if(t==401&&e.indexOf("*-secure-")>=0)return;var n={key:"trainAjaxError",data:t+" --> "+encodeURIComponent(e)};Common.postLog(n)}function S(e,t){function r(){var n=w(e,t);return n.then(undefined,i.bind(n))}function i(i){var o=t&&t.noRetry;if(!o&&i&&i.responseText=="åéè¯·æ±å¤±è´¥"&&n>0){n--;return r()}var u=null;var a=!({}.toString.call(i)==="[object Object]"&&i.status);var f=!(typeof i.responseText==="string"&&/DOCTYPE.*HTML/i.test(i.responseText));var l=!/^https:\/\/mobile\.12306\.cn/i.test(e);if(l)return this;if(a||f){E(i.responseText,i.status);return this}if(n<=0){E(i.responseText,i.status);u={responseText:s(i.responseText,i.status),headers:i.headers,status:i.status};return $.Deferred().reject(u)}n--;return r()}function s(e,t){var n=/<title>(.+)<\/title>/i;var r=e.match(n);var i="";if(r&&r.length>1)r=r[1]||"";else r="æªç¥éè¯¯["+t+"]";i=r.replace(/([a-zA-Z_\/<>]+)|(\s+)/g,"").replace(/(\(\))|(ï¼ï¼)/g,"");if(!i){i="æå¡å¨åçéè¯¯ï¼è¯·ç¨ååè¯[FAIL:"+r+"]"}else if(t>=500||t==403){i="æå¡å¨åçéè¯¯ï¼è¯·ç¨ååè¯[FAIL:"+i+"]"}return i}var n=2;return r()}function x(e){if(!/^https?/.test(e)&&/^\/\//.test(e)){e=location.protocol+e}return e}function T(e,t){e=x(e);var n=S(e,t);return g(n)}function N(e,t){e=x(e);var n=S(e,t);return g(n)}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var s=function(){function e(e,t){var n=[];var r=true;var i=false;var s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=true;s=a}finally{try{if(!r&&o["return"])o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var o=n(361);var u=o.CookieAccessInfo;var a=o.CookieJar("trainAjax");var f=o.Cookie;var l=n(362);var c=n(365)("util:trainAjax");var h=n(313);var d=p();v.prototype={setRequestHeader:function(t,n){var r=this;r.keys[t]=n},getRequestHeader:function(){return this.keys}};e.exports=N},function(e,t){"use strict";var n=function(){function e(e,t){var n=[];var r=true;var i=false;var s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=true;s=a}finally{try{if(!r&&o["return"])o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};(function(){"use strict";function e(t,n,r,i){if(this instanceof e){this.domain=t||undefined;this.path=n||"/";this.secure=!!r;this.script=!!i;return this}return new e(t,n,r,i)}function i(e,t,n){if(e instanceof i){return e}if(this instanceof i){this.name=null;this.value=null;this.expiration_date=Infinity;this.path=String(n||"/");this.explicit_path=false;this.domain=t||null;this.explicit_domain=false;this.secure=false;this.noscript=false;if(e){this.parse(e,t,n)}return this}return new i(e,t,n)}function o(e){var t,r;var s=e+"_cookie_jar";if(this instanceof o){this.saveCookies=function(t){localStorage[s]=JSON.stringify(t)};this.loadCookies=function(){var t=Object.create(null);var r=localStorage[s];if(r){try{r=JSON.parse(r)}catch(o){r={}}Object.entries(r).forEach(function(e){var r=n(e,2),s=r[0],o=r[1];t[s]=o.map(function(e){return(new i).fromJSON(e)})})}return t};this.setCookie=function(n,s,o){var u,a;var f=this.loadCookies();n=new i(n,s,o);u=n.expiration_date<=Date.now();if(f[n.name]!==undefined){t=f[n.name];for(a=0;a<t.length;a+=1){r=t[a];if(r.collidesWith(n)){if(u){t.splice(a,1);if(t.length===0){delete f[n.name]}return false}t[a]=n;return n}}if(u){return false}t.push(n);return n}if(u){return false}f[n.name]=[n];this.saveCookies(f);return f[n.name]};this.getCookie=function(n,r){var i=this.loadCookies();var s,o;t=i[n];if(!t){return}for(o=0;o<t.length;o+=1){s=t[o];if(s.expiration_date<=Date.now()){if(t.length===0){delete i[s.name]}continue}if(s.matches(r)){return s}}};this.getCookies=function(t){var n=this.loadCookies();var r=[],i,s;for(i in n){s=this.getCookie(i,t);if(s){r.push(s)}}r.toString=function o(){return r.join(":")};r.toValueString=function(){return r.map(function(e){return e.toValueString()}).join(";")};return r};return this}return new o(e)}e.All=Object.freeze(Object.create(null));t.CookieAccessInfo=e;t.Cookie=i;i.prototype.toJSON=function(){var t=this.domain,n=this.expiration_date,r=this.explicit_domain,i=this.explicit_path,s=this.name,o=this.noscript,u=this.path,a=this.secure,f=this.value;var l={domain:t,expiration_date:n,explicit_domain:r,explicit_path:i,name:s,noscript:o,path:u,secure:a,value:f};if(n===Infinity){delete l.expiration_date}return l};i.prototype.fromJSON=function(t){r(this,t);return this};i.prototype.toString=function u(){var e=[this.name+"="+this.value];if(this.expiration_date!==Infinity){e.push("expires="+(new Date(this.expiration_date)).toGMTString())}if(this.domain){e.push("domain="+this.domain)}if(this.path){e.push("path="+this.path)}if(this.secure){e.push("secure")}if(this.noscript){e.push("httponly")}return e.join("; ")};i.prototype.toValueString=function(){return this.name+"="+this.value};var s=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;i.prototype.parse=function(t,n,r){if(this instanceof i){var s=t.split(";").filter(function(e){return!!e});var o;var u=s[0].match(/([^=]+)=([\s\S]*)/);if(!u){console.warn("Invalid cookie header encountered. Header: '"+t+"'");return}var a=u[1];var f=u[2];if(typeof a!=="string"||a.length===0||typeof f!=="string"){console.warn("Unable to extract values from cookie header. Cookie: '"+t+"'");return}this.name=a;this.value=f;for(o=1;o<s.length;o+=1){u=s[o].match(/([^=]+)(?:=([\s\S]*))?/);a=u[1].trim().toLowerCase();f=u[2];switch(a){case"httponly":this.noscript=true;break;case"expires":this.expiration_date=f?Number(Date.parse(f)):Infinity;break;case"path":this.path=f?f.trim():"";this.explicit_path=true;break;case"domain":this.domain=f?f.trim():"";this.explicit_domain=!!this.domain;break;case"secure":this.secure=true;break}}if(!this.explicit_path){this.path=r||"/"}if(!this.explicit_domain){this.domain=n}return this}return(new i).parse(t,n,r)};i.prototype.matches=function(n){if(n===e.All){return true}if(this.noscript&&n.script||this.secure&&!n.secure||!this.collidesWith(n)){return false}return true};i.prototype.collidesWith=function(t){if(this.path&&!t.path||this.domain&&!t.domain){return false}if(this.path&&t.path.indexOf(this.path)!==0){return false}if(this.explicit_path&&t.path.indexOf(this.path)!==0){return false}var n=t.domain&&t.domain.replace(/^[\.]/,"");var r=this.domain&&this.domain.replace(/^[\.]/,"");if(r===n){return true}if(r){if(!this.explicit_domain){return false}var i=n.indexOf(r);if(i===-1||i!==n.length-r.length){return false}return true}return true};t.CookieJar=o;o.prototype.setCookies=function(t,n,r){t=Array.isArray(t)?t:t.split(s);var o=[],u,a;t=t.map(function(e){return new i(e,n,r)});for(u=0;u<t.length;u+=1){a=t[u];if(this.setCookie(a,n,r)){o.push(a)}}return o}})()},function(e,t,n){"use strict";var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=n(363);var s=n(364);var o={storageKey:"challengeCalculatorLog",oscillateThreshold:{secure:9,forbiddenState:2},testSecureAndForbiddenState:function(t){var n="";var i={secure:0,forbiddenState:0};switch(typeof t==="undefined"?"undefined":r(t)){case"object":n=JSON.stringify(t);break;case"string":n=t;break;default:n=""}if(n.indexOf("*-secure-")>=0){i.secure=1;if(n.indexOf("forbidden state")>=0){i.forbiddenState=1}}return i},getPerformer:function(){var t=this.getChallengeCalculatorLog();var n;if(t.performer&&(t.secure>=this.oscillateThreshold.secure||t.forbiddenState>=this.oscillateThreshold.forbiddenState)){if(t.performer==="client")n="server";else n="client";this.resetChallengeCalculatorLog(n);Common.clearCache();return n}return t.performer||"client"},accumulateChallengeCalculatorLog:function(t,n){if(!(typeof n==="string"&&n.indexOf("https://mobile.12306.cn")===0&&(n.indexOf("query")>0||n.indexOf("init")>0))){return}var r=this.testSecureAndForbiddenState(t);var i=this.getChallengeCalculatorLog();if(r.secure===0&&r.forbiddenState===0){this.resetChallengeCalculatorLog(i.performer||"client");return}if(!i.performer)i.performer="client";i.secure=(i.secure||0)+r.secure;i.forbiddenState=(i.forbiddenState||0)+r.forbiddenState;this.storeChallengeCalculatorLog(i)},resetChallengeCalculatorLog:function(t){var n={performer:t,secure:0,forbiddenState:0};this.storeChallengeCalculatorLog(n)},storeChallengeCalculatorLog:function(t){Common.storeInfo(this.storageKey,t,true)},getChallengeCalculatorLog:function(){return Common.getStoredInfo(this.storageKey)||{}},getChallenge:function(t,n,r){function s(e){e=e||{};switch(e["switch.challengeCalculator"]){case"client":return this.getChallengeFromClient.apply(this,i);case"server":return this.getChallengeFromServer.apply(this,i);case"oscillate":default:return this.getChallengeOscillately.apply(this,i)}}var i=arguments;return Common.getAppConfig(["switch.challengeCalculator"]).then(s.bind(this))},getChallengeOscillately:function(t,n,r){var i=this.getPerformer();switch(i){case"server":return this.getChallengeFromServer.apply(this,arguments);case"client":default:return this.getChallengeFromClient.apply(this,arguments)}},getChallengeFromClient:function(t,n,r){function u(e){var t="";try{t=e.challenges.morCustomRealm["WL-Challenge-Data"]}catch(n){}return t}function a(e){this.watcher("challengeByClient");var t={result:e.token};i.resolve(t)}function f(){if(i.state()==="pending"){return i.reject.apply(i,arguments)}this.resetChallengeCalculatorLog("server");return this.getChallengeFromServer.apply(this,s)}var i=$.Deferred();var s=arguments;var o={challenge:u(t),sessionId:n,os:r?"android":"ios",success:a.bind(this),fail:f.bind(this)};QunarAPI.train.initSession(o);return i.promise().then(undefined,f.bind(this))},getChallengeFromServer:function(t,n,r){this.watcherByServer();return i.getChallenge.apply(i,arguments)},watcherByServer:function(){function n(){this.watcher("challengeByServer")}var t={challenge:"",success:n.bind(this),fail:function(){}};QunarAPI.train.initSession(t)},watcher:function u(e){var t={challengeByClient:"challengeByClient",challengeByServer:"challengeByServer"};var u=new s(t);u.sendDetail(u.beaconIdBundle[e])}};e.exports=o},function(e,t){"use strict";function i(e,t,r,i,s){var o={phoneEnDecryptType:e,sessionId:r,commandName:i,isAndroid:s||false};switch(e){case"3":o.param=t;break;case"4":if((typeof t==="undefined"?"undefined":n(t))==="object"){o.param=t.decryptStr;if(t.ext)o.ext=t.ext}else{o.param=t}break;case"1":o.challengeStr=t;break;case"2":o.deviceNo=t;break;case"5":o={commandName:"",phoneEnDecryptType:"5"};break;default:o={};break}return o}function s(e){return Math.abs(~r.indexOf(e))+""}function o(e){function n(){return Common.postRequest("t_tTrainPhoneEnDecrypt",e).then(i,r)}function r(){var e=$.Deferred();if(t<=0)return e.reject.apply(e,arguments);else{t--;return n()}}function i(e){if(e&&typeof e.reqResult==="string"&&e.reqResult.length>2||t<=0){return e}else{return r.apply(null,arguments)}}var t=1;return n()}var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r=["challenge","checkcode","encrypt","deciphering","session"];var u={deciphering:function(t,n,r,u,a,f,l,c){function m(e){var t=Date.now()-h;var n={key:"hyBuy_cipher_"+p,isSuccessful:e,duration:t};window.sendWatchMessage(n)}function g(e){if(e.code==0){m(true);d.resolve({result:e.reqResult})}else{m(false);d.resolve({result:""})}}function y(){m(false);d.resolve({result:""})}var h=Date.now();var p=t;t=s(t);var d=$.Deferred();var v=i(t,n,r,u,a);o(v).then(g,y);setTimeout(function(){d.resolve({result:""})},1e4);return d.promise()},encrypt:function(t,n,r,i){return this.deciphering("encrypt",t,n,r,i)},decrypt:function(t,n,r,i){return this.deciphering("deciphering",t,n,r,i)},getSession:function(){return this.deciphering("session")},getChallenge:function(t,n,r){function i(e){if(e&&typeof e.result==="string"){e.result=e.result.replace(/"/g,"")}return e}return this.deciphering("challenge",JSON.stringify(t),n,"",r).then(i)}};e.exports=u},function(e,t){"use strict";function r(e,t){this.media=new Image;this.beaconIdBundle=e||{};this.beaconQueue=[];this.viewName=t}var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.prototype={constructor:r,_send:function(t){var n=this.getUrl();t=$.extend(true,t,this._additionalOptions());var r=n+"?"+$.param(t);this.media=new Image;this.media.src=r},_additionalOptions:function(){},getUrl:function(){var t="//touch.qunar.com/h5/train/TrainMonitor";return t},getViewName:function(){if(this.viewName)return this.viewName;return QApp.router.getCurViewName()},getBeaconIdPrefix:function(){return"hyBuy"},enhancebeaconId:function(t){if(!t){console.warn("Watcher beaconId not set");t=""}var n=this.getViewName();var r=this.getBeaconIdPrefix();if(t.indexOf(r)!==0)t=r+"_"+n+"_"+t;return t},prepareOptions:function(t,n,r,i){var s={key:this.enhancebeaconId(t),isSuccessful:n===false?false:true,reason:r||"",duration:i||0,timeStamp:Date.now()};return s},send:function(t,n,r,i,s){var o=this.prepareOptions.apply(this,arguments);this.beaconQueue.push(o);if(!i&&s){o.duration=s.bind(this)();this.beaconQueue.pop();this.beaconQueue.push(o)}this._send(o)},sendDetail:function(t,n,r,i){this.send(t,n,r,i,this.getDetailDuration.bind(this))},sendResult:function(t,n,r,i){if(this.beaconQueue.length>=1)i=0;this.send(t,n,r,i,this.getResultDuration.bind(this))},watch:function(t,r,i,s,o){function l(){u=Date.now();o.bind(this)(t,true,"",u-a)}function c(){u=Date.now();var e=arguments.length>0&&typeof arguments[0]==="string"?arguments[0]:"";o.bind(this)(t,false,e,u-a)}o=o||this.sendDetail;t=this.enhancebeaconId(t);var u,a=Date.now();var f=r.apply(i,s||[]);if((typeof f==="undefined"?"undefined":n(f))==="object"&&f.then&&f.done&&f.fail){return f.done(l.bind(this)).fail(c.bind(this))}u=Date.now();o.bind(this)(t,true,"",u-a||.01);return f},watchDetail:function(t,n,r,i){return this.watch(t,n,r,i,this.sendDetail.bind(this))},watchResult:function(t,n,r,i){return this.watch(t,n,r,i,this.sendResult.bind(this))},calculateDuration:function(t,n){return this.beaconQueue[n]["timeStamp"]-this.beaconQueue[t]["timeStamp"]},getDetailDuration:function(){var t=this.beaconQueue.length;if(t<2)return 0;return this.calculateDuration(t-2,t-1)},getResultDuration:function(){var t=this.beaconQueue.length;if(t<2)return 0;return this.calculateDuration(0,t-1)}};e.exports=r},function(e,t){"use strict";var n=function(t){return function(){t=Math.imul(16807,t)|0%2147483647;return(t&2147483647)/2147483648}};var r=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var r=t.split("").reduce(function(e,t){return e+t.charCodeAt(0)},1);var i=n(r);i();i();var s=[];var o=0;while(s.length<3){var u=Math.floor(i()*256);if(!s.length||Math.abs(s[0]-u)>20&&o+u<256*1.5){o+=u;if(u%2===0){s.push(u)}else{s.unshift(u)}}}return"#"+s.map(function(e){return(e<16?"0":"")+e.toString(16)}).join("")};var i=function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var r=["ms","s","m","h","d"];var i=[1e3,60,60,24];var s=t;var o=0;while(i[o]&&s>=i[o]){s=s/i[o];o++}return+s.toFixed(n)+r[o]};var s=function(t,n){if(!n){return false}var r=[];var i=[];n=n.split(",").forEach(function(e){if(e[0]==="-"){i.push(e.slice(1))}else{r.push(e)}});var s=function(n){n=n.replace(/\*/g,".*");var r=new RegExp("^"+n+"$");return r.test(t)};var o=r.some(s);if(!o){return o}return!i.some(s)};var o=Date.now();var u=function(t){var n=void 0;var u=false;var a=void 0;var f=function(f,l){for(var c=arguments.length,h=Array(c>2?c-2:0),p=2;p<c;p++){h[p-2]=arguments[p]}var d;if(n!==localStorage.debug){n=localStorage.debug;u=s(t,n)}if(!u){return}if(!a){a=r(t)}var v=Date.now();var m="+"+i(v-o);o=v;var g=typeof l==="string"?"%s":"%o";(d=console)[f].apply(d,["%c"+(t||"")+" %c"+g+" %c"+m,"color: "+a,"color: inhert",l,"color: "+a].concat(h))};var l=f.bind(undefined,"log");l.log=f.bind(undefined,"log");l.error=f.bind(undefined,"error");l.info=f.bind(undefined,"info");l.warn=f.bind(undefined,"warn");return l};e.exports=u},function(e,t){"use strict";function n(){this.map={}}n.prototype={constructor:n,on:function(t,n){this.map[t]=this.map[t]||[];this.map[t].push(n);return this},trigger:function(t){var n=[].slice.call(arguments,1);var r=this.map[t]||[];r.forEach(function(e,t){if(typeof e==="function")e.apply(null,n)});return this},off:function(t,n){if(!n){this.map[t]=[]}else{var r=this.map[t]||[];this.map[t]=r.filter(function(e){return e!==n})}return this}};e.exports=n},function(e,t){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=function(){function e(){i(this,e);this.defaultMsg="æªç¥éè¯¯"}r(e,[{key:"fetchFromArrayOrArguments",value:function(t){var n=t;while($.isArray(n)||this.isArguments(n)){if(!($.isArray(n[0])||this.isArguments(n[0]))){n=n[0]||n[1]||n[3]&&n[3].responseText||""}else{n=n[0]}}if(typeof n==="string"&&n.indexOf("{")>=0){try{n=JSON.parse(n)}catch(r){}}return n}},{key:"getFromData3",value:function(t){var n=t&&t[3]||t;if(n&&(n.statusText==="error"||/^40[34]$/.test(n.status))){return"ç½ç»é¾æ¥åºç°é®é¢ï¼è¯·éè¯"}else return""}},{key:"getFromDataOrMessages",value:function(t){var n=t&&t.data||t||{};var r=t&&t.messages&&t.messages[0]||"";var i="";if(t&&t.url&&t.url.match("login/init")){r="è¯·æ¨åç»å½"}else if(n&&typeof n=="string"){i=n}else{i=n.exMsg||n.message||n.errorMsg||n.errMsg||n.msg||n.result_message||n.error||n.exception;if(!i&&t&&t.validateMessagesShowId=="_validatorMessage"){i="éªè¯å¤±è´¥ï¼è¯·åç»å½"}}var s=r||i||"";return s}},{key:"getFromLookUpedObj",value:function(t){if(t&&t.id&&t.origin&&t.display){console.log("Redundant Error lookUp",t.origin);return t.origin}return""}},{key:"getFromMsg3w",value:function(t){if(t&&typeof t._msg3w==="string"){return t._msg3w}return""}},{key:"fetchFormObj",value:function(t){var n=this.getFromMsg3w(t)||this.getFromLookUpedObj(t)||this.getFromData3(t)||this.getFromDataOrMessages(t);return n}},{key:"isArguments",value:function(t){return{}.toString.call(t)==="[object Arguments]"}},{key:"run",value:function(t,r){console.log("run:",arguments);var i=this.fetchFromArrayOrArguments(t);var s="";switch(typeof i==="undefined"?"undefined":n(i)){case"string":s=i;break;case"object":s=this.fetchFormObj(i);break}var o=r||this.defaultMsg;o=o+"[FAIL:"+JSON.stringify(t)+"]";return s||o}}]);return e}();e.exports=new s},function(e,t){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=function(){function e(){r(this,e);this.errors=[]}n(e,[{key:"showToast",value:function(t){t="JavaScriptè¿è¡åºéå¦:"+t;var n=5*1e3;var r={msg:t,duration:n};Common.toastNative(r)}},{key:"onerrorHandler",value:function(t,n,r,i,s){var o=QApp.router.getCurViewName()||"unknownView";var u={view:o,msg:t,row:r,column:i};if(!Common.isOnline())this.showToast(t);this.errors.push(u);this.postWatcher(u)}},{key:"postLogs",value:function(){if(this.errors.length===0)return;var t={key:"trainapp1_jsRuntimeError",data:this.errors};Common.postLog(t)}},{key:"printError",value:function(){return this.errors}},{key:"postWatcher",value:function(t){var n="hyBuy_sino_jsRunTimeError_train_"+t.view;var r=false;var i={key:n,isSuccessful:r};sendWatchMessage(i)}}]);return e}();var s=new i;window.onerror=s.onerrorHandler.bind(s);e.exports=s},function(e,t){"use strict";function n(){this.handlers=[];this.executeCount=0}n.prototype={constructor:n,_executeHandlers:function(){this.handlers.forEach(function(e,t){if(typeof e==="function")e()})},executeHandlers:function(t){this.executeCount++;if(this.executeCount>=2)return;this._executeHandlers()},on:function(t){this.handlers.push(t)},trigger:function(){this._executeHandlers()}};var r=new n;window.onbeforeunload=r.executeHandlers.bind(r,"onbeforeunload");window.onunload=r.executeHandlers.bind(r,"onunload");e.exports=r},function(e,t){"use strict";function r(e){var t=Common.crypto.SHA256(e);t=Common.crypto.MD5(t);t=n.stringify(t);return t}var n={stringify:function(t){var n=t.words,r=t.sigBytes,i=this._map;t.clamp();t=[];for(var s=0;s<r;s+=3){for(var o=(n[s>>>2]>>>24-s%4*8&255)<<16|(n[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|n[s+2>>>2]>>>24-(s+2)%4*8&255,u=0;4>u&&s+.75*u<r;u++){t.push(i.charAt(o>>>6*(3-u)&63))}}if(n=i.charAt(64))while(t.length%4){t.push(n)}return t.join("")},parse:function(t){var n=t.length,r=this._map,i=r.charAt(64);if(i){i=t.indexOf(i);if(-1!=i){n=i}}for(var i=[],s=0,o=0;o<n;o++){if(o%4){var u=r.indexOf(t.charAt(o-1))<<o%4*2,a=r.indexOf(t.charAt(o))>>>6-o%4*2;i[s>>>2]|=(u|a)<<24-s%4*8;s++}}return"this function is not available"},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};e.exports=r},function(e,t){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=function(){function e(){r(this,e);this.errorStr="";this.errorLengthLimit=200}n(e,[{key:"contain",value:function(t){var n=this.errorStr;return t.some(function(e){return n.includes(e)})}},{key:"getExceptionLibrary",value:function(){var t=[{type:"noUnpayOrder",keyWord:["æ²¡ææ¯ä»å®æ","noUnpayOrder"],retryCount:1,retryDelay:1.5*1e3},{type:"noMatchedPaidOrder",keyWord:["è®¢åå·æªå¹éå·²æ¯ä»è®¢å"]},{type:"idRegistered",keyWord:["è¯¥è¯ä»¶å·ç å·²è¢«æ³¨å","æ¨å¡«åçèº«ä»½ä¿¡æ¯éå¤"]},{type:"mobileRegistered",keyWord:["ææºå·ç å·²è¢«å¶ä»"]},{type:"userNameAlreadyExisted",keyWord:["è¯¥æ³¨ååå·²å­å¨"]},{type:"passcodeFirst",keyWord:["è¯·åè·åéªè¯ç "],retryCount:1,retryDelay:0},{type:"signFail",keyWord:["éªç­¾å¤±è´¥","è¯·æ£æ¥æ¶é´è®¾ç½®","éªç­¾æ¶é´æ³æ ¡éªå¤±è´¥"],retryCount:1,retryDelay:0},{type:"orderMismatch",keyWord:["orderMismatch"]},{type:"toOrderList12306",keyWord:["è¯·å°æçè®¢å","goto12306List","è¯¥è®¢åä¸åè®¸æ¹ç­¾æåæ´å°ç«","æè½¦ç¥¨æ­£å¨è¿è¡æ¹ç­¾"]},{type:"notAllowedToRefund",keyWord:["å·²è¿è§å®éç¥¨æ¶é´","ä¸åè®¸éç¥¨"]},{type:"loadOrderDetailFail",keyWord:["å è½½è®¢åè¯¦æå¤±è´¥["]},{type:"notAllowedToSell",keyWord:["åæ­¢åçä¸å¡","ä¸è½å®ç¥¨","æå®è³","åæ­¢å®ç¥¨","ä¸åè®¸å®ç¥¨","ä¸å¯å®ç¥¨"]},{type:"idTypeNotAvailable",keyWord:["è¯ä»¶ç±»åä¸å­å¨","ä¸è½ç»è¯ä»¶ç±»åä¸º","è¯ä»¶ç±»åä¸è½ä¸ºç©º"]},{type:"seatTypeNotAvailable",keyWord:["è¯¥ç¥¨ç§ä¸åè®¸è®¢æ­¤å¸­å«"]},{type:"passengerAlreadyExisted",keyWord:["è¯¥èç³»äººå·²å­å¨","ä½¿ç¨ä¸åçå§ååè¯ä»¶"]},{type:"nameFormatError",keyWord:["å§åæ ¼å¼éè¯¯"]},{type:"capacityOverload",keyWord:["è¶è¿ä¸é"]},{type:"notSupportIdType",keyWord:["ä¸è½æ·»å "]},{type:"addPassengerFail",keyWord:["æ·»å ä¹å®¢å¤±è´¥","æ·»å å¤±è´¥"]},{type:"notAllowedToDelete",keyWord:["ä¸åè®¸å é¤"]},{type:"orderNotAllowedPay",keyWord:["orderNotAllowedPay","ä¸åè®¸æ¯ä»"]},{type:"transferTimeTooShort",keyWord:["ä¸¤è½¦é´éæ¶é´è¾ç­"],retryCount:0,retryDelay:4*1e3},{type:"incorrectOfphoneOrIDCardNum",keyWord:["ææºå·ç æè¯ä»¶å·ç ä¸æ­£ç¡®"],retryCount:0,retryDelay:4*1e3},{type:"highFrequencyError",keyWord:["é«é¢éè¯¯"],retryCount:1,retryDelay:4*1e3},{type:"userInfoError",keyWord:["ç¨æ·ä¿¡æ¯æè¯¯"],retryCount:0,retryDelay:4*1e3},{type:"randCodeExpired",keyWord:["randCodeExpired"],display:"éªè¯ç å·²ç»è¿æï¼è¯·ç¨åéè¯",retryCount:3,retryDelay:2*1e3},{type:"loginInOtherPlaces",keyWord:["ä»å¤ç»å½"],display:"ç¨æ·å·²å¨ä»å¤ç»å½",retryCount:2,retryDelay:4*1e3},{type:"cancelOrderFail",keyWord:["åæ¶è®¢åå¤±è´¥"],retryCount:1,retryDelay:4*1e3},{type:"webGroupOrVirtualHostHasNotBeenDefined",keyWord:["A WebGroup/Virtual Host to handle"],retryCount:1,retryDelay:1*1e3},{type:"batchRebookNotSupported",keyWord:["ä¸æ¯ææ¹éæ¹ç­¾"]},{type:"scheduleCanceled",keyWord:["åè¿","æååå®"]},{type:"conflictTrip",keyWord:["è¡ç¨å²çª","å·²è®¢","å·²è´­ä¹°","å·²(?:è®¢|è´­).+è½¦ç¥¨"],retryCount:0,retryDelay:4*1e3},{type:"usernameNotCorrect",keyWord:["ç»å½åä¸å­å¨","è¯·è¾å¥æ­£ç¡®çææºå·ç ","è¯¥é®ç®±ä¸å­å¨"]},{type:"cancelTooManyTimes",keyWord:["åæ¶æ¬¡æ°è¿å¤"]},{type:"imposture",keyWord:["åç¨"]},{type:"phoneUnautorized",keyWord:["ææºæ ¸éª"]},{type:"idUnauthorized",keyWord:["æ ¸éª","æ ¸å®æ¨æ³¨åç¨æ·ä¿¡æ¯","èº«ä»½ä¿¡æ¯æªéè¿æ ¸éª"]},{type:"accountClosed",keyWord:["ç»å½åå·²æ³¨é"]},{type:"noAccoutFound",keyWord:["æªè·åå°è´¦å·ä¿¡æ¯"],retryCount:1,retryDelay:200},{type:"faceVerificationFail",keyWord:["äººè¸"],retryCount:0,retryDelay:1*1e3},{type:"fetchPasscodeFail",keyWord:["è·åéªè¯ç å¤±è´¥"],retryCount:3,retryDelay:1*1e3},{type:"imageLoadFail",keyWord:["å¾çå è½½å¤±è´¥","éªè¯ç å è½½å¤±è´¥"],retryCount:3,retryDelay:1*1e3},{type:"queueing",keyWord:["queueing","è®¢åæéä¸­"],display:"æéä¸­",retryCount:1,retryDelay:1*1e3},{type:"notLogin",keyWord:["ç»å½","notLogin"]},{type:"queueingAbnormal",keyWord:["æéå¼å¸¸"],retryCount:1,retryDelay:4*1e3},{type:"aborted",keyWord:["aborted"],display:"ç½ç»è¯·æ±å·²ç»åæ¶"},{type:"courtRestrict",keyWord:["æ³é¢"]},{type:"unpayOrderChecked",keyWord:["unpayOrderChecked"]},{type:"userLocked",keyWord:["ç¨æ·å·²ç»è¢«éå®","å¯ç è¾å¥éè¯¯æ¬¡æ°è¿å¤"]},{type:"passwordNotCorrect",keyWord:["å¯ç è¾å¥éè¯¯"]},{type:"submitFailAndRetry",keyWord:["æäº¤å¤±è´¥","éæ³çè®¢ç¥¨è¯·æ±","å½åæäº¤è®¢åç¨æ·è¿å¤","è¯·éè¯"],retryCount:1,retryDelay:4*1e3},{type:"usernameOrPasswordNotProvided",keyWord:["usernameOrPasswordNotProvided","å¯ç ä¸è½ä¸ºç©º"],display:"ç¨æ·åæå¯ç ä¸è½ä¸ºç©º"},{type:"stationNotSupported",keyWord:["ä¸è½ä¸ºç©º"]},{type:"credentialNumberNotInCorrectPattern",keyWord:["è¯ä»¶å·ç æ ¼å¼ä¸å¯¹"]},{type:"particularTrainOfParticularDateNotFound",keyWord:["particularTrainOfParticularDateNotFound","noTrainData","checiNotFound","noYpInfoProvided"],display:"æªæ¾å°è¯¥è½¦æ¬¡ï¼è¯·ç¨åéè¯",retryCount:1,retryDelay:10*1e3},{type:"noResultPerformServerBackup",keyWord:["noResultPerformServerBackup"],display:"æ¬å°å åº§å¤±è´¥ï¼èªå¨è½¬å¥äºå åº§"},{type:"unpayOrderNotMatchTurnToOrderDetail",keyWord:["unpayOrderNotMatchTurnToOrderDetail"],display:"å»è®¢åè¯¦ææ¥çè®¢å"},{type:"qunarServerNotRespond",keyWord:["æå¡å¨æªååºï¼è¯·ç¨ååè¯"],retryCount:1,retryDelay:8*1e3},{type:"networkProblem",keyWord:["ç½ç»å¯è½å­å¨é®é¢","onNetError"],display:"ç½ç»å¯è½å­å¨é®é¢",retryCount:2,retryDelay:2*1e3},{type:"notNextTick",keyWord:["notNextTick"],retryCount:1,retryDelay:8*1e3},{type:"RuntimeError",keyWord:["Runtime"],retryCount:2,retryDelay:4*1e3},{type:"serviceUnavailable",keyWord:["Service Unavailable"],retryCount:1,retryDelay:4*1e3},{type:"noRespData",keyWord:["è·åæ°æ®å¤±è´¥","noDataFetchedFrom12306"],retryCount:1,retryDelay:1*1e3},{type:"emptyError",keyWord:["æ²¡è¯´ä¸ºä»ä¹","è®¿é®12306å¤±è´¥"],retryCount:1,retryDelay:4*1e3},{type:"forceUpgradeNewVersion",keyWord:["æ¬¢è¿æ¨ä¸è½½ä½¿ç¨"],retryCount:1,retryDelay:1*1e3},{type:"badToken",keyWord:["bad token"],retryCount:1,retryDelay:4*1e3},{type:"badGateway",keyWord:["Bad Gateway"],retryCount:1,retryDelay:4*1e3},{type:"GatewayTimeOut",keyWord:["Gateway Time-out"],retryCount:1,retryDelay:4*1e3},{type:"illegalRequest",keyWord:["éæ³è¯·æ±"],retryCount:1,retryDelay:4*1e3},{type:"connectRefused",keyWord:["æç»è®¿é®","æ¨æè¯·æ±çç½åæ æ³è·å","bad request"],retryCount:2,retryDelay:4*1e3},{type:"justError",keyWord:["Error"],retryCount:2,retryDelay:4*1e3},{type:"initializationFail",keyWord:["åå§åå¤±è´¥","getCheckCodeFail"],retryCount:2,retryDelay:4*1e3},{type:"enDecrypt",keyWord:["å å¯","è§£å¯","å åº§ç­¾å"],retryCount:2,retryDelay:4*1e3},{type:"forbiddenState",keyWord:["forbidden state"],retryCount:1,retryDelay:4*1e3},{type:"illegalState",keyWord:["illegal state"],retryCount:1,retryDelay:4*1e3},{type:"systemMaintenance",keyWord:["ç³»ç»ç»´æ¤"],retryCount:3,retryDelay:10*1e3},{type:"failingTheLogin",keyWord:["so failing the login"],display:"ç³»ç»å¼å¸¸ï¼è¯·ç¨ååè¯",retryCount:1,retryDelay:4*1e3},{type:"existsUnpayOrder",keyWord:["æªå®æè®¢å","æªå¤çè®¢å","æªå¤ççè®¢å","æªæ¯ä»","æªä»æ¬¾","è¯·åæ¯ä»"],retryCount:2,retryDelay:0},{type:"iPForbid",keyWord:["IPForbid","éªè¯ç å·²ç»è¿æ","403","åæ¢ç½ç»ç¯å¢åéè¯"],display:"ç½ç»è®¿é®å¯è½è¢«12306éå¶",retryCount:1,retryDelay:0*1e3},{type:"systemError",keyWord:["system error","503","502","Unexpected","ç³»ç»å¼å¸¸","æå¡è¯·æ±è¶æ¶"],display:"ç³»ç»åçéè¯¯ï¼è¯·ç¨ååè¯",retryCount:2,retryDelay:4*1e3},{type:"maintainCheciData",keyWord:["è½¦æ¬¡æ°æ®æ­£å¨ç»´æ¤"],retryCount:1,retryDelay:8*1e3},{type:"movedTemporarily",keyWord:["moved temporarily"],retryCount:1,retryDelay:0*1e3},{type:"preSubmitOrderDenied",keyWord:["preSubmitOrderDenied"],retryCount:1,retryDelay:8*1e3},{type:"notStartSell",keyWord:["èµ·å®","æä¸åçä¸å¡","ä¸å¨é¢å®æ¥æèå´å"],retryCount:2,retryDelay:8*1e3},{type:"queryLeftTicketDenied",keyWord:["queryLeftTicketDenied"],display:"æ¥è¯¢ä½ç¥¨æä½è¿å¿«ï¼è¯·ç¨ååè¯",retryCount:1,retryDelay:5*1e3},{type:"illegal",keyWord:["ä¸åæ³"]},{type:"deleteFailed",keyWord:["å é¤å¤±è´¥"]},{type:"paymentFailed",keyWord:["æ¯ä»å¤±è´¥"]},{type:"ypNotEnough",keyWord:["æ²¡æè¶³å¤çç¥¨","ypNotEnough","è¶è¿ä½ç¥¨","ä½ç¥¨ä¸è¶³","ä½æ¬æ¬¡åè½¦"],display:"åºç¥¨å¤±è´¥ï¼æ²¡æè¶³å¤çç¥¨!",retryCount:1,retryDelay:5*1e3},{type:"getWaitTimeBuyTicketFail",keyWord:["åºç¥¨å¤±è´¥ã","åºç¥¨å¤±è´¥ï¼"],retryCount:1,retryDelay:4*1e3},{type:"subtractTicketFail",keyWord:["æ£ç¥¨å¤±è´¥"],retryCount:1,retryDelay:5*1e3},{type:"ticketInfoExpire",keyWord:["è½¦ç¥¨ä¿¡æ¯å·²è¿æ","éæ°æ¥è¯¢ææ°è½¦ç¥¨ä¿¡æ¯"],retryCount:2,retryDelay:0},{type:"registerPasscodeNotCorrect",keyWord:["å¾æ±æ­ï¼æ¨è¾å¥çéªè¯ç æè¯¯"]},{type:"passcodeNotCorrect",keyWord:["selfCodingFail","èªå¨æç åºé","éªè¯ç "],display:"éªè¯ç ä¸æ­£ç¡®",retryCount:3,retryDelay:4*1e3},{type:"noDynamicJs",keyWord:["no dynamicJs"],display:"ç³»ç»å¼å¸¸ï¼è¯·ç¨ååè¯",retryCount:3,retryDelay:1*1e3},{type:"visitTooFrequent",keyWord:["é¢çè¿å¿«","è¯·æ±è¿äºé¢ç¹"],message:["æ¨çæä½é¢çè¿å¿«ï¼è¯·ç¨åéè¯"],retryCount:2,retryDelay:5*1e3},{type:"systemBusy",keyWord:["æå¡å¨ç¹å¿","ç³»ç»å¿","ç½ç»ç¹å¿"],retryCount:2,retryDelay:4*1e3},{type:"errorsOrderChange",keyWord:["errors.order.change"],display:"ç³»ç»å¼å¸¸ï¼è¯·ç¨ååè¯",retryCount:2,retryDelay:4*1e3},{type:"requestFail",keyWord:["åéè¯·æ±å¤±è´¥"],retryCount:2,retryDelay:2*1e3},{type:"retryTimeout",keyWord:["retry timeout"]},{type:"badRequest",keyWord:["400"],retryCount:1,retryDelay:1*1e3},{type:"notFound",keyWord:["404"],retryCount:2,retryDelay:0},{type:"requestUnsent",keyWord:["0 with empty response"],retryCount:1,retryDelay:1*1e3},{type:"retryLater",keyWord:["è¯·ç¨åéè¯","è¯·ç¨åéè¯","è¯·æ¨éè¯ä¸ä¸"],retryCount:2,retryDelay:3*1e3},{type:"unidentifiedError",keyWord:["æªç¥éè¯¯"],retryCount:2,retryDelay:0},{type:"errorOccurs",keyWord:["åºé"]},{type:"notFitChangeToStationCondition",keyWord:["æ¨ç³è¯·çæ°ç¥¨å°ç«ä¸ç¬¦ååæ´å°ç«çæ¡ä»¶"],retryCount:1,retryDelay:0},{type:"cannotBuyStudentTicket",keyWord:["ä¸è½è´­ä¹°å­¦çç¥¨"]},{type:"resignTicketFail",keyWord:["è®¢åæ¥è¯¢åºç°é®é¢","æ¹ç­¾è®¢ååºé"],retryCount:1,retryDelay:3*1e3},{type:"notAllowCancel",keyWord:["ä¸åè®¸åæ¶"],retryCount:0,retryDelay:0},{type:"notFitResignCondition",keyWord:["48å°æ¶","ä¸åè®¸åçç¥¨é¢æ¥æä»¥åçæ¹ç­¾"],retryCount:0,retryDelay:0},{type:"interfaceExpired",keyWord:["3.0 for android","MobileTicket"]},{type:"retryQueryLeftTicket",keyWord:["éæ°æ¥è¯¢ä½ç¥¨","queryLeftTicket"],retryCount:1,retryDelay:0},{type:"orderSubmited",keyWord:["è®¢åå·²ç»æäº¤"],retryCount:1,retryDelay:3*1e3},{type:"checkFailBeforeOccupy",keyWord:["è´­ç¥¨åæ£æ¥å¤±è´¥"],retryCount:1,retryDelay:0},{type:"decryptResultErorr",keyWord:["JSON Parse error"],display:"ç³»ç»å¼å¸¸ï¼è¯·ç¨ååè¯",retryCount:1,retryDelay:0},{type:"operationFailed",keyWord:["æä½å¤±è´¥"],retryCount:1,retryDelay:0},{type:"qunarPluginNotExist",keyWord:["qunarPluginNotExist"],display:"æ æ³å®æå½åæä½ï¼è¯·åçº§APPä¹ååè¯",retryCount:0,retryDelay:0},{type:"qunarPluginCrash",keyWord:["qunarPluginCrash"],display:"æ£æµå°å´©æºï¼è¯·ç¨ååè¯",retryCount:1,retryDelay:0},{type:"qunarPluginCancel",keyWord:["qunarPluginCancel"],display:"æä½å·²åæ¶",retryCount:0,retryDelay:0},{type:"userSelectNo",keyWord:["nopay"],retryCount:0,retryDelay:0}];return t}},{key:"queryDictionary",value:function(){var t=this;var n=this.getExceptionLibrary();var r=n.filter(function(e){return t.contain(e.keyWord)});return r}},{key:"updateWordToServer",value:function(){}},{key:"handleLongError",value:function(t){var n=t;if(t.toLowerCase().indexOf("<html")!==-1){n="html"}if(n.length>this.errorLengthLimit){n=n.slice(0,this.errorLengthLimit)}return n}},{key:"getResultDataStructure",value:function(t){var n=this;var r=function(t){var r={id:t.type,keyWord:t.keyWord,origin:n.errorStr,message:t.message||[],display:n.errorStr,retryCount:t.retryCount,retryDelay:t.retryDelay};if(t.display&&!n.isReadable(n.errorStr)){r.display=t.display}r.display=n.handleLongError(r.display);if(!n.isReadable(r.display)){r.display="æå¡å¨ç¹å¿ï¼è¯·ç¨ååè¯ã[FAIL:"+r.display+"]"}return r};var i=t.map(function(e){return r(e)});return i}},{key:"getUnrecognizedException",value:function(){this.updateWordToServer();var t={type:"unrecognizedException",keyWord:"",retryCount:1,retryDelay:4*1e3};return this.getResultDataStructure([].concat(t))}},{key:"isReadable",value:function(t){var n=/^[\w,.;!ï¼ï¼ ]*$/;return!n.test(t||"")}},{key:"handleQunarPlugin",value:function(t){var n="";if(t&&typeof t.errmsg==="string"){n=t.errmsg}if(n.startsWith("api")&&n.indexOf("not exist")>3){n="qunarPluginNotExist"}else if(n==="cancel"){n="qunarPluginCancel"}else if(n==="crash"){n="qunarPluginCrash"}return n||t}},{key:"lookUp",value:function(t){t=this.handleQunarPlugin(t);if(t&&t.key&&typeof t.data==="string"){t=t.data}if(t&&t.belongTo&&t[t.belongTo]&&t[t.belongTo].failReason){t=t[t.belongTo].failReason}if(t&&typeof t._msg3w==="string"){t=t._msg3w}if($.isPlainObject(t))return t;var n=this.getUnrecognizedException()[0];if(typeof t==="string"){this.errorStr=t;n=this.getUnrecognizedException()[0];var r=this.queryDictionary();var i=null;if(r.length>0){i=this.getResultDataStructure(r)[0];return i||n}else return n}else{return n}}}]);return e}();e.exports=new i},function(e,t,n){"use strict";var r=n(373);e.exports=new r},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function a(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){var n=[];var r=true;var i=false;var s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=true;s=a}finally{try{if(!r&&o["return"])o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var f=n(374);var l=function(e){function t(){o(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.filteredLogsLimit=10;e.expressions={">":function(t,n){return t>n},">=":function(t,n){return t>=n},"<":function(t,n){return t<n},"<=":function(t,n){return t<=n}};return e}a(t,e);s(t,[{key:"average",value:function(t){return this.sum(t)/t.length}},{key:"sum",value:function(t){return t.reduce(function(e,t){return e+t},0)}},{key:"variance",value:function(t,n){return this.average(t.map(function(e){return Math.pow(e-n,2)}))}},{key:"sampleVariance",value:function(t,n){return this.sum(t.map(function(e){return Math.pow(e-n,2)}))/(t.length-1)}},{key:"median",value:function(t,n){t=t.slice();t.sort(function(e,t){return e[n]-t[n]});var r=Math.ceil(t.length/2)-1;return t[r]}},{key:"match",value:function(t,n){var r=this;var s=$.type(t);if(s==="function"){return t(n)}if(s==="regexp"){return t.test(n)}if(s==="object"){var o=true;var u=false;Object.entries(t).forEach(function(e){var t=i(e,2),s=t[0],a=t[1];if(!o){return}var f=r.expressions[s];if(f){u=true;o=!!f(n,a)}});return u&&o}return t===n}},{key:"toFixed",value:function(t){return+t.toFixed(2)}},{key:"filter",value:function(t){var n=this;var i=this.getStorage();var s=t.$limit||this.filteredLogsLimit;t=r({},t);delete t.$limit;var o=function(r){var i=true;Object.keys(t).forEach(function(e){if(!n.match(t[e],r[e])){i=false}});return i};return i.logs.filter(o).slice(0,s)}},{key:"_query",value:function(t){var n=void 0;var r=void 0;var i=0;var s=0;var o=this.filter(t);var u=[];o.forEach(function(e){if(e.isSuccessful){i=i+1}if(!r||e.timeStamp>r){r=e.timeStamp}if(!n||e.timeStamp<n){n=e.timeStamp}s+=e.duration;u.push(e.duration)});var a=s/o.length;var f=this.median(o,"duration");return{filter:t,data:o,durationAverage:this.toFixed(a),durationSampleVariance:this.toFixed(this.sampleVariance(u,a)),durationMedian:f?f.duration:NaN,medianTimeStamp:f?f.timeStamp:NaN,successRate:this.toFixed(i/o.length),count:o.length,startTimeStamp:n,endTimeStamp:r}}},{key:"querySync",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}if(n.length===0){return this._query({})}if(n.length===1){return this._query(arguments[0])}return n.map(this._query.bind(this))}},{key:"query",value:function(){var t=this.querySync.apply(this,arguments);return $.Deferred().resolve(t)}},{key:"_by",value:function(t){return this.querySync({type:t,provider:"mobile"},{type:t,provider:"3w"})}},{key:"byAjax",value:function(){return $.Deferred().resolve(this._by("ajax"))}},{key:"byModule",value:function(){return $.Deferred().resolve(this._by("module"))}},{key:"byAjaxSync",value:function(){return this._by("ajax")}},{key:"byModuleSync",value:function(){return this._by("module")}}]);return t}(f);e.exports=l},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var o=n(375);var u=function(){function e(){s(this,e);this.storageKey="12306Logs";this.postLogKey="hytrain_12306Logs";this.logsLimit=400;this.reportChunkSizeLimit=10;this.failReasonParsers=[function(e){return e.isSuccessful&&""},function(e){return $.type(e.failReason)==="string"&&e.failReason},function(e){var t=e.failReason;if($.type(t)==="object"){if(t.data&&$.type(t.data)==="string"){return t.data}if(t.id&&t.origin){return"["+t.id+"]"+t.origin}}return false},function(e){var t=false;try{t=JSON.stringify(e.failReason)}catch(n){}return t}]}i(e,[{key:"getStorage",value:function(){var t=Common.getStoredInfo(this.storageKey)||{};if(!t.logs){t.logs=[]}t.logs=(new o).decodeLogs(t.logs);return t}},{key:"saveStorage",value:function(t){var n=t.logs;if(n.length>this.logsLimit){n=n.slice(0,this.logsLimit)}Common.storeInfo(this.storageKey,r({},t,{logs:(new o).encodeLogs(n)}),true)}},{key:"addLog",value:function(t){if(!t)return;var n=this.getStorage();var i=n.logs;t=r({},t,{failReason:this.parseFailReason(t)});i.unshift(t);n.logs=this.stripSensitiveInfo(i);var s=this._report(n);n.reportTime=s.reportTime;this.saveStorage(n)}},{key:"addLogLater",value:function(t){setTimeout(this.addLog.bind(this,t),0)}},{key:"stripSensitiveInfo",value:function(t){return t.map(function(e){e=r({},e);var t=e.failReason||"";if(/\b(pwd|password)\b/.test(t)){e.failReason="__SENSITIVE_INFO__"}if(/èº«ä»½è¯/.test(t)){e.failReason=t.replace(/\b(\d{15}|\d{17}[\dX])\b/ig,"__ID_NO__")}return e})}},{key:"parseFailReason",value:function(t){var n="";if(t){this.failReasonParsers.find(function(e){var r=e(t);if(r!==false){n=r;return true}})}return n}},{key:"reportChunck",value:function(t){Common.postLog({key:this.postLogKey,data:(new o).encodeLogs(t)})}},{key:"getUnreportedLogs",value:function(t){var n=t.reportTime;var r=[];t.logs.find(function(e){if(e.timeStamp===n){return true}r.push(e)});return r}},{key:"_report",value:function(t){var n=t.reportTime;if(!window.secKillOn){var r=this.getUnreportedLogs(t);var i=this.reportChunkSizeLimit;var s=[];while(r.length>=i){s=r.splice(r.length-i,i);this.reportChunck(s);n=s[0].timeStamp}}return{reportTime:n}}},{key:"report",value:function(){var t=this.getStorage();var n=this._report(t);t.reportTime=n.reportTime;this.saveStorage(t)}}]);return e}();e.exports=u},function(e,t){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=function(){function e(){r(this,e);this.logSchema=["type","isSuccessful","failReason","id","provider","duration","timeStamp"]}n(e,[{key:"encodeLog",value:function(t){return this.logSchema.map(function(e){return t[e]})}},{key:"encodeLogs",value:function(t){return t.map(this.encodeLog.bind(this))}},{key:"decodeLog",value:function(t){return this.logSchema.reduce(function(e,n,r){e[n]=t[r];return e},{})}},{key:"decodeLogs",value:function(t){return t.map(this.decodeLog.bind(this))}}]);return e}();e.exports=i},function(e,t,n){"use strict";function o(e,t){t=t||{};var n=r(e,t);var i={success:function(t,r,i,s){var r=s.responseText;return $.Deferred().resolve(t,r,s.status,s,n.getResponseHeaders())},fail:function(t){var n=$.Deferred();return n.reject.apply(n,arguments)}};return n.then(i.success,i.fail)}var r=n(360);var i=0;var s=function(t){return Common.getTimeBJTimezone(t)};e.exports=o},function(e,t,n){"use strict";var r=void 0;var i=void 0;try{r=n(378);r.setTimeout(function(){i=true},0)}catch(s){}var o=function(t){return function(){if(i){var e;if(t.includes("clear")){var n=arguments.length<=0?undefined:arguments[0];if(typeof n==="number"){return window[t](n)}return r[t](+n)}return""+(e=r)[t].apply(e,arguments)}else{var s;return(s=window)[t].apply(s,arguments)}}};var u={setTimeout:o("setTimeout"),clearTimeout:o("clearTimeout"),setInterval:o("setInterval"),clearInterval:o("clearInterval")};e.exports=u},function(e,t,n){(function(e,r){true?r(t,n(379)):typeof define==="function"&&define.amd?define(["exports","worker-timers-broker"],r):r(e.workerTimers={},e.workerTimersBroker)})(this,function(e,t){"use strict";var n='!function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,r){"use strict";r.r(t);r(1)},function(e,t,r){!function(){"use strict";var w=new Map,T=new Map,b=function(e,t){var r,n;if("performance"in self){var o=performance.now(),i=Math.max(0,o-t);r=o,n=e-i}else r=Date.now(),n=e;var a=r+n;return{expected:a,remainingDelay:n}},M=function e(t,r,n,o){var i="performance"in self?performance.now():Date.now();n<i?postMessage({id:null,method:"call",params:{timerId:r,timerType:o}}):t.set(r,setTimeout(e,n-i,t,r,n,o))};addEventListener("message",function(e){var t,r,n,o,i,a,u,s,c=e.data;try{if("clear"===c.method){var l=c.id,d=c.params,f=d.timerId,p=d.timerType;if("interval"===p)!function(e){var t=w.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),w.delete(e)}(f),postMessage({error:null,id:l});else{if("timeout"!==p)throw new Error(\'The given type "\'.concat(p,\'" is not supported\'));!function(e){var t=T.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),T.delete(e)}(f),postMessage({error:null,id:l})}}else{if("set"!==c.method)throw new Error(\'The given method "\'.concat(c.method,\'" is not supported\'));var m=c.params,v=m.delay,h=m.now,g=m.timerId,y=m.timerType;if("interval"===y)i=g,a=b(v,h),u=a.expected,s=a.remainingDelay,w.set(i,setTimeout(M,s,w,i,u,"interval"));else{if("timeout"!==y)throw new Error(\'The given type "\'.concat(y,\'" is not supported\'));t=g,r=b(v,h),n=r.expected,o=r.remainingDelay,T.set(t,setTimeout(M,o,T,t,n,"timeout"))}}}catch(e){postMessage({error:{message:e.message},id:c.id,result:null})}})}()}]);';var r=new Blob([n],{type:"application/javascript; charset=utf-8"});var i=URL.createObjectURL(r);var s=t.load(i);var o=s.clearInterval;var u=s.clearTimeout;var a=s.setInterval;var f=s.setTimeout;URL.revokeObjectURL(i);e.clearInterval=o;e.clearTimeout=u;e.setInterval=a;e.setTimeout=f;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,n){(function(e,r){true?r(t,n(380)):typeof define==="function"&&define.amd?define(["exports","fast-unique-numbers"],r):r(e.workerTimersBroker={},e.fastUniqueNumbers)})(this,function(e,t){"use strict";var n=function(t){return t.method!==undefined&&t.method==="call"};var r=function(t){return t.error===null&&typeof t.id==="number"};var i=function(i){var s=new Map;var o=new Map;var u=new Map;var a=new Worker(i);a.addEventListener("message",function(e){var t=e.data;if(n(t)){var i=t.params,a=i.timerId,f=i.timerType;if(f==="interval"){var l=s.get(a);if(typeof l==="number"){var c=u.get(l);if(c===undefined||c.timerId!==a||c.timerType!==f){throw new Error("The timer is in an undefined state.")}}else if(typeof l!=="undefined"){l()}else{throw new Error("The timer is in an undefined state.")}}else if(f==="timeout"){var h=o.get(a);if(typeof h==="number"){var p=u.get(h);if(p===undefined||p.timerId!==a||p.timerType!==f){throw new Error("The timer is in an undefined state.")}}else if(typeof h!=="undefined"){h();o.delete(a)}else{throw new Error("The timer is in an undefined state.")}}}else if(r(t)){var d=t.id;var v=u.get(d);if(v===undefined){throw new Error("The timer is in an undefined state.")}else{var m=v.timerId,g=v.timerType;u.delete(d);if(g==="interval"){s.delete(m)}else{o.delete(m)}}}else{var y=t.error.message;throw new Error(y)}});var f=function(n){var r=t.generateUniqueNumber(u);u.set(r,{timerId:n,timerType:"interval"});s.set(n,r);a.postMessage({id:r,method:"clear",params:{timerId:n,timerType:"interval"}})};var l=function(n){var r=t.generateUniqueNumber(u);u.set(r,{timerId:n,timerType:"timeout"});o.set(n,r);a.postMessage({id:r,method:"clear",params:{timerId:n,timerType:"timeout"}})};var c=function(n,r){var i=t.generateUniqueNumber(s);s.set(i,function(){n();if(typeof s.get(i)==="function"){a.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:i,timerType:"interval"}})}});a.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:i,timerType:"interval"}});return i};var h=function(n,r){var i=t.generateUniqueNumber(o);o.set(i,n);a.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:i,timerType:"timeout"}});return i};return{clearInterval:f,clearTimeout:l,setInterval:c,setTimeout:h}};e.load=i;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,n){(function(e,n){true?n(t):typeof define==="function"&&define.amd?define(["exports"],n):n(e.fastUniqueNumbers={})})(this,function(e){"use strict";var t=new WeakMap;var n=Number.MAX_SAFE_INTEGER||9007199254740991;var r=function(n,r){t.set(n,r);return r};var i=function(i){var s=t.get(i);var o=s===undefined?i.size:s>2147483648?0:s+1;if(!i.has(o)){return r(i,o)}if(i.size<1073741824){while(i.has(o)){o=Math.floor(Math.random()*2147483648)}return r(i,o)}if(i.size>n){throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!")}while(i.has(o)){o=Math.floor(Math.random()*n)}return r(i,o)};var s=function(t){var n=i(t);t.add(n);return n};e.addUniqueNumber=s;e.generateUniqueNumber=i;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t){"use strict";var n=[["BXP","VAP","BOP","VNP","BJP","VBP"],["GZQ","GGQ","IZQ","GBQ"],["CQW","CUW","CRW","CYW","BPW","CXW"],["SHH","SNH","AOH","SXH"],["TJP","TXP","TBP","YQP","TIP","JMP","TGP","FHP","YKP"],["CCT","CET","CRT"],["CDW","CNW","ICW","XIW","CMW"],["CSQ","CWQ","FLQ","FKQ","FGQ","FFQ","JPQ","BNQ","RXQ"],["JNK","JAK","JGK","ZTK"],["FZS","FYS"],["GIW","GAE","KEW"],["HBB","VBB","WZB","XFB","VAB","BJB","HTB"],["HFH","HTH","COH","ENH"],["HHC","NDC"],["VUQ","HMQ"],["HGH","HZH"],["KMM","KOM"],["LZJ","LAJ","FLJ","XIJ","LQJ","GEJ","YDJ","HKJ","XGJ","IZJ"],["NCG","NXG"],["NKH","NJH","XPH"],["NNZ","NFZ","NXZ"],["SJP","VVP","GIP","SXP","GEP","GUP"],["SYT","SBT","SDT","SOT","HGD","JHD"],["TYV","TDV","TNV","FEV","YQV","IQV"],["WCN","HKN","WHN"],["WMR","WXR","WAR"],["XAY","CAY","EAY"],["YIJ","LNJ","NOJ"],["ZAF","ZZF","NEF","MZF","NYF","XPF"],["BOR","AKR"],["ASW","ASE"],["AXT","AST"],["AYF","ADF"],["BBH","BMH"],["ATL","AXL"],["BBY","BJY"],["NFT","NUT"],["BTC","BDC"],["BNJ","BXJ"],["CBN","CIN"],["CDP","CCP","SBP","OBP"],["DUT","RWT","WBT","WMT"],["CFD","CID","PZD"],["CNG","CDG"],["CPT","CTT"],["CBF","CZF"],["QYH","CZH","ESH"],["CZQ","ICQ"],["COP","CBP"],["RAT","RNT"],["DAQ","DMQ","RTQ","FQQ","ZRQ","KPQ","FPQ"],["DSL","DAL"],["DHT","DXT"],["DLT","DFT"],["RHX","DZX","LFX"],["DOC","DYC","EEC","RSC"],["DPK","DOK"],["RYW","KJW"],["RXW","SQE","STE"],["DIP","DZP"],["FES","TLS"],["FEW","FLW"],["FST","FET"],["KSQ","NSQ","FOQ","FSQ"],["GVW","GHW"],["GLZ","GBZ","GEZ"],["GYW","GAW","ZHW"],["GBT","GLT"],["PLH","HRH"],["HDP","HPP"],["KAQ","HHQ"],["HLD","HPD"],["HPV","HMV"],["HAH","HOH"],["EUH","HNH"],["HSN","OSN","KHN","KSN","DBN"],["HDY","HSY"],["NYH","HKH"],["IHP","HSP"],["HYQ","HVQ"],["HCQ","VXQ","KDQ","KNQ","KBQ","KKQ","KHQ","KFQ","WDQ","KZQ","NKQ"],["JEF","JCF"],["JDG","JCG"],["JGG","LAG"],["JHL","JOL"],["JBH","RNH"],["JUB","JMB"],["JAC","WPC"],["JQJ","JNJ"],["JGJ","JBJ"],["JFW","JBE"],["JZD","JOD"],["SFF","KFF","KBF"],["KLW","QKW"],["KNH","KSH","AIH"],["KXT","KYT"],["LBF","LPF"],["UOQ","LDQ"],["LXV","LFV"],["LON","LBN"],["UKQ","LLG"],["LPQ","LYQ"],["LYF","LDF","LLF","GLF"],["UIH","UKH"],["LVK","UYK"],["DHR","LNR"],["LYD","LDD"],["LZZ","UQZ"],["MCN","MBN"],["MDQ","PWQ","NWQ","MMZ"],["NGH","ZQH"],["NCW","NCE"],["NJW","NKW"],["NPS","NNS","NBS"],["PEN","BFF"],["PXG","PBG"],["QHK","QDK"],["QJM","QBM"],["QNB","QHX"],["QYS","QRS"],["QQJ","DFJ"],["SNQ","SGQ"],["OMY","HMY"],["SXF","SMF","SCF"],["PPT","SPT"],["SQF","SPF"],["INQ","SSQ"],["OVQ","SYQ"],["SMS","SHS"],["SZH","KAH","ITH","OHH"],["OSQ","SZQ","IOQ","BJQ","NZQ"],["OXH","SRH"],["TFR","TAR"],["TLD","ZLC"],["PXT","TLT"],["FBT","FYT"],["TML","QSL"],["TSP","FUP"],["TMK","TAK"],["TSJ","XZJ","WNJ","TIJ"],["TYT","TST","FHT","FDT"],["TZW","TDE"],["WGK","WKK","WHK","WBK"],["RVH","WHH"],["WVC","WXC"],["WNY","WVY","WBY"],["WUJ","WWJ"],["IFH","WXH","WGH","VCH"],["WAS","WBS","WCS"],["WYW","WZE"],["WBZ","WZZ"],["RZH","VRH"],["ECW","ENW"],["XVF","XCF"],["XMS","XKS","XBS"],["XXF","EGF"],["XUN","OYN"],["XOY","XYY"],["XWN","XFN"],["YGT","YKT"],["XUG","XBG"],["XCH","UUH"],["YBB","YWB"],["YCN","HAN"],["WMW","YCW"],["ABV","YNV"],["YCV","JZV"],["YEG","YCG"],["EMW","IXW"],["AJV","YIV"],["YJL","YXL"],["NOY","YAY","YZY"],["TNW","YZW"],["YPV","IPV"],["AQP","YPP"],["YNG","YGG"],["YKG","YTG"],["YAK","YLK","YTK"],["BSN","FLN"],["YSD","YXD"],["YYQ","YIQ"],["ZHQ","QXQ","MFQ","PDQ","ZIQ"],["ZJZ","ZWQ"],["ZJH","ZEH"],["ZKP","ZMP","IXP"],["ZDN","ZLN"],["FCQ","ZVQ","WWQ","AHQ","UWQ","NVQ","WZQ"],["FYW","ZYW"],["ZEK","ZFK","ZNK"],["WZW","ZZW"],["ZZQ","ZAQ","KVQ"],["BDP","BMP"],["QYQ","BWQ"],["BEY","BIY"],["ORQ","IBQ","RUQ","OJQ","BLQ"],["QRZ","QDZ"],["IEW","BDE","ZKE"],["FOP","SUP","RMP"],["CBY","CGY"],["GUH","CIH"],["QAY","CJY"],["COW","EFW","CSE"],["CFH","CBH"],["CXH","CUH"],["RVQ","CBQ"],["XXV","IXV"],["MOH","DRH"],["EAQ","DRQ","ZGQ","ZSQ","NNQ","GNQ","NOQ"],["FYM","FBM"],["YXJ","DWJ"],["DNJ","DSJ"],["FDG","DXG"],["DYH","EXH"],["SNV","RYV"],["WOV","WXV"],["DXP","DOP"],["PQQ","PUQ","PVQ","PXQ"],["ECN","EFN"],["FCG","FNG"],["FDY","FEY"],["VUW","VJW"],["GBP","GMP"],["FMW","GTW","IDW"],["GLJ","TNJ"],["GTJ","GAJ"],["GTS","GBS"],["GXF","GYF"],["GZJ","SHJ"],["GAT","GXT"],["HWN","VXN"],["HAF","HFF"],["HXT","HCT"],["HTV","HDV"],["PTS","HJS","XWS"],["VLY","ULY"],["HFV","HRV"],["HSQ","HEQ"],["TYJ","HSJ"],["HTY","HAY"],["HWV","HZV"],["JIR","JHR"],["JVS","JUS"],["JSH","EAH"],["JXG","JUG"],["JDV","JXV"],["EPH","JXH"],["JYW","JOW"],["PEQ","KTQ"],["JYH","PYH"],["JXK","JZK"],["JOF","WEF"],["UBZ","UCZ"],["ILQ","LCQ"],["LDO","LVO"],["LFP","LJP"],["JEP","LHP"],["LUF","LKF"],["LPE","UQW"],["UDV","LSV"],["NJS","LAS"],["LTZ","UKZ"],["LXK","LBK"],["LIZ","LSZ"],["OMH","MAH"],["MCF","MNF"],["MDN","MGN"],["MLQ","MQQ"],["MIF","MQF"],["MSW","IUW"],["PNO","HDO"],["PCY","PEY"],["PSW","PPW"],["PDV","PYV"],["ZYJ","ZEJ"],["PUK","PYK"],["QFK","QAK"],["SZD","SND"],["QGV","QXV"],["ZZC","ZDC"],["QBQ","YTQ"],["RQW","RCW"],["RCG","RXG"],["XUY","XBY"],["SOZ","SWZ"],["SLM","SYM"],["SSR","SMR","THR"],["SJQ","RNQ","ARQ","NAQ"],["NPH","OVH"],["SOH","SLH"],["BDH","SSH"],["TOK","TCK"],["TBZ","TDZ"],["TIV","TGV"],["TJH","KXH"],["TMN","TNN"],["TXK","TEK"],["RYH","WDH"],["CUY","WZY"],["NRH","JRH"],["XTV","XFV"],["XGN","XJN","GDN"],["EWQ","XLQ"],["EJQ","EHQ"],["HEK","HYK"],["IJP","ENP"],["XNN","XRN","XKN","UNN"],["EMQ","EPQ"],["EDQ","XTQ"],["XTP","EDP"],["XWF","EXF"],["YSK","YCK"],["YDQ","IIQ"],["RFH","QUH"],["YEY","YSY"],["YXG","YOG"],["YYH","CTH"],["VNJ","ZDJ"],["ZSG","ZOG"],["ZAW","QCE"],["ZUS","GOS"],["ZAP","ZXP"],["ZJE","IZW"],["FWH","RIH"],["CTQ","BFQ"],["DDG","DWG"],["ACQ","FZQ"],["KXN","KGN","KAN"],["PFQ","KLQ","UQQ"],["LLQ","OGQ","KMQ"],["MZM","MBM"]];e.exports=n},function(e,t){"use strict";function i(e){var t,r,i;var s,o,u;i=e.length;r=0;t="";while(r<i){s=e.charCodeAt(r++)&255;if(r==i){t+=n.charAt(s>>2);t+=n.charAt((s&3)<<4);t+="==";break}o=e.charCodeAt(r++);if(r==i){t+=n.charAt(s>>2);t+=n.charAt((s&3)<<4|(o&240)>>4);t+=n.charAt((o&15)<<2);t+="=";break}u=e.charCodeAt(r++);t+=n.charAt(s>>2);t+=n.charAt((s&3)<<4|(o&240)>>4);t+=n.charAt((o&15)<<2|(u&192)>>6);t+=n.charAt(u&63)}return t}function s(e){var t,n,i,s;var o,u,a;u=e.length;o=0;a="";while(o<u){do{t=r[e.charCodeAt(o++)&255]}while(o<u&&t==-1);if(t==-1)break;do{n=r[e.charCodeAt(o++)&255]}while(o<u&&n==-1);if(n==-1)break;a+=String.fromCharCode(t<<2|(n&48)>>4);do{i=e.charCodeAt(o++)&255;if(i==61)return a;i=r[i]}while(o<u&&i==-1);if(i==-1)break;a+=String.fromCharCode((n&15)<<4|(i&60)>>2);do{s=e.charCodeAt(o++)&255;if(s==61)return a;s=r[s]}while(o<u&&s==-1);if(s==-1)break;a+=String.fromCharCode((i&3)<<6|s)}return a}function o(e){var t,n,r,i;t="";r=e.length;for(n=0;n<r;n++){i=e.charCodeAt(n);if(i>=1&&i<=127){t+=e.charAt(n)}else if(i>2047){t+=String.fromCharCode(224|i>>12&15);t+=String.fromCharCode(128|i>>6&63);t+=String.fromCharCode(128|i>>0&63)}else{t+=String.fromCharCode(192|i>>6&31);t+=String.fromCharCode(128|i>>0&63)}}return t}function u(e){var t,n,r,i;var s,o;t="";r=e.length;n=0;while(n<r){i=e.charCodeAt(n++);switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(n-1);break;case 12:case 13:s=e.charCodeAt(n++);t+=String.fromCharCode((i&31)<<6|s&63);break;case 14:s=e.charCodeAt(n++);o=e.charCodeAt(n++);t+=String.fromCharCode((i&15)<<12|(s&63)<<6|(o&63)<<0);break}}return t}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var r=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];var a={base64encode:function(t){return i(o(t))},base64decode:function(t){return u(s(t))}};e.exports=a},function(e,t){"use strict";function s(e){var t="",r=0,i=0,s;for(var o=0;o<e.length;o++){i=i<<8|e.charCodeAt(o)&255;r+=8;while(r>5){s=n[i>>(r-=6)];t+=s=="i"?"ia":s=="+"?"ib":s=="/"?"ic":s;i&=(1<<r)-1}}if(r>0){t+=n[i<<6-r];if(r==2){t+="=="}else if(r==4){t+="="}}return t}function o(e){var t=0,n=0,i="",s;for(var o=0;o<e.length;o++){s=e.charAt(o);if(s=="="){break}if(s=="i"){s=e.charAt(++o);s=s=="a"?"i":s=="b"?"+":s=="c"?"/":e.charAt(--o)}n=n<<6|r[s];t+=6;while(t>7){i+=String.fromCharCode(n>>(t-=8)&255);n&=(1<<t)-1}}return i}function u(e){var t,n,r,i;t="";r=e.length;for(n=0;n<r;n++){i=e.charCodeAt(n);if(i>=1&&i<=127){t+=e.charAt(n)}else if(i>2047){t+=String.fromCharCode(224|i>>12&15);t+=String.fromCharCode(128|i>>6&63);t+=String.fromCharCode(128|i>>0&63)}else{t+=String.fromCharCode(192|i>>6&31);t+=String.fromCharCode(128|i>>0&63)}}return t}function a(e){var t,n,r,i;var s,o;t="";r=e.length;n=0;while(n<r){i=e.charCodeAt(n++);switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(n-1);break;case 12:case 13:s=e.charCodeAt(n++);t+=String.fromCharCode((i&31)<<6|s&63);break;case 14:s=e.charCodeAt(n++);o=e.charCodeAt(n++);t+=String.fromCharCode((i&15)<<12|(s&63)<<6|(o&63)<<0);break}}return t}var n=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];var r=[];for(var i=0;i<256;i++){r[n[i]]=i}var f={base62encode:function(t){return s(u(t))},base62decode:function(t){return a(o(t))}};e.exports=f},function(e,t){"use strict";var n={G:"é«éå¨è½¦",C:"åéé«é",D:"å¨è½¦ç»",Z:"ç´è¾¾ç¹å¿«",T:"ç©ºè°ç¹å¿«",K:"å¿«é",P:"æ®å¿«",M:"æ®æ¢",L:"ä¸´å®¢",N:"ç®¡åå¿«è½¦",Y:"ææ¸¸åè½¦",QT:"å¶ä»"};var r={D:"åå¢è½¯åº§",E:"ç¹ç­è½¯åº§",F:"å¨å§",G:"äºäººè½¯å",A:"é«çº§å¨å§",B:"æ··ç¼ç¡¬åº§",C:"æ··ç¼ç¡¬å§",L:"æ··ç¼è½¯å§",M:"ä¸ç­åº§",O:"äºç­åº§",H:"ä¸äººè½¯å",I:"ä¸ç­åè½¯",J:"äºç­åè½¯",K:"æ··ç¼è½¯åº§",Q:"è§ååº§",P:"ç¹ç­åº§",S:"ä¸ç­ååº§",3:"ç¡¬å§",2:"è½¯åº§",1:"ç¡¬åº§",0:"æ£è½¦",7:"ä¸ç­è½¯åº§",6:"é«çº§è½¯å§",5:"åå¢ç¡¬å§",4:"è½¯å§",9:"åå¡åº§",8:"äºç­è½¯åº§"};var i={D:"qt",E:"qt",F:"srrb",G:"qt",A:"qt",B:"qt",C:"qt",L:"qt",M:"zy",O:"ze",H:"qt",I:"qt",J:"qt",K:"qt",Q:"qt",P:"tz",S:"qt",3:"yw",2:"rz",1:"yz",0:"qt",7:"qt",6:"gr",5:"qt",4:"rw",9:"swz",8:"qt",noSeat:"wz"};var s=["å¶ä»","æäºº","å¿ç«¥","å­¦ç","æ®ç¾åäººãä¼¤æ®äººæ°è­¦å¯"];var o={1:{name:"èº«ä»½è¯",type:"NI"},B:{name:"æ¤ç§",type:"PP"},G:{name:"å°æ¹¾éè¡è¯",type:"TB"},C:{name:"æ¸¯æ¾³éè¡è¯",type:"GA"}};var u={seatTypeCharacterToCode:function(t){var n={};for(var i in r){n[r[i]]=i}return n[t]},seatTypeCodeToName:function(t,n){if(!n&&t==="W")return"æ åº§";if(!(typeof n==="string"&&n.length>=4))return r[t];var i="";var s=n.substring(3,4);if(!(s>="a"&&s<="z"))return r[t];switch(t){case"1":case"B":i="ç¡¬å§ä»£ç¡¬åº§";break;case"2":i="è½¯å§ä»£è½¯åº§";break;case"O":i="è½¯å§ä»£äºç­åº§";break;default:i="";break}return i}};var a=function(){var e={};for(var t in r){e[r[t]]=t}return e}();e.exports={_train_type:n,_seat_type:r,_seat:i,_person_type:s,_mapCert:o,convertor:u,converSeatType:a}},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var o=n(365)("util:pc:OtnLogin");var u=n(386);var a=n(393);var f=function(){function e(t,n,r,i){s(this,e);this.username=t;this.password=n;this.pc12306=r;this.validator=new u("login",r,i)}i(e,[{key:"autoValidateCode",value:function(){function t(e){logger.d("_validateCode.success:",e,arguments);return e}function n(e){logger.d("_validateCode.fail:",arguments);return e}return this.validator.run().then(t.bind(this),n.bind(this))}},{key:"submit",value:function(t){function n(e){o("otnLoginError",e);return e}return this.pc12306.otnLoginAysnSuggest(this.username,this.password,t).then(undefined,n.bind(this))}},{key:"run",value:function(){return a(this.autoValidateCode).call(this).then(this.submit.bind(this))}},{key:"runFast",value:function(){var t=function(t){if(t.canRetry&&t.totalRetryCount<1){return r({},t,{delay:200})}return{canRetry:false}};return a(this.autoValidateCode,{retryHook:t}).call(this).then(this.submit.bind(this))}}]);return e}();e.exports=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=n(387);var o=n(392);var u=n(365)("util:pc:OtnValidator");var a=n(313);var f="/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAeAAD/7gAOQWRvYmUAZMAAAAAB/9sAhAAQCwsLDAsQDAwQFw8NDxcbFBAQFBsfFxcXFxcfHhcaGhoaFx4eIyUnJSMeLy8zMy8vQEBAQEBAQEBAQEBAQEBAAREPDxETERUSEhUUERQRFBoUFhYUGiYaGhwaGiYwIx4eHh4jMCsuJycnLis1NTAwNTVAQD9AQEBAQEBAQEBAQED/wAARCAC+ASUDASIAAhEBAxEB/8QAagABAAMBAQAAAAAAAAAAAAAAAAECAwQHAQEAAAAAAAAAAAAAAAAAAAAAEAEAAgICAQMCAgoDAAAAAAAAAQIRAyESBDFBE1EiFAVhcYGRsTJCYrIjoXIVEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwD0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHDPn7IiLdIxM39ZxxT96fx151zeKVjE1iJ7Zj7vrxGMOS81msRMdZmt5rE2iIza2J9Y94abaT03xqriK/FMR6x6e0A3nzdtbdZiluInNLTMc2iv0V/H3+HXfFIts7fzTMR9s/qc9fmjtSZzqrObTMRWM1vHOcfQmLfhdNI7Ra0TxH/fj2B1R582mIrGusYic2viOZ9uITbzb13zTpnX3jX2zz2ly1++czE5i2uOeZ4tOfaFrR28uYiZm0b6T1/tiOZB0V8vbW1qbtfS3W168+0fVnH5jedc2itYmOuImZnOYziMRKs0r88xqv3iuu8WvecxW059WPxz023i8TSl4mJr/AFTMW9P08wDsp5t51d5rWbdorNc2rjMe+aqV/MNkzeZpTFP7+ePX25U00n8PMT2mbWrF60jNo6RiYn9eGdKzbZtr/sjM/dNac88x6TxgHfbya0rHeLRaY7TitpiP24U8bzK7qVm0TF7TicVnr6/X0U8rZe+unj68/Jtj7oniYrEc/qyp4940bK4iaaN3EVt/RePb9oLa/O27NlqU1Z6xM+uPScesr+L5dt8xW1Os9e2YniecOP79Vr57UvNZikRxMza84hv4Or4tl67Jn5tcY65jrNZ5jHAO9nt2WpNIrET2ticzjj6x9TRt+bVGzrNe3tLDzsRbx7T7ba8/oBSfzDbG3p8XGM4+7P8Ag02eXam6NURTn+q18e2eY9nBNLfFN7ViJtM9Ptrzz7e//Dbf8nzxbE5rFccfSImQb6fOnbtjXisZmI/mifafT9ytPzC969orrrn2tsiJ/gw8bXeJ8eZieZzHOeIic8Y4U8W8R1ps2fFTpNs4jOe36YkHfHlXjVbZa2r7ZiPttMxz9ZiJZf8AoW7zTFOIz2zbH+GWG3vbRvrSZ2a+1IpbERn3n0jnlOyu3VsnZs7RFq4iLbIzOP4wDsjyL2ik1it+0TMxFuePTHbClvM3fJTXXVGb5x91fbmfSZYa4ik+FOyOs42ROY9pjjKum2qvw3jEY3WicfS3oDvjdM+TOnrxFO3b9uGzGJ1/iZjP+zpGYxPpmfdsAAAAAAAAAAAACDCQEYiTCQEYEgIwjrH0WARgwkBGBICMRPqYj190gIEgIMJARgSAgwkBAkBCQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//2Q==";var l=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"login";var n=arguments[1];var r=arguments[2];var s=arguments[3];i(this,e);this.pc12306=n||window.pc12306;this.is_login_passCode=s;this.providerType=r;if(t==="login"){this.rand="sjrand";this.module="login"}else{this.rand="randp";this.module="passenger"}this.imgUrl="https://kyfw.12306.cn/otn/passcodeNew/getPassCodeNew?"+"module="+this.module+"&rand="+this.rand+"&"+Math.random()}r(e,[{key:"getImgBase64data",value:function(){function t(e){var t=$.Deferred();if(e.imageData===f){return t.reject("è·åéªè¯ç å¤±è´¥")}var n={image:e.image,imageData:e.imageData};return t.resolve(n)}function n(e){var t=$.Deferred();u("getImgBase64data fail:",arguments);if(e==="å¾çå è½½å¤±è´¥"){return t.reject("éªè¯ç å è½½å¤±è´¥")}return t.reject.apply(t,arguments)}u("this.pc12306.ajaxAbortTag",this.pc12306.ajaxAbortTag);if(this.pc12306.ajaxAbortTag){return $.Deferred().reject("aborted")}return(new s(this.imgUrl)).then(t,n)}},{key:"getCoordinate",value:function(t){return Common.delay(4.5*1e3).then(this._getCoordinate.bind(this,t))}},{key:"_getCoordinate",value:function(t){u("getCoordinate:",arguments);return(new o).getCode(t.imageData)}},{key:"checkCode",value:function(t){u("checkCode:",arguments);return this.pc12306.checkRandCodeAnsynRebook(1,t).then(function(){return t})}},{key:"run",value:function(){if(this.providerType==="localLogin"&&this.is_login_passCode==="N"){return $.Deferred().resolve()}return this.getImgBase64data().then(this.getCoordinate.bind(this)).then(this.checkCode.bind(this))}}]);return e}();e.exports=l},function(e,t,n){"use strict";function o(e,t,n){var r=new Image,i;r.src="data:image/png;base64,"+e;r.onload=function(){if(t&&t>0){try{i=t/r.width}catch(s){i=1}}n.resolve({image:r,imageData:e,width:r.width,height:r.height,zoomedHeight:i&&i*r.height,zoomedWidth:i&&t,factor:i})};r.onerror=function(){n.reject("å¾çå è½½å¤±è´¥")};return n}var r=n(360);var i=n(388);var s=function(){var t=arguments[0];if(t.indexOf("http")>-1){this.init&&this.init.apply(this,arguments)}else{this.initMobile&&this.initMobile.apply(this,arguments)}};s.prototype={init:function(t,n){var s=this;s.dfd=$.Deferred();s.url=t;var u=r;var a=window.secKillOn&&window.secKillIPLogin&&window.secKillIPLogin.includes("3w");if(a){u=function(t,n){var r=new i(t,n);return r.send()}}u(s.url,{data:"",type:"GET",responseNeedBase:"not",beforeSend:function(t){t.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8")}}).then(function(e,t,r,i){logger.d("ImageTools.init",arguments);if(e){s.dfd.reject(e.messages&&e.messages[0])}else{o(t,n,s.dfd)}}).fail(function(){s.dfd.reject.apply(s.dfd,arguments)})},initMobile:function(t,n){var r=this;r.dfd=$.Deferred();var i={success:function(t){if(!t.passcode)r.dfd.reject();r.imageData=t.passcode;o(t.passcode,n,r.dfd)},fail:function(t){r.dfd.reject()}};return wireless12306.getPassCodeNew(t).then(i.success.bind(this),i.fail)},then:function(){return this.dfd.then.apply(this.dtd,arguments)},getZoomedRect:function(t,n){var r=0;try{r=n/t.width}catch(i){r=1}return{zoomedHeight:r&&r*t.height,zoomedWidth:r&&n,factor:r}}};e.exports=s},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var o=n(360);var u=n(389);var a=n(391);var f=n(365)("util:Request");var l=function(){function e(t,n){s(this,e);this.kyfwHost="kyfw.12306.cn";this.mobileHost="mobile.12306.cn";this.cdnHosts=[this.kyfwHost,this.mobileHost];this.url=t;this.settings=r({},n);this.retryCount=0}i(e,[{key:"getEvaluatedIP",value:function(t,n,r){var i=this.host===this.kyfwHost?u:a;var s=new i;return s.getEvaluatedIP(t,n,r)}},{key:"trimSettings",value:function(){var t=this;if(!this.parsedUrl){this.parsedUrl=Common.parseUrl(this.url)}var n=this.parsedUrl,r=n.protocol,i=n.host,s=n.path,o=n.rest;this.host=i;this.path=s;var u=function(n){t.ip=n.ip;t.url=[r,t.ip,s,o].join("");if(!t.settings.header){t.settings.header={}}if(t.ip!==i){t.settings.header.Host=i}t.settings.url=t.url};if(i&&this.cdnHosts.includes(i)){return this.getEvaluatedIP(i,s,this.settings.ipMode).then(u)}return $.Deferred().resolve()}},{key:"getAjaxObj",value:function(){return this.ajaxObj}},{key:"trainAjax",value:function(){this.ajaxObj=o.apply(null,arguments);return this.ajaxObj}},{key:"sendMobile",value:function(){function t(){console.log("ajax success",arguments);r.apply(this,arguments);var e=$.Deferred();return e.resolve.apply(e,arguments)}function n(e){e=e||{};console.log("ajax fail",arguments);r.apply(this,arguments);var t=$.Deferred();var n="",i="ajaxFailButNoErrorMsg";if(typeof e==="string")n=e;else n=e&&e.responseText||"";if(e&&e.status==403)n="403";n=n||i;if(n==="403"){Common.event.trigger("secKill.ipForbid",{providerId:"mobile"})}return t.reject(n,n,e.status,e)}function r(e,t,n,r){console.log("decodeTipsAndMemo:",arguments);if(!(r&&r.headers))return;if(r.headers.Tips){r.headers.Tips=decodeURIComponent(r.headers.Tips)}if(r.headers.Memo){r.headers.Memo=decodeURIComponent(r.headers.Memo)}}return this.trainAjax(this.url,this.settings).then(t.bind(this),n.bind(this))}},{key:"send3W",value:function(){function i(e){if(typeof e!="string"){return""}var t=/<li\s+id=\\*"err_bot\\*">([^<]+)</;var n=e.match(t);var r=n&&n[1];if(typeof r!="string"){return""}r=r.trim();return r}var t=this;this.trainAjax(this.url,this.settings);var n=function(t){Common.event.trigger("secKill.ipForbid",{providerId:"3w"})};var r=function(n,r){var s=$.Deferred();if(!(!n&&typeof r==="string")){return null}if(r.indexOf("é¡µé¢å è½½ä¸­ï¼è¯·ç¨å...")>=0){t.retryCount=-1;Common.clearCache("3w");s.reject("302 moved temporarily");return s}var o=i(r);if(o){return s.reject(o)}return null};var s=function(n){var r=t.ip;t.trimSettings();t.ipChanged=r!==t.ip;t.retryCount--;return t.send3W()};return this.ajaxObj.then(function(e,i,o,u){var a=r(e,i);if(t.ipChanged){window.sendWatchMessage({key:"hyBuy_Request_3W_requestAfterIPChanged",isSuccessful:!a})}if(a){n("too much 302");if(t.retryCount===1){return s()}if(t.retryCount<=0){return a}t.retryCount--;return t.send3W()}i=u.responseText;if(u){u.serverIP=t.ip}return $.Deferred().resolve(e,i,u.status,u)},function(e){f("fail",e);var t=false;if(e.headers){t=true;n(e.status)}else if(window.navigator.onLine){t=true;n("unkown")}if(t&&this.retryCount>0){return this.changeIpRetry()}var i=e&&e.responseText||"";var s=r("",i);if(s){return s}return $.Deferred().reject(i,i,e.status,e)})}},{key:"send",value:function(){var t=this;this.startTimeStamp=Date.now();return this.trimSettings().then(function(){if(t.host===t.kyfwHost){return t.send3W()}else if(t.host===t.mobileHost){return t.sendMobile()}return t.trainAjax(t.url,t.settings)})}}]);return e}();e.exports=l},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){var n=[];var r=true;var i=false;var s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=true;s=a}finally{try{if(!r&&o["return"])o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var u=n(390);var a=n(360);var f=n(365)("util:pc:IPEvaluation");var l=function(){function e(t){o(this,e);this.defaultOptions={poolLimit:1,minQueryInterval:2e3,ipOutdateHour:24,timeoutPerQuery:1e4};this.options=i({},this.defaultOptions,t);this.watcherPrefix="appRob";this.id="ipEvaluation";this.providerId="3w";this.batchWatcherData={};this.startWatcherSended=false;this.lastBatchWatcherTime=0;this.host="kyfw.12306.cn";this.path="/otn/leftTicket/init";this.poolSize=0;this.cdnManager=new u;this.lastQueryTime=0}s(e,[{key:"getConfig",value:function(){var t=this;return Common.getRenamedConfig({options:"json.hy.ipEvaluation"}).then(function(e){var n=e.options;f("get Config Success",n);t.options=i({},t.options,n)})}},{key:"run",value:function(){this.dfd=$.Deferred();this.lastBatchWatcherTime=0;this.heartbeatWatcher();this.getConfig().then(this.polling.bind(this));return this.dfd}},{key:"getOutdateIPList",value:function(){var t=this;return this.cdnManager.getIPList(this.host).then(function(e){var n=Date.now();return e.filter(function(e){var r=e.t||0;return n-r>t.options.ipOutdateHour*60*60*1e3}).sort(function(e,t){var n=e.t||0;var r=t.t||0;return n-r})})}},{key:"heartbeatWatcher",value:function(){var t=this;setTimeout(function(){if(t.dfd.state()==="pending"){t.sendBatchWatcher();t.heartbeatWatcher()}},6e4)}},{key:"prepareBatchWatcher",value:function(t){if(!this.batchWatcherData[t]){this.batchWatcherData[t]=0}Common.event.trigger("secKill.ipEvaluation",{type:t,providerId:this.providerId});this.batchWatcherData[t]+=1}},{key:"sendStartWatcher",value:function(){if(!this.lastBatchWatcherTime){this.lastBatchWatcherTime=Date.now()}if(!this.startWatcherSended){this.startWatcherSended=true;Common.sendWatchMessageLater({key:this.watcherPrefix+"_"+this.providerId+"_"+this.id+"_start",isSuccessful:true})}}},{key:"sendBatchWatcher",value:function(){var t=Date.now();var n=this.watcherPrefix+"_"+this.providerId+"_"+this.id;var i=Object.entries(this.batchWatcherData).map(function(e){var t=r(e,2),i=t[0],s=t[1];return{key:n+"_"+i,count:s}});if(!i.length){return}if(this.lastBatchWatcherTime){i.push({key:n+"_online",count:1,duration:t-this.lastBatchWatcherTime})}Common.watcherLater(i);this.batchWatcherData={};this.lastBatchWatcherTime=t}},{key:"stop",value:function(){this.poolSize=0;this.sendBatchWatcher();return this.dfd&&this.dfd.resolve()}},{key:"getTimeoutPerQuery",value:function(){return this.options.timeoutPerQuery}},{key:"polling",value:function(){var t=this;f("polling",this.poolSize);if(this.dfd.state()!=="pending"){return}var n=Date.now();if(n-this.lastQueryTime<this.options.minQueryInterval){clearTimeout(this.pollingTimer);this.pollingTimer=setTimeout(this.polling.bind(this),this.options.minQueryInterval-(n-this.lastQueryTime));return}if(this.poolSize<this.options.poolLimit){this.poolSize+=1;this.getOutdateIPList().then(function(e){if(e.length){return t.query(e[0])}return t.stop()}).always(function(){t.poolSize=Math.max(0,t.poolSize-1);t.polling()});this.polling()}}},{key:"getEvaluatedIP",value:function t(e,n,r){var i=this;var s=10;var o=function(){if(r==="group"){return $.Deferred().reject("badIp")}else if(s>0){s-=1;return Common.delay(i.options.minQueryInterval).then(t)}return $.Deferred().resolve({ip:e})};var t=function(){return i.cdnManager.getIP(e,n,r).then(function(t){var n=t.t||0;if(Date.now()-n<i.options.ipOutdateHour*60*60*1e3){return $.Deferred().resolve(t)}if(t.ip===e){return t}return i.evaluateIP(t).then(function(){return t},o)})};return t().done(function(e){return f("getEvaluatedIP result",e)})}},{key:"evaluateIP",value:function(t){var n=this;var r=t.ip;this.sendStartWatcher();var i=Date.now();this.lastQueryTime=i;var s=function(t){n.prepareBatchWatcher(t?"fail":"success");if(t){n.prepareBatchWatcher("fail_"+t)}var s=Date.now();var o=s-i;n.cdnManager.feedbackHandler({ip:r,host:n.host,path:"_",duration:o,bannedReason:t,timestamp:s})};var o=function(t,n,r,i){if(i&&i.headers&&i.headers.redirectHeaders&&i.headers.redirectHeaders.length){s("302");return $.Deferred().reject()}else{s()}return $.Deferred().resolve()};var u=function(t){if(t.headers){s(t.status)}else if(window.navigator.onLine){s("unkown")}else{s()}return $.Deferred().reject()};return a("https://"+r+this.path,{header:{Host:this.host,Connection:"close","User-Agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.67 Safari/537.36"},timeout:this.getTimeoutPerQuery()*1.2,httpTimeout:this.getTimeoutPerQuery(),jsCookie:true,noRetry:true}).then(o,u)}},{key:"query",value:function(t){return this.evaluateIP(t)}}]);return e}();e.exports=l},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){var n=[];var r=true;var i=false;var s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=true;s=a}finally{try{if(!r&&o["return"])o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var o=n(360);var u=n(365)("util:CdnManager");var a=null;var f=0;var l=function(){function e(){s(this,e);var t=60*60*1e3;this.config={dnsUpdateTimeLimit:t,qunarUpdateTimeLimit:t,minIntervalPerPath:1500,sessionIPQueryMinInterval:1e4,historyLimitPerPath:1,bannedTimeLimit:24*t,cacheKey:"CDNCache",hosts:["kyfw.12306.cn","mobile.12306.cn"]}}i(e,[{key:"getCache",value:function(){return Common.getStoredInfo(this.config.cacheKey)||{}}},{key:"saveCache",value:function(t){return Common.storeInfo(this.config.cacheKey,t,true)}},{key:"sort",value:function(t){var n=this;var r=Date.now();var i=0;var s=t.filter(function(e){if(e.d>0){i+=e.d;return true}});var o=s.length?i/s.length:0;var u=[{key:"b",toValue:function(t){if(!t||r-t>n.config.bannedTimeLimit){return 0}return t}},{key:"d",toValue:function(t){return t||o}},{key:"o",toValue:function(t){if(!t||t==="qunar"){return 1}return 0}}];var a=function(t,n){var r=0;u.forEach(function(e){var i=e.key,s=e.toValue;if(r!==0){return}var o=s(t[i]);var u=s(n[i]);r=o-u});return r};return t.sort(a)}},{key:"mergeIpList",value:function(t,n){var r=this.getCache();r[t+"UpdateStatus"]="done";r[t+"UpdateTime"]=Date.now();var i=t==="dns"?"ipList":"cdnList";var s={};this.config.hosts.forEach(function(e){s[e]={};(r[e]||[]).forEach(function(t){return s[e][t.ip]=t})});n.forEach(function(e){var n=s[e.domain];if(!r[e.domain]){r[e.domain]=[]}if(n&&e[i]){e[i].forEach(function(i){if(!/^(\d+\.){3}\d+$/.test(i)){return}var s=i.split(".");if(s[0]==="100"&&+s[1]>=64&&+s[1]<128){return}if(!n[i]){n[i]={ip:i};r[e.domain].push(n[i])}if(t==="dns"){n[i].o=t}})}});this.saveCache(r)}},{key:"updateIpListFromDNS",value:function(t){var n=this;var r=t.dnsUpdateTime,i=t.dnsUpdateStatus;var s=$.Deferred();if(i==="pending"||Date.now()-(r||0)<this.config.dnsUpdateTimeLimit){return s.resolve()}var o=function(t){var r=n.getCache();r.dnsUpdateStatus="fail";if(t&&t.errmsg&&t.errmsg.includes("dnsAnalyze not exist")){r.dnsUpdateTime=Date.now()}n.saveCache(r);s.resolve()};var u=function(t){var r=t.dnsElemList;n.mergeIpList("dns",r);s.resolve()};QunarAPI.train.dnsAnalyze({hosts:this.config.hosts,success:u,fail:o});return s}},{key:"updateIpListFromQunar",value:function(t){var n=this;var r=t.qunarUpdateTime,i=t.qunarUpdateStatus;if(i==="pending"||Date.now()-(r||0)<this.config.qunarUpdateTimeLimit){return $.Deferred().resolve()}t.qunarUpdateStatus="pending";var s=function(){var t=n.getCache();t.qunarUpdateStatus="fail";n.saveCache(t)};var o=function(t){if(t.data&&t.data.length){return n.mergeIpList("qunar",t.data)}return s()};return this._updateIpListFromQunar().then(o,s)}},{key:"_updateIpListFromQunar",value:function(){var t=Date.now();if(a&&t-f<this.config.qunarUpdateTimeLimit){return a}f=t;a=o("https://trainrefresh.qunar.com/bypass/api/cdnList",{});return a}},{key:"getIPRandomly",value:function(t,n,r){var i=false;var s=Date.now();var o=r.length;if(!o){return false}var u=0;while(!i&&u<10){u+=1;var a=Math.floor(Math.random()*o);var f=r[a];if(!f.p){f.p={}}var l=f.p[n];if(f.b&&s-f.b<this.config.bannedTimeLimit){continue}if(l&&a===0&&l.t&&s-l.t<this.config.sessionIPQueryMinInterval){continue}if(l&&l.t&&s-l.t<this.config.minIntervalPerPath){continue}if(!l){f.p[n]={}}f.p[n].t=s;i=f}return i}},{key:"getIPList",value:function(t){function r(){n=this.getCache();if(!n[t]){n[t]=[]}var e=n[t];return e}var n=this.getCache();return $.when(this.updateIpListFromDNS(n),this.updateIpListFromQunar(n)).then(r.bind(this))}},{key:"getIP",value:function t(e,n){var r=this;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"one";var s=this.getCache();var t=function(){var s=r.getCache();var o=Date.now();if(!s[e]){s[e]=[]}var u=s[e];var a=void 0;if(i==="group"){a=r.getIPRandomly(e,n,u)}if(!a&&u.length){var f=u[0];if(!f.p){f.p={}}if(!f.p[n]){f.p[n]={}}f.p[n].t=o;a=f}a=a||{ip:e};r.saveCache(s);return a};return $.when(this.updateIpListFromDNS(s),this.updateIpListFromQunar(s)).then(t)}},{key:"feedbackHandler",value:function(t){var n=t.ip,i=t.host,s=t.path,o=t.duration,a=t.bannedReason,f=t.timestamp;var l=this.getCache();if(!l[i]){l[i]=[]}var c=l[i];var h=c.find(function(e){return e.ip===n})||{ip:n};h.t=f;if(a){u("banned IP",n,a);h.r=a;h.b=f;if(c[0]&&c[0].ip===n){l[i]=this.sort(c)}return this.saveCache(l)}if(!h.p){h.p={}}if(!h.p[s]){h.p[s]={}}var p=h.p[s];if(!p.h){p.h=[]}p.h.push({d:o,t:f});while(p.h.length>this.config.historyLimitPerPath){p.h.shift()}var d=0;p.h.forEach(function(e){return d+=e.d});p.d=p.h.length?Math.floor(d/p.h.length):0;var v=0;var m=0;Object.entries(h.p).forEach(function(e){var t=r(e,2),n=t[0],i=t[1].d;if(i){m+=1;v+=i}});h.d=m?Math.floor(v/m):0;this.saveCache(l)}}]);return e}();window.CdnManager=l;e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var o=n(389);var u=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.host="mobile.12306.cn";n.path="/otsmobile/app/mgs/mgw.htm";n.providerId="mobile";return n}s(t,e);return t}(o);e.exports=u},function(e,t,n){"use strict";var r=n(360);var i=function(){this.url={getResult:"//train.qunar.com/captcha/api/simpleCrack.jsp"};this.commonParam={agentCode:"neibu",globalId:"",hmac:""}};i.prototype={getCode:function(t){function s(e){var t=e.state;if(t==1){r.resolve(e.result)}else{r.reject("autorecognize verification code fail "+t)}}function o(){r.reject("autorecognize verification code fail")}var n=this,r=$.Deferred();var i={agentCode:n.commonParam.agentCode,image:t,hmac:""};Common.postRequest("t_tTrainCaptcha",i).then(s,o);return r.promise()}};e.exports=i},function(e,t){"use strict";function r(e,t){return function(){function f(){var t;var n;try{t=e.apply(this,arguments)}catch(r){n=(new $.Deferred).reject(r);n.then(undefined,c.bind(this))}if(t&&t.then){t.then(l.bind(this),c.bind(this))}else if(!n){l.call(this,t)}}function l(){var e=[].concat(Array.prototype.slice.call(arguments));s.unshift(e);if(t.resultHook){var n=t.resultHook(s);return u.resolve(n)}return u.resolve.apply(u,arguments)}function c(n){var r=this;if(!n){console.error("retryable fail with no error: "+e.toString())}var l=Common.lookUp(n);if(!l.id&&!l.display){l=Common.getError3W(l);l=Common.lookUp(l)}i=[].concat(Array.prototype.slice.call(arguments));s.unshift(i);var c=a({error:l,resultArr:s});if(t.retryHook){c=t.retryHook(c)}if(c.canRetry){if(c.delay){Common.delay(c.delay).then(function(){f.apply(r,c.newArgs||o)})}else{f.apply(this,c.newArgs||o)}}else{u.reject.apply(u,i)}}function h(){if(i){u.reject.apply(u,i)}else{u.reject(Common.lookUp("retry timeout "+t.timeout+"s"))}}var i=void 0;var s=[];var o=[].concat(Array.prototype.slice.call(arguments));var u=new $.Deferred;var a=r.getRetryHook();t=n({timeout:0},t);if(t.timeout){Common.delay(t.timeout*1e3).then(h.bind(this))}f.apply(this,o);return u}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};r.getRetryHook=function(){var e={};var t=-1;return function(r){var i=r.error;t+=1;var s=n({},r,{totalRetryCount:t,canRetry:false});if(!i||!i.id){return s}var o=i.id;if(!(o in e)){e[o]=-1}e[o]+=1;s.retryCountById=e[o];if(s.retryCountById<i.retryCount){s.canRetry=true;s.delay=i.retryDelay||0}return s}};e.exports=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var u=n(365)("util:pc:PassportValidator");var a=n(385);var f=n(395);var l=function(e){function t(e,n,r){i(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));o.validator=new f("login",r);return o}o(t,e);r(t,[{key:"submit",value:function(t){function n(e){u("passportLoginError",e);return e}return this.pc12306.passportLogin(this.username,this.password,t).then(this.pc12306.passportUAMToken.bind(this.pc12306)).then(this.pc12306.otnUAMAuthClient.bind(this.pc12306)).then(undefined,n.bind(this))}}]);return t}(a);e.exports=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var u=n(386);var a=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++){r[o]=arguments[o]}var u=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));u.imgUrl="https://kyfw.12306.cn/passport/captcha/captcha-image64?"+"login_site=E"+"&module="+u.module+"&rand="+u.rand+"&"+Math.random();return u}o(t,e);r(t,[{key:"getImgBase64data",value:function(){function t(e){var t=$.Deferred();var n={image:"",imageData:e};return t.resolve(n)}function n(e){var t=$.Deferred();console.log("getImgBase64data fail:",arguments);if(e==="å¾çå è½½å¤±è´¥"){return t.reject("éªè¯ç å è½½å¤±è´¥")}return t.reject.apply(t,arguments)}return pc12306.passportCaptchaImage64(this.imgUrl).then(t,n)}},{key:"checkCode",value:function(t){console.log("checkCode:",arguments);return pc12306.checkRandCodeAnsyn(1,t).then(function(){return t})}}]);return t}(u);e.exports=a},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function b(e){var t,n,r="",i="",s;e+="";for(t=0,n=e.length;t<n;t++){i=e.charCodeAt(t);s=i.toString(16);r+=s.length<2?"0"+s:s}return r}function x(e){e=escape(e);var t="";var n,r,i="";var s,o,u,a="";var f=0;do{n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+S.charAt(s)+S.charAt(o)+S.charAt(u)+S.charAt(a);n=r=i="";s=o=u=a=""}while(f<e.length);return t}var r=function(){function e(e,t){var n=[];var r=true;var i=false;var s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=true;s=a}finally{try{if(!r&&o["return"])o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var u=n(365)("util:pc:pc12306Common");var a=n(397);var f=null;var l=null;var c=n(398);var h=n(360);var p=n(388);var d=n(400);var v=n(401);var m=Common.deepGet;var g;var y=function(){function e(t,n){o(this,e);this._url=t;this._setting=n;this.url="";this.id="";this.setting=null;this.state="pending";this.result=null;this.origin="https://kyfw.12306.cn";this.injectDFP=new c(this.origin)}s(e,[{key:"run",value:function(){function t(){return this.sendRequest(this.url,this.setting).then(this.globalReader.bind(this)).then(this.responseReader).done(n.bind(this)).then(undefined,r.bind(this))}function n(){u("pcAjaxFactory success",this.id,arguments);this.state="done";this.result=arguments}function r(e){u("pcAjaxFactory fail",this.id,arguments);this.state="fail";this.result=arguments;var t=$.Deferred();if(this.ajaxConfig.noLookUp){return t.reject.apply(t,arguments)}var n=Common.lookUp(e);if(!(n.id&&n.display)){n=Common.getError3W(e);n=Common.lookUp(n)}if(!(n.id&&n.display)){u.error("pcAjaxFactory lookUp Fail",n)}return t.reject(n)}this.url=this.trimUrl(this._url);this.id=this.getId(this.url);this.setting=this.trimSetting(this._setting||{},this.id);this.ajaxConfig=this.getAjaxConfig(this.id);this.responseReader=this.getReader(this.ajaxConfig);this.dfd=this.checkDFPAndStatiAjax(t.bind(this),this.setting);return this.dfd}},{key:"checkDFPAndStatiAjax",value:function(t,n){if(!n.passDFPCheck){t=this.injectDFP.run.bind(this.injectDFP,t)}if(n.ipMode==="group"){return t()}return Common.statiAjax(t,this.id,"3w")}},{key:"checkAndSetJCookie",value:function(t,n){return(new v).setCookie(t,n)}},{key:"sendRequest",value:function(t,n){function a(){function e(e,n){function a(){o=-1;Common.clearCache("3w");i.reject("302 moved temporarily")}var i=$.Deferred();if(!(!e&&typeof n==="string")){return null}if(n.indexOf("é¡µé¢å è½½ä¸­ï¼è¯·ç¨å...")>=0){a();return i}var s=r(n);if(s){return i.reject(s)}u.warn("it is html but not recognized:",t);return null}function r(e){if(typeof e!="string"){return""}var t=/<li\s+id=\\*"err_bot\\*">([^<]+)</;var n=e.match(t);var r=n&&n[1];if(typeof r!="string"){return""}r=r.trim();u("msg:",r);return r}n=n||{};n["url"]=t;g=h(t,n);return g.then(function(t,n,r,i){var s=e(t,n);if(s){if(o<=0){return s}u("retryCount302:",o);o--;return Common.delay(0*1e3).then(a)}n=i.responseText;return $.Deferred().resolve(t,n,i.status,i)},function(t){if(t.status==404){return"404"}var n=t&&t.responseText||"";var r=e("",n);if(r){return r}return $.Deferred().reject(n,n,t.status,t)})}var r=window.secKillOn&&window.secKillIPLogin&&window.secKillIPLogin.includes("3w");if((["group","one"].includes(n.ipMode)||r)&&n.ipMode!=="host"){var i=new p(t,n);var s=i.send();g=i.getAjaxObj();return s}var o=2;return this.checkAndSetJCookie(t,n).then(a)}},{key:"trimUrl",value:function(t){var n=this.origin;var r="";if(t[0]==="/"){r=n+t}else if(t.indexOf("http")===0){r=t}else{r=n+"/"+t}return r}},{key:"trimSetting",value:function(t,n){var r=i({},t);if(n.indexOf("http")===0){return r}var s=pc12306.getGlobalState()||{};if(typeof r.type==="string"&&r.type.toLowerCase()==="post"&&!r.data){r.data={}}if($.isPlainObject(r.data)){r.data=i({},r.data);r.data=this.addJsonAttr(r.data,n,s);r.data=this.addSubmitToken(r.data,n,s)}this.addHeaders(r,n);return r}},{key:"addJsonAttr",value:function(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=/(passport|leftTicket\/(query|log)|getPassengerDTOs|queryByTrainNo|init|autoSubmitOrderRequest)/.test(n);if(!i||t&&t.hasOwnProperty("_json_att")){t._json_att=r._json_att||""}return t}},{key:"addSubmitToken",value:function(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=/(confirmPassenger|queryOder|payOrder\/init)/.test(n);i=i&&!/(confirmSingleForQueueAsys|getQueueCountAsync|autoSubmitOrderRequest)/.test(n);if(r.globalRepeatSubmitToken&&(i||t&&t.hasOwnProperty("REPEAT_SUBMIT_TOKEN"))){t.REPEAT_SUBMIT_TOKEN=r.globalRepeatSubmitToken}return t}},{key:"addHeaders",value:function(t,n){var r=this;var i=t.beforeSend;var s=navigator.userAgent.replace(/Qunar[ia]Phone\/\d+/i,"");var o="";switch(t.dataType){case"jsonp":case"js":o="text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01";break;case"css":o="text/css,*/*;q=0.1";break;case"image":o="image/webp,image/apng,image/*,*/*;q=0.8";break;case"html":o="text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8";break;default:o="application/json, text/javascript, */*; q=0.01"}t.beforeSend=function(e){e.setRequestHeader("Origin",r.origin);e.setRequestHeader("Pragma","no-cache");e.setRequestHeader("Cache-Control","no-cache");e.setRequestHeader("Accept-Encoding","gzip, deflate, br");e.setRequestHeader("Accept-Language","en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7");e.setRequestHeader("Upgrade-Insecure-Requests","1");e.setRequestHeader("User-Agent",s);e.setRequestHeader("Accept",o);if(t.type&&t.type.toLowerCase()==="post"){e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")}var u=/(getPassengerDTOs|queryByTrainNo|checkUser|leftTicket(Price)?\/(query|log|init))/.test(n);if(u){e.setRequestHeader("If-Modified-Since","0")}if(i){i.call(t,e)}}}},{key:"getId",value:function(t){return t.replace(/^https:\/\/kyfw\.12306\.cn\//,"").split("?")[0]}},{key:"getAjaxConfig",value:function(t){var n=d[t];if(!n){n={noLookUp:true}}return n}},{key:"globalReader",value:function(t,n,r,i){if(t){return this.globalJsonReader.apply(this,arguments)}else{if(n&&n.toLowerCase().includes("<html")){return this.globalHtmlReader.apply(this,arguments)}}var s=$.Deferred();return s.resolve.apply(s,arguments)}},{key:"globalJsonReader",value:function(t,n,r,i){if(t){var s={};if(t.c_url){s[t.c_name]=t.c_url}if(t.attributes){s._json_att=t.attributes}if(t.repeatSubmitToken){s.globalRepeatSubmitToken=t.repeatSubmitToken}pc12306.setGlobalState(s);var o=t.data||t||{};t._msg3w=o.exMsg||o.message||o.errorMsg||o.errMsg||o.msg||o.result_message||o.error||o.exception;if(t.validateMessagesShowId){var u=t.messages;if(u&&u.length){t._msg3w=u.join("\n")}var a="";if(t.validateMessages){Object.entries(t.validateMessages).forEach(function(e){a+=e[0]+" :"+e[1]+"\n"})}if(a){t._msg3w=a}}}var f=$.Deferred();return f.resolve.apply(f,arguments)}},{key:"globalHtmlReader",value:function(t,n,r,i){function a(e){var t=null;if(typeof e==="string"){e=e.trim().replace(/\"/g,'\\"').replace(/\'/g,'"');try{t=JSON.parse(e)}catch(n){}}return t}var s=["globalRepeatSubmitToken","CLeftTicketUrl","ticketInfoForPassengerForm"];if(typeof n==="string"){var o={};n.replace(/var ([a-zA-Z_]+) ?= ?([^\n]+);\n/g,function(e,t,n){if(s.includes(t)){var r=a(n);o[t]=r}});pc12306.setGlobalState(o,this.id)}var u=$.Deferred();return u.resolve.apply(u,arguments)}},{key:"readerOf302",value:function(t,n,r,i){var s=$.Deferred();return s.resolve.apply(s,arguments)}},{key:"readerGenerator",value:function(t){return function(e){var n=m(e,t.success[0]);var r=t.success.length>1;if(r&&n===t.success[1]||!r&&n){var i=e;if(t.result){i=m(e,t.result)}return $.Deferred().resolve(i)}var s=m(e,t.msg||"_msg3w")||e;return $.Deferred().reject(s)}}},{key:"getReader",value:function(t){var n=t.reader;if($.type(n)==="string"){n=d[n].reader}if($.type(n)==="object"){n=this.readerGenerator(n)}return n}}]);return e}();var w=new function(){function t(e,t){var n=e.length;var r=n-1<<2;if(t){var i=e[n-1];if(i<r-3||i>r)return null;r=i}for(var s=0;s<n;s++){e[s]=String.fromCharCode(e[s]&255,e[s]>>>8&255,e[s]>>>16&255,e[s]>>>24&255)}if(t){return e.join("").substring(0,r)}else{return e.join("")}}function n(e,t){var n=e.length;var r=[];for(var i=0;i<n;i+=4){r[i>>2]=e.charCodeAt(i)|e.charCodeAt(i+1)<<8|e.charCodeAt(i+2)<<16|e.charCodeAt(i+3)<<24}if(t){r[r.length]=n}return r}var e=2654435768;this.encrypt=function(r,i){if(r==""){return""}var s=n(r,true);var o=n(i,false);if(o.length<4){o.length=4}var u=s.length-1;var a=s[u],f=s[0];var l,c,h,p=Math.floor(6+52/(u+1)),d=0;while(0<p--){d=d+e&4294967295;c=d>>>2&3;for(h=0;h<u;h++){f=s[h+1];l=(a>>>5^f<<2)+(f>>>3^a<<4)^(d^f)+(o[h&3^c]^a);a=s[h]=s[h]+l&4294967295}f=s[0];l=(a>>>5^f<<2)+(f>>>3^a<<4)^(d^f)+(o[h&3^c]^a);a=s[u]=s[u]+l&4294967295}return t(s,false)}};var E=function(t){return[t.getFullYear(),t.getMonth()+1>9?t.getMonth()+1:"0"+(t.getMonth()+1),t.getDate()>9?t.getDate():"0"+t.getDate()].join("-")};var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var T={bin216:b,Base32:w,returnDay8:E,encode32:x,PcAjaxFactory:y,ajax:function(t,n){pc12306.lastAjax=new y(t,n);if({buildType:"prd",deployType:"prod"}.buildType!=="prd"){pc12306.ajaxHistory||(pc12306.ajaxHistory=[]);pc12306.ajaxHistory.unshift(pc12306.lastAjax)}return pc12306.lastAjax.run()},getAjaxObj:function(){return g},setGlobalState:function(t,n){var s=pc12306.htmlPageState;if(n){s.lastHtmlId=n;s.current=t;s[s.lastHtmlId]=t}else{s.current=i({},s.current,t)}var o={};Object.entries(t).forEach(function(e){var t=r(e,2),n=t[0],i=t[1];if(i!=null){o[n]=i}});Common.storeInfo("pcGlobalState",o)},getGlobalState:function(t){var n=Common.getStoredInfo("pcGlobalState")||{};if(t){return Common.deepGet(n,t)}return n},clearGlobalState:function(t){var n={};if(t){n=Common.getStoredInfo("pcGlobalState")||{};t.forEach(function(e){return delete n[e]})}Common.storeInfo("pcGlobalState",n,true)},lowestSeatType:function(t){var n=[{key:"yz_num",value:"1"},{key:"rz_num",value:"2"},{key:"ze_num",value:"O"}],r;var i=t.queryLeftNewDTO;for(var s=0;s<n.length;s++){if(i[n[s].key]!="--"){r=n[s].value;break}}return r},genStationsCache:function(){f={};l={};var t=a.split("@");$.each(t,function(){var e=$.trim(this);if(e.length===0){return}var t=e.split("|");f[t[1]]=t[2];l[t[2]]=t[1]})},getStationCode:function(t){if(!f){T.genStationsCache()}return f[t]},getStationName:function(t){if(!l){T.genStationsCache()}return l[t]}};e.exports=T},function(e,t){"use strict";var n="@bjb|åäº¬å|VAP|beijingbei|bjb|0@bjd|åäº¬ä¸|BOP|beijingdong|bjd|1@bji|åäº¬|BJP|beijing|bj|2@bjn|åäº¬å|VNP|beijingnan|bjn|3@bjx|åäº¬è¥¿|BXP|beijingxi|bjx|4@gzn|å¹¿å·å|IZQ|guangzhounan|gzn|5@cqb|éåºå|CUW|chongqingbei|cqb|6@cqi|éåº|CQW|chongqing|cq|7@cqn|éåºå|CRW|chongqingnan|cqn|8@cqx|éåºè¥¿|CXW|chongqingxi|cqx|9@gzd|å¹¿å·ä¸|GGQ|guangzhoudong|gzd|10@sha|ä¸æµ·|SHH|shanghai|sh|11@shn|ä¸æµ·å|SNH|shanghainan|shn|12@shq|ä¸æµ·è¹æ¡¥|AOH|shanghaihongqiao|shhq|13@shx|ä¸æµ·è¥¿|SXH|shanghaixi|shx|14@tjb|å¤©æ´¥å|TBP|tianjinbei|tjb|15@tji|å¤©æ´¥|TJP|tianjin|tj|16@tjn|å¤©æ´¥å|TIP|tianjinnan|tjn|17@tjx|å¤©æ´¥è¥¿|TXP|tianjinxi|tjx|18@xgl|é¦æ¸¯è¥¿ä¹é¾|XJA|hkwestkowloon|xgxjl|19@cch|é¿æ¥|CCT|changchun|cc|20@ccn|é¿æ¥å|CET|changchunnan|ccn|21@ccx|é¿æ¥è¥¿|CRT|changchunxi|ccx|22@cdd|æé½ä¸|ICW|chengdudong|cdd|23@cdn|æé½å|CNW|chengdunan|cdn|24@cdu|æé½|CDW|chengdu|cd|25@csh|é¿æ²|CSQ|changsha|cs|26@csn|é¿æ²å|CWQ|changshanan|csn|27@dmh|å¤§ææ¹|JAK|daminghu|dmh|28@fzh|ç¦å·|FZS|fuzhou|fz|29@fzn|ç¦å·å|FYS|fuzhounan|fzn|30@gya|è´µé³|GIW|guiyang|gy|31@gzh|å¹¿å·|GZQ|guangzhou|gz|32@gzx|å¹¿å·è¥¿|GXQ|guangzhouxi|gzx|33@heb|åå°æ»¨|HBB|haerbin|heb|34@hed|åå°æ»¨ä¸|VBB|haerbindong|hebd|35@hex|åå°æ»¨è¥¿|VAB|haerbinxi|hebx|36@hfe|åè¥|HFH|hefei|hf|37@hfx|åè¥è¥¿|HTH|hefeixi|hfx|38@hhd|å¼åæµ©ç¹ä¸|NDC|huhehaotedong|hhhtd|39@hht|å¼åæµ©ç¹|HHC|huhehaote|hhht|40@hkd|æµ·  å£ä¸|KEQ|haikoudong|hkd|41@hkd|æµ·å£ä¸|HMQ|haikoudong|hkd|42@hko|æµ·å£|VUQ|haikou|hk|43@hzd|æ­å·ä¸|HGH|hangzhoudong|hzd|44@hzh|æ­å·|HZH|hangzhou|hz|45@hzn|æ­å·å|XHH|hangzhounan|hzn|46@jna|æµå|JNK|jinan|jn|47@jnx|æµåè¥¿|JGK|jinanxi|jnx|48@kmi|ææ|KMM|kunming|km|49@kmx|ææè¥¿|KXM|kunmingxi|kmx|50@lsa|æè¨|LSO|lasa|ls|51@lzd|å°å·ä¸|LVJ|lanzhoudong|lzd|52@lzh|å°å·|LZJ|lanzhou|lz|53@lzx|å°å·è¥¿|LAJ|lanzhouxi|lzx|54@nch|åæ|NCG|nanchang|nc|55@nji|åäº¬|NJH|nanjing|nj|56@njn|åäº¬å|NKH|nanjingnan|njn|57@nni|åå®|NNZ|nanning|nn|58@sjb|ç³å®¶åºå|VVP|shijiazhuangbei|sjzb|59@sjz|ç³å®¶åº|SJP|shijiazhuang|sjz|60@sya|æ²é³|SYT|shenyang|sy|61@syb|æ²é³å|SBT|shenyangbei|syb|62@syd|æ²é³ä¸|SDT|shenyangdong|syd|63@syn|æ²é³å|SOT|shenyangnan|syn|64@tyb|å¤ªåå|TBV|taiyuanbei|tyb|65@tyd|å¤ªåä¸|TDV|taiyuandong|tyd|66@tyu|å¤ªå|TYV|taiyuan|ty|67@wha|æ­¦æ±|WHN|wuhan|wh|68@wjx|çå®¶è¥è¥¿|KNM|wangjiayingxi|wjyx|69@wlq|ä¹é²æ¨é½|WAR|wulumuqi|wlmq|70@xab|è¥¿å®å|EAY|xianbei|xab|71@xan|è¥¿å®|XAY|xian|xa|72@xan|è¥¿å®å|CAY|xiannan|xan|73@xni|è¥¿å®|XNO|xining|xn|74@ych|é¶å·|YIJ|yinchuan|yc|75@zzh|éå·|ZZF|zhengzhou|zz|76@aes|é¿å°å±±|ART|aershan|aes|77@aka|å®åº·|AKY|ankang|ak|78@aks|é¿åè|ASR|akesu|aks|79@alh|é¿éæ²³|AHX|alihe|alh|80@alk|é¿æå±±å£|AKR|alashankou|alsk|81@api|å®å¹³|APT|anping|ap|82@aqi|å®åº|AQH|anqing|aq|83@ash|å®é¡º|ASW|anshun|as|84@ash|éå±±|AST|anshan|as|85@aya|å®é³|AYF|anyang|ay|86@ban|åå®|BAB|beian|ba|87@bbu|èå |BBH|bengbu|bb|88@bch|ç½å|BCT|baicheng|bc|89@bha|åæµ·|BHZ|beihai|bh|90@bhe|ç½æ²³|BEL|baihe|bh|91@bji|ç½æ¶§|BAP|baijian|bj|92@bji|å®é¸¡|BJY|baoji|bj|93@bji|æ»¨æ±|BJB|binjiang|bj|94@bkt|ååå¾|BKX|boketu|bkt|95@bse|ç¾è²|BIZ|baise|bs|96@bss|ç½å±±å¸|HJL|baishanshi|bss|97@bta|åå°|BTT|beitai|bt|98@btd|åå¤´ä¸|BDC|baotoudong|btd|99@bto|åå¤´|BTC|baotou|bt|100@bts|åå±¯å¸|BXR|beitunshi|bts|101@bxi|æ¬æºª|BXT|benxi|bx|102@byb|ç½äºéå|BEC|baiyunebo|byeb|103@byx|ç½é¶è¥¿|BXJ|baiyinxi|byx|104@bzh|äº³å·|BZH|bozhou|bz|105@cbi|èµ¤å£|CBN|chibi|cb|106@cde|å¸¸å¾·|VGQ|changde|cd|107@cde|æ¿å¾·|CDP|chengde|cd|108@cdi|é¿ç¸|CDT|changdian|cd|109@cfe|èµ¤å³°|CFD|chifeng|cf|110@cli|è¶éµ|CDG|chaling|cl|111@cna|èå|CEH|cangnan|cn|112@cpi|æå¹³|CPP|changping|cp|113@cre|å´ä»|CRG|chongren|cr|114@ctu|æå¾|CTT|changtu|ct|115@ctz|é¿æ±é|CDB|changtingzhen|ctz|116@cxi|æ¹å¿|CXK|caoxian|cx|117@cxn|æ¥éå|COM|chuxiongnan|cxn|118@cxt|éç¸å±¯|CXT|chenxiangtun|cxt|119@czb|é¿æ²»å|CBF|changzhibei|czb|120@czh|æ± å·|IYH|chizhou|cz|121@czh|é¿å¾|CZJ|changzheng|cz|122@czh|å¸¸å·|CZH|changzhou|cz|123@czh|é´å·|CZQ|chenzhou|cz|124@czh|é¿æ²»|CZF|changzhi|cz|125@czh|æ²§å·|COP|cangzhou|cz|126@czu|å´å·¦|CZZ|chongzuo|cz|127@dab|å¤§å®å|RNT|daanbei|dab|128@dch|å¤§æ|DCT|dacheng|dc|129@ddo|ä¸¹ä¸|DUT|dandong|dd|130@dfh|ä¸æ¹çº¢|DFB|dongfanghong|dfh|131@dgd|ä¸èä¸|DMQ|dongguandong|dgd|132@dhs|å¤§èå±±|DHD|dahushan|dhs|133@dhu|æ¦å|DHL|dunhua|dh|134@dhu|æ¦ç|DHJ|dunhuang|dh|135@dhu|å¾·æ |DHT|dehui|dh|136@djc|ä¸äº¬å|DJB|dongjingcheng|djc|137@dji|å¤§æ¶§|DFP|dajian|dj|138@djy|é½æ±å °|DDW|dujiangyan|djy|139@dlb|å¤§è¿å|DFT|dalianbei|dlb|140@dli|å¤§ç|DKM|dali|dl|141@dli|å¤§è¿|DLT|dalian|dl|142@dna|å®å|DNG|dingnan|dn|143@dqi|å¤§åº|DZX|daqing|dq|144@dsh|ä¸è|DOC|dongsheng|ds|145@dsq|å¤§ç³æ¡¥|DQT|dashiqiao|dsq|146@dto|å¤§å|DTV|datong|dt|147@dyi|ä¸è¥|DPK|dongying|dy|148@dys|å¤§æ¨æ |DUX|dayangshu|dys|149@dyu|é½å|RYW|duyun|dy|150@dzh|éå·|DOF|dengzhou|dz|151@dzh|è¾¾å·|RXW|dazhou|dz|152@dzh|å¾·å·|DZP|dezhou|dz|153@ejn|é¢æµçº³|EJC|ejina|ejn|154@eli|äºè¿|RLC|erlian|el|155@esh|æ©æ½|ESN|enshi|es|156@fdi|ç¦é¼|FES|fuding|fd|157@fhc|å¤å°æºåº|FJQ|fenghuangjichang|fhjc|158@fld|é£éµæ¸¡|FLV|fenglingdu|fld|159@fli|æ¶ªéµ|FLW|fuling|fl|160@flj|å¯æå°åº|FRX|fulaerji|flej|161@fsb|æé¡ºå|FET|fushunbei|fsb|162@fsh|ä½å±±|FSQ|foshan|fs|163@fxn|éæ°å|FXD|fuxinnan|fxn|164@fya|éé³|FYH|fuyang|fy|165@gem|æ ¼å°æ¨|GRO|geermu|gem|166@gha|å¹¿æ±|GHW|guanghan|gh|167@gji|å¤äº¤|GJV|gujiao|gj|168@glb|æ¡æå|GBZ|guilinbei|glb|169@gli|å¤è²|GRX|gulian|gl|170@gli|æ¡æ|GLZ|guilin|gl|171@gsh|åºå§|GXN|gushi|gs|172@gsh|å¹¿æ°´|GSN|guangshui|gs|173@gta|å¹²å¡|GNJ|gantang|gt|174@gyu|å¹¿å|GYW|guangyuan|gy|175@gzb|å¹¿å·å|GBQ|guangzhoubei|gzb|176@gzh|èµ£å·|GZG|ganzhou|gz|177@gzl|å¬ä¸»å²­|GLT|gongzhuling|gzl|178@gzn|å¬ä¸»å²­å|GBT|gongzhulingnan|gzln|179@han|æ·®å®|AUH|huaian|ha|180@hbe|æ·®å|HRH|huaibei|hb|181@hbe|é¹¤å|HMB|hebei|hb|182@hbi|æ·®æ»¨|HVN|huaibin|hb|183@hbi|æ²³è¾¹|HBV|hebian|hb|184@hch|æ½¢å·|KCN|huangchuan|hc|185@hch|é©å|HCY|hancheng|hc|186@hda|é¯é¸|HDP|handan|hd|187@hdz|æ¨ªéæ²³å­|HDB|hengdaohezi|hdhz|188@hga|é¹¤å²|HGB|hegang|hg|189@hgt|çå§å±¯|HTT|huanggutun|hgt|190@hgu|çº¢æ|HEM|hongguo|hg|191@hhe|é»æ²³|HJB|heihe|hh|192@hhu|æå|HHQ|huaihua|hh|193@hko|æ±å£|HKN|hankou|hk|194@hld|è«è¦å²|HLD|huludao|hld|195@hle|æµ·æå°|HRX|hailaer|hle|196@hll|éæé­å|HWD|huolinguole|hlgl|197@hlu|æµ·ä¼¦|HLB|hailun|hl|198@hma|ä¾¯é©¬|HMV|houma|hm|199@hmi|åå¯|HMR|hami|hm|200@hna|æ·®å|HAH|huainan|hn|201@hna|æ¡¦å|HNB|huanan|hn|202@hnx|æµ·å®è¥¿|EUH|hainingxi|hnx|203@hqi|é¹¤åº|HQM|heqing|hq|204@hrb|ææå|HBP|huairoubei|hrb|205@hro|ææ|HRP|huairou|hr|206@hsd|é»ç³ä¸|OSN|huangshidong|hsd|207@hsh|åå±±|HSY|huashan|hs|208@hsh|é»å±±|HKH|huangshan|hs|209@hsh|é»ç³|HSN|huangshi|hs|210@hsh|è¡¡æ°´|HSP|hengshui|hs|211@hya|è¡¡é³|HYQ|hengyang|hy|212@hze|èæ³½|HIK|heze|hz|213@hzh|è´ºå·|HXZ|hezhou|hz|214@hzh|æ±ä¸­|HOY|hanzhong|hz|215@hzh|æ å·|HCQ|huizhou|hz|216@jan|åå®|VAG|jian|ja|217@jan|éå®|JAL|jian|ja|218@jbc|æ±è¾¹æ|JBG|jiangbiancun|jbc|219@jch|æå|JCF|jincheng|jc|220@jcj|éåæ±|JJZ|jinchengjiang|jcj|221@jdz|æ¯å¾·é|JCG|jingdezhen|jdz|222@jfe|åå³°|JFF|jiafeng|jf|223@jgq|å æ ¼è¾¾å¥|JGX|jiagedaqi|jgdq|224@jgs|äºåå±±|JGG|jinggangshan|jgs|225@jhe|èæ²³|JHL|jiaohe|jh|226@jhn|éåå|RNH|jinhuanan|jhn|227@jhu|éå|JBH|jinhua|jh|228@jji|ä¹æ±|JJG|jiujiang|jj|229@jli|åæ|JLL|jilin|jl|230@jme|èé¨|JMN|jingmen|jm|231@jms|ä½³æ¨æ¯|JMB|jiamusi|jms|232@jni|æµå®|JIK|jining|jn|233@jnn|éå®å|JAC|jiningnan|jnn|234@jqu|éæ³|JQJ|jiuquan|jq|235@jsh|æ±å±±|JUH|jiangshan|js|236@jsh|åé¦|JIQ|jishou|js|237@jta|ä¹å°|JTL|jiutai|jt|238@jts|ééå±±|JVJ|jingtieshan|jts|239@jxi|é¸¡è¥¿|JXB|jixi|jx|240@jxx|ç»©æºªå¿|JRH|jixixian|jxx|241@jyg|åå³ªå³|JGJ|jiayuguan|jyg|242@jyo|æ±æ²¹|JFW|jiangyou|jy|243@jzb|èå·å|JKP|jizhoubei|jzb|244@jzh|éå·|JZT|jinzhou|jz|245@jzh|é¦å·|JZD|jinzhou|jz|246@kel|åºå°å|KLR|kuerle|kel|247@kfe|å¼å°|KFF|kaifeng|kf|248@kla|å²¢å²|KLV|kelan|kl|249@kli|å¯é|KLW|kaili|kl|250@ksh|åä»|KSR|kashi|ks|251@ksn|æå±±å|KNH|kunshannan|ksn|252@ktu|å¥å±¯|KTR|kuitun|kt|253@kyu|å¼å|KYT|kaiyuan|ky|254@lan|å­å®|UAH|luan|la|255@lba|çµå®|LBF|lingbao|lb|256@lcg|è¦æ½®æ¸¯|UCH|luchaogang|lcg|257@lch|éæ|LCW|longchang|lc|258@lch|éå·|LKZ|luchuan|lc|259@lch|å©å·|LCN|lichuan|lc|260@lch|ä¸´å·|LCG|linchuan|lc|261@lch|æ½å|UTP|lucheng|lc|262@lda|é¹¿é|LDL|ludao|ld|263@ldi|å¨åº|LDQ|loudi|ld|264@lfe|ä¸´æ±¾|LFV|linfen|lf|265@lgz|è¯ååº|LGP|lianggezhuang|lgz|266@lhe|ä¸´æ²³|LHC|linhe|lh|267@lhe|æ¼¯æ²³|LON|luohe|lh|268@lhu|ç»¿å|LWJ|lvhua|lh|269@lhu|éå|UHP|longhua|lh|270@lji|ä¸½æ±|LHM|lijiang|lj|271@lji|ä¸´æ±|LQL|linjiang|lj|272@lji|é¾äº|LJL|longjing|lj|273@lli|åæ¢|LHV|lvliang|ll|274@lli|é´éµ|LLG|liling|ll|275@lln|æ³æå|LKV|liulinnan|lln|276@lpi|æ»¦å¹³|UPP|luanping|lp|277@lps|å­çæ°´|UMW|liupanshui|lps|278@lqi|çµä¸|LVV|lingqiu|lq|279@lsh|æé¡º|LST|lvshun|ls|280@lxi|å°æºª|LWH|lanxi|lx|281@lxi|éè¥¿|LXJ|longxi|lx|282@lxi|æ¾§å¿|LEQ|lixian|lx|283@lxi|ä¸´è¥¿|UEP|linxi|lx|284@lya|é¾å²©|LYS|longyan|ly|285@lya|èé³|LYQ|leiyang|ly|286@lya|æ´é³|LYF|luoyang|ly|287@lyd|è¿äºæ¸¯ä¸|UKH|lianyungangdong|lygd|288@lyd|æ´é³ä¸|LDF|luoyangdong|lyd|289@lyi|ä¸´æ²|LVK|linyi|ly|290@lym|æ´é³é¾é¨|LLF|luoyanglongmen|lylm|291@lyu|æ³å­|DHR|liuyuan|ly|292@lyu|åæº|LYD|lingyuan|ly|293@lyu|è¾½æº|LYL|liaoyuan|ly|294@lzh|ç«å¿|LZX|lizhi|lz|295@lzh|æ³å·|LZZ|liuzhou|lz|296@lzh|è¾½ä¸­|LZD|liaozhong|lz|297@mch|éº»å|MCN|macheng|mc|298@mdh|åæ¸¡æ²³|MDX|mianduhe|mdh|299@mdj|ç¡ä¸¹æ±|MDB|mudanjiang|mdj|300@meg|è«å°éå|MRX|moerdaoga|medg|301@mgu|æå|MGH|mingguang|mg|302@mgu|æ»¡å½|MHX|mangui|mg|303@mhe|æ¼ æ²³|MVX|mohe|mh|304@mmi|èå|MDQ|maoming|mm|305@mmx|èåè¥¿|MMZ|maomingxi|mmx|306@msh|å¯å±±|MSB|mishan|ms|307@msj|é©¬ä¸å®¶|MJT|masanjia|msj|308@mwe|éº»å°¾|VAW|mawei|mw|309@mya|ç»µé³|MYW|mianyang|my|310@mzh|æ¢å·|MOQ|meizhou|mz|311@mzl|æ»¡æ´²é|MLX|manzhouli|mzl|312@nbd|å®æ³¢ä¸|NVH|ningbodong|nbd|313@nbo|å®æ³¢|NGH|ningbo|nb|314@nch|åå²|NCB|nancha|nc|315@nch|åå|NCW|nanchong|nc|316@nda|åä¸¹|NDZ|nandan|nd|317@ndm|åå¤§åº|NMP|nandamiao|ndm|318@nfe|åè¬|NFT|nanfen|nf|319@nhe|è®·æ²³|NHX|nehe|nh|320@nji|å«©æ±|NGX|nenjiang|nj|321@nji|åæ±|NJW|neijiang|nj|322@npi|åå¹³|NPS|nanping|np|323@nto|åé|NUH|nantong|nt|324@nya|åé³|NFF|nanyang|ny|325@nzs|ç¢¾å­å±±|NZX|nianzishan|nzs|326@pds|å¹³é¡¶å±±|PEN|pingdingshan|pds|327@pji|çé¦|PVD|panjin|pj|328@pli|å¹³å|PIJ|pingliang|pl|329@pln|å¹³åå|POJ|pingliangnan|pln|330@pqu|å¹³æ³|PQP|pingquan|pq|331@psh|åªç³|PSQ|pingshi|ps|332@pxi|èä¹¡|PXG|pingxiang|px|333@pxi|å­ç¥¥|PXZ|pingxiang|px|334@pxx|é«å¿è¥¿|PCW|pixianxi|pxx|335@pzh|ææè±|PRW|panzhihua|pzh|336@qch|è²æ¥|QRN|qichun|qc|337@qcs|éåå±±|QSW|qingchengshan|qcs|338@qda|éå²|QDK|qingdao|qd|339@qhc|æ¸æ²³å|QYP|qinghecheng|qhc|340@qji|æ²é|QJM|qujing|qj|341@qji|é»æ±|QNW|qianjiang|qj|342@qjz|åè¿é|QEB|qianjinzhen|qjz|343@qqe|é½é½åå°|QHX|qiqihaer|qqhe|344@qth|ä¸å°æ²³|QTB|qitaihe|qth|345@qxi|æ²å¿|QVV|qinxian|qx|346@qzd|æ³å·ä¸|QRS|quanzhoudong|qzd|347@qzh|æ³å·|QYS|quanzhou|qz|348@qzh|è¡¢å·|QEH|quzhou|qz|349@ran|èå®|RAZ|rongan|ra|350@rjg|æ±ç®æ²|RQJ|rujigou|rjg|351@rji|çé|RJG|ruijin|rj|352@rzh|æ¥ç§|RZK|rizhao|rz|353@scp|ååå ¡|SCB|shuangchengpu|scp|354@sfh|ç»¥è¬æ²³|SFB|suifenhe|sfh|355@sgd|é¶å³ä¸|SGQ|shaoguandong|sgd|356@shg|å±±æµ·å³|SHD|shanhaiguan|shg|357@shu|ç»¥å|SHB|suihua|sh|358@sjf|ä¸é´æ¿|SFX|sanjianfang|sjf|359@sjt|èå®¶å±¯|SXT|sujiatun|sjt|360@sla|èå°|SLL|shulan|sl|361@smn|ç¥æ¨å|OMY|shenmunan|smn|362@smx|ä¸é¨å³¡|SMF|sanmenxia|smx|363@sna|åå|ONY|shangnan|sn|364@sni|éå®|NIW|suining|sn|365@spi|åå¹³|SPT|siping|sp|366@sqi|åä¸|SQF|shangqiu|sq|367@sra|ä¸é¥¶|SRG|shangrao|sr|368@ssh|é¶å±±|SSQ|shaoshan|ss|369@sso|å®¿æ¾|OAH|susong|ss|370@sto|æ±å¤´|OTQ|shantou|st|371@swu|éµæ­¦|SWS|shaowu|sw|372@sxi|æ¶å¿|OEP|shexian|sx|373@sya|ä¸äº|SEQ|sanya|sy|374@sya|ä¸  äº|JUQ|sanya|sya|375@sya|éµé³|SYQ|shaoyang|sy|376@sya|åå °|SNN|shiyan|sy|377@syq|ä¸ååº|SMS|sanyuanqu|syq|378@sys|åé¸­å±±|SSB|shuangyashan|sys|379@syu|æ¾å|VYT|songyuan|sy|380@szh|èå·|SZH|suzhou|sz|381@szh|æ·±å³|SZQ|shenzhen|sz|382@szh|å®¿å·|OXH|suzhou|sz|383@szh|éå·|SZN|suizhou|sz|384@szh|æå·|SUV|shuozhou|sz|385@szx|æ·±å³è¥¿|OSQ|shenzhenxi|szx|386@tba|å¡è±¹|TBQ|tangbao|tb|387@teq|å¡å°æ°|TVX|taerqi|teq|388@tgu|æ½¼å³|TGY|tongguan|tg|389@tgu|å¡æ²½|TGP|tanggu|tg|390@the|å¡æ²³|TXX|tahe|th|391@thu|éå|THL|tonghua|th|392@tla|æ³°æ¥|TLX|tailai|tl|393@tlf|åé²çª|TFR|tulufan|tlf|394@tli|éè¾½|TLD|tongliao|tl|395@tli|éå²­|TLT|tieling|tl|396@tlz|é¶èµæ­|TPT|taolaizhao|tlz|397@tme|å¾ä»¬|TML|tumen|tm|398@tre|éä»|RDQ|tongren|tr|399@tsb|åå±±å|FUP|tangshanbei|tsb|400@tsf|ç°å¸åº|TFT|tianshifu|tsf|401@tsh|æ³°å±±|TAK|taishan|ts|402@tsh|åå±±|TSP|tangshan|ts|403@tsh|å¤©æ°´|TSJ|tianshui|ts|404@typ|éè¿å ¡|TYT|tongyuanpu|typ|405@tys|å¤ªé³å|TQT|taiyangsheng|tys|406@tzh|æ³°å·|UTH|taizhou|tz|407@tzi|æ¡æ¢|TZW|tongzi|tz|408@tzx|éå·è¥¿|TAP|tongzhouxi|tzx|409@wch|äºå¸¸|WCB|wuchang|wc|410@wch|æ­¦æ|WCN|wuchang|wc|411@wfd|ç¦æ¿åº|WDT|wafangdian|wfd|412@wha|å¨æµ·|WKK|weihai|wh|413@whu|èæ¹|WHH|wuhu|wh|414@whx|ä¹æµ·è¥¿|WXC|wuhaixi|whx|415@wjt|å´å®¶å±¯|WJT|wujiatun|wjt|416@wln|ä¹é²æ¨é½å|WMR|wulumuqinan|wlmqn|417@wlo|æ­¦é|WLW|wulong|wl|418@wlt|ä¹å°æµ©ç¹|WWT|wulanhaote|wlht|419@wna|æ¸­å|WNY|weinan|wn|420@wsh|å¨è|WSM|weishe|ws|421@wts|æ­ªå¤´å±±|WIT|waitoushan|wts|422@wwe|æ­¦å¨|WUJ|wuwei|ww|423@wwn|æ­¦å¨å|WWJ|wuweinan|wwn|424@wxi|æ é¡|WXH|wuxi|wx|425@wxi|ä¹è¥¿|WXR|wuxi|wx|426@wyl|ä¹ä¼å²­|WPB|wuyiling|wyl|427@wys|æ­¦å¤·å±±|WAS|wuyishan|wys|428@wyu|ä¸æº|WYY|wanyuan|wy|429@wzh|ä¸å·|WYW|wanzhou|wz|430@wzh|æ¢§å·|WZZ|wuzhou|wz|431@wzh|æ¸©å·|RZH|wenzhou|wz|432@wzn|æ¸©å·å|VRH|wenzhounan|wzn|433@xch|è¥¿æ|ECW|xichang|xc|434@xch|è®¸æ|XCF|xuchang|xc|435@xcn|è¥¿æå|ENW|xichangnan|xcn|436@xlt|é¡ææµ©ç¹|XTC|xilinhaote|xlht|437@xmb|å¦é¨å|XKS|xiamenbei|xmb|438@xme|å¦é¨|XMS|xiamen|xm|439@xmq|å¦é¨é«å´|XBS|xiamengaoqi|xmgq|440@xwe|å®£å¨|XWM|xuanwei|xw|441@xxi|æ°ä¹¡|XXF|xinxiang|xx|442@xya|ä¿¡é³|XUN|xinyang|xy|443@xya|å¸é³|XYY|xianyang|xy|444@xya|è¥é³|XFN|xiangyang|xy|445@xyc|çå²³å|XYT|xiongyuecheng|xyc|446@xyu|æ°ä½|XUG|xinyu|xy|447@xzh|å¾å·|XCH|xuzhou|xz|448@yan|å»¶å®|YWY|yanan|ya|449@ybi|å®å®¾|YBW|yibin|yb|450@ybn|äºå¸åå|YWB|yabulinan|ybln|451@ybs|å¶æå¯¿|YBD|yebaishou|ybs|452@ycd|å®æä¸|HAN|yichangdong|ycd|453@ych|æ°¸å·|YCW|yongchuan|yc|454@ych|çå|AFH|yancheng|yc|455@ych|å®æ|YCN|yichang|yc|456@ych|è¿å|YNV|yuncheng|yc|457@ych|ä¼æ¥|YCB|yichun|yc|458@yci|æ¦æ¬¡|YCV|yuci|yc|459@ycu|æ¨æ|YBP|yangcun|yc|460@ycx|å®æ¥è¥¿|YCG|yichunxi|ycx|461@yes|ä¼å°æ½|YET|yiershi|yes|462@yga|çå²|YGW|yangang|yg|463@yji|æ°¸æµ|YIV|yongji|yj|464@yji|å»¶å|YJL|yanji|yj|465@yko|è¥å£|YKT|yingkou|yk|466@yks|çåç³|YKX|yakeshi|yks|467@yli|çæ|YLZ|yulin|yl|468@yli|éè¯|YNY|yanliang|yl|469@yli|æ¦æ|ALY|yulin|yl|470@ylw|äºé¾æ¹¾|TWQ|yalongwan|ylw|471@ymp|ä¸é¢å¡|YPB|yimianpo|ymp|472@yni|ä¼å®|YMR|yining|yn|473@ypg|é³å¹³å³|YAY|yangpingguan|ypg|474@ypi|çå±|YZW|yuping|yp|475@ypi|åå¹³|YPV|yuanping|yp|476@yqi|å»¶åº|YNP|yanqing|yq|477@yqq|é³æ³æ²|YYV|yangquanqu|yqq|478@yqu|çæ³|YQB|yuquan|yq|479@yqu|é³æ³|AQP|yangquan|yq|480@ysh|è¥å±±|NUW|yingshan|ys|481@ysh|çå±±|YNG|yushan|ys|482@ysh|çå±±|AOP|yanshan|ys|483@ysh|æ¦æ |YRT|yushu|ys|484@yta|é¹°æ½­|YTG|yingtan|yt|485@yta|çå°|YAK|yantai|yt|486@yth|ä¼å¾éæ²³|YEX|yitulihe|ytlh|487@ytx|çç°å¿|ATP|yutianxian|ytx|488@ywu|ä¹ä¹|YWH|yiwu|yw|489@yxi|é³æ°|YON|yangxin|yx|490@yxi|ä¹å¿|YXD|yixian|yx|491@yya|çé³|AEQ|yiyang|yy|492@yya|å²³é³|YYQ|yueyang|yy|493@yzh|å´å·|YUQ|yazhou|yz|494@yzh|æ°¸å·|AOQ|yongzhou|yz|495@yzh|æ¬å·|YLH|yangzhou|yz|496@zbo|æ·å|ZBK|zibo|zb|497@zcd|éååº|ZDV|zhenchengdi|zcd|498@zgo|èªè´¡|ZGW|zigong|zg|499@zha|ç æµ·|ZHQ|zhuhai|zh|500@zhb|ç æµ·å|ZIQ|zhuhaibei|zhb|501@zji|æ¹æ±|ZJZ|zhanjiang|zj|502@zji|éæ±|ZJH|zhenjiang|zj|503@zjj|å¼ å®¶ç|DIQ|zhangjiajie|zjj|504@zjk|å¼ å®¶å£|ZKP|zhangjiakou|zjk|505@zjn|å¼ å®¶å£å|ZMP|zhangjiakounan|zjkn|506@zko|å¨å£|ZKN|zhoukou|zk|507@zlm|å²éæ¨|ZLC|zhelimu|zlm|508@zlt|æå°å±¯|ZTX|zhalantun|zlt|509@zmd|é©»é©¬åº|ZDN|zhumadian|zmd|510@zqi|èåº|ZVQ|zhaoqing|zq|511@zsz|å¨æ°´å­|ZIT|zhoushuizi|zsz|512@zto|æ­é|ZDW|zhaotong|zt|513@zwe|ä¸­å«|ZWJ|zhongwei|zw|514@zya|èµé³|ZYW|ziyang|zy|515@zyx|éµä¹è¥¿|ZIW|zunyixi|zyx|516@zzh|æ£åº|ZEK|zaozhuang|zz|517@zzh|èµä¸­|ZZW|zizhong|zz|518@zzh|æ ªæ´²|ZZQ|zhuzhou|zz|519@zzx|æ£åºè¥¿|ZFK|zaozhuangxi|zzx|520@aax|æææºª|AAX|angangxi|aax|521@ach|é¿å|ACB|acheng|ac|522@ada|å®è¾¾|ADX|anda|ad|523@ade|å®å¾·|ARW|ande|ad|524@adi|å®å®|ADP|anding|ad|525@adu|å®å¤|ADO|anduo|ad|526@agu|å®å¹¿|AGT|anguang|ag|527@aha|ææ±|YED|aohan|ah|528@ahe|è¾æ²³|AHP|aihe|ah|529@ahu|å®å|PKQ|anhua|ah|530@ajc|è¾å®¶æ|AJJ|aijiacun|ajc|531@aji|é³æ±|ARH|aojiang|aj|532@aji|å®å®¶|AJB|anjia|aj|533@aji|é¿é|AJD|ajin|aj|534@aji|å®é|PYW|anjing|aj|535@akt|é¿åé¶|AER|aketao|akt|536@aky|å®å£çª|AYY|ankouyao|aky|537@alg|æåå¸å|ALD|aolibugao|albg|538@alo|å®é¾|AUZ|anlong|al|539@als|é¿é¾å±±|ASX|alongshan|als|540@alu|å®é|ALN|anlu|al|541@ame|é¿æ¨å°|JTX|amuer|ame|542@anz|é¿ååº|AZM|ananzhuang|anz|543@aqx|å®åºè¥¿|APH|anqingxi|aqx|544@asx|éå±±è¥¿|AXT|anshanxi|asx|545@ata|å®å¡|ATV|antang|at|546@atb|å®äº­å|ASH|antingbei|atb|547@ats|é¿å¾ä»|ATR|atushi|ats|548@atu|å®å¾|ATL|antu|at|549@axi|å®æºª|AXS|anxi|ax|550@bao|åé³|BWQ|boao|ba|551@bbe|åç¢|BPW|beibei|bb|552@bbg|ç½å£å³|BGV|baibiguan|bbg|553@bbn|èå å|BMH|bengbunan|bbn|554@bch|å·´æ¥|BCR|bachu|bc|555@bch|æ¿å|BUP|bancheng|bc|556@bdh|åæ´æ²³|BEP|beidaihe|bdh|557@bdi|ä¿å®|BDP|baoding|bd|558@bdi|å®å»|BPP|baodi|bd|559@bdl|å«è¾¾å²­|ILP|badaling|bdl|560@bdo|å·´ä¸|BNN|badong|bd|561@bgu|ææ|BGM|baiguo|bg|562@bha|å¸æµ·|BUT|buhai|bh|563@bhd|ç½æ²³ä¸|BIY|baihedong|bhd|564@bho|è´²çº¢|BVC|benhong|bh|565@bhs|å®åå±±|BWH|baohuashan|bhs|566@bhx|ç½æ²³å¿|BEY|baihexian|bhx|567@bjg|ç½è¨æ²|BJJ|baijigou|bjg|568@bjg|ç¢§é¸¡å³|BJM|bijiguan|bjg|569@bji|åæ»|IBQ|beijiao|bj|570@bji|ç¢§æ±|BLQ|bijiang|bj|571@bjp|ç½é¸¡å¡|BBM|baijipo|bjp|572@bjs|ç¬æ¶å±±|BSB|bijiashan|bjs|573@bjt|å«è§å°|BTD|bajiaotai|bjt|574@bka|ä¿åº·|BKD|baokang|bk|575@bkp|ç½å¥å ¡|BKB|baikuipu|bkp|576@bla|ç½ç¼|BAT|bailang|bl|577@bla|ç¾æµª|BRZ|bailang|bl|578@ble|åä¹|BOR|bole|bl|579@blg|å®ææ ¼|BQC|baolage|blg|580@bli|å·´æ|BLX|balin|bl|581@bli|å®æ|BNB|baolin|bl|582@bli|åæµ|BOZ|beiliu|bl|583@bli|åå©|BLB|boli|bl|584@blk|å¸åå¼|BLR|buliekai|blk|585@bls|å®é¾å±±|BND|baolongshan|bls|586@blx|ç¾éå³¡|AAP|bailixia|blx|587@bmc|å«é¢å|BMD|bamiancheng|bmc|588@bmq|ç­ç«ç®|BNM|banmaoqing|bmq|589@bmt|å«é¢é|BMB|bamiantong|bmt|590@bmz|åé©¬åå­|BRP|beimaquanzi|bmqz|591@bpn|åç¥¨å|RPD|beipiaonan|bpn|592@bqi|ç½æ|BQP|baiqi|bq|593@bql|å®æ³å²­|BQB|baoquanling|bql|594@bqu|ç½æ³|BQL|baiquan|bq|595@bsh|å·´å±±|BAY|bashan|bs|596@bsj|ç½æ°´æ±|BSY|baishuijiang|bsj|597@bsp|ç½æ²å¡|BPM|baishapo|bsp|598@bss|ç½ç³å±±|BAL|baishishan|bss|599@bsz|ç½æ°´é|BUM|baishuizhen|bsz|600@btd|åå¤´ ä¸|FDC|baotoudong|btd|601@bti|åç°|BTQ|bantian|bt|602@bto|æ³å¤´|BZP|botou|bt|603@btu|åå±¯|BYP|beitun|bt|604@bxh|æ¬æºªæ¹|BHT|benxihu|bxh|605@bxi|åå´|BXK|boxing|bx|606@bxt|å«ä»ç­|VXD|baxiantong|bxt|607@byg|ç½é³å¯å¹²|BYC|baiyinchagan|bycg|608@byh|èè«æ²³|BYB|beiyinhe|byh|609@byi|åè¥|BIV|beiying|by|610@byl|å·´å½¦é«å|BAC|bayangaole|bygl|611@byl|ç½é³ä»æ|BID|baiyintala|bytl|612@byq|é²é±¼å|BYT|bayuquan|byq|613@bys|ç½é¶å¸|BNJ|baiyinshi|bys|614@bys|ç½é³è¡ç¡|BCD|baiyinhushuo|byhs|615@bzh|å·´ä¸­|IEW|bazhong|bz|616@bzh|é¸å·|RMP|bazhou|bz|617@bzh|åå®|BVP|beizhai|bz|618@cbb|èµ¤å£å|CIN|chibibei|cbb|619@cbg|æ¥å¸å|CBC|chabuga|cbg|620@cch|é¿å|CEJ|changcheng|cc|621@cch|é¿å²|CCM|changchong|cc|622@cdd|æ¿å¾·ä¸|CCP|chengdedong|cdd|623@cfx|èµ¤å³°è¥¿|CID|chifengxi|cfx|624@cga|åµ¯å²|CAX|cuogang|cg|625@cga|æ´å²|CGT|chaigang|cg|626@cge|é¿è|CEF|changge|cg|627@cgp|æ´æ²å ¡|CGV|chaigoupu|cgp|628@cgu|ååº|CGY|chenggu|cg|629@cgy|éå®è¥|CAJ|chenguanying|cgy|630@cgz|æé«å­|CZB|chenggaozi|cgz|631@cha|èæµ·|WBW|caohai|ch|632@che|æ´æ²³|CHB|chaihe|ch|633@che|åäº¨|CHZ|ceheng|ch|634@chk|èæ²³å£|CKT|caohekou|chk|635@chk|å´é»å£|CHP|cuihuangkou|chk|636@chu|å·¢æ¹|CIH|chaohu|ch|637@cjg|è¡å®¶æ²|CJT|caijiagou|cjg|638@cjh|æåææ±|CJX|chengjisihan|cjsh|639@cji|å²æ±|CAM|chajiang|cj|640@cjp|è¡å®¶å¡|CJY|caijiapo|cjp|641@cle|æä¹|CLK|changle|cl|642@clg|è¶æ¢æ²|CYP|chaolianggou|clg|643@cli|æå©|CUQ|cili|cl|644@cli|æé»|CLP|changli|cl|645@clz|é¿å²­å­|CLT|changlingzi|clz|646@cmi|æ¨æ|CMB|chenming|cm|647@cno|é¿å|CNJ|changnong|cn|648@cpb|æå¹³å|VBP|changpingbei|cpb|649@cpi|å¸¸å¹³|DAQ|changping|cp|650@cpl|é¿å¡å²­|CPM|changpoling|cpl|651@cqi|è¾°æ¸|CQB|chenqing|cq|652@csh|è¡å±±|CON|caishan|cs|653@csh|æ¥å±±|CSB|chushan|cs|654@csh|é¿å¯¿|EFW|changshou|cs|655@csh|ç£å±±|CSP|cishan|cs|656@csh|èç³|CST|cangshi|cs|657@csh|èå¸|CSL|caoshi|cs|658@csq|å¯ç´ é½|CSC|chasuqi|csq|659@cst|é¿å±±å±¯|CVT|changshantun|cst|660@cti|é¿æ±|CES|changting|ct|661@ctn|æå¤©å|CTY|chaotiannan|ctn|662@ctx|æå¾è¥¿|CPT|changtuxi|ctx|663@cwa|æ¥æ¹¾|CQQ|chunwan|cw|664@cxi|ç£å¿|CIP|cixian|cx|665@cxi|å²æºª|CNZ|cenxi|cx|666@cxi|è¾°æºª|CXQ|chenxi|cx|667@cxi|ç£è¥¿|CRP|cixi|cx|668@cxn|é¿å´å|CFH|changxingnan|cxn|669@cya|ç£çª|CYK|ciyao|cy|670@cya|æ¥é³|CAL|chunyang|cy|671@cya|åé³|CEK|chengyang|cy|672@cyc|åä¸æ|CEX|chuangyecun|cyc|673@cyc|æé³å·|CYL|chaoyangchuan|cyc|674@cyd|æé³å°|CDD|chaoyangdi|cyd|675@cyn|æé³å|CYD|chaoyangnan|cyn|676@cyu|é¿å£|CYF|changyuan|cy|677@cyz|æé³é|CZL|chaoyangzhen|cyz|678@czb|æ»å·å|CUH|chuzhoubei|czb|679@czb|å¸¸å·å|ESH|changzhoubei|czb|680@czh|æ»å·|CXH|chuzhou|cz|681@czh|æ½®å·|CKQ|chaozhou|cz|682@czh|å¸¸åº|CVK|changzhuang|cz|683@czl|æ¹å­é|CFP|caozili|czl|684@czw|è½¦è½¬æ¹¾|CWM|chezhuanwan|czw|685@czx|é´å·è¥¿|ICQ|chenzhouxi|czx|686@czx|æ²§å·è¥¿|CBP|cangzhouxi|czx|687@dan|å¾·å®|DAG|dean|da|688@dan|å¤§å®|RAT|daan|da|689@dba|å¤§å|DBJ|daba|db|690@dba|å¤§æ¿|DBC|daban|db|691@dba|å¤§å·´|DBD|daba|db|692@dba|çµç½|NWQ|dianbai|db|693@dba|å°ä¿|RBT|daobao|db|694@dbc|è¾¾åå|DCR|dabancheng|dbc|695@dbi|å®è¾¹|DYJ|dingbian|db|696@dbj|ä¸è¾¹äº|DBB|dongbianjing|dbj|697@dbs|å¾·ä¼¯æ¯|RDT|debosi|dbs|698@dcg|ææ´æ²|DGJ|dachaigou|dcg|699@dch|å¾·æ|DVW|dechang|dc|700@dda|æ»´é|DDB|didao|dd|701@ddg|å¤§ç£´æ²|DKJ|dadenggou|ddg|702@ded|åå°ç»|DRD|daoerdeng|ded|703@dee|å¾è³å¸å°|DRX|deerbuer|debe|704@det|æå°ä¼¯ç¹|TKX|duerbote|debt|705@dfa|ä¸æ¹|UFQ|dongfang|df|706@dfe|ä¸¹å¤|DGY|danfeng|df|707@dfe|ä¸ä¸°|DIL|dongfeng|df|708@dge|é½æ ¼|DMM|duge|dg|709@dgt|å¤§å®å±¯|DTT|daguantun|dgt|710@dgu|å¤§å³|RGW|daguan|dg|711@dgu|ä¸å|DGP|dongguang|dg|712@dha|ä¸æµ·|DHB|donghai|dh|713@dhc|å¤§ç°å|DHP|dahuichang|dhc|714@dhq|å¤§çº¢æ|DQD|dahongqi|dhq|715@dht|å¤§ç¦¾å¡|SOQ|shaodong|dh|716@dhx|å¾·æ è¥¿|DXT|dehuixi|dhx|717@dhx|ä¸æµ·å¿|DQH|donghaixian|dhx|718@djg|è¾¾å®¶æ²|DJT|dajiagou|djg|719@dji|ä¸æ´¥|DKB|dongjin|dj|720@dji|æå®¶|DJL|dujia|dj|721@dkt|å¤§å£å±¯|DKP|dakoutun|dkt|722@dla|ä¸æ¥|RVD|donglai|dl|723@dlh|å¾·ä»¤å|DHO|delingha|dlh|724@dlh|å¤§éå·|DLC|daluhao|dlh|725@dli|å¸¦å²­|DLB|dailing|dl|726@dli|å¤§æ|DLD|dalin|dl|727@dlq|è¾¾æç¹æ|DIC|dalateqi|dltq|728@dlt|ç¬ç«å±¯|DTX|dulitun|dlt|729@dlu|è±ç½|DLV|douluo|dl|730@dlx|è¾¾æç¹è¥¿|DNC|dalatexi|dltx|731@dlx|å¤§è¿è¥¿|GZT|dalianxi|dlx|732@dmc|ä¸ææ|DMD|dongmingcun|dmc|733@dmh|æ´åºæ²³|DEP|dongmiaohe|dmh|734@dmx|ä¸æå¿|DNF|dongmingxian|dmx|735@dni|å¤§æ|DNZ|dani|dn|736@dpf|å¤§å¹³æ¿|DPD|dapingfang|dpf|737@dps|å¤§çç³|RPP|dapanshi|dps|738@dpu|å¤§å|DPI|dapu|dp|739@dpu|å¤§å ¡|DVT|dapu|dp|740@dqd|å¤§åºä¸|LFX|daqingdong|dqd|741@dqh|å¤§å¶æå|DQX|daqilaha|dqlh|742@dqi|éæ¸|DML|daoqing|dq|743@dqs|å¯¹éå±±|DQB|duiqingshan|dqs|744@dqx|å¾·æ¸è¥¿|MOH|deqingxi|dqx|745@dqx|å¤§åºè¥¿|RHX|daqingxi|dqx|746@dsh|ä¸å|DRQ|dongsheng|ds|747@dsh|ç å±±|DKH|dangshan|ds|748@dsh|ç¬å±±|RWW|dushan|ds|749@dsh|ç»æ²æ²³|DWT|dengshahe|dsh|750@dsp|è¯»ä¹¦éº|DPM|dushupu|dsp|751@dst|å¤§ç³å¤´|DSL|dashitou|dst|752@dsx|ä¸èè¥¿|DYC|dongshengxi|dsx|753@dsz|å¤§ç³å¯¨|RZT|dashizhai|dsz|754@dta|ä¸å°|DBH|dongtai|dt|755@dta|å®é¶|DQK|dingtao|dt|756@dta|ç¯å¡|DGT|dengta|dt|757@dtb|å¤§ç°è¾¹|DBM|datianbian|dtb|758@dth|ä¸éå|DTL|dongtonghua|dth|759@dtu|ä¸¹å¾|RUH|dantu|dt|760@dtu|å¤§å±¯|DNT|datun|dt|761@dwa|ä¸æ¹¾|DRJ|dongwan|dw|762@dwk|å¤§æ­¦å£|DFJ|dawukou|dwk|763@dwp|ä½çªéº|DWJ|diwopu|dwp|764@dwt|å¤§çæ»©|DZZ|dawangtan|dwt|765@dwz|å¤§æ¹¾å­|DFM|dawanzi|dwz|766@dxg|å¤§å´æ²|DXL|daxinggou|dxg|767@dxi|å¤§å´|DXX|daxing|dx|768@dxi|å®è¥¿|DSJ|dingxi|dx|769@dxi|ç¸å¿|DXM|dianxin|dx|770@dxi|ä¸ä¹¡|DXG|dongxiang|dx|771@dxi|ä»£å¿|DKV|daixian|dx|772@dxi|å®è¥|DXV|dingxiang|dx|773@dxu|ä¸æ|RXP|dongxu|dx|774@dxz|ä¸è¾åº|DXD|dongxinzhuang|dxz|775@dya|ä¸¹é³|DYH|danyang|dy|776@dya|å¾·é³|DYW|deyang|dy|777@dya|å¤§é|DYX|dayan|dy|778@dya|å½é³|DYN|dangyang|dy|779@dyb|ä¸¹é³å|EXH|danyangbei|dyb|780@dyd|å¤§è±ä¸|IAW|dayingdong|dyd|781@dyd|ä¸æ·¤å°|DBV|dongyudi|dyd|782@dyi|å¤§è¥|DYV|daying|dy|783@dyu|å®è¿|EWH|dingyuan|dy|784@dyu|å²±å²³|RYV|daiyue|dy|785@dyu|å¤§å|DYZ|dayuan|dy|786@dyz|å¤§è¥é|DJP|dayingzhen|dyz|787@dyz|å¤§è¥å­|DZD|dayingzi|dyz|788@dzc|å¤§æåº|DTJ|dazhanchang|dzc|789@dzd|å¾·å·ä¸|DIP|dezhoudong|dzd|790@dzh|ä¸è³|DCH|dongzhi|dz|791@dzh|ä½åº|DVQ|dizhuang|dz|792@dzh|ä¸é|DNV|dongzhen|dz|793@dzh|éå·|DFZ|daozhou|dz|794@dzh|ä¸åº|DZV|dongzhuang|dz|795@dzh|åé|DWV|duizhen|dz|796@dzh|è±åº|ROP|douzhuang|dz|797@dzh|å®å·|DXP|dingzhou|dz|798@dzy|å¤§ç«¹å­|DZY|dazhuyuan|dzy|799@dzz|å¤§æå­|DAP|dazhangzi|dzz|800@dzz|è±å¼ åº|RZP|douzhangzhuang|dzz|801@ebi|å³¨è¾¹|EBW|ebian|eb|802@edm|äºéæ²é¨|RDP|erdaogoumen|edgm|803@edw|äºéæ¹¾|RDX|erdaowan|edw|804@ees|éå°å¤æ¯|EEC|eerduosi|eeds|805@elo|äºé¾|RLD|erlong|el|806@elt|äºé¾å±±å±¯|ELA|erlongshantun|elst|807@eme|å³¨ç|EMW|emei|em|808@emh|äºå¯æ²³|RML|ermihe|emh|809@epi|æ©å¹³|PXQ|enping|ep|810@eyi|äºè¥|RYJ|erying|ey|811@ezh|éå·|ECN|ezhou|ez|812@fan|ç¦å®|FAS|fuan|fa|813@fch|ä¸°å|FCG|fengcheng|fc|814@fcn|ä¸°åå|FNG|fengchengnan|fcn|815@fdo|è¥ä¸|FIH|feidong|fd|816@fer|åè³|FEM|faer|fe|817@fha|å¯æµ·|FHX|fuhai|fh|818@fha|ç¦æµ·|FHR|fuhai|fh|819@fhc|å¤å°å|FHT|fenghuangcheng|fhc|820@fhe|æ±¾æ²³|FEV|fenhe|fh|821@fhu|å¥å|FHH|fenghua|fh|822@fji|å¯é¦|FIB|fujin|fj|823@fjt|èå®¶å±¯|FTT|fanjiatun|fjt|824@flq|ç¦å©åº|FLJ|fuliqu|flq|825@flt|ç¦å©å±¯|FTB|fulitun|flt|826@flz|ä¸°ä¹é|FZB|fenglezhen|flz|827@fna|éå|FNH|funan|fn|828@fni|éå®|AKH|funing|fn|829@fni|æå®|FNP|funing|fn|830@fqi|ç¦æ¸|FQS|fuqing|fq|831@fqu|ç¦æ³|VMW|fuquan|fq|832@fsc|ä¸°æ°´æ|FSJ|fengshuicun|fsc|833@fsh|ä¸°é¡º|FUQ|fengshun|fs|834@fsh|ç¹å³|FSV|fanshi|fs|835@fsh|æé¡º|FST|fushun|fs|836@fsk|ç¦å±±å£|FKP|fushankou|fsk|837@fsu|æ¶ç»¥|FSZ|fusui|fs|838@ftu|å¯å±¯|FTX|fengtun|ft|839@fty|æµ®å¾å³ª|FYP|futuyu|fty|840@fxd|å¯å¿ä¸|FDY|fuxiandong|fxd|841@fxi|å¤å¿|FXY|fengxian|fx|842@fxi|å¯å¿|FEY|fuxian|fx|843@fxi|è´¹å¿|FXK|feixian|fx|844@fya|å¤é³|FUH|fengyang|fy|845@fya|æ±¾é³|FAV|fenyang|fy|846@fyb|æ¶ä½å|FBT|fuyubei|fyb|847@fyi|åå®|FYG|fenyi|fy|848@fyu|å¯æº|FYM|fuyuan|fy|849@fyu|æ¶ä½|FYT|fuyu|fy|850@fyu|å¯è£|FYX|fuyu|fy|851@fzb|æå·å|FBG|fuzhoubei|fzb|852@fzh|å¤å·|FZY|fengzhou|fz|853@fzh|ä¸°é|FZC|fengzhen|fz|854@fzh|èé|VZK|fanzhen|fz|855@gan|åºå®|GFP|guan|ga|856@gan|å¹¿å®|VJW|guangan|ga|857@gbd|é«ç¢åº|GBP|gaobeidian|gbd|858@gbz|æ²å¸®å­|GBD|goubangzi|gbz|859@gcd|çèåº|GDJ|gancaodian|gcd|860@gch|è°·å|GCN|gucheng|gc|861@gch|èå|GEP|gaocheng|gc|862@gcu|é«æ|GCV|gaocun|gc|863@gcz|å¤åé|GZB|guchengzhen|gcz|864@gde|å¹¿å¾·|GRH|guangde|gd|865@gdi|è´µå®|GTW|guiding|gd|866@gdn|è´µå®å|IDW|guidingnan|gdn|867@gdo|å¤ä¸|GDV|gudong|gd|868@gga|è´µæ¸¯|GGZ|guigang|gg|869@gga|å®é«|GVP|guangao|gg|870@ggm|èæ ¹åº|GGT|gegenmiao|ggm|871@ggo|å¹²æ²|GGL|gangou|gg|872@ggu|çè°·|GGJ|gangu|gg|873@ggz|é«ååº|GGP|gaogezhuang|ggz|874@ghe|çæ²³|GAX|ganhe|gh|875@ghe|æ ¹æ²³|GEX|genhe|gh|876@gjd|é­å®¶åº|GDT|guojiadian|gjd|877@gjz|å­¤å®¶å­|GKT|gujiazi|gjz|878@gla|å¤æµª|GLJ|gulang|gl|879@gla|çå°|GEJ|gaolan|gl|880@glf|é«æ¥¼æ¿|GFM|gaoloufang|glf|881@glh|å½æµæ²³|GHT|guiliuhe|glh|882@gli|å³æ|GLF|guanlin|gl|883@glu|çæ´|VOW|ganluo|gl|884@glz|é­ç£åº|GLP|guoleizhuang|glz|885@gmi|é«å¯|GMK|gaomi|gm|886@gmz|å¬åºå­|GMC|gongmiaozi|gmz|887@gnh|å·¥åæ¹|GRT|gongnonghu|gnh|888@gnn|å¹¿å®å¯ºå|GNT|guangningsinan|gnn|889@gnw|å¹¿åå«|GNM|guangnanwei|gnw|890@gpi|é«å¹³|GPF|gaoping|gp|891@gqb|çæ³å|GEY|ganquanbei|gqb|892@gqc|å±éå|GAG|gongqingcheng|gqc|893@gqk|çæå¡|GQD|ganqika|gqk|894@gqu|çæ³|GQY|ganquan|gq|895@gqz|é«æ¡¥é|GZD|gaoqiaozhen|gqz|896@gsh|çæ°´|GST|guanshui|gs|897@gsh|èµ¶æ°´|GSW|ganshui|gs|898@gsk|å­¤å±±å£|GSP|gushankou|gsk|899@gso|ææ¾|GSL|guosong|gs|900@gsz|é«å±±å­|GSD|gaoshanzi|gsz|901@gsz|åä»ç¸å­|GXD|gashidianzi|gsdz|902@gta|é«å°|GTJ|gaotai|gt|903@gta|é«æ»©|GAY|gaotan|gt|904@gti|å¤ç°|GTS|gutian|gt|905@gti|å®å|GTP|guanting|gt|906@gtx|å®åè¥¿|KEP|guantingxi|gtx|907@gxi|è´µæºª|GXG|guixi|gx|908@gya|æ¶¡é³|GYH|guoyang|gy|909@gyi|å·©ä¹|GXF|gongyi|gy|910@gyi|é«é|GIP|gaoyi|gy|911@gyn|å·©ä¹å|GYF|gongyinan|gyn|912@gyn|å¹¿åå|GAW|guangyuannan|gyn|913@gyu|åºå|GUJ|guyuan|gy|914@gyu|èå­|GYL|guyuan|gy|915@gyz|å¬è¥å­|GYD|gongyingzi|gyz|916@gze|åæ³½|GZS|guangze|gz|917@gzh|å¤é|GNQ|guzhen|gz|918@gzh|åºé|GEH|guzhen|gz|919@gzh|è¢é|GZY|guozhen|gz|920@gzh|çå·|GZJ|guazhou|gz|921@gzh|é«å·|GSQ|gaozhou|gz|922@gzh|çå·|GXT|gaizhou|gz|923@gzj|å®å­äº|GOT|guanzijing|gzj|924@gzs|å è±¸å±±|GSS|guanzhaishan|gzs|925@gzx|çå·è¥¿|GAT|gaizhouxi|gzx|926@han|æµ·å®|HIH|haian|ha|927@han|æ·®å®å|AMH|huaiannan|han|928@han|çº¢å®|HWN|hongan|ha|929@hax|çº¢å®è¥¿|VXN|honganxi|hax|930@hba|é»æ|HBL|huangbai|hb|931@hbe|æµ·å|HEB|haibei|hb|932@hbi|é¹¤å£|HAF|hebi|hb|933@hcb|ä¼æå|XEG|huichangbei|hcb|934@hch|åå|VCQ|huacheng|hc|935@hch|æ²³å|HCZ|hechun|hc|936@hch|æ±å·|HCN|hanchuan|hc|937@hch|æµ·å|HCT|haicheng|hc|938@hch|åå·|WKW|hechuan|hc|939@hct|é»å²æ»©|HCJ|heichongtan|hct|940@hcu|é»æ|HCP|huangcun|hc|941@hcx|æµ·åè¥¿|HXT|haichengxi|hcx|942@hde|åå¾·|HGC|huade|hd|943@hdo|æ´ªæ´|HDV|hongtong|hd|944@hes|éå°ææ¯|HFR|huoerguosi|hegs|945@hfe|æ¨ªå³°|HFG|hengfeng|hf|946@hfw|é©åºæ¹¾|HXJ|hanfuwan|hfw|947@hgu|æ±æ²½|HGP|hangu|hg|948@hgy|é»çå­|HYM|huangguayuan|hgy|949@hgz|çº¢åé|IGW|hongguangzhen|hgz|950@hhe|æµæ²³|HHT|hunhe|hh|951@hhg|çº¢è±æ²|VHD|honghuagou|hhg|952@hht|é»è±ç­|HUD|huanghuatong|hht|953@hjd|è´ºå®¶åº|HJJ|hejiadian|hjd|954@hji|åé|HJR|hejing|hj|955@hji|çº¢æ±|HFM|hongjiang|hj|956@hji|é»äº|HIM|heijing|hj|957@hji|è·å|HJF|huojia|hj|958@hji|æ²³æ´¥|HJV|hejin|hj|959@hji|æ¶µæ±|HJS|hanjiang|hj|960@hji|åå®¶|HJT|huajia|hj|961@hjq|æ­é¦åæ|HDC|hangjinhouqi|hjhq|962@hjx|æ²³é´è¥¿|HXP|hejianxi|hjx|963@hjz|è±å®¶åº|HJM|huajiazhuang|hjz|964@hkn|æ²³å£å|HKJ|hekounan|hkn|965@hko|æ¹å£|HKG|hukou|hk|966@hko|é»å£|KOH|huangkou|hk|967@hla|å¼å°|HUB|hulan|hl|968@hlb|è«è¦å²å|HPD|huludaobei|hldb|969@hlh|æµ©è¯æ²³|HHB|haolianghe|hlh|970@hlh|åææµ·|HIT|halahai|hlh|971@hli|é¹¤ç«|HOB|heli|hl|972@hli|æ¡¦æ|HIB|hualin|hl|973@hli|é»éµ|ULY|huangling|hl|974@hli|æµ·æ|HRB|hailin|hl|975@hli|èæ|VLB|hulin|hl|976@hli|å¯å²­|HAT|hanling|hl|977@hlo|åé¾|HLL|helong|hl|978@hlo|æµ·é¾|HIL|hailong|hl|979@hls|åæè|HAX|halasu|hls|980@hlt|å¼é²æ¯å¤ª|VTJ|hulusitai|hlst|981@hlz|ç«è¿å¯¨|HLT|huolianzhai|hlz|982@hme|é»æ¢|VEH|huangmei|hm|983@hmy|é©éº»è¥|HYP|hanmaying|hmy|984@hnh|é»æ³¥æ²³|HHL|huangnihe|hnh|985@hni|æµ·å®|HNH|haining|hn|986@hno|æ å|HMJ|huinong|hn|987@hpi|åå¹³|VAQ|heping|hp|988@hpz|è±æ£å­|HZM|huapengzi|hpz|989@hqi|è±æ¡¥|VQH|huaqiao|hq|990@hqi|å®åº|HEY|hongqing|hq|991@hre|æä»|HRV|huairen|hr|992@hro|åå®¹|HRN|huarong|hr|993@hsb|åå±±å|HDY|huashanbei|hsb|994@hsd|é»æ¾ç¸|HDL|huangsongdian|hsd|995@hsg|åä»ææ´ç|VSR|heshituoluogai|hstlg|996@hsh|çº¢å±±|VSB|hongshan|hs|997@hsh|æ±å¯¿|VSQ|hanshou|hs|998@hsh|è¡¡å±±|HSQ|hengshan|hs|999@hsh|é»æ°´|HOT|heishui|hs|1000@hsh|æ å±±|VCH|huishan|hs|1001@hsh|èä»å|HHP|hushiha|hsh|1002@hsp|çº¢å¯ºå ¡|HSJ|hongsipu|hsp|1003@hst|èç³å°|HUT|hushitai|hst|1004@hsw|æµ·ç³æ¹¾|HSO|haishiwan|hsw|1005@hsx|è¡¡å±±è¥¿|HEQ|hengshanxi|hsx|1006@hsx|çº¢ç å²|VSJ|hongshaxian|hsx|1007@hta|é»å°|HQB|heitai|ht|1008@hta|æ¡å°|VTK|huantai|ht|1009@hti|åç°|VTR|hetian|ht|1010@hto|ä¼å|VTQ|huitong|ht|1011@htz|æµ·å¨å­|HZT|haituozi|htz|1012@hwa|é»æº|HWK|heiwang|hw|1013@hwa|æµ·æ¹¾|RWH|haiwan|hw|1014@hxi|çº¢æ|VXB|hongxing|hx|1015@hxi|å¾½å¿|HYY|huixian|hx|1016@hxl|çº¢å´é|VHB|hongxinglong|hxl|1017@hxt|æ¢æ°å¤©|VTB|huanxintian|hxt|1018@hxt|çº¢å²å°|HTJ|hongxiantai|hxt|1019@hya|çº¢å½¦|VIX|hongyan|hy|1020@hya|æµ·æ|HFO|haiyan|hy|1021@hya|åé³|HAY|heyang|hy|1022@hyd|è¡¡é³ä¸|HVQ|hengyangdong|hyd|1023@hyi|åè¥|HUW|huaying|hy|1024@hyi|æ±é´|HQY|hanyin|hy|1025@hyt|é»ç¾æ»©|HGJ|huangyangtan|hyt|1026@hyu|æ±æº|WHW|hanyuan|hy|1027@hyu|æ²³æº|VIQ|heyuan|hy|1028@hyu|è±å­|HUN|huayuan|hy|1029@hyu|æ¹æº|HNO|huangyuan|hy|1030@hyz|é»ç¾é|HYJ|huangyangzhen|hyz|1031@hzh|æ¹å·|VZH|huzhou|hz|1032@hzh|åå·|HZZ|huazhou|hz|1033@hzh|é»å·|VON|huangzhou|hz|1034@hzh|éå·|HZV|huozhou|hz|1035@hzx|æ å·è¥¿|VXQ|huizhouxi|hzx|1036@jba|å·¨å®|JRT|jubao|jb|1037@jbi|éè¾¹|JIY|jingbian|jb|1038@jbt|éå®å±¯|JBD|jinbaotun|jbt|1039@jcb|æåå|JEF|jinchengbei|jcb|1040@jch|éæ|JCJ|jinchang|jc|1041@jch|éå|JCK|juancheng|jc|1042@jch|äº¤å|JNV|jiaocheng|jc|1043@jch|å»ºæ|JFD|jianchang|jc|1044@jde|å³»å¾·|JDB|junde|jd|1045@jdi|äºåº|JFP|jingdian|jd|1046@jdo|é¸¡ä¸|JOB|jidong|jd|1047@jdu|æ±é½|UDH|jiangdu|jd|1048@jgs|é¸¡å å±±|JST|jiguanshan|jgs|1049@jgt|éæ²å±¯|VGP|jingoutun|jgt|1050@jha|éæµ·|JHP|jinghai|jh|1051@jhe|éæ²³|JHX|jinhe|jh|1052@jhe|é¦æ²³|JHB|jinhe|jh|1053@jhe|ç²¾æ²³|JHR|jinghe|jh|1054@jhn|ç²¾æ²³å|JIR|jinghenan|jhn|1055@jhu|æ±å|JHZ|jianghua|jh|1056@jhu|å»ºæ¹|AJH|jianhu|jh|1057@jjg|çºªå®¶æ²|VJD|jijiagou|jjg|1058@jji|ææ±|JJS|jinjiang|jj|1059@jji|é¦ç|JEY|jinjie|jj|1060@jji|å§å®¶|JJB|jiangjia|jj|1061@jji|æ±æ´¥|JJW|jiangjin|jj|1062@jke|éå|JKT|jinkeng|jk|1063@jli|è¨å²­|JLJ|jiling|jl|1064@jmc|éé©¬æ|JMM|jinmacun|jmc|1065@jmd|æ±é¨ä¸|JWQ|jiangmendong|jmd|1066@jme|è§ç¾|JES|jiaomei|jm|1067@jna|èå|JOK|junan|jn|1068@jna|äºå|JNP|jingnan|jn|1069@jou|å»ºç¯|JVS|jianou|jo|1070@jpe|ç»æ£|JPC|jingpeng|jp|1071@jqi|æ±æ¡¥|JQX|jiangqiao|jq|1072@jsa|ä¹ä¸|SSX|jiusan|js|1073@jsb|éå±±å|EGH|jinshanbei|jsb|1074@jsh|åå|JSH|jiashan|js|1075@jsh|äº¬å±±|JCN|jingshan|js|1076@jsh|å»ºå§|JRN|jianshi|js|1077@jsh|ç¨·å±±|JVV|jishan|js|1078@jsh|åè|JSL|jishu|js|1079@jsh|å»ºè®¾|JET|jianshe|js|1080@jsh|ç²å±±|JOP|jiashan|js|1081@jsj|å»ºä¸æ±|JIB|jiansanjiang|jsj|1082@jsn|ååå|EAH|jiashannan|jsn|1083@jst|éå±±å±¯|JTB|jinshantun|jst|1084@jst|æ±æç°|JOM|jiangsuotian|jst|1085@jta|æ¯æ³°|JTJ|jingtai|jt|1086@jtn|ä¹å°å|JNL|jiutainan|jtn|1087@jwe|åæ|JWX|jiwen|jw|1088@jxi|è¿è´¤|JUG|jinxian|jx|1089@jxi|èå¿|JKK|juxian|jx|1090@jxi|åç¥¥|JUK|jiaxiang|jx|1091@jxi|ä»ä¼|JXV|jiexiu|jx|1092@jxi|åå´|JXH|jiaxing|jx|1093@jxi|äºé|JJP|jingxing|jx|1094@jxn|åå´å|EPH|jiaxingnan|jxn|1095@jxz|å¤¹å¿å­|JXT|jiaxinzi|jxz|1096@jya|å§å °|UEH|jiangyan|jy|1097@jya|ç®é³|JYW|jianyang|jy|1098@jya|æ­é³|JRQ|jieyang|jy|1099@jya|å»ºé³|JYS|jianyang|jy|1100@jye|å·¨é|JYK|juye|jy|1101@jyo|æ±æ°¸|JYZ|jiangyong|jy|1102@jyu|ç¼äº|JYH|jinyun|jy|1103@jyu|éè¿|JYJ|jingyuan|jy|1104@jyu|æ±æº|SZL|jiangyuan|jy|1105@jyu|æµæº|JYF|jiyuan|jy|1106@jyx|éè¿è¥¿|JXJ|jingyuanxi|jyx|1107@jzb|è¶å·å|JZK|jiaozhoubei|jzb|1108@jzd|ç¦ä½ä¸|WEF|jiaozuodong|jzd|1109@jzh|éå¯¨|JZH|jinzhai|jz|1110@jzh|éå·|JEQ|jingzhou|jz|1111@jzh|èå·|JBN|jingzhou|jz|1112@jzh|è¶å·|JXK|jiaozhou|jz|1113@jzh|æå·|JXP|jinzhou|jz|1114@jzh|èå·|JIP|jizhou|jz|1115@jzn|é¦å·å|JOD|jinzhounan|jzn|1116@jzu|ç¦ä½|JOF|jiaozuo|jz|1117@jzw|æ§åºçª|JVP|jiuzhuangwo|jzw|1118@jzz|éæå­|JYD|jinzhangzi|jzz|1119@kan|å¼å®|KAT|kaian|ka|1120@kch|åºè½¦|KCR|kuche|kc|1121@kch|åº·å|KCP|kangcheng|kc|1122@kde|åºé½å°|KDX|kuduer|kde|1123@kdi|å®½ç¸|KDT|kuandian|kd|1124@kdo|åä¸|KOB|kedong|kd|1125@kdz|æé½ä»å¬|KDC|kundulunzhao|kdlz|1126@kji|å¼æ±|KAW|kaijiang|kj|1127@kjj|åº·éäº|KJB|kangjinjing|kjj|1128@klq|ååå¶|KQX|kalaqi|klq|1129@klu|å¼é²|KLC|kailu|kl|1130@kly|åæçä¾|KHR|kelamayi|klmy|1131@kpn|å¼å¹³å|PVQ|kaipingnan|kpn|1132@kqi|å£å|KQL|kouqian|kq|1133@ksh|æå±±|KSH|kunshan|ks|1134@ksh|å¥å±±|KAB|kuishan|ks|1135@ksh|åå±±|KSB|keshan|ks|1136@kxl|åº·çå²­|KXZ|kangxiling|kxl|1137@kya|æé³|KAM|kunyang|ky|1138@kyh|åä¸æ²³|KHX|keyihe|kyh|1139@kyx|å¼åè¥¿|KXT|kaiyuanxi|kyx|1140@kzh|åº·åº|KZP|kangzhuang|kz|1141@lbi|æ¥å®¾|UBZ|laibin|lb|1142@lbi|èè¾¹|LLT|laobian|lb|1143@lbx|çµå®è¥¿|LPF|lingbaoxi|lbx|1144@lch|é¾å·|LUQ|longchuan|lc|1145@lch|ä¹æ|LCQ|lechang|lc|1146@lch|é»å|UCP|licheng|lc|1147@lch|èå|UCK|liaocheng|lc|1148@lcu|èæ|LCK|lancun|lc|1149@lda|ä¸¤å½|LDY|liangdang|ld|1150@ldo|æä¸|LRC|lindong|ld|1151@ldu|ä¹é½|LDO|ledu|ld|1152@ldx|æ¢åºä¸|LDP|liangdixia|ldx|1153@ldz|å­éæ²³å­|LVP|liudaohezi|ldhz|1154@lfa|é²çª|LVM|lufan|lf|1155@lfa|å»å|LJP|langfang|lf|1156@lfa|è½å¡|LOP|luofa|lf|1157@lfb|å»åå|LFP|langfangbei|lfb|1158@lfu|èåº|UFD|laofu|lf|1159@lga|å°å²|LNB|langang|lg|1160@lgd|é¾éª¨ç¸|LGM|longgudian|lgd|1161@lgo|è¦æ²|LOM|lugou|lg|1162@lgo|é¾æ²|LGJ|longgou|lg|1163@lgu|æå¤|LGB|lagu|lg|1164@lha|ä¸´æµ·|UFH|linhai|lh|1165@lha|ææµ·|LXX|linhai|lh|1166@lha|æå|LHX|laha|lh|1167@lha|åæµ·|JID|linghai|lh|1168@lhe|æ³æ²³|LNL|liuhe|lh|1169@lhe|å­å|KLH|liuhe|lh|1170@lhu|é¾å|LHP|longhua|lh|1171@lhy|æ»¦æ²³æ²¿|UNP|luanheyan|lhy|1172@lhz|å­åé|LEX|liuhezhen|lhz|1173@ljd|äº®ç²åº|LRT|liangjiadian|ljd|1174@ljd|åå®¶åº|UDT|liujiadian|ljd|1175@ljh|åå®¶æ²³|LVT|liujiahe|ljh|1176@lji|è¿æ±|LKS|lianjiang|lj|1177@lji|åºæ±|UJH|lujiang|lj|1178@lji|æå®¶|LJB|lijia|lj|1179@lji|ç½æ±|LJW|luojiang|lj|1180@lji|å»æ±|LJZ|lianjiang|lj|1181@lji|ä¸¤å®¶|UJT|liangjia|lj|1182@lji|é¾æ±|LJX|longjiang|lj|1183@lji|é¾å|UJL|longjia|lj|1184@ljk|è²æ±å£|LHB|lianjiangkou|ljk|1185@ljl|èºå®¶æ¥¼|ULK|linjialou|ljl|1186@ljp|æå®¶åª|LIJ|lijiaping|ljp|1187@lka|å°è|LKF|lankao|lk|1188@lko|æå£|LKB|linkou|lk|1189@lkp|è·¯å£éº|LKQ|lukoupu|lkp|1190@lla|èè±|LAX|laolai|ll|1191@lli|ææ|LAB|lalin|ll|1192@lli|éè¯|LRM|luliang|ll|1193@lli|é¾é|LLW|longli|ll|1194@lli|ä¸´æ¾§|LWQ|linli|ll|1195@lli|å°æ£±|LLB|lanling|ll|1196@lli|é¶éµ|UWZ|lingling|ll|1197@llo|å¢é¾|UAP|lulong|ll|1198@lmd|ååç¸|LMX|lamadian|lmd|1199@lmd|éæ¨åº|LMB|limudian|lmd|1200@lme|æ´é¨|LMJ|luomen|lm|1201@lna|é¾å|UNG|longnan|ln|1202@lpi|æ¢å¹³|UQW|liangping|lp|1203@lpi|ç½å¹³|LPM|luoping|lp|1204@lpl|è½å¡å²­|LPP|luopoling|lpl|1205@lps|å­çå±±|UPJ|liupanshan|lps|1206@lps|ä¹å¹³å¸|LPG|lepingshi|lps|1207@lqi|ä¸´æ¸|UQK|linqing|lq|1208@lqs|é¾æ³å¯º|UQJ|longquansi|lqs|1209@lsb|ä¹å±±å|UTW|leshanbei|ls|1210@lsc|ä¹åæ|LUM|leshancun|lsc|1211@lsd|å·æ°´æ±ä¸|UDQ|lengshuijiangdong|lsjd|1212@lsg|è¿å±±å³|LGT|lianshanguan|lsg|1213@lsg|æµæ°´æ²|USP|liushuigou|lsg|1214@lsh|ä¸½æ°´|USH|lishui|ls|1215@lsh|éµæ°´|LIQ|lingshui|ls|1216@lsh|ç½å±±|LRN|luoshan|ls|1217@lsh|é²å±±|LAF|lushan|ls|1218@lsh|æ¢å±±|LMK|liangshan|ls|1219@lsh|çµç³|LSV|lingshi|ls|1220@lsh|é²æ°´æ²³|LUL|lushuihe|lsh|1221@lsh|åºå±±|LSG|lushan|ls|1222@lsp|æçå ¡|LBT|linshengpu|lsp|1223@lst|æ³æ å±¯|LSD|liushutun|lst|1224@lsz|é¾å±±é|LAS|longshanzhen|lsz|1225@lsz|æ¢¨æ é|LSB|lishuzhen|lsz|1226@lsz|æç³å¯¨|LET|lishizhai|lsz|1227@lta|é»å¡|LTZ|litang|lt|1228@lta|è½®å°|LAR|luntai|lt|1229@lta|è¦å°|LTP|lutai|lt|1230@ltb|é¾å¡å|LBM|longtangba|ltb|1231@ltu|æ¿æ¹|LVZ|laituan|lt|1232@ltx|éªé©¼å··|LTJ|luotuoxiang|ltx|1233@lwa|ææº|VLJ|liwang|lw|1234@lwd|è±èä¸|LWK|laiwudong|lwd|1235@lws|ç¼å°¾å±±|LRJ|langweishan|lws|1236@lwu|çµæ­¦|LNJ|lingwu|lw|1237@lwx|è±èè¥¿|UXK|laiwuxi|lwx|1238@lxi|æä¹¡|LXB|langxiang|lx|1239@lxi|éå¿|LXY|longxian|lx|1240@lxi|ä¸´æ¹|LXQ|linxiang|lx|1241@lxi|è¦æºª|LUG|luxi|lx|1242@lxi|è±è¥¿|LXK|laixi|lx|1243@lxi|æè¥¿|LXC|linxi|lx|1244@lxi|æ»¦å¿|UXP|luanxian|lx|1245@lya|è±é³|LYK|laiyang|ly|1246@lya|ç¥é³|LYY|lueyang|ly|1247@lya|è¾½é³|LYT|liaoyang|ly|1248@lyd|åæºä¸|LDD|lingyuandong|lyd|1249@lyd|ä¸´æ²ä¸|UYK|linyidong|lyd|1250@lyg|è¿äºæ¸¯|UIH|lianyungang|lyg|1251@lyi|ä¸´é¢|LNF|linying|ly|1252@lyi|èè¥|LXL|laoying|ly|1253@lyo|é¾æ¸¸|LMH|longyou|ly|1254@lyu|ç½æº|LVS|luoyuan|ly|1255@lyu|ææº|LYX|linyuan|ly|1256@lyu|æ¶æº|LAQ|lianyuan|ly|1257@lyu|æ¶æº|LYP|laiyuan|ly|1258@lyx|èé³è¥¿|LPQ|leiyangxi|lyx|1259@lze|ä¸´æ³½|LEJ|linze|lz|1260@lzg|é¾çªæ²|LZT|longzhuagou|lzg|1261@lzh|é·å·|UAQ|leizhou|lz|1262@lzh|å­æ|LIW|liuzhi|lz|1263@lzh|é¹¿å¯¨|LIZ|luzhai|lz|1264@lzh|æ¥è|LZS|laizhou|lz|1265@lzh|é¾é|LZA|longzhen|lz|1266@lzh|æé²|LEM|lazha|lz|1267@lzq|å°å·æ°åº|LQJ|lanzhouxinqu|lzxq|1268@mas|é©¬éå±±|MAH|maanshan|mas|1269@mba|æ¯å|MBY|maoba|mb|1270@mbg|æ¯åå³|MGY|maobaguan|mbg|1271@mcb|éº»åå|MBN|machengbei|mcb|1272@mch|æ¸æ± |MCF|mianchi|mc|1273@mch|æå|MCL|mingcheng|mc|1274@mch|åºå|MAP|miaocheng|mc|1275@mcn|æ¸æ± å|MNF|mianchinan|mcn|1276@mcp|èèåª|KPM|maocaoping|mcp|1277@mdh|çæ´æ²³|MUQ|mengdonghe|mdh|1278@mds|ç£¨åç³|MOB|modaoshi|mds|1279@mdu|å¼¥æ¸¡|MDF|midu|md|1280@mes|å¸½å¿å±±|MRB|maoershan|mes|1281@mga|ææ¸¯|MGN|minggang|mg|1282@mhk|æ¢æ²³å£|MHL|meihekou|mhk|1283@mhu|é©¬ç|MHZ|mahuang|mh|1284@mjg|å­å®¶å²|MGB|mengjiagang|mjg|1285@mla|ç¾å°|MHQ|meilan|ml|1286@mld|æ±¨ç½ä¸|MQQ|miluodong|mld|1287@mlh|é©¬è²æ²³|MHB|malianhe|mlh|1288@mli|èå²­|MLZ|maoling|ml|1289@mli|åºå²­|MLL|miaoling|ml|1290@mli|èæ|MLD|maolin|ml|1291@mli|ç©æ£±|MLB|muling|ml|1292@mli|é©¬æ|MID|malin|ml|1293@mlo|é©¬é¾|MGM|malong|ml|1294@mlt|æ¨éå¾|MUD|mulitu|mlt|1295@mlu|æ±¨ç½|MLQ|miluo|ml|1296@mnh|ççº³æ¯æ¹|MNR|manasihu|mnsh|1297@mni|åå®|UGW|mianning|mn|1298@mpa|æ²æ»|MPQ|mupang|mp|1299@mqh|é©¬æ¡¥æ²³|MQB|maqiaohe|mqh|1300@mqi|é½æ¸|MQS|minqing|mq|1301@mqu|æ°æ|MQF|minquan|mq|1302@msh|ææ°´æ²³|MUT|mingshuihe|msh|1303@msh|éº»å±±|MAB|mashan|ms|1304@msh|çå±±|MSW|meishan|ms|1305@msw|æ¼«æ°´æ¹¾|MKW|manshuiwan|msw|1306@msz|èèç¥|MOM|maoshezu|msz|1307@msz|ç±³æ²å­|MST|mishazi|msz|1308@mta|é©¬è¸|PWQ|mata|mt|1309@mxi|ç¾æºª|MEB|meixi|mx|1310@mxi|åå¿|MVY|mianxian|mx|1311@mya|éº»é³|MVQ|mayang|my|1312@myb|å¯äºå|MUP|miyunbei|myb|1313@myi|ç±³æ|MMW|miyi|my|1314@myu|éº¦å­|MYS|maiyuan|my|1315@myu|å¢¨ç|MUR|moyu|my|1316@mzh|åºåº|MZJ|miaozhuang|mz|1317@mzh|ç±³è|MEY|mizhi|mz|1318@mzh|æç |MFQ|mingzhu|mz|1319@nan|å®å®|NAB|ningan|na|1320@nan|åå®|NAT|nongan|na|1321@nbs|ååå±±|NBK|nanboshan|nbs|1322@nch|åä»|NCK|nanqiu|nc|1323@ncs|ååå¸|NSP|nanchengsi|ncs|1324@ncu|å®æ|NCZ|ningcun|nc|1325@nde|å®å¾·|NES|ningde|nd|1326@ngc|åè§æ|NGP|nanguancun|ngc|1327@ngd|åå®«ä¸|NFP|nangongdong|ngd|1328@ngl|åå³å²­|NLT|nanguanling|ngl|1329@ngu|å®å½|NNH|ningguo|ng|1330@nha|å®æµ·|NHH|ninghai|nh|1331@nhb|ååå|NHS|nanhuabei|nhb|1332@nhc|åæ²³å·|NHJ|nanhechuan|nhc|1333@nhz|æ³¥æ²³å­|NHD|nihezi|nhz|1334@nji|å®å®¶|NVT|ningjia|nj|1335@nji|åé|NJS|nanjing|nj|1336@nji|çå®¶|NJB|niujia|nj|1337@nji|è½å®¶|NJD|nengjia|nj|1338@nko|åå£|NKP|nankou|nk|1339@nkq|åå£å|NKT|nankouqian|nkq|1340@nla|åæ|NNQ|nanlang|nl|1341@nli|ä¹æ|NLD|nailin|nl|1342@nlk|å°¼åå|NIR|nileke|nlk|1343@nlu|é£ç½|ULZ|naluo|nl|1344@nlx|å®éµå¿|NLF|ninglingxian|nlx|1345@nma|å¥æ¼|NMD|naiman|nm|1346@nmi|å®æ|NMZ|ningming|nm|1347@nmu|åæ¨|NMX|nanmu|nm|1348@npn|åå¹³å|NNS|nanpingnan|npn|1349@npu|é£éº|NPZ|napu|np|1350@nqi|åæ¡¥|NQD|nanqiao|nq|1351@nqu|é£æ²|NQO|naqu|nq|1352@nqu|ææ³|NQJ|nuanquan|nq|1353@nta|åå°|NTT|nantai|nt|1354@nto|åå¤´|NOQ|nantou|nt|1355@nwu|å®æ­¦|NWV|ningwu|nw|1356@nwz|åæ¹¾å­|NWP|nanwanzi|nwz|1357@nxb|åç¿å|NEH|nanxiangbei|nxb|1358@nxi|å®ä¹¡|NXQ|ningxiang|nx|1359@nxi|åä¹¡|NXF|neixiang|nx|1360@nxt|çå¿å°|NXT|niuxintai|nxt|1361@nyu|åå³ª|NUP|nanyu|ny|1362@nzg|å¨å­å³|NIP|niangziguan|nzg|1363@nzh|åå¬|NAF|nanzhao|nz|1364@nzm|åææ¨|NZT|nanzamu|nzm|1365@pan|è¬å®|PAW|pengan|pa|1366@pan|å¹³å®|PAL|pingan|pa|1367@pay|å¹³å®é©¿|PNO|pinganyi|pay|1368@paz|ç£å®é|PAJ|pananzhen|paz|1369@paz|å¹³å®é|PZT|pinganzhen|paz|1370@pcd|è²åä¸|PEY|puchengdong|pcd|1371@pch|è²å|PCY|pucheng|pc|1372@pde|è£´å¾·|PDB|peide|pd|1373@pdi|ååº|PRP|piandian|pd|1374@pdx|å¹³é¡¶å±±è¥¿|BFF|pingdingshanxi|pdsx|1375@pdx|å¡åºä¸|PXJ|podixia|pdx|1376@pet|ç¢å¿å±¯|PRT|piaoertun|pet|1377@pfa|å¹³æ¿|PFB|pingfang|pf|1378@pga|å¹³å²|PGL|pinggang|pg|1379@pgu|å¹³æ|PGZ|pingguo|pg|1380@pgu|å¹³å³|PGM|pingguan|pg|1381@pgu|çå³|PAM|panguan|pg|1382@phb|å¾å¾å|PHP|paihuaibei|phb|1383@phk|å¹³æ²³å£|PHM|pinghekou|phk|1384@phu|å¹³æ¹|PHQ|pinghu|ph|1385@pjb|çé¦å|PBD|panjinbei|pjb|1386@pjd|æ½å®¶åº|PDP|panjiadian|pjd|1387@pkn|ç®å£å|PKT|pikounan|pk|1388@pld|æ®å°åº|PLT|pulandian|pld|1389@pli|åå²­|PNT|pianling|pl|1390@psh|å¹³å±±|PSB|pingshan|ps|1391@psh|å½­å±±|PSW|pengshan|ps|1392@psh|ç®å±±|PSR|pishan|ps|1393@psh|ç£ç³|PSL|panshi|ps|1394@psh|å¹³ç¤¾|PSV|pingshe|ps|1395@psh|å½­æ°´|PHW|pengshui|ps|1396@pta|å¹³å°|PVT|pingtai|pt|1397@pti|å¹³ç°|PTM|pingtian|pt|1398@pti|èç°|PTS|putian|pt|1399@ptq|è¡èè|PTW|putaojing|ptq|1400@pwa|æ®æ¹¾|PWT|puwan|pw|1401@pwa|å¹³æº|PWV|pingwang|pw|1402@pxg|å¹³åå³|PGV|pingxingguan|pxg|1403@pxi|æ®é|POW|puxiong|px|1404@pxi|è¬æºª|KZW|pengxi|px|1405@pxi|é«å¿|PWW|pixian|px|1406@pya|å¹³æ´|PYX|pingyang|py|1407@pya|å½­é³|PYJ|pengyang|py|1408@pya|å¹³é¥|PYV|pingyao|py|1409@pyi|å¹³é|PIK|pingyi|py|1410@pyp|å¹³åå ¡|PPJ|pingyuanpu|pyp|1411@pyu|å¹³å|PYK|pingyuan|py|1412@pyu|å¹³å³ª|PYP|pingyu|py|1413@pze|å½­æ³½|PZG|pengze|pz|1414@pzh|é³å·|PJH|pizhou|pz|1415@pzh|å¹³åº|PZD|pingzhuang|pz|1416@pzi|æ³¡å­|POD|paozi|pz|1417@pzn|å¹³åºå|PND|pingzhuangnan|pzn|1418@qan|ä¹¾å®|QOT|qianan|qa|1419@qan|åºå®|QAB|qingan|qa|1420@qan|è¿å®|QQP|qianan|qa|1421@qdb|ç¥ä¸å|QRQ|qidongbei|qd|1422@qdi|ä¸ç¸|QDM|qidian|qd|1423@qfd|æ²éä¸|QAK|qufudong|qfd|1424@qfe|åºä¸°|QFT|qingfeng|qf|1425@qft|å¥å³°å¡|QVP|qifengta|qft|1426@qfu|æ²é|QFK|qufu|qf|1427@qha|ç¼æµ·|QYQ|qionghai|qh|1428@qhd|ç§¦çå²|QTP|qinhuangdao|qhd|1429@qhe|åæ²³|QUY|qianhe|qh|1430@qhe|æ¸æ²³|QIP|qinghe|qh|1431@qhm|æ¸æ²³é¨|QHD|qinghemen|qhm|1432@qhy|æ¸åå­|QHP|qinghuayuan|qhy|1433@qji|å¨æ¤|INH|quanjiao|qj|1434@qji|æ¸ æ§|QJZ|qujiu|qj|1435@qji|æ½æ±|QJN|qianjiang|qj|1436@qji|ç§¦å®¶|QJB|qinjia|qj|1437@qji|ç¶¦æ±|QJW|qijiang|qj|1438@qjp|ç¥å®¶å ¡|QBT|qijiapu|qjp|1439@qjx|æ¸æ¶§å¿|QNY|qingjianxian|qjx|1440@qjz|ç§¦å®¶åº|QZV|qinjiazhuang|qjz|1441@qlh|ä¸éæ²³|QLD|qilihe|qlh|1442@qli|ç§¦å²­|QLY|qinling|ql|1443@qli|æ¸ é»|QLZ|quli|ql|1444@qlo|éé¾|QIB|qinglong|ql|1445@qls|éé¾å±±|QGH|qinglongshan|qls|1446@qme|ç¥é¨|QIH|qimen|qm|1447@qmt|åç£¨å¤´|QMP|qianmotou|qmt|1448@qsh|éå±±|QSB|qingshan|qs|1449@qsh|ç¡®å±±|QSN|queshan|qs|1450@qsh|åå±±|QXQ|qianshan|qs|1451@qsh|æ¸æ°´|QUJ|qingshui|qs|1452@qsy|æå¢å °|QYH|qishuyan|qsy|1453@qti|éç°|QVH|qingtian|qt|1454@qto|æ¡¥å¤´|QAT|qiaotou|qt|1455@qtx|ééå³¡|QTJ|qingtongxia|qtx|1456@qwe|åå«|QWD|qianwei|qw|1457@qwt|åèå¡|QWP|qianweitang|qwt|1458@qxi|æ¸ å¿|QRW|quxian|qx|1459@qxi|ç¥å¿|QXV|qixian|qx|1460@qxi|éå¿|QXP|qingxian|qx|1461@qxi|æ¡¥è¥¿|QXJ|qiaoxi|qx|1462@qxu|æ¸å¾|QUV|qingxu|qx|1463@qxy|æä¸è¥|QXC|qixiaying|qxy|1464@qya|åé³|QOY|qianyang|qy|1465@qya|æ²é³|QYF|qinyang|qy|1466@qya|æ³é³|QYL|quanyang|qy|1467@qyb|ç¥é³å|QVQ|qiyangbei|qy|1468@qyi|ä¸è¥|QYJ|qiying|qy|1469@qys|åºé³å±±|QSJ|qingyangshan|qys|1470@qyu|æ¸è¿|QBQ|qingyuan|qy|1471@qyu|æ¸å|QYT|qingyuan|qy|1472@qzd|é¦å·ä¸|QDZ|qinzhoudong|qzd|1473@qzh|é¦å·|QRZ|qinzhou|qz|1474@qzs|éå·å¸|QZK|qingzhoushi|qzs|1475@ran|çå®|RAH|ruian|ra|1476@rch|è£æ|RCW|rongchang|rc|1477@rch|çæ|RCG|ruichang|rc|1478@rga|å¦ç|RBH|rugao|rg|1479@rgu|å®¹æ¡|RUQ|ronggui|rg|1480@rqi|ä»»ä¸|RQP|renqiu|rq|1481@rsh|ä¹³å±±|ROK|rushan|rs|1482@rsh|èæ°´|RSZ|rongshui|rs|1483@rsh|ç­æ°´|RSD|reshui|rs|1484@rxi|å®¹å¿|RXZ|rongxian|rx|1485@rya|é¥¶é³|RVP|raoyang|ry|1486@rya|æ±é³|RYF|ruyang|ry|1487@ryh|ç»é³æ²³|RHD|raoyanghe|ryh|1488@rzh|æ±å·|ROF|ruzhou|rz|1489@sba|ç³å|OBJ|shiba|sb|1490@sbc|ä¸æ¿å|SBP|shangbancheng|sbc|1491@sbi|æ½ç§|AQW|shibing|sb|1492@sbn|ä¸æ¿åå|OBP|shangbanchengnan|sbcn|1493@sby|ä¸åå­|ZWT|shiboyuan|sby|1494@scb|ååå|SBB|shuangchengbei|scb|1495@sch|èå|OCH|shucheng|sc|1496@sch|åå|SWN|shangcheng|sc|1497@sch|èè½¦|SCR|shache|sc|1498@sch|é¡ºæ|SCS|shunchang|sc|1499@sch|ç¥æ± |SMV|shenchi|sc|1500@sch|æ²å|SCP|shacheng|sc|1501@sch|ç³å|SCT|shicheng|sc|1502@scz|å±±åé|SCL|shanchengzhen|scz|1503@sda|å±±ä¸¹|SDJ|shandan|sd|1504@sde|é¡ºå¾·|ORQ|shunde|sd|1505@sde|ç»¥å¾·|ODY|suide|sd|1506@sdo|æ°´æ´|SIL|shuidong|sd|1507@sdu|åé½|SXC|shangdu|sd|1508@sdu|åæ¸¡|SEP|shidu|sd|1509@sdw|åéæ¹¾|OUD|sidaowan|sdw|1510@sdy|é¡ºå¾·å­¦é¢|OJQ|shundexueyuan|sdxy|1511@sfa|ç»å|OLH|shenfang|sf|1512@sfe|åä¸°|OFB|shuangfeng|sf|1513@sft|åæ¹å°|STB|sifangtai|sft|1514@sfu|æ°´å¯|OTW|shuifu|sf|1515@sgk|ä¸å³å£|OKJ|sanguankou|sgk|1516@sgl|æ¡æ ¹è¾¾æ¥|OGC|sanggendalai|sgdl|1517@sgu|é¶å³|SNQ|shaoguan|sg|1518@sgz|ä¸é«é|SVK|shanggaozhen|sgz|1519@sha|ä¸æ­|JBS|shanghang|sh|1520@sha|æ²æµ·|SED|shahai|sh|1521@she|èæ²³|SHY|shuhe|sh|1522@she|æ¾æ²³|SBM|songhe|sh|1523@she|æ²æ²³|SHP|shahe|sh|1524@shk|æ²æ²³å£|SKT|shahekou|shk|1525@shl|èµæ±å¡æ|SHC|saihantala|shtl|1526@shs|æ²æ²³å¸|VOP|shaheshi|shs|1527@shs|æ²åæ|SSD|shahousuo|shs|1528@sht|å±±æ²³å±¯|SHL|shanhetun|sht|1529@shx|ä¸æ²³å¿|OXP|sanhexian|shx|1530@shy|ååæ°¸|OHD|siheyong|shy|1531@shz|ä¸æ±é|OZW|sanhuizhen|shz|1532@shz|åæ²³é|SEL|shuanghezhen|shz|1533@shz|ç³æ²³å­|SZR|shihezi|shz|1534@shz|ä¸ååº|SVP|sanhezhuang|shz|1535@sjd|ä¸å®¶åº|ODP|sanjiadian|sjd|1536@sjh|æ°´å®¶æ¹|SQH|shuijiahu|sjh|1537@sjh|æ²å®¶æ²³|OJJ|shenjiahe|sjh|1538@sjh|æ¾æ±æ²³|SJL|songjianghe|sjh|1539@sji|å°å®¶|SJB|shangjia|sj|1540@sji|å­å®¶|SUB|sunjia|sj|1541@sji|æ²å®¶|OJB|shenjia|sj|1542@sji|åå|SML|shuangji|sj|1543@sji|æ¾æ±|SAH|songjiang|sj|1544@sjk|ä¸æ±å£|SKD|sanjiangkou|sjk|1545@sjl|å¸å®¶å²­|OLK|sijialing|sjl|1546@sjn|æ¾æ±å|IMH|songjiangnan|sjn|1547@sjn|ç³æ¯å±±å|SRP|shijingshannan|sjsn|1548@sjt|éµå®¶å |SJJ|shaojiatang|sjt|1549@sjx|ä¸æ±å¿|SOZ|sanjiangxian|sjx|1550@sjz|ä¸å®¶å¯¨|SMM|sanjiazhai|sjz|1551@sjz|åå®¶å­|SJD|shijiazi|sjz|1552@sjz|æ¾æ±é|OZL|songjiangzhen|sjz|1553@sjz|æ½å®¶å´|SHM|shijiazui|sjz|1554@sjz|æ·±äºå­|SWT|shenjingzi|sjz|1555@sld|ä»éåº|OMP|shilidian|sld|1556@sle|çå|SUR|shule|sl|1557@slh|çåæ²³|SHJ|shulehe|slh|1558@slh|èåè|VLD|shelihu|slh|1559@sli|ç³ç£·|SPB|shilin|sl|1560@sli|ç³æ|SLM|shilin|sl|1561@sli|åè¾½|ZJD|shuangliao|sl|1562@sli|ç»¥æ£±|SIB|suiling|sl|1563@sli|ç³å²­|SOL|shiling|sl|1564@sln|ç³æå|LNM|shilinnan|sln|1565@slo|ç³é¾|SLQ|shilong|sl|1566@slq|è¨æé½|SLC|salaqi|slq|1567@slu|ç´¢ä¼¦|SNT|suolun|sl|1568@slu|åæ´|OLY|shangluo|sl|1569@slz|æ²å²­å­|SLP|shalingzi|slz|1570@smb|ç³é¨å¿å|VFQ|shimenxianbei|smxb|1571@smn|ä¸é¨å³¡å|SCF|sanmenxianan|smxn|1572@smx|ä¸é¨å¿|OQH|sanmenxian|smx|1573@smx|ç³é¨å¿|OMQ|shimenxian|smx|1574@smx|ä¸é¨å³¡è¥¿|SXF|sanmenxiaxi|smxx|1575@sni|èå®|SYP|suning|sn|1576@son|å®|SOB|song|son|1577@spa|åç|SBZ|shuangpai|sp|1578@spb|æ²åªå|CYW|shapingba|spb|1579@spd|åå¹³ä¸|PPT|sipingdong|spd|1580@spi|éå¹³|SON|suiping|sp|1581@spt|æ²å¡å¤´|SFJ|shapotou|spt|1582@sqi|æ²æ¡¥|SQM|shaqiao|sq|1583@sqn|åä¸å|SPF|shangqiunan|sqn|1584@squ|æ°´æ³|SID|shuiquan|sq|1585@sqx|ç³æ³å¿|SXY|shiquanxian|sqx|1586@sqz|ç³æ¡¥å­|SQT|shiqiaozi|sqz|1587@src|ç³äººå|SRB|shirencheng|src|1588@sre|ç³äºº|SRL|shiren|sr|1589@ssh|å±±å¸|SQB|shanshi|ss|1590@ssh|ç¥æ |SWB|shenshu|ss|1591@ssh|é¯å|SSR|shanshan|ss|1592@ssh|ä¸æ°´|SJQ|sanshui|ss|1593@ssh|æ³æ°´|OSK|sishui|ss|1594@ssh|ç³å±±|SAD|shishan|ss|1595@ssh|æ¾æ |SFT|songshu|ss|1596@ssh|é¦å±±|SAT|shoushan|ss|1597@ssj|ä¸åå®¶|SRD|sanshijia|ssj|1598@ssp|ä¸åéå ¡|SST|sanshilipu|sslp|1599@ssz|åæ°´é|PQQ|shuangshuizhen|ssz|1600@ssz|æ¾æ é|SSL|songshuzhen|ssz|1601@sta|æ¾æ¡|MZQ|songtao|st|1602@sth|ç´¢å¾ç½|SHX|suotuhan|sth|1603@stj|ä¸å é|SDH|santangji|stj|1604@sto|ç³å¤´|OTB|shitou|st|1605@sto|ç¥å¤´|SEV|shentou|st|1606@stu|æ²æ²±|SFM|shatuo|st|1607@swa|ä¸ä¸|SWP|shangwan|sw|1608@swu|å­å´|SKB|sunwu|sw|1609@swx|æ²æ¹¾å¿|SXR|shawanxian|swx|1610@sxi|æ­å¿|OVH|shexian|sx|1611@sxi|éæºª|SXZ|suixi|sx|1612@sxi|æ²å¿|SAS|shaxian|sx|1613@sxi|ç»å´|SOH|shaoxing|sx|1614@sxi|ç³å²|SXL|shixian|sx|1615@sxp|ä¸è¥¿éº|SXM|shangxipu|sxp|1616@sxz|ç³å³¡å­|SXJ|shixiazi|sxz|1617@sya|æ²­é³|FMH|shuyang|sy|1618@sya|ç»¥é³|SYB|suiyang|sy|1619@sya|å¯¿é³|SYV|shouyang|sy|1620@sya|æ°´æ´|OYP|shuiyang|sy|1621@syc|ä¸é³å·|SYJ|sanyangchuan|syc|1622@syd|ä¸è°å¢©|SPJ|shangyaodun|syd|1623@syi|ä¸è¥|OEJ|sanying|sy|1624@syi|é¡ºä¹|SOP|shunyi|sy|1625@syj|ä¸ä¹äº|OYD|sanyijing|syj|1626@syp|ä¸æºæµ¦|SYL|sanyuanpu|syp|1627@syu|ä¸è|BDH|shangyu|sy|1628@syu|ä¸å|SAY|sanyuan|sy|1629@syu|ä¸å­|SUD|shangyuan|sy|1630@syu|æ°´æº|OYJ|shuiyuan|sy|1631@syz|æ¡å­å­|SAJ|sangyuanzi|syz|1632@szb|ç»¥ä¸­å|SND|suizhongbei|szb|1633@szb|èå·å|OHH|suzhoubei|szb|1634@szd|å®¿å·ä¸|SRH|suzhoudong|szd|1635@szd|æ·±å³ä¸|BJQ|shenzhendong|szd|1636@szh|æ·±å·|OZP|shenzhou|sz|1637@szh|å­é|OZY|sunzhen|sz|1638@szh|ç»¥ä¸­|SZD|suizhong|sz|1639@szh|å°å¿|SZB|shangzhi|sz|1640@szh|å¸åº|SNM|shizhuang|sz|1641@szi|æ¾æ»|SIN|songzi|sz|1642@szo|å¸å®|SEM|shizong|sz|1643@szq|èå·å­åº|KAH|suzhouyuanqu|szyq|1644@szq|èå·æ°åº|ITH|suzhouxinqu|szxq|1645@tan|æ³°å®|TMK|taian|ta|1646@tan|å°å®|TID|taian|ta|1647@tay|éå®é©¿|TAJ|tonganyi|tay|1648@tba|æ¡æ|TBF|tongbai|tb|1649@tbe|éå|TBB|tongbei|tb|1650@tch|æ¡å|TTH|tongcheng|tc|1651@tch|æ±¤æ± |TCX|tangchi|tc|1652@tch|é¯å|TZK|tancheng|tc|1653@tch|éå|TCL|tiechang|tc|1654@tcu|æ¡æ|TCK|taocun|tc|1655@tda|éé|TRQ|tongdao|td|1656@tdo|ç°ä¸|TDZ|tiandong|td|1657@tga|å¤©å²|TGL|tiangang|tg|1658@tgl|åè´µä¹æ|TGC|tuguiwula|tgwl|1659@tgo|éæ²|TOL|tonggou|tg|1660@tgu|å¤ªè°·|TGV|taigu|tg|1661@tha|å¡å|THX|taha|th|1662@tha|æ£ æµ·|THM|tanghai|th|1663@the|åæ²³|THF|tanghe|th|1664@the|æ³°å|THG|taihe|th|1665@thu|å¤ªæ¹|TKH|taihu|th|1666@tji|å¢ç»|TIX|tuanjie|tj|1667@tjj|è°­å®¶äº|TNJ|tanjiajing|tjj|1668@tjt|é¶å®¶å±¯|TOT|taojiatun|tjt|1669@tjw|åå®¶æ¹¾|PDQ|tangjiawan|tjw|1670@tjz|ç»ååº|TZP|tongjunzhuang|tjz|1671@tld|ååæ¯æ|TMD|tuliemaodu|tlmd|1672@tlh|å¾éæ²³|TEX|tulihe|tlh|1673@tli|ééµ|TJH|tongling|tl|1674@tli|ç°æ|TFZ|tianlin|tl|1675@tli|äº­äº®|TIZ|tingliang|tl|1676@tli|éå|TLB|tieli|tl|1677@tlx|éå²­è¥¿|PXT|tielingxi|tlx|1678@tmb|å¾ä»¬å|QSL|tumenbei|tmb|1679@tme|å¤©é¨|TMN|tianmen|tm|1680@tmn|å¤©é¨å|TNN|tianmennan|tmn|1681@tms|å¤ªå§¥å±±|TLS|taimushan|tms|1682@tmt|åç§å°å°|TRC|tumuertai|tmet|1683@tmz|åé¨å­|TCJ|tumenzi|tmz|1684@tna|æ´®å|TVT|taonan|tn|1685@tna|æ½¼å|TVW|tongnan|tn|1686@tpc|å¤ªå¹³å·|TIT|taipingchuan|tpc|1687@tpz|å¤ªå¹³é|TEB|taipingzhen|tpz|1688@tqi|å¾å¼º|TQX|tuqiang|tq|1689@tqi|å°å|TTK|taiqian|tq|1690@tql|å¤©æ¡¥å²­|TQL|tianqiaoling|tql|1691@tqz|åæ¡¥å­|TQJ|tuqiaozi|tqz|1692@tsc|æ±¤å±±å|TCT|tangshancheng|tsc|1693@tsh|æ¡å±±|TAB|taoshan|ts|1694@tsh|å°å±±|PUQ|taishan|ts|1695@tsz|å¡ç³å´|TIM|tashizui|tsz|1696@ttu|éé|TUT|tongtu|tt|1697@twh|æ±¤æºæ²³|THB|tangwanghe|twh|1698@txi|åå¿|TXJ|tongxin|tx|1699@txi|åæºª|TSW|tuxi|tx|1700@txi|æ¡ä¹¡|TCH|tongxiang|tx|1701@tya|ç°é³|TRZ|tianyang|ty|1702@tyi|å¤©ä¹|TND|tianyi|ty|1703@tyi|æ±¤é´|TYF|tangyin|ty|1704@tyl|é©¼è°å²­|TIL|tuoyaoling|tyl|1705@tys|å¤ªé³å±±|TYJ|taiyangshan|tys|1706@tyu|éæ¦|KTT|tongyu|ty|1707@tyu|æ±¤å|TYB|tangyuan|ty|1708@tyy|å¡å´é©¿|TYP|tayayi|tyy|1709@tzd|æ»å·ä¸|TEK|tengzhoudong|tzd|1710@tzh|å°å·|TZH|taizhou|tz|1711@tzh|å¤©ç¥|TZJ|tianzhu|tz|1712@tzh|æ»å·|TXK|tengzhou|tz|1713@tzh|å¤©é|TZV|tianzhen|tz|1714@tzl|æ¡å­æ|TEW|tongzilin|tzl|1715@tzs|å¤©æ±å±±|QWH|tianzhushan|tzs|1716@wan|æå®|WBP|wenan|wa|1717@wan|æ­¦å®|WAP|wuan|wa|1718@waz|çå®é|WVP|wanganzhen|waz|1719@wbu|å´å ¡|WUY|wubu|wb|1720@wca|æºè|WEW|wangcang|wc|1721@wcg|äºåæ²|WCT|wuchagou|wcg|1722@wch|ææ|WEQ|wenchang|wc|1723@wch|æ¸©æ¥|WDB|wenchun|wc|1724@wdc|äºå¤§è¿æ± |WRB|wudalianchi|wdlc|1725@wde|æç»|WBK|wendeng|wd|1726@wdg|äºéæ²|WDL|wudaogou|wdg|1727@wdh|äºéæ²³|WHP|wudaohe|wdh|1728@wdi|æå°|WNZ|wendi|wd|1729@wdo|å«ä¸|WVT|weidong|wd|1730@wds|æ­¦å½å±±|WRN|wudangshan|wds|1731@wdu|æé½|WDP|wangdu|wd|1732@weh|ä¹å°ææ±|WHX|wuerqihan|weqh|1733@wfa|æ½å|WFK|weifang|wf|1734@wft|ä¸åå±¯|WFB|wanfatun|wft|1735@wfu|çåº|WUT|wangfu|wf|1736@wfx|ç¦æ¿åºè¥¿|WXT|wafangdianxi|wfdx|1737@wga|çå²|WGB|wanggang|wg|1738@wgo|æ­¦å|WGY|wugong|wg|1739@wgo|æ¹¾æ²|WGL|wangou|wg|1740@wgt|å´å®ç°|WGM|wuguantian|wgt|1741@wha|ä¹æµ·|WVC|wuhai|wh|1742@whe|èæ²³|WHB|weihe|wh|1743@whu|å«è¾|WHF|weihui|wh|1744@wjc|å´å®¶å·|WCJ|wujiachuan|wjc|1745@wji|äºå®¶|WUB|wujia|wj|1746@wji|å¨ç®|WAM|weiqing|wj|1747@wji|åæ±²|WJP|wuji|wj|1748@wji|æ¸­æ´¥|WJL|weijin|wj|1749@wjw|çå®¶æ¹¾|WJJ|wangjiawan|wjw|1750@wke|å­è¯|WQB|woken|wk|1751@wks|äºæ£µæ |WKT|wukeshu|wks|1752@wlb|äºé¾è|WBT|wulongbei|wlb|1753@wld|ä¹å°åè¾¾|WLC|wulanhada|wlhd|1754@wle|ä¸ä¹|WEB|wanle|wl|1755@wlg|ç¦æå¹²|WVX|walagan|wlg|1756@wli|æ¸©å²­|VHH|wenling|wl|1757@wli|äºè²|WLK|wulian|wl|1758@wlq|ä¹æç¹åæ|WQC|wulateqianqi|wltqq|1759@wls|ä¹æå±±|WSC|wulashan|wls|1760@wlt|å§éå±¯|WLX|wolitun|wlt|1761@wnb|æ¸­åå|WBY|weinanbei|wnb|1762@wne|ä¹å¥´è³|WRX|wunuer|wne|1763@wni|ä¸å®|WNQ|wanning|wn|1764@wni|ä¸å¹´|WWG|wannian|wn|1765@wnn|æ¸­åå|WVY|weinannan|wnn|1766@wnz|æ¸­åé|WNJ|weinanzhen|wnz|1767@wpi|æ²ç®|WPT|wopi|wp|1768@wqi|å´æ¡¥|WUP|wuqiao|wq|1769@wqi|æ±ªæ¸|WQL|wangqing|wq|1770@wqi|æ­¦æ¸|WWP|wuqing|wq|1771@wsh|æ­¦å±±|WSJ|wushan|ws|1772@wsh|ææ°´|WEV|wenshui|ws|1773@wsz|é­ååº|WSP|weishanzhuang|wsz|1774@wto|çç³|WTP|wangtong|wt|1775@wts|äºå°å±±|WSV|wutaishan|wts|1776@wtz|çå¢åº|WZJ|wangtuanzhuang|wtz|1777@wwu|äºäº|WVR|wuwu|ww|1778@wxd|æ é¡ä¸|WGH|wuxidong|wxd|1779@wxi|å«æ|WVB|weixing|wx|1780@wxi|é»å|WXV|wenxi|wx|1781@wxi|æ­¦ä¹¡|WVV|wuxiang|wx|1782@wxq|æ é¡æ°åº|IFH|wuxixinqu|wxxq|1783@wxu|æ­¦ç©´|WXN|wuxue|wx|1784@wxu|å´å©|WYZ|wuxu|wx|1785@wya|çæ¨|WYB|wangyang|wy|1786@wyi|æ­¦ä¹|RYH|wuyi|wy|1787@wyi|äºè¥|WWB|wuying|wy|1788@wyt|ç¦çªç°|WIM|wayaotian|wyt|1789@wyu|äºå|WYC|wuyuan|wy|1790@wzg|èå­æ²|WZL|weizigou|wzg|1791@wzh|é¦åº|WZY|weizhuang|wz|1792@wzh|äºå¯¨|WZV|wuzhai|wz|1793@wzt|çåå±¯|WZB|wangzhaotun|wzt|1794@wzz|å¾®å­é|WQP|weizizhen|wzz|1795@wzz|é­æå­|WKD|weizhangzi|wzz|1796@xan|æ°å®|EAM|xinan|xa|1797@xan|å´å®|XAZ|xingan|xa|1798@xax|æ°å®å¿|XAF|xinanxian|xax|1799@xba|æ°ä¿å®|XAP|xinbaoan|xba|1800@xbc|ä¸æ¿å|EBP|xiabancheng|xbc|1801@xbl|è¥¿å«é|XLP|xibali|xbl|1802@xch|å®£å|ECH|xuancheng|xc|1803@xch|å´å|XCD|xingcheng|xc|1804@xcu|å°æ|XEM|xiaocun|xc|1805@xcy|æ°ç»°æº|XRX|xinchuoyuan|xcy|1806@xcz|ä¸åå­|XCB|xiachengzi|xcz|1807@xcz|æ°åå­|XCT|xinchengzi|xcz|1808@xde|åå¾·|EDW|xide|xd|1809@xdj|å°å¾æ±|EJM|xiaodejiang|xdj|1810@xdm|è¥¿å¤§åº|XMP|xidamiao|xdm|1811@xdo|å°è£|XEZ|xiaodong|xd|1812@xdo|å°ä¸|XOD|xiaodong|xd|1813@xfa|é¦å|XFB|xiangfang|xf|1814@xfe|ä¿¡ä¸°|EFG|xinfeng|xf|1815@xfe|è¥æ±¾|XFV|xiangfen|xf|1816@xfe|æ¯ç½|XFW|xifeng|xf|1817@xga|æ°å¹²|EGG|xingan|xg|1818@xga|è½©å²|XGV|xuangang|xg|1819@xga|å­æ|XGN|xiaogan|xg|1820@xgc|è¥¿åºå|XUJ|xigucheng|xgc|1821@xgu|å´å½|EUG|xingguo|xg|1822@xgu|è¥¿åº|XIJ|xigu|xg|1823@xgy|å¤å®è¥|XGJ|xiaguanying|xgy|1824@xgz|è¥¿å²å­|NBB|xigangzi|xgz|1825@xha|å®£æ±|XHY|xuanhan|xh|1826@xhe|è¥æ²³|XXB|xianghe|xh|1827@xhe|æ°å|XIR|xinhe|xh|1828@xhe|å®£å|XWJ|xuanhe|xh|1829@xhj|ææ²³æ¶§|EEP|xiehejian|xhj|1830@xht|æ°åå±¯|XAX|xinhuatun|xht|1831@xhu|æ°ä¼|EFQ|xinhui|xh|1832@xhu|æ°å|XHB|xinhua|xh|1833@xhu|æ°æ|XLQ|xinhuang|xh|1834@xhu|æ°å|EHQ|xinhua|xh|1835@xhu|å®£å|XHP|xuanhua|xh|1836@xhx|å´åè¥¿|XEC|xinghexi|xhx|1837@xhy|å°æ²³æ²¿|XYD|xiaoheyan|xhy|1838@xhy|ä¸è±å­|XYP|xiahuayuan|xhy|1839@xhz|å°æ²³é|EKY|xiaohezhen|xhz|1840@xjd|å¾å®¶åº|HYK|xujiadian|xjd|1841@xji|å¾å®¶|XJB|xujia|xj|1842@xji|å³¡æ±|EJG|xiajiang|xj|1843@xji|æ°ç»|XJV|xinjiang|xj|1844@xji|è¾é|ENP|xinji|xj|1845@xji|æ°æ±|XJM|xinjiang|xj|1846@xjk|è¥¿è¡å£|EKM|xijiekou|xjk|1847@xjt|è®¸å®¶å±¯|XJT|xujiatun|xjt|1848@xjt|è®¸å®¶å°|XTJ|xujiatai|xjt|1849@xjz|è°¢å®¶é|XMT|xiejiazhen|xjz|1850@xka|å´å¯|EKB|xingkai|xk|1851@xla|å°æ¦|EAQ|xiaolan|xl|1852@xla|é¦å°|XNB|xianglan|xl|1853@xld|å´éåº|XDD|xinglongdian|xld|1854@xle|æ°ä¹|ELP|xinle|xl|1855@xli|æ°æ|XPX|xinlin|xl|1856@xli|å°å²­|XLB|xiaoling|xl|1857@xli|æ°æ|XLJ|xinli|xl|1858@xli|è¥¿æ|XYB|xilin|xl|1859@xli|è¥¿æ³|GCT|xiliu|xl|1860@xli|ä»æ|XPH|xianlin|xl|1861@xlt|æ°ç«å±¯|XLD|xinlitun|xlt|1862@xlx|å´éå¿|EXP|xinglongxian|xlx|1863@xlz|å´éé|XZB|xinglongzhen|xlz|1864@xlz|æ°ç«é|XGT|xinlizhen|xlz|1865@xmi|æ°æ°|XMD|xinmin|xm|1866@xms|è¥¿éº»å±±|XMB|ximashan|xms|1867@xmt|ä¸é©¬å¡|XAT|xiamatang|xmt|1868@xna|å­å|XNV|xiaonan|xn|1869@xnb|å¸å®å|XRN|xianningbei|xnb|1870@xni|å´å®|ENQ|xingning|xn|1871@xni|å¸å®|XNN|xianning|xn|1872@xpd|çæµ¦ä¸|XAW|xipudong|xpd|1873@xpi|è¥¿å¹³|XPN|xiping|xp|1874@xpi|å´å¹³|XPY|xingping|xp|1875@xpt|æ°åªç°|XPM|xinpingtian|xpt|1876@xpu|éæµ¦|XOS|xiapu|xp|1877@xpu|æºæµ¦|EPQ|xupu|xp|1878@xpu|çæµ¦|XIW|xipu|xp|1879@xqi|æ°é|XQB|xinqing|xq|1880@xqi|æ°é±|XQD|xinqiu|xq|1881@xqp|å´æ³å ¡|XQJ|xingquanbu|xqp|1882@xrq|ä»äººæ¡¥|XRL|xianrenqiao|xrq|1883@xsg|å°å¯ºæ²|ESP|xiaosigou|xsg|1884@xsh|ææ |XSB|xingshu|xs|1885@xsh|æµ æ°´|XZN|xishui|xs|1886@xsh|ä¸ç¤¾|XSV|xiashe|xs|1887@xsh|å°å¸|XST|xiaoshi|xs|1888@xsh|å¾æ°´|XSP|xushui|xs|1889@xsh|å¤ç³|XIZ|xiashi|xs|1890@xsh|å°å¨|XAM|xiaoshao|xs|1891@xsh|ç§å±±|ETW|xiushan|xs|1892@xsp|æ°æ¾æµ¦|XOB|xinsongpu|xsp|1893@xst|ææ å±¯|XDT|xingshutun|xst|1894@xsw|è®¸ä¸æ¹¾|XSJ|xusanwan|xsw|1895@xta|æ¹æ½­|XTQ|xiangtan|xt|1896@xta|é¢å°|XTP|xingtai|xt|1897@xta|åå¡|XTG|xiangtang|xt|1898@xtx|ä»æ¡è¥¿|XAN|xiantaoxi|xtx|1899@xtz|ä¸å°å­|EIP|xiataizi|xtz|1900@xwe|å¾é»|XJQ|xuwen|xw|1901@xwp|æ°çªéº|EPD|xinwopu|xwp|1902@xwu|ä¿®æ­¦|XWF|xiuwu|xw|1903@xxi|æ°å¿|XSN|xinxian|xx|1904@xxi|æ¯å¿|ENN|xixian|xx|1905@xxi|è¥¿ä¹¡|XQY|xixiang|xx|1906@xxi|æ¹ä¹¡|XXQ|xiangxiang|xx|1907@xxi|è¥¿å³¡|XIF|xixia|xx|1908@xxi|å­è¥¿|XOV|xiaoxi|xx|1909@xxj|å°æ°è¡|XXM|xiaoxinjie|xxj|1910@xxx|æ°å´å¿|XGQ|xinxingxian|xxx|1911@xxz|è¥¿å°å¬|XZC|xixiaozhao|xxz|1912@xxz|å°è¥¿åº|XXP|xiaoxizhuang|xxz|1913@xya|åé³|XDB|xiangyang|xy|1914@xya|æ¬é³|XUY|xunyang|xy|1915@xyb|æ¬é³å|XBY|xunyangbei|xyb|1916@xyd|è¥é³ä¸|XWN|xiangyangdong|xyd|1917@xye|å´ä¸|SNZ|xingye|xy|1918@xyg|å°é¨è°·|XHM|xiaoyugu|xyg|1919@xyi|æ°æ²|VIH|xinyi|xy|1920@xyi|å´ä¹|XRZ|xingyi|xy|1921@xyi|ä¿¡å®|EEQ|xinyi|xy|1922@xyj|å°ææ§|XFM|xiaoyuejiu|xyj|1923@xyq|å°æ¬æ°|XYX|xiaoyangqi|xyq|1924@xyu|è¥å£|EIF|xiangyuan|xy|1925@xyx|å¤éå¿|EJH|xiayixian|xyx|1926@xyx|ç¥¥äºè¥¿|EXM|xiangyunxi|xyx|1927@xyy|æ°åè°|EYB|xinyouyi|xyy|1928@xyz|æ°é³é|XZJ|xinyangzhen|xyz|1929@xzd|å¾å·ä¸|UUH|xuzhoudong|xzd|1930@xzf|æ°å¸æ¿|XZX|xinzhangfang|xzf|1931@xzh|æ¬é|XRP|xuanzhong|xz|1932@xzh|æ°è|XZT|xinzhao|xz|1933@xzh|å¿»å·|XXV|xinzhou|xz|1934@xzi|æ±å­|XZD|xizi|xz|1935@xzm|è¥¿å²éæ¨|XRD|xizhelimu|xzlm|1936@xzz|æ°æå­|ERP|xinzhangzi|xzz|1937@yan|å§å®|YAC|yaoan|ya|1938@yan|ä¾å®|YAX|yian|ya|1939@yan|æ°¸å®|YAS|yongan|ya|1940@yax|æ°¸å®ä¹¡|YNB|yonganxiang|yax|1941@ybl|äºå¸å|YBB|yabuli|ybl|1942@ybs|åå®å±±|YUD|yuanbaoshan|ybs|1943@yca|ç¾è|YAB|yangcao|yc|1944@ycd|ç§§èå°|YKM|yangcaodi|ycd|1945@ych|é³æ¾æ¹|AIH|yangchenghu|ych|1946@ych|è¿æ¥|YYB|yingchun|yc|1947@ych|å¶å|YER|yecheng|yc|1948@ych|çæ± |YKJ|yanchi|yc|1949@ych|ç å·|YYY|yanchuan|yc|1950@ych|é³æ¥|YQQ|yangchun|yc|1951@ych|å®å|YIN|yicheng|yc|1952@ych|åºå|YHN|yingcheng|yc|1953@ych|ç¦¹å|YCK|yucheng|yc|1954@ych|æå|YEK|yancheng|yc|1955@ych|é³å|YNF|yangcheng|yc|1956@ych|é³å²|YAL|yangcha|yc|1957@ych|éå|YPK|yuncheng|yc|1958@ych|éç¿|YAP|yanchi|yc|1959@ycl|äºå½©å²­|ACP|yuncailing|ycl|1960@ycx|èåå¿|IXH|yuchengxian|ycx|1961@ycz|è¥åå­|YCT|yingchengzi|ycz|1962@yde|è±å¾·|YDQ|yingde|yd|1963@yde|æ°¸ç»|YDJ|yongdeng|yd|1964@ydi|å°¹å°|YDM|yindi|yd|1965@ydi|æ°¸å®|YGS|yongding|yd|1966@ydo|é³ä¸|WLQ|yangdong|yd|1967@yds|éè¡å±±|YGH|yandangshan|yds|1968@ydu|äºé½|YDG|yudu|yd|1969@ydu|å­å¢©|YAJ|yuandun|yd|1970@ydx|è±å¾·è¥¿|IIQ|yingdexi|ydx|1971@yfy|æ°¸ä¸°è¥|YYM|yongfengying|yfy|1972@yga|æ¨å²|YRB|yanggang|yg|1973@yga|é³é«|YOV|yanggao|yg|1974@ygu|é³è°·|YIK|yanggu|yg|1975@yha|åå¥½|YOB|youhao|yh|1976@yha|ä½æ­|EVH|yuhang|yh|1977@yhc|æ²¿æ²³å|YHP|yanhecheng|yhc|1978@yhu|å²©ä¼|AEP|yanhui|yh|1979@yjh|ç¾è¼æ²³|YHM|yangjiuhe|yjh|1980@yji|æ°¸å|URH|yongjia|yj|1981@yji|è¥è¡|YAM|yingjie|yj|1982@yji|çæ´¥|AEW|yanjin|yj|1983@yji|é³æ±|WRQ|yangjiang|yj|1984@yji|ä½æ±|YHG|yujiang|yj|1985@yji|çé|AJP|yanjiao|yj|1986@yji|å§å®¶|YAT|yaojia|yj|1987@yjj|å²³å®¶äº|YGJ|yuejiajing|yjj|1988@yjp|ä¸é´å ¡|YJT|yijianpu|yjp|1989@yjs|è±åæ²|YIR|yingjisha|yjs|1990@yjs|äºå±å¯º|AFP|yunjusi|yjs|1991@yjz|çå®¶åº|AZK|yanjiazhuang|yjz|1992@yka|æ°¸åº·|RFH|yongkang|yk|1993@ykd|è¥å£ä¸|YGT|yingkoudong|ykd|1994@yla|é¶æµª|YJX|yinlang|yl|1995@yla|æ°¸é|YLW|yonglang|yl|1996@ylb|å®è¯å|YSM|yiliangbei|ylb|1997@yld|æ°¸ä¹åº|YDY|yongledian|yld|1998@ylh|ä¼æå|YLX|yilaha|ylh|1999@yli|ä¼æ|YLB|yilin|yl|2000@yli|æ¨éµ|YSY|yangling|yl|2001@yli|å½è¯|ALW|yiliang|yl|2002@yli|æ¨æ|YLM|yanglin|yl|2003@ylp|ä½ç²®å ¡|YLD|yuliangpu|ylp|2004@ylq|æ¨æ³é|YQP|yangliuqing|ylq|2005@ylt|æäº®ç°|YUM|yueliangtian|ylt|2006@yma|ä¹é©¬|YMF|yima|ym|2007@ymb|é³æå ¡|YVV|yangmingbu|ymb|2008@yme|çé¨|YXJ|yumen|ym|2009@yme|äºæ¢¦|YMN|yunmeng|ym|2010@ymo|åè°|YMM|yuanmou|ym|2011@yms|ä¸é¢å±±|YST|yimianshan|yms|2012@yna|æ²å|YNK|yinan|yn|2013@yna|å®è|YVM|yinai|yn|2014@ynd|ä¼å®ä¸|YNR|yiningdong|ynd|2015@yps|è¥çæ°´|YZJ|yingpanshui|yps|2016@ypu|ç¾å ¡|ABM|yangpu|yp|2017@yqb|é³æ³å|YPP|yangquanbei|yqb|2018@yqi|ä¹æ¸|UPH|yueqing|yq|2019@yqi|çè|YSR|yanqi|yq|2020@yqi|æºè¿|AQK|yuanqian|yq|2021@yqt|å§åæ·å±¯|YQT|yaoqianhutun|yqht|2022@yqu|é³æ²|YQV|yangqu|yq|2023@ysg|æ¦æ æ²|YGP|yushugou|ysg|2024@ysh|æå±±|YBF|yueshan|ys|2025@ysh|çç³|YSJ|yushi|ys|2026@ysh|çè|AUM|yushe|ys|2027@ysh|åå¸|YSF|yanshi|ys|2028@ysh|æ²æ°´|YUK|yishui|ys|2029@ysh|æ¦ç¤¾|YSV|yushe|ys|2030@ysh|é¢ä¸|YVH|yingshang|ys|2031@ysh|çªä¸|ASP|yaoshang|ys|2032@ysh|åæ°|YSP|yuanshi|ys|2033@ysl|æ¨æ å²­|YAD|yangshuling|ysl|2034@ysp|éä¸å¡|AIP|yesanpo|ysp|2035@yst|æ¦æ å±¯|YSX|yushutun|yst|2036@yst|æ¦æ å°|YUT|yushutai|yst|2037@ysz|é¹°æè¥å­|YIP|yingshouyingzi|ysyz|2038@yta|æºæ½­|YTQ|yuantan|yt|2039@ytp|çå±¯å ¡|YTZ|yatunpu|ytp|2040@yts|çç­å±±|YSL|yantongshan|yts|2041@ytt|çç­å±¯|YUX|yantongtun|ytt|2042@yws|ç¾å°¾å¨|YWM|yangweishao|yws|2043@yxi|è¶è¥¿|YHW|yuexi|yx|2044@yxi|æ¸å¿|YOG|youxian|yx|2045@yxi|é³è¥¿|WMQ|yangxi|yx|2046@yxi|æ°¸ä¿®|ACG|yongxiu|yx|2047@yxx|çæºªè¥¿|YXM|yuxixi|yxx|2048@yya|å¼é³|YIG|yiyang|yy|2049@yya|ä½å§|YYH|yuyao|yy|2050@yya|éé³|AFW|youyang|yy|2051@yyd|å²³é³ä¸|YIQ|yueyangdong|yyd|2052@yyi|é³é|ARP|yangyi|yy|2053@yyu|é¸­å­|YYL|yayuan|yy|2054@yyz|é¸³é¸¯é|YYJ|yuanyangzhen|yyz|2055@yzb|çå­ç ­|YZY|yanzibian|yzb|2056@yzh|ä»ªå¾|UZH|yizheng|yz|2057@yzh|å®å·|YSZ|yizhou|yz|2058@yzh|åå·|YZK|yanzhou|yz|2059@yzi|è¿¤èµ|YQM|yizi|yz|2060@yzw|ç¾èçª|AEM|yangzhewo|yzw|2061@yzz|æ¨æå­|YZD|yangzhangzi|yzz|2062@zan|éå®|ZEY|zhenan|za|2063@zan|æ²»å®|ZAD|zhian|za|2064@zba|ææ|ZBP|zhaobai|zb|2065@zbw|å¼ ç¾æ¹¾|ZUP|zhangbaiwan|zbw|2066@zcc|ä¸­å·æºåº|ZJJ|zhongchuanjichang|zcjc|2067@zch|æå|ZCN|zhicheng|zc|2068@zch|å­é¿|ZHY|zichang|zc|2069@zch|è¯¸å|ZQK|zhucheng|zc|2070@zch|é¹å|ZIK|zoucheng|zc|2071@zch|èµµå|ZCV|zhaocheng|zc|2072@zda|ç« å|ZHT|zhangdang|zd|2073@zdi|æ­£å®|ZDP|zhengding|zd|2074@zdo|èä¸|ZDB|zhaodong|zd|2075@zfp|ç§ç¦éº|ZFM|zhaofupu|zfp|2076@zgt|ç« å¤å°|ZGD|zhanggutai|zgt|2077@zgu|èµµå|ZGB|zhaoguang|zg|2078@zhe|ä¸­å|ZHX|zhonghe|zh|2079@zhm|ä¸­åé¨|VNH|zhonghuamen|zhm|2080@zjb|ææ±å|ZIN|zhijiangbei|zjb|2081@zjc|éå®¶æ|ZJY|zhongjiacun|zjc|2082@zjg|æ±å®¶æ²|ZUB|zhujiagou|zjg|2083@zjg|ç´«èå³|ZYP|zijingguan|zjg|2084@zji|å¨å®¶|ZOB|zhoujia|zj|2085@zji|è¯¸æ¨|ZDH|zhuji|zj|2086@zjn|éæ±å|ZEH|zhenjiangnan|zjn|2087@zjt|å¨å®¶å±¯|ZOD|zhoujiatun|zjt|2088@zjw|è¤å®¶æ¹¾|CWJ|zhujiawan|zjw|2089@zjx|æ¹æ±è¥¿|ZWQ|zhanjiangxi|zjx|2090@zjy|æ±å®¶çª|ZUJ|zhujiayao|zjy|2091@zjz|æ¾å®¶åªå­|ZBW|zengjiapingzi|zjpz|2092@zla|å¼ å°|ZLV|zhanglan|zl|2093@zla|éèµ|ZLT|zhenlai|zl|2094@zli|æ£æ|ZIV|zaolin|zl|2095@zlt|æé²ç¹|ZLD|zhalute|zlt|2096@zlx|æèµè¯ºå°è¥¿|ZXX|zhalainuoerxi|zlrex|2097@zmt|æ¨æ¨å¤´|ZOQ|zhangmutou|zmt|2098@zmu|ä¸­ç|ZGF|zhongmu|zm|2099@znd|ä¸­å®ä¸|ZDJ|zhongningdong|znd|2100@zni|ä¸­å®|VNJ|zhongning|zn|2101@znn|ä¸­å®å|ZNJ|zhongningnan|znn|2102@zpi|éå¹³|ZPF|zhenping|zp|2103@zpi|æ¼³å¹³|ZPS|zhangping|zp|2104@zpu|æ³½æ®|ZPR|zepu|zp|2105@zqi|æ£å¼º|ZVP|zaoqiang|zq|2106@zqi|å¼ æ¡¥|ZQY|zhangqiao|zq|2107@zqi|ç« ä¸|ZTK|zhangqiu|zq|2108@zrh|æ±æ¥å|ZRC|zhurihe|zrh|2109@zrl|æ³½æ¶¦é|ZLM|zerunli|zrl|2110@zsb|ä¸­å±±å|ZGQ|zhongshanbei|zsb|2111@zsd|æ¨æ ä¸|ZOG|zhangshudong|zsd|2112@zsh|ç æ¯è±|ZHD|zhusihua|zsh|2113@zsh|ä¸­å±±|ZSQ|zhongshan|zs|2114@zsh|ææ°´|ZSY|zhashui|zs|2115@zsh|éå±±|ZSZ|zhongshan|zs|2116@zsh|æ¨æ |ZSG|zhangshu|zs|2117@zwo|ç çª|ZOP|zhuwo|zw|2118@zwt|å¼ ç»´å±¯|ZWB|zhangweitun|zwt|2119@zwu|å½°æ­¦|ZWD|zhangwu|zw|2120@zxi|æ£æºª|ZOY|zongxi|zx|2121@zxi|éç¥¥|ZTN|zhongxiang|zx|2122@zxi|èµæºª|ZXS|zixi|zx|2123@zxi|éè¥¿|ZVT|zhenxi|zx|2124@zxi|å¼ è¾|ZIP|zhangxin|zx|2125@zxq|æ­£é¶ç½æ|ZXC|zhengxiangbaiqi|zxbq|2126@zya|ç´«é³|ZVY|ziyang|zy|2127@zya|æ£é³|ZYN|zaoyang|zy|2128@zyb|ç«¹å­å|ZAW|zhuyuanba|zyb|2129@zye|å¼ æ|ZYJ|zhangye|zy|2130@zyu|éè¿|ZUW|zhenyuan|zy|2131@zzd|æ¼³å·ä¸|GOS|zhangzhoudong|zzd|2132@zzh|æ¼³å·|ZUS|zhangzhou|zz|2133@zzh|å£®å¿|ZUX|zhuangzhi|zz|2134@zzh|å­æ´²|ZZY|zizhou|zz|2135@zzh|ä¸­å¯¨|ZZM|zhongzhai|zz|2136@zzh|æ¶¿å·|ZXP|zhuozhou|zz|2137@zzi|åå­|ZAL|zhazi|zz|2138@zzs|åèµå±±|ZZC|zhuozishan|zzs|2139@zzx|æ ªæ´²è¥¿|ZAQ|zhuzhouxi|zzx|2140@zzx|éå·è¥¿|XPF|zhengzhouxi|zzx|2141@abq|é¿å·´åæ|AQC|abagaqi|abgq|2142@acb|é¿åå|ABB|achengbei|acb|2143@aeb|é¿å°å±±å|ARX|aershanbei|aesb|2144@ajd|å®æ±ä¸|ADA|anjiangdong|ajd|2145@alt|é¿åæ³°|AUR|aletai|alt|2146@are|å®ä»|ARG|anren|ar|2147@asx|å®é¡ºè¥¿|ASE|anshunxi|asx|2148@atx|å®å¾è¥¿|AXL|antuxi|atx|2149@ayd|å®é³ä¸|ADF|anyangdong|ayd|2150@bba|åç½|BBZ|bobai|bb|2151@bbu|å«æ­¥|BBE|babu|bb|2152@bch|æ è¶|FWH|bencha|bc|2153@bdd|ä¿å®ä¸|BMP|baodingdong|bdd|2154@bfs|å«æ¹å±±|FGQ|bafangshan|bfs|2155@bgo|ç½æ²|FEP|baigou|bg|2156@bha|æ»¨æµ·|YKP|binhai|bh|2157@bhb|æ»¨æµ·å|FCP|binhaibei|bhb|2158@bhg|æ»¨æµ·æ¸¯|BGU|binhaigang|bhg|2159@bhx|æ»¨æµ·è¥¿|FHP|binhaixi|bhx|2160@bjn|å®é¸¡å|BBY|baojinan|bjn|2161@bjz|åäºå­|BRT|beijingzi|bjz|2162@bmj|ç½é©¬äº|BFQ|baimajing|bmj|2163@bpi|åç¥¨|BPT|beipiao|bp|2164@bqi|å®æ¸|BUB|baoqing|bq|2165@bsh|ç§å±±|FZW|bishan|bs|2166@bsp|ç½æ²éº|BSN|baishapu|bsp|2167@bsx|ç½æ°´å¿|BGY|baishuixian|bsx|2168@bta|æ¿å¡|NGQ|bantang|bt|2169@bwd|ç½æä¸|BCV|baiwendong|bwd|2170@bxb|å®¾è¥¿å|BBB|binxibei|bxb|2171@bxc|æ¬æºªæ°å|BVT|benxixincheng|bxxc|2172@bya|å®¾é³|UKZ|binyang|by|2173@byd|ç½æ´æ·|FWP|baiyangdian|byd|2174@byi|ç¾å®|FHW|baiyi|by|2175@byn|ç½é³åå|FNC|baiyinhuanan|byhn|2176@bzd|å·´ä¸­ä¸|BDE|bazhongdong|bzd|2177@bzh|å½¬å·|BXY|binzhou|bz|2178@bzh|æ»¨å·|BIK|binzhou|bz|2179@bzh|å®¾å·|BZB|binzhou|bz|2180@bzx|é¸å·è¥¿|FOP|bazhouxi|bzx|2181@cch|æ¾å|CUY|chengcheng|cc|2182@cdb|æ¿å¾·å¿å|IYP|chengdexianbei|cdxb|2183@cdn|æ¿å¾·å|IVP|chengdenan|cdn|2184@cdx|æé½è¥¿|CMW|chengduxi|cdx|2185@cfd|æ¹å¦ç¸ä¸|POP|caofeidiandong|cfdd|2186@cfg|æ¹å¦ç¸æ¸¯|PGP|caofeidiangang|cfdg|2187@cgb|ååºå|CBY|chenggubei|cgb|2188@cgh|æ¥å¹²æ¹|VAT|chaganhu|cgh|2189@chd|å·¢æ¹ä¸|GUH|chaohudong|chd|2190@cji|ä»æ±|KNW|congjiang|cj|2191@cjy|è¡å®¶å´|EBV|caijiaya|cjy|2192@cka|è¶å¡|CVO|chaka|ck|2193@clh|é¿ä¸´æ²³|FVH|changlinhe|clh|2194@cln|è¶éµå|CNG|chalingnan|cln|2195@cpd|å¸¸å¹³ä¸|FQQ|changpingdong|cpd|2196@cpn|å¸¸å¹³å|FPQ|changpingnan|cpn|2197@cqq|é¿åºæ¡¥|CQJ|changqingqiao|cqq|2198@csb|é¿å¯¿å|COW|changshoubei|csb|2199@csh|é¿å¯¿æ¹|CSE|changshouhu|csh|2200@csh|å¸¸å±±|CSU|changshan|cs|2201@csh|æ½®æ±|CBQ|chaoshan|cs|2202@csx|é¿æ²è¥¿|RXQ|changshaxi|csx|2203@cti|æå¤©|CTE|chaotian|ct|2204@ctn|é¿æ±å|CNS|changtingnan|ctn|2205@cwu|é¿æ­¦|CWY|changwu|cw|2206@cxi|é¿å´|CBH|changxing|cx|2207@cxi|èæºª|CXE|cangxi|cx|2208@cxi|æ¥é|CUM|chuxiong|cx|2209@cya|æé³|VBT|chaoyang|cy|2210@cya|é¿é³|CYN|changyang|cy|2211@cya|æ½®é³|CNQ|chaoyang|cy|2212@cyh|æé³æ¹|CYE|chaoyanghu|cyh|2213@czh|å´å·|CZE|chongzhou|cz|2214@czt|åå­å¦|CWT|chengzitan|czt|2215@dad|ä¸å®ä¸|DCZ|dongandong|dad|2216@dba|å¾·ä¿|RBZ|debao|db|2217@dch|é½æ|DCG|duchang|dc|2218@dch|ä¸å²|DCJ|dongcha|dc|2219@dcn|ä¸åå|IYQ|dongchengnan|dcn|2220@ddh|ä¸æ´æ²³|RDD|dongdaihe|ddh|2221@ddx|ä¸¹ä¸è¥¿|RWT|dandongxi|ddx|2222@deh|ä¸äºéæ²³|DRB|dongerdaohe|dedh|2223@dfe|å¤§ä¸°|KRQ|dafeng|df|2224@dfn|å¤§æ¹å|DNE|dafangnan|dfn|2225@dgb|ä¸æ¸¯å|RGT|donggangbei|dgb|2226@dgs|å¤§å­¤å±±|RMT|dagushan|dgs|2227@dgu|ä¸è|RTQ|dongguan|dg|2228@dhd|é¼æ¹ä¸|UWQ|dinghudong|dhd|2229@dhs|é¼æ¹å±±|NVQ|dinghushan|dhs|2230@dji|éæ»|RRQ|daojiao|dj|2231@dji|å«æ±|DJE|dianjiang|dj|2232@dji|æ´äº|FWQ|dongjing|dj|2233@djk|è£å®¶å£|DTK|dongjiakou|djk|2234@dju|å¤§è´|DIM|daju|dj|2235@dko|æ´å£|DKA|dongkou|dk|2236@dlh|è¾¾è¿æ²³|DCB|dalianhe|dlh|2237@dli|å¤§è|DNY|dali|dl|2238@dlz|å¤§æé|KOQ|dalangzhen|dlz|2239@dml|å¾è«å©|DTB|demoli|dml|2240@dqg|å¤§éæ²|DSD|daqinggou|dqg|2241@dqi|å¾·æ¸|DRH|deqing|dq|2242@dsd|ä¸èä¸|RSC|dongshengdong|dsd|2243@dsn|ç å±±å|PRH|dangshannan|dsn|2244@dsn|å¤§ç³å¤´å|DAL|dashitounan|dstn|2245@dtd|å½æ¶ä¸|OWH|dangtudong|dtd|2246@dtx|å¤§éè¥¿|DTO|datongxi|dtx|2247@dwa|å¤§æº|WWQ|dawang|dw|2248@dxb|å®è¥¿å|DNJ|dingxibei|dxb|2249@dxd|å¾·å´ä¸|DDG|dexingdong|dxd|2250@dxi|å¾·å´|DWG|dexing|dx|2251@dxs|ä¸¹éå±±|IRQ|danxiashan|dxs|2252@dyb|å¤§å¶å|DBN|dayebei|dyb|2253@dyd|é½åä¸|KJW|duyundong|dyd|2254@dyi|å¤§é|DEE|dayi|dy|2255@dyn|ä¸è¥å|DOK|dongyingnan|dyn|2256@dyu|å¤§ä½|DYG|dayu|dy|2257@dzd|å®å·ä¸|DOP|dingzhoudong|dzd|2258@dzh|ç«¯å·|WZQ|duanzhou|dz|2259@dzn|å¤§è¶³å|FQW|dazunan|dzn|2260@ems|å³¨çå±±|IXW|emeishan|ems|2261@epg|é¿æ¿å®«|EGY|epanggong|epg|2262@ezd|éå·ä¸|EFN|ezhoudong|ezd|2263@fcb|é²åæ¸¯å|FBZ|fangchenggangbei|fcgb|2264@fcd|å¤åä¸|FDT|fengchengdong|fcd|2265@fch|å¯å·|FDZ|fuchuan|fc|2266@fcx|ç¹æè¥¿|PUH|fanchangxi|fcx|2267@fdu|ä¸°é½|FUW|fengdu|fd|2268@flb|æ¶ªéµå|FEW|fulingbei|flb|2269@fli|æ«æ|FLN|fenglin|fl|2270@fnd|éå®ä¸|FDU|funingdong|fnd|2271@fni|å¯å®|FNM|funing|fn|2272@fpi|ä½åª|FUY|foping|fp|2273@fqi|æ³å¯|FQE|faqi|fq|2274@frn|èèå|KCQ|furongnan|frn|2275@fsh|å¤ç|FAW|fusheng|fs|2276@fso|ææ¾|FSL|fusong|fs|2277@fsx|ä½å±±è¥¿|FOQ|foshanxi|fsx|2278@fsz|ç¦å±±é|FZQ|fushanzhen|fsz|2279@fti|ç¦ç°|NZQ|futian|ft|2280@fxi|éæ°|FOT|fuxin|fx|2281@fya|å¯é³|FYU|fuyang|fy|2282@fyb|å¯æºå|FBM|fuyuanbei|fyb|2283@fyu|æè¿|FYB|fuyuan|fy|2284@fzd|æå·ä¸|FDG|fuzhoudong|fzd|2285@fzh|æå·|FZG|fuzhou|fz|2286@fzh|æ¹æ­£|FNB|fangzheng|fz|2287@fzn|ç¦å· å|FXS|fuzhounan|fzn|2288@gan|é«å®|GCG|gaoan|ga|2289@gan|å¹¿å®å|VUW|guangannan|gan|2290@gan|è´µå®|GAE|guian|ga|2291@gbd|é«ç¢åºä¸|GMP|gaobeidiandong|gbdd|2292@gch|æ­å|GCZ|gongcheng|gc|2293@gcn|èåå|GUP|gaochengnan|gcn|2294@gdb|è´µå®å|FMW|guidingbei|gdb|2295@gdn|èåºå|GNN|gediannan|gdn|2296@gdx|è´µå®å¿|KIW|guidingxian|gdx|2297@ghb|å¹¿æ±å|GVW|guanghanbei|ghb|2298@ghu|é«è±|HGD|gaohua|gh|2299@gju|é©å±|GEM|geju|gj|2300@gle|é«æ¥|GLB|gaoleng|gl|2301@gli|å³å²­|GLE|guanling|gl|2302@glx|æ¡æè¥¿|GEZ|guilinxi|glx|2303@gmb|é«å¯å|GVK|gaomibei|gmb|2304@gmc|åæå|IMQ|guangmingcheng|gmc|2305@gni|å¹¿å®|FBQ|guangning|gn|2306@gns|å¹¿å®å¯º|GQT|guangningsi|gns|2307@gnx|å¹¿åå¿|GXM|guangnanxian|gnx|2308@gpi|æ¡å¹³|GAZ|guiping|gp|2309@gpz|å¼æ£å­|GPT|gongpengzi|gpz|2310@gsd|èµ¶æ°´ä¸|GDE|ganshuidong|gsd|2311@gsh|åå±±|GUN|guangshan|gs|2312@gsh|è°·å±±|FFQ|gushan|gs|2313@gsl|è§æ²å²­|FKQ|guanshaling|gsl|2314@gtb|å¤ç°å|GBS|gutianbei|gtb|2315@gtb|å¹¿éå|GPM|guangtongbei|gtb|2316@gtn|é«å°å|GAJ|gaotainan|gtn|2317@gtz|å¤ç°ä¼å|STS|gutianhuizhi|gthz|2318@gyb|è´µé³å|KQW|guiyangbei|gyb|2319@gyd|è´µé³ä¸|KEW|guiyangdong|gyd|2320@gyu|èµ£æ¦|GYU|ganyu|gy|2321@gyx|é«éè¥¿|GNP|gaoyixi|gyx|2322@han|æ å®|HNS|huian|ha|2323@hbb|æ·®åå|PLH|huaibeibei|hbb|2324@hbd|é¹¤å£ä¸|HFF|hebidong|hbd|2325@hcg|å¯è±æ²|HKB|hanconggou|hcg|2326@hch|éå|SER|huocheng|hc|2327@hch|ç²æ¥|HUL|hunchun|hc|2328@hdd|æ¨ªéæ²³å­ä¸|KUX|hengdaohezidong|hdhzd|2329@hdd|é¯é¸ä¸|HPP|handandong|hdd|2330@hdo|æ ä¸|KDQ|huidong|hd|2331@hdp|åè¾¾éº|HDJ|hadapu|hdp|2332@hdx|æ´ªæ´è¥¿|HTV|hongtongxi|hdx|2333@hdx|æµ·ä¸è¥¿|HDO|haidongxi|hdx|2334@heb|åå°æ»¨å|HTB|haerbinbei|hebb|2335@hfc|åè¥åå|COH|hefeibeicheng|hfbc|2336@hfn|åè¥å|ENH|hefeinan|hfn|2337@hga|é»å|KGN|huanggang|hg|2338@hgd|é»åä¸|KAN|huanggangdong|hgd|2339@hgd|æ¨ªæ²æ¡¥ä¸|HNN|henggouqiaodong|hgqd|2340@hgx|é»åè¥¿|KXN|huanggangxi|hgx|2341@hhe|æ´ªæ²³|HPB|honghe|hh|2342@hhn|æåå|KAQ|huaihuanan|hhn|2343@hhq|é»æ²³æ¯åº|HCF|huanghejingqu|hhjq|2344@hhu|æ ç¯|KHQ|huihuan|hh|2345@hhu|è±æ¹|KHN|huahu|hh|2346@hhu|åæ¹|IHN|houhu|hh|2347@hji|æé|FAQ|huaiji|hj|2348@hkb|æ²³å£å|HBM|hekoubei|hkb|2349@hkl|å®åå|OKB|hongkeli|hkl|2350@hlb|æµ·æå|KBX|hailinbei|hlb|2351@hli|é»æµ|KLQ|huangliu|hl|2352@hln|é»éµå|VLY|huanglingnan|hln|2353@hme|é²é¨|KMQ|houmen|hm|2354@hme|æµ·é¨|HMU|haimen|hm|2355@hme|èé¨|IUQ|humen|hm|2356@hmx|ä¾¯é©¬è¥¿|HPV|houmaxi|hmx|2357@hna|è¡¡å|HNG|hengnan|hn|2358@hnd|æ·®åä¸|HOH|huainandong|hnd|2359@hpu|åæµ¦|HVZ|hepu|hp|2360@hqi|éé±|FBH|huoqiu|hq|2361@hrd|æä»ä¸|HFV|huairendong|hrd|2362@hrd|åå®¹ä¸|HPN|huarongdong|hrd|2363@hrn|åå®¹å|KRN|huarongnan|hrn|2364@hsb|é»å±±å|HQT|heishanbei|hsb|2365@hsb|è¡¡æ°´å|IHP|hengshuibei|hsb|2366@hsb|é»ç³å|KSN|huangshibei|hsb|2367@hsb|é»å±±å|NYH|huangshanbei|hsb|2368@hsd|è´ºèæ¡¥ä¸|HLN|heshengqiaodong|hsqd|2369@hsh|åç¡|VUR|heshuo|hs|2370@hsn|è±å±±å|KNN|huashannan|hsn|2371@hta|è·å¡|KXQ|hetang|ht|2372@htd|é»ååº|HKP|huangtudian|htd|2373@hyb|æµ·é³å|HEK|haiyangbei|hyb|2374@hyb|åé³å|HTY|heyangbei|hyb|2375@hyi|æ§è«|IYN|huaiyin|hy|2376@hyi|é é|KXY|huyi|hyi|2377@hyk|è±å­å£|HYT|huayuankou|hyk|2378@hzd|éå·ä¸|HWV|huozhoudong|hzd|2379@hzn|æ å·å|KNQ|huizhounan|hzn|2380@jan|å»ºå®|JUL|jianan|ja|2381@jch|æ³¾å·|JAJ|jingchuan|jc|2382@jdb|æ¯å¾·éå|JDG|jingdezhenbei|jdzb|2383@jde|æå¾·|NSH|jingde|jd|2384@jde|å»ºå¾·|JDU|jiande|jd|2385@jfe|å°å³°|PFQ|jianfeng|jf|2386@jha|è¿æµ·|JHD|jinhai|jh|2387@jhx|èæ²³è¥¿|JOL|jiaohexi|jhx|2388@jlb|åç²®åå|JMP|junliangchengbei|jlcb|2389@jle|å°ä¹|JLS|jiangle|jl|2390@jlh|è´¾é²æ²³|JLF|jialuhe|jlh|2391@jls|ä¹éå±±|KJQ|jiulangshan|jls|2392@jmb|å³å¢¨å|JVK|jimobei|jmb|2393@jmg|åé¨å³|JME|jianmenguan|jmg|2394@jmx|ä½³æ¨æ¯è¥¿|JUB|jiamusixi|jmsx|2395@jnb|å»ºå®å¿å|JCS|jianningxianbei|jnxb|2396@jnd|æµåä¸|MDK|jinandong|jnd|2397@jni|æ±å®|JJH|jiangning|jn|2398@jnx|æ±å®è¥¿|OKH|jiangningxi|jnx|2399@jox|å»ºç¯è¥¿|JUS|jianouxi|jox|2400@jqn|éæ³å|JNJ|jiuquannan|jqn|2401@jrx|å¥å®¹è¥¿|JWH|jurongxi|jrx|2402@jsh|å»ºæ°´|JSM|jianshui|js|2403@jsh|å°å±±|JPQ|jianshan|js|2404@jss|çé¦å¸|JUN|jieshoushi|jss|2405@jxb|ç»©æºªå|NRH|jixibei|jxb|2406@jxd|ä»ä¼ä¸|JDV|jiexiudong|jxd|2407@jxi|æ³¾å¿|LOH|jingxian|jx|2408@jxi|éè¥¿|JMZ|jingxi|jx|2409@jxn|è¿è´¤å|JXG|jinxiannan|jxn|2410@jyb|æ±æ²¹å|JBE|jiangyoubei|jyb|2411@jyn|ç®é³å|JOW|jianyangnan|jyn|2412@jyn|åå³ªå³å|JBJ|jiayuguannan|jygn|2413@jyt|éé¶æ½­|JTN|jinyintan|jyt|2414@jyu|éå®|JYL|jingyu|jy|2415@jyw|éææ¹¾|PYQ|jinyuewan|jyw|2416@jyx|ç¼äºè¥¿|PYH|jinyunxi|jyx|2417@jzh|æ¯å·|JEP|jingzhou|jz|2418@jzh|æä¸­|JZV|jinzhong|jz|2419@kfb|å¼å°å|KBF|kaifengbei|kfb|2420@kfs|å¼ç¦å¯º|FLQ|kaifusi|kfs|2421@khu|å¼å|KHU|kaihua|kh|2422@kln|å¯éå|QKW|kailinan|kln|2423@klu|åºä¼¦|KLD|kulun|kl|2424@kmn|ææå|KOM|kunmingnan|kmn|2425@kta|èµæ½­|KTQ|kuitan|kt|2426@kya|å¼é³|KVW|kaiyang|ky|2427@kzu|åå·¦|KZT|kazuo|kz|2428@lad|éå®ä¸|IDZ|longandong|lad|2429@lbb|æ¥å®¾å|UCZ|laibinbei|lbb|2430@lbi|çµç§|GMH|lingbi|lb|2431@lbu|å¯®æ­¥|LTQ|liaobu|lb|2432@lby|ç»¿åå­|LCF|lvboyuan|lby|2433@lcb|éæå|NWW|longchangbei|lcb|2434@lcd|ä¹æä¸|ILQ|lechangdong|lcd|2435@lch|ä¸´å|UUP|lincheng|lc|2436@lch|ç½å|VCZ|luocheng|lc|2437@lch|éµå|LGK|lingcheng|lc|2438@lcz|èåé|ACQ|laochengzhen|lcz|2439@ldb|é¾æ´å ¡|FVW|longdongbao|ldb|2440@ldn|ä¹é½å|LVO|ledunan|ldn|2441@ldn|å¨åºå|UOQ|loudinan|ldn|2442@ldo|ä¹ä¸|UQQ|ledong|ld|2443@ldy|ç¦»å å¬å­|INW|liduigongyuan|ldgy|2444@lfa|å¨ç¦|USV|loufan|lf|2445@lfe|éä¸°|LLQ|lufeng|lf|2446@lfe|é¾ä¸°|KFQ|longfeng|lf|2447@lfn|ç¦ä¸°å|LQM|lufengnan|lfn|2448@lfx|ä¸´æ±¾è¥¿|LXV|linfenxi|lfx|2449@lgn|ä¸´é«å|KGQ|lingaonan|lgn|2450@lgu|éºè°·|BNQ|lugu|lg|2451@lhe|æ»¦æ²³|UDP|luanhe|lh|2452@lhn|ççå|LNE|luohuangnan|lhn|2453@lhu|éå|LHA|longhui|lh|2454@lhx|æ¼¯æ²³è¥¿|LBN|luohexi|lhx|2455@ljd|ç½æ±ä¸|IKW|luojiangdong|ljd|2456@lji|æ³æ±|UQZ|liujiang|lj|2457@ljn|å©æ´¥å|LNK|lijinnan|ljn|2458@lkn|å°èå|LUF|lankaonan|lkn|2459@lks|é¾å£å¸|UKK|longkoushi|lks|2460@llb|é¾éå|KFW|longlibei|llb|2461@llb|å°éµå|COK|lanlingbei|llb|2462@llb|æ²¥æå|KBQ|lilinbei|llb|2463@lld|é´éµä¸|UKQ|lilingdong|lld|2464@lna|éå|INJ|longnan|ln|2465@lpn|æ¢å¹³å|LPE|liangpingnan|lpn|2466@lqu|ç¤¼æ³|LGY|liquan|lq|2467@lsd|çµç³ä¸|UDV|lingshidong|lsd|2468@lsh|ä¹å±±|IVW|leshan|ls|2469@lsh|é¾å¸|LAG|longshi|ls|2470@lsh|æº§æ°´|LDH|lishui|ls|2471@lsn|å¨å±±å³å|LSE|loushanguannan|lsgn|2472@lsx|å²å±±è¥¿|UWK|lanshanxi|lsx|2473@lwj|æ´æ¹¾ä¸æ±|KRW|luowansanjiang|lwsj|2474@lxb|è±è¥¿å|LBK|laixibei|lxb|2475@lxi|å²å¿|UXV|lanxian|lx|2476@lya|æº§é³|LEH|liyang|ly|2477@lyi|ä¸´é|LUK|linyi|ly|2478@lyn|æ³å­å|LNR|liuyuannan|lyn|2479@lzb|é¹¿å¯¨å|LSZ|luzhaibei|lzb|2480@lzb|ä¸´æ·å|UEK|linzibei|lzb|2481@lzh|éä¸­|LZE|langzhong|lz|2482@lzn|ä¸´æ³½å|LDJ|linzenan|lzn|2483@mad|é©¬éå±±ä¸|OMH|maanshandong|masd|2484@mch|æ¯é|MHN|maochen|mc|2485@mex|å¸½å¿å±±è¥¿|MUB|mershanxi|mesx|2486@mgd|ææ¸¯ä¸|MDN|minggangdong|mgd|2487@mhn|æ°åå|MNO|minhenan|mhn|2488@mji|éµé|MJN|minji|mj|2489@mla|é©¬å°|MLR|malan|ml|2490@mle|æ°ä¹|MBJ|minle|ml|2491@mle|å¼¥å|MLM|mile|ml|2492@mns|ççº³æ¯|MSR|manasi|mns|2493@mpi|çå¹³|MBK|muping|mp|2494@mqb|é½æ¸å|MBS|minqingbei|mqb|2495@mqb|æ°æå|MIF|minquanbei|mqb|2496@msd|çå±±ä¸|IUW|meishandong|msd|2497@msh|åå±±|MSE|mingshan|ms|2498@msh|åºå±±|MSN|miaoshan|ms|2499@mxi|å²·å¿|MXJ|minxian|mx|2500@myu|é¨æº|MYO|menyuan|my|2501@myu|æ®äº|KIQ|muyun|my|2502@mzb|èèªå|MBM|mengzibei|mzb|2503@mzh|å­åº|MZF|mengzhuang|mz|2504@mzi|èèª|MZM|mengzi|mz|2505@nbu|åé¨|NBE|nanbu|nb|2506@nca|åæ¹|NEF|nancao|nc|2507@ncb|ååå|NCE|nanchongbei|ncb|2508@nch|åå|NDG|nancheng|nc|2509@nch|å æ|NOG|nanchang|nc|2510@ncx|åæè¥¿|NXG|nanchangxi|ncx|2511@ndn|å®ä¸å|NDJ|ningdongnan|ndn|2512@ndo|å®ä¸|NOJ|ningdong|nd|2513@nfb|åè¬å|NUT|nanfenbei|nfb|2514@nfe|åä¸°|NFG|nanfeng|nf|2515@nhd|åæ¹ä¸|NDN|nanhudong|nhd|2516@nhl|çæ²³æ¢|LKT|niuheliang|nhl|2517@nhu|åå|NAM|nanhua|nh|2518@njb|åæ±å|NKW|neijiangbei|njb|2519@nji|åæ±|FIW|nanjiang|nj|2520@njk|åæ±å£|NDQ|nanjiangkou|njk|2521@nlg|å¥æç|NGT|nailingao|nlg|2522@nli|åéµ|LLH|nanling|nl|2523@nmu|å°¼æ¨|NMO|nimu|nm|2524@nnd|åå®ä¸|NFZ|nanningdong|nnd|2525@nnx|åå®è¥¿|NXZ|nanningxi|nnx|2526@npb|åå¹³å|NBS|nanpingbei|npb|2527@npb|åå ¡å|TLP|nanpubei|npb|2528@nqn|å®å¼ºå|NOY|ningqiangnan|nqn|2529@nxi|åé|NCQ|nanxiong|nx|2530@nyo|çº³é|NYE|nayong|ny|2531@nyz|åé³å¯¨|NYF|nanyangzhai|nyz|2532@pan|æ®å®|PAN|puan|pa|2533@pax|æ®å®å¿|PUE|puanxian|pax|2534@pbi|å±è¾¹|PBM|pingbian|pb|2535@pbn|å¹³åå|PBE|pingbanan|pbn|2536@pch|å¹³æ|PCE|pingchang|pc|2537@pdi|æ®å®|PGW|puding|pd|2538@pdu|å¹³åº¦|PAK|pingdu|pd|2539@pji|è²æ±|PJE|pujiang|pj|2540@pko|ç®å£|PUT|pikou|pk|2541@plc|çé¾å|PNN|panlongcheng|plc|2542@pls|è¬è±å¸|POK|penglaishi|pls|2543@pni|æ®å®|PEQ|puning|pn|2544@pnn|å¹³åå|PAZ|pingnannan|pnn|2545@pqb|å¹³æ³å|PBP|pingquanbei|pqb|2546@psb|å½­å±±å|PPW|pengshanbei|psb|2547@psh|çå±±|PUD|panshan|ps|2548@psh|åªä¸|PSK|pingshang|ps|2549@pxb|èä¹¡å|PBG|pingxiangbei|pxb|2550@pya|é±é³|PYG|poyang|py|2551@pya|æ¿®é³|PYF|puyang|py|2552@pyc|å¹³é¥å¤å|PDV|pingyaogucheng|pygc|2553@pyd|å¹³åä¸|PUK|pingyuandong|pyd|2554@pzh|çå·|PAE|panzhou|pz|2555@pzh|æ®èé»|PZM|puzhehei|pzh|2556@pzh|å½­å·|PMW|pengzhou|pz|2557@qan|ç§¦å®|QGJ|qinan|qa|2558@qbd|éç½æ±ä¸|QFW|qingbaijiangdong|qbjd|2559@qch|éå·|QCE|qingchuan|qc|2560@qdb|éå²å|QHK|qingdaobei|qdb|2561@qdh|åå²æ¹|QDU|qiandaohu|qdh|2562@qdo|ç¥ä¸|QMQ|qidong|qd|2563@qdo|å¯ä¸|QOU|qidong|qd|2564@qdu|éå |QET|qingdui|qd|2565@qdx|éå²è¥¿|QUK|qingdaoxi|qdx|2566@qfe|åé|QFB|qianfeng|qf|2567@qhb|æ¸æ²³é¨å|QBD|qinghemenbei|qhmb|2568@qhe|é½æ²³|QIK|qihe|qh|2569@qjb|æ²éå|QBM|qujingbei|qjb|2570@qjd|ç¶¦æ±ä¸|QDE|qijiangdong|qjd|2571@qji|æ²æ±|QIM|qujiang|qj|2572@qla|éå´|QLE|qionglai|ql|2573@qli|éè²|QEW|qinglian|ql|2574@qqn|é½é½åå°å|QNB|qiqihaernan|qqhen|2575@qsb|æ¸æ°´å|QEJ|qingshuibei|qsb|2576@qsh|éç¥|QVW|qingshen|qs|2577@qsh|å²å±±|QAY|qishan|qs|2578@qsh|åºç|QSQ|qingsheng|qs|2579@qsx|æ¸æ°´å¿|QIJ|qingshuixian|qsx|2580@qsx|æ²æ°´å¿|QSO|qushuixian|qsx|2581@qxd|ç¥å¿ä¸|QGV|qixiandong|qxd|2582@qxi|ä¹¾å¿|QBY|qianxian|qx|2583@qxn|æä¸è¥å|QNC|qixiayingnan|qxyn|2584@qya|ç¥é³|QWQ|qiyang|qy|2585@qzb|éå·å¸å|QOK|qingzhoushibei|qzsb|2586@qzn|å¨å·å|QNZ|quanzhounan|qzn|2587@qzw|æ£å­æ¹¾|QZQ|qiziwan|qzw|2588@rbu|ä»å¸|RUO|renbu|rb|2589@rcb|è£æå|RQW|rongchangbei|rcb|2590@rch|è£æ|RCK|rongcheng|rc|2591@rcx|çæè¥¿|RXG|ruichangxi|rcx|2592@rdo|å¦ä¸|RIH|rudong|rd|2593@rji|æ¦æ±|RVW|rongjiang|rj|2594@rkz|æ¥åå|RKO|rikaze|rkz|2595@rpi|é¥¶å¹³|RVQ|raoping|rp|2596@rzx|æ¥ç§è¥¿|KZK|rizhaoxi|rzx|2597@scl|å®åè·¯|SFF|songchenglu|scl|2598@sdh|ä¸éæ¹|SDL|sandaohu|sdh|2599@sdo|éµä¸|FIQ|shaodong|sd|2600@sdx|ä¸é½å¿|KKW|sanduxian|sdx|2601@sfa|èè³|SUP|shengfang|sf|2602@sfb|åå³°å|NFQ|shuangfengbei|sfb|2603@she|åæ²³|SOK|shanghe|sh|2604@sho|æ³æ´ª|GQH|sihong|sh|2605@shu|åä¼|AHQ|sihui|sh|2606@sjd|ç³å®¶åºä¸|SXP|shijiazhuangdong|sjzd|2607@sjn|ä¸æ±å|SWZ|sanjiangnan|sjn|2608@sjz|ä¸äºå­|OJT|sanjingzi|sjz|2609@slc|åæµæºåº|IPW|shuangliujichang|sljc|2610@slh|åé¾æ¹|OHB|shuanglonghu|slh|2611@slx|ç³æè¥¿|SYM|shilinxi|slx|2612@slx|æ²å²­å­è¥¿|IXP|shalingzixi|slzx|2613@slx|åæµè¥¿|IQW|shuangliuxi|slx|2614@slz|èå©é|OLB|shenglizhen|slz|2615@smb|ä¸æå|SHS|sanmingbei|smb|2616@smi|ä¸æ|SVS|sanming|sm|2617@smi|åµ©æ|SVM|songming|sm|2618@sml|æ æ¨å²­|FMQ|shumuling|sml|2619@smu|ç¥æ¨|HMY|shenmu|sm|2620@snq|èå°¼ç¹å·¦æ|ONC|sunitezuoqi|sntzq|2621@spd|å±±å¡ä¸|SBN|shanpodong|spd|2622@sqi|ç³æ¡¥|SQE|shiqiao|sq|2623@sqi|æ²ä¸|SQN|shenqiu|sq|2624@ssb|é¯åå|SMR|shanshanbei|ssb|2625@ssb|ç®å±±å|NSQ|shishanbei|ssb|2626@ssb|ä¸æ°´å|ARQ|sanshuibei|ssb|2627@ssb|æ¾å±±æ¹å|KUQ|songshanhubei|sshb|2628@ssh|ç®å±±|KSQ|shishan|ss|2629@ssn|ä¸æ°´å|RNQ|sanshuinan|ssn|2630@ssn|é¶å±±å|INQ|shaoshannan|ssn|2631@ssu|ä¸ç©|QHW|sansui|ss|2632@sti|ç³æ¢¯|STE|shiti|st|2633@swe|æ±å°¾|OGQ|shanwei|sw|2634@sxb|æ­å¿å|NPH|shexianbei|sxb|2635@sxb|ç»å´å|SLH|shaoxingbei|sxb|2636@sxd|ç»å´ä¸|SSH|shaoxingdong|sxd|2637@sxi|æ³å¿|GPH|sixian|sx|2638@sxi|å§å´|IPQ|shixing|sx|2639@sya|åæ´|SQS|shuangyang|sy|2640@sya|æ³é³|MPH|siyang|sy|2641@sya|ä¸é³|SYU|sanyang|sy|2642@sya|å°é³|SAU|sheyang|sy|2643@sya|åé³|OYT|shuangyang|sy|2644@syb|éµé³å|OVQ|shaoyangbei|syb|2645@syb|æ¾åå|OCT|songyuanbei|syb|2646@syi|å±±é´|SNV|shanyin|sy|2647@syx|éµé³è¥¿|SXA|shaoyangxi|syx|2648@syx|æ²é³è¥¿|OOT|shenyangxi|syx|2649@szb|æ·±å³å|IOQ|shenzhenbei|szb|2650@szh|ç¥å·|SRQ|shenzhou|sz|2651@szn|å°å¿å|OZB|shangzhinan|szn|2652@szs|æ·±å³åªå±±|IFQ|shenzhenpingshan|szps|2653@szs|ç³å´å±±|QQJ|shizuishan|szs|2654@szx|ç³æ±å¿|OSW|shizhuxian|szx|2655@tan|å°å®å|TAD|taiannan|tan|2656@tcb|æ¡æå|TOK|taocunbei|tcb|2657@tdb|ç°ä¸å|TBZ|tiandongbei|tdb|2658@tdd|åå°å ä¸|TTN|tuditangdong|tdtd|2659@tgx|å¤ªè°·è¥¿|TIV|taiguxi|tgx|2660@tha|åå|THR|tuha|th|2661@tha|éæµ·|TAM|tonghai|th|2662@thb|å¤ªåå|JYN|taihebei|thb|2663@thc|å¤©æ²³æºåº|TJN|tianhejichang|thjc|2664@thj|å¤©æ²³è¡|TEN|tianhejie|thj|2665@thn|åæµ·å|IEP|tanghainan|thn|2666@thx|éåå¿|TXL|tonghuaxian|thx|2667@tji|åæ±|TJB|tongjiang|tj|2668@tkd|æåæä¸|TVC|tuoketuodong|tktd|2669@tlb|åé²çªå|TAR|tulufanbei|tlfb|2670@tlb|ééµå|KXH|tonglingbei|tlb|2671@tlu|æ¡åº|TLU|tonglu|tl|2672@tni|æ³°å®|TNS|taining|tn|2673@trn|éä»å|TNW|tongrennan|trn|2674@tsn|å¤©æ°´å|TIJ|tianshuinan|tsn|2675@twe|éæ¸­|TWJ|tongwei|tw|2676@txd|ç°å¿ä¸|KQQ|tianxindong|txd|2677@txh|æ±¤éæ¹|THN|tangxunhu|txh|2678@txi|è¤å¿|TAZ|tengxian|tx|2679@tyn|å¤ªåå|TNV|taiyuannan|tyn|2680@tyx|éè¿å ¡è¥¿|TST|tongyuanpuxi|typx|2681@tzb|æ¡æ¢å|TBE|tongzibei|tzb|2682@tzd|æ¡æ¢ä¸|TDE|tongzidong|tzd|2683@tzh|éå·|TOP|tongzhou|tz|2684@wch|å´å·|WAQ|wuchuan|wc|2685@wdd|æç»ä¸|WGK|wendengdong|wdd|2686@wfb|æ½åå|WJK|weifangbei|wfb|2687@wfs|äºåºå±±|WFG|wufushan|wfs|2688@whb|å¨èå²­å|WBL|weihulingbei|whlb|2689@whb|å¨æµ·å|WHK|weihaibei|whb|2690@whx|èæ²³è¥¿|WIB|weihexi|whx|2691@wji|æ¸©æ±|WJE|wenjiang|wj|2692@wlb|ä¹å°å¯å¸|WPC|wulanchabu|wlcb|2693@wld|äºé¾èä¸|WMT|wulongbeidong|wlbd|2694@wln|ä¹é¾æ³å|WFN|wulongquannan|wlqn|2695@wlt|ä¹å°æ¨å¾|VLT|wulanmutu|wlmt|2696@wns|äºå¥³å±±|WET|wunvshan|wns|2697@wsh|æ­¦è|WSE|wusheng|ws|2698@wto|äºé|WTZ|wutong|wt|2699@wwe|æ ä¸º|IIH|wuwei|ww|2700@wws|ç¦å±å±±|WAH|wawushan|wws|2701@wxx|é»åè¥¿|WOV|wenxixi|wxx|2702@wyb|æ­¦ä¹å|WDH|wuyibei|wyb|2703@wyb|æ­¦å¤·å±±å|WBS|wuyishanbei|wysb|2704@wyd|æ­¦å¤·å±±ä¸|WCS|wuyishandong|wysd|2705@wyu|å©ºæº|WYG|wuyuan|wy|2706@wyu|æ¸­æº|WEJ|weiyuan|wy|2707@wzb|ä¸å·å|WZE|wanzhoubei|wzb|2708@wzh|æ­¦é|WIF|wuzhi|wz|2709@wzn|æ¢§å·å|WBZ|wuzhounan|wzn|2710@xab|å´å®å|XDZ|xinganbei|xab|2711@xcd|è®¸æä¸|XVF|xuchangdong|xcd|2712@xch|é¡¹å|ERN|xiangcheng|xc|2713@xdd|æ°é½ä¸|EWW|xindudong|xdd|2714@xdu|è¥¿æ¸¡|XDA|xidu|xd|2715@xfe|è¥¿ä¸°|XFT|xifeng|xf|2716@xfe|åé|NQQ|xianfeng|xf|2717@xfl|æ¹åºè·¯|FVQ|xiangfulu|xfl|2718@xfx|è¥æ±¾è¥¿|XTV|xiangfenxi|xfx|2719@xgb|å­æå|XJN|xiaoganbei|xgb|2720@xgd|å­æä¸|GDN|xiaogandong|xgd|2721@xhd|è¥¿æ¹ä¸|WDQ|xihudong|xhd|2722@xhn|æ°åå|EJQ|xinhuanan|xhn|2723@xhx|æ°æè¥¿|EWQ|xinhuangxi|xhx|2724@xji|æ°æ´¥|IRW|xinjin|xj|2725@xjk|å°éå£|NKQ|xiaojinkou|xjk|2726@xjn|è¾éå|IJP|xinjinan|xjn|2727@xjn|æ°æ´¥å|ITW|xinjinnan|xjn|2728@xla|è¥¿æ¥|XLE|xilai|xl|2729@xmb|æ°æ°å|XOT|xinminbei|xmb|2730@xme|å¦ é¨|EMS|xiamen|xm|2731@xnd|å¸å®ä¸|XKN|xianningdong|xnd|2732@xnn|å¸å®å|UNN|xianningnan|xnn|2733@xpn|æºæµ¦å|EMQ|xupunan|xpn|2734@xpx|è¥¿å¹³è¥¿|EGQ|xipingxi|xpx|2735@xsx|åæ°´å¿|XSU|xiangshuixian|xsx|2736@xtb|æ¹æ½­å|EDQ|xiangtanbei|xtb|2737@xtd|é¢å°ä¸|EDP|xingtaidong|xtd|2738@xwq|è¥¿ä¹æ|XWC|xiwuqi|xwq|2739@xwx|ä¿®æ­¦è¥¿|EXF|xiuwuxi|xwx|2740@xwx|ä¿®æå¿|XWE|xiuwenxian|xwx|2741@xxb|è§å¿å|QSH|xiaoxianbei|xxb|2742@xxb|æ°é¦åå|RHB|xinxiangfangbei|xxfb|2743@xxd|æ°ä¹¡ä¸|EGF|xinxiangdong|xxd|2744@xyb|æ°ä½å|XBG|xinyubei|xyb|2745@xyc|è¥¿é³æ|XQF|xiyangcun|xyc|2746@xyd|ä¿¡é³ä¸|OYN|xinyangdong|xyd|2747@xyd|å¸é³ç§¦é½|XOY|xianyangqindu|xyqd|2748@xyo|ä»æ¸¸|XWS|xianyou|xy|2749@xyu|ç¥¥äº|XQM|xiangyun|xy|2750@xzc|æ°éæºåº|EZF|xinzhengjichang|xzjc|2751@xzl|é¦æ¨è·¯|FNQ|xiangzhanglu|xzl|2752@xzx|å¿»å·è¥¿|IXV|xinzhouxi|xzx|2753@yan|éå®|YAE|yaan|ya|2754@yan|æ°¸å®å|YQS|yongannan|yan|2755@ybl|è¿å®¾è·¯|YFW|yingbinlu|ybl|2756@ybx|äºå¸åè¥¿|YSB|yabulixi|yblx|2757@ycb|æ°¸åå|RGH|yongchengbei|ycb|2758@ycb|çåå|AEH|yanchengbei|ycb|2759@ycb|è¿åå|ABV|yunchengbei|ycb|2760@ycd|æ°¸å·ä¸|WMW|yongchuandong|ycd|2761@ycd|ç¦¹åä¸|YSK|yuchengdong|ycd|2762@ych|å®æ¥|YEG|yichun|yc|2763@ych|å²³æ± |AWW|yuechi|yc|2764@ydh|äºä¸æµ·|NAQ|yundonghai|ydh|2765@ydu|å§æ¸¡|AOJ|yaodu|yd|2766@yfd|äºæµ®ä¸|IXQ|yunfudong|yfd|2767@yfn|æ°¸ç¦å|YBZ|yongfunan|yfn|2768@yge|é¨æ ¼|VTM|yuge|yg|2769@yhe|æ´æ²³|GTH|yanghe|yh|2770@yjb|æ°¸æµå|AJV|yongjibei|yjb|2771@yji|å¼æ±|RVH|yijiang|yj|2772@yjx|å»¶åè¥¿|YXL|yanjixi|yjx|2773@ykn|æ°¸åº·å|QUH|yongkangnan|ykn|2774@yla|ä¾å°|YEB|yilan|yl|2775@ylh|è¿ç²®æ²³|YEF|yunlianghe|ylh|2776@yli|çéµ|YAG|yanling|yl|2777@yln|æ¨éµå|YEY|yanglingnan|yln|2778@yma|ç¾é©¬|YME|yangma|ym|2779@ymb|ä¸é¢å¡å|YXB|yimianpobei|ympb|2780@ymi|ä¼æ|YMX|yimin|ym|2781@yna|éå|YKQ|yunan|yn|2782@yny|äºåé©¿|ANM|yunnanyi|yny|2783@ypi|é¶ç¶|KPQ|yinping|yp|2784@ypx|å»¶å¹³è¥¿|YWS|yanpingxi|ypx|2785@ypx|åå¹³è¥¿|IPV|yuanpingxi|ypx|2786@yqi|æ¨æ¡¥|YQA|yangqiao|yq|2787@yqx|é³æ²è¥¿|IQV|yangquxi|yqx|2788@ysh|é³æ|YCZ|yangshuo|ys|2789@ysh|æ°¸å¯¿|ASY|yongshou|ys|2790@ysh|äºå±±|KZQ|yunshan|ys|2791@ysn|çå±±å|YGG|yushannan|ysn|2792@ysn|éç³å|YMS|yanshinan|ysn|2793@yta|æ°¸æ³°|YTS|yongtai|yt|2794@yta|é¶æ»©|CTQ|yintan|yt|2795@ytb|é¹°æ½­å|YKG|yingtanbei|ytb|2796@ytn|çå°å|YLK|yantainan|ytn|2797@yto|ä¼é|YTL|yitong|yt|2798@ytx|çå°è¥¿|YTK|yantaixi|ytx|2799@yxi|å°¤æºª|YXS|youxi|yx|2800@yxi|äºé|YBS|yunxiao|yx|2801@yxi|å®å´|YUH|yixing|yx|2802@yxi|çæºª|AXM|yuxi|yx|2803@yxi|é³ä¿¡|YVK|yangxin|yx|2804@yxi|åºå¿|YZV|yingxian|yx|2805@yxn|æ¸å¿å|YXG|youxiannan|yxn|2806@yxx|æ´å¿è¥¿|YXY|yangxianxi|yxx|2807@yxx|ä¹å¿è¥¿|YSD|yixianxi|yxx|2808@yyb|ä½å§å|CTH|yuyaobei|yyb|2809@yzh|æ¦ä¸­|IZJ|yuzhong|yz|2810@zan|è¯å®|ZDS|zhaoan|za|2811@zbb|æ·åå|ZRK|zibobei|zbb|2812@zdc|æ­£å®æºåº|ZHP|zhengdingjichang|zdjc|2813@zfd|çº¸åä¸|ZMN|zhifangdong|zfd|2814@zge|åæ ¼å°|ZEC|zhungeer|zge|2815@zhb|åºæ²³å|ZUT|zhuanghebei|zhb|2816@zhu|æ­å|ZHW|zhaohua|zh|2817@zjb|ç»éå|ZJE|zhijinbei|zjb|2818@zjc|å¼ å®¶å·|ZIJ|zhangjiachuan|zjc|2819@zji|è·æ±|ZPQ|zhijiang|zj|2820@zji|ç»é|IZW|zhijin|zj|2821@zka|ä»²æº|KKQ|zhongkai|zk|2822@zko|æ¾å£|ZKE|zengkou|zk|2823@zli|ç ç³|ZOM|zhulin|zl|2824@zli|å·¦å²­|ZSN|zuoling|zl|2825@zmd|æ¨æ¨å¤´ä¸|ZRQ|zhangmutoudong|zmtd|2826@zmx|é©»é©¬åºè¥¿|ZLN|zhumadianxi|zmdx|2827@zpi|é¹å¹³|ZLK|zouping|zp|2828@zpu|æ¼³æµ¦|ZCS|zhangpu|zp|2829@zpx|æ¼³å¹³è¥¿|ZXG|zhangpingxi|zpx|2830@zqb|ç« ä¸å|ZVK|zhangqiubei|zqb|2831@zqd|èåºä¸|FCQ|zhaoqingdong|zqd|2832@zqi|åºæ¡¥|ZQH|zhuangqiao|zq|2833@zsh|æ­å±±|KWQ|zhaoshan|zs|2834@zsx|éå±±è¥¿|ZAZ|zhongshanxi|zsx|2835@zsz|æ±ç å¤é|ZSE|zhushaguzhen|zsgz|2836@zxi|æ¼³å¿|ZXJ|zhangxian|zx|2837@zyb|èµé³å|FYW|ziyangbei|zyb|2838@zyi|éµä¹|ZYE|zunyi|zy|2839@zyn|éµä¹å|ZNE|zunyinan|zyn|2840@zyx|å¼ æè¥¿|ZEJ|zhangyexi|zyx|2841@zzb|èµä¸­å|WZW|zizhongbei|zzb|2842@zzd|æ¶¿å·ä¸|ZAP|zhuozhoudong|zzd|2843@zzd|æ£åºä¸|ZNK|zaozhuangdong|zzd|2844@zzd|åèµä¸|ZDC|zhuozidong|zzd|2845@zzd|éå·ä¸|ZAF|zhengzhoudong|zzd|2846@zzn|æ ªæ´²å|KVQ|zhuzhounan|zzn|2847";e.exports=n},function(module,exports,__webpack_require__){"use strict";function _defineProperty(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var trainAjax=__webpack_require__(360);var Sandbox=__webpack_require__(399);var InjectDFP=function(){function InjectDFP(e){_classCallCheck(this,InjectDFP);this.tryCountLimit=5;this.silentTime=3*24*60*60*1e3;this.evalJSTimeout=5e3;this.expirationOffset=15*60*1e3;this.channel="WEB";this.storageKey="DFP";this.storedInClientKey="storedInClient";this.watcherKey="3W_DFP";this.jsUrl="otn/HttpZF/GetJS";this.cookieCodeKey="cookieCode";this.dfpOrigin=e||"https://kyfw.12306.cn";this.checkOrigin()}_createClass(InjectDFP,[{key:"checkOrigin",value:function(){if(this.dfpOrigin.indexOf("cx.12306.cn")>-1){this.storedInClientKey="storedInClient4cx"}}},{key:"run",value:function(t){function n(){return t()}function r(e){function r(){var e=$.Deferred();return e.reject.apply(e,n)}var n=arguments;if(this.needInjectAccordingError(e)){this.clearCookie();return this.injectDFP().then(t,r)}else{return r()}}return this.injectDFP().then(n,n).then(null,r.bind(this))}},{key:"checkStoredDFP",value:function(){var t=this.getStoredInfo();var n=Date.now();var r=t.DFP||{};var i=t.silentExpiration||0;var s=r.exp||0;var o=r.dfp&&s;var u=s-n>this.expirationOffset;var a=n<i;if(o&&u){if(t[this.storedInClientKey]){return"valid"}return"setCookie"}if(a){return"inSilentExpiration"}return"needInject"}},{key:"getDFP4Cookie",value:function(){function r(e){n.resolve(e)}function i(){function e(e){n.resolve(e)}return t.injectDFP().then(s).then(e,e)}function s(){var e=$.Deferred();var n=t.getStoredInfo();var r=t.checkStoredDFP();if(r=="valid"){var i=t.adaptDFPToCookies(n.DFP);var s=t.genHeaderCookie(i,";");e.resolve(s)}else{e.reject()}return e}var t=this;var n=$.Deferred();s().then(r,i);return n}},{key:"setClientDFPCookie",value:function(){var t=this.getStoredInfo();var n=this.checkStoredDFP();if(n==="valid"){return this.setClientCookie(t.DFP)}else{return this.injectDFP()}}},{key:"injectDFP",value:function(){var t=this;var n=this.getStoredInfo();var r=this.checkStoredDFP();if(r==="setCookie"){return this.setClientCookie(n.DFP)}else if(r!=="needInject"){return $.Deferred().resolve("ä¸éè¦æ³¨å¥ DFP")}n.tryCount=n.tryCount||0;n.tryCount++;if(n.tryCount>=this.tryCountLimit){n.tryCount=0;n.silentExpiration=Date.now()+this.silentTime}this.storeInfo(n);return this.initSandbox().then(function(){return $.when(t.getFakeGlobal(),t.getJS())}).then(this.evalGetJS.bind(this)).then(this.getDFP.bind(this)).then(this.saveDFP.bind(this)).then(this.setClientCookie.bind(this)).always(this.destroySanbox.bind(this)).done(this.watch.bind(this,"",true)).fail(this.watch.bind(this,"",false))}},{key:"initSandbox",value:function(){this.sandbox=new Sandbox;return this.sandbox.init()}},{key:"destroySanbox",value:function(){this.sandbox.destroy();this.sandbox=null}},{key:"saveDFP",value:function(t){var n=this.getStoredInfo();n.DFP=t;this.storeInfo(n);return t}},{key:"getStoredBaseInfo",value:function(){return Common.getStoredInfo(this.storageKey)||{}}},{key:"getStoredInfo",value:function(){var t=this.getStoredBaseInfo();return t[this.channel]||{}}},{key:"storeInfo",value:function(t){var n=this.getStoredBaseInfo();n[this.channel]=t;return Common.storeInfo(this.storageKey,n,true)}},{key:"clearCookieInStorage",value:function(){var t=this.getStoredBaseInfo();delete t[this.channel];Common.storeInfo(this.storageKey,t,true)}},{key:"setClientCookie",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!this.isValidDFP(t)){return $.Deferred().reject("DFP invalid ")}var n=this.adaptDFPToCookies(t);var r=QApp.sniff.android?this.setAndroidClientCookie(n):this.setIOSClientCookie(n);return r.done(this.setClientCookieSuccess.bind(this)).done(this.watch.bind(this,"setCookie",true)).fail(this.watch.bind(this,"setCookie",false))}},{key:"setClientCookieSuccess",value:function(){var t=this.getStoredInfo();t[this.storedInClientKey]=true;t.tryCount=0;t.silentExpiration=0;return this.storeInfo(t)}},{key:"setAndroidClientCookie",value:function(t){var n=this.getInjectPath(true);var r={timeout:1,httpTimeout:1,noRetry:true,type:"post",data:{cookie:this.genHeaderCookie(t,",")}};trainAjax(n,r);return Common.delay()}},{key:"setIOSClientCookie",value:function(t){var n=this.getInjectPath(false);var r={dataType:"css",header:{Cookie:this.genHeaderCookie(t,";")}};return this.ajax(n,r)}},{key:"clearClientCookie",value:function(){var t=this.dfpOrigin;QunarAPI.train.ajaxCleanCookie(_defineProperty({},t,["RAIL_EXPIRATION","RAIL_DEVICEID","RAIL_OkLJUJ"]))}},{key:"clearCookie",value:function(){this.clearClientCookie();this.clearCookieInStorage()}},{key:"ajax",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};n.passDFPCheck=true;return pc12306.ajax(t,n)}},{key:"getJS",value:function(){function t(e,t,n){if(typeof t==="string"&&t.length>100&&t.substring(0,10).trim()[0]!=="<"&&n==200){return $.Deferred().resolve(t)}return $.Deferred().reject(t||e)}return this.ajax(this.jsUrl,{dataType:"js"}).then(t.bind(this)).done(this.watch.bind(this,"GetJS",true)).fail(this.watch.bind(this,"GetJS",false))}},{key:"getDFP",value:function(t){function n(e,t){if(typeof t==="string"&&t.indexOf("callbackFunction")===0){try{var n=t.replace(/^callbackFunction/,"return ");var r=new Function(n);var i=this.getStoredCookieCode();n=r();n=JSON.parse(n);if(!n[this.cookieCodeKey]&&i){n[this.cookieCodeKey]=i}if(this.isValidDFP(n)){return n}return $.Deferred().reject(n)}catch(s){var o="getDFP Error";if(s&&s.message){o+=": "+s.message}console.error(o);return $.Deferred().reject(o)}}return $.Deferred().reject(e||t||"getDFP fail")}if(t.indexOf("http")!==0){t=this.dfpOrigin+t}t=encodeURI(t);return this.ajax(t,{dataType:"jsonp"}).then(n.bind(this)).done(this.watch.bind(this,"getDFP",true)).fail(this.watch.bind(this,"getDFP",false))}},{key:"isValidDFP",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return t.exp&&t.dfp&&t[this.cookieCodeKey]}},{key:"adaptDFPToCookies",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{RAIL_EXPIRATION:t.exp,RAIL_DEVICEID:t.dfp,RAIL_OkLJUJ:t[this.cookieCodeKey]||this.getStoredCookieCode()}}},{key:"evalGetJS",value:function(t,n){function o(e){return r.reject(e)}var r=t.document.captureJsonpUrlDfd;try{this.sandbox.fakeEval(t,n)}catch(i){var s="evalGetJS Error";if(i&&i.message){s+=": "+i.message}console.error(s);o(s)}Common.delay(this.evalJSTimeout).then(o.bind(this,"evalGetJS timeout "+this.evalJSTimeout/1e3));return r}},{key:"genHeaderCookie",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:";";var r=Object.entries(t).map(function(e){return e.join("=")}).join(n);return r}},{key:"needInjectAccordingError",value:function(){return false}},{key:"fake",value:function(t){function s(e){return function(){return t[e].apply(t,arguments)}}var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r={};for(var i in t){if(!/^[A-Z]/.test(i)&&$.type(t[i])==="function"){r[i]=s(i)}else{r[i]=t[i]}}r=$.extend(r,n);return r}},{key:"fakeDocument",value:function(){function s(e){if(e.src){return n.resolve(e.src)}else{n.reject("æ²¡ææ¦æªå°è¯·æ±å°å")}}var t=this;var n=$.Deferred();var r=this.sandbox.getWindow().document;var i=this.fake(r,{addEventListener:function(t,n){if(t==="DOMContentLoaded"){Common.delay().then(n);return}return r.addEventListener.apply(r,arguments)},createElement:function(n){if(n==="script"){var i=r.createElement("meta");Common.delay().then(s.bind(t,i));return i}return r.createElement.apply(r,arguments)},captureJsonpUrlDfd:n});return i}},{key:"fakeNavigator",value:function(){var t=this.sandbox.getWindow().navigator;var n=this.fake(t,{userAgent:this.getFakeUserAgent(t)});return n}},{key:"getFakeUserAgent",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:navigator;return t.userAgent.replace(/Qunar[ia]Phone\/\d+/i,"")}},{key:"getStoredCookieCode",value:function(){var t=this.getStoredInfo();var n=Common.deepGet(t,"DFP."+this.cookieCodeKey);return n}},{key:"getStoredDFPStr",value:function(){var t=this.getStoredInfo();var n=Common.deepGet(t,"DFP.dfp");return n}},{key:"getOverride",value:function(){var t={document:this.fakeDocument(),navigator:this.fakeNavigator()};var n=this.getStoredCookieCode();if(n){t.name="&RAIL_OkLJUJ="+n}return t}},{key:"getFakeGlobal",value:function getFakeGlobal(){var override=this.getOverride();var win=this.sandbox.getWindow();var result=this.fake(win,override);result.window=result;result.self=result;result.top=result;result.parent=result;result.eval=this.sandbox.fakeEval.bind(this.sandbox,result);result.eval.toString=function(){return eval.toString()};return $.Deferred().resolve(result)}},{key:"watch",value:function(t,n,r){t=""+this.watcherKey+(t?"_":"")+t;if(!n){console.error(t,r)}window.sendWatchMessage({key:"hyBuy_"+t,isSuccessful:n})}},{key:"getInjectPath",value:function(t){var n=this;var r={"kyfw.12306.cn":"https://kyfw.12306.cn/otn","cx.12306.cn":"https://cx.12306.cn/tlcx"};var i={"kyfw.12306.cn":"otn/resources/css/validation.css","cx.12306.cn":"https://cx.12306.cn/tlcx/fonts/iconfont.css"};var s=t?r:i;var o=void 0;var u=Object.keys(s);u.forEach(function(e){if(n.dfpOrigin.indexOf(e)>-1){o=s[e]}});console.log("DFP:getInjectPath",this.dfpOrigin,o);return o}}]);return InjectDFP}();module.exports=InjectDFP},function(e,t){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=function(){function e(){r(this,e);this.evalGuid=0}n(e,[{key:"init",value:function(){this.$iframe=$("<iframe></iframe>");this.$iframe.css({position:"absolute",top:-999,left:-999,height:1,width:1});this.$iframe.appendTo("body");return $.Deferred().resolve()}},{key:"destroy",value:function(){this.$iframe.remove()}},{key:"getWindow",value:function(){return this.$iframe[0].contentWindow}},{key:"fakeEval",value:function(t,n){this.evalGuid++;var r="__FAKE_GLOBAL_"+this.evalGuid+"__";var i=this.getWindow();i[r]=t;var s=i.document.createElement("script");s.text="with("+r+"){"+n+"}";i.document.head.appendChild(s).parentNode.removeChild(s);delete i[r]}}]);return e}();e.exports=i},function(e,t){"use strict";function r(e){var t=$.Deferred();var n=e&&e.data&&e.data.errorMsg;if(n){t.reject(n)}else{t.resolve(e)}return t}var n=Common.deepGet;var i={"passport/captcha/captcha-check":{reader:{success:["result_code","4"]}},"passport/captcha/captcha-image64":{reader:{success:["result_code","0"],result:"image"}},"passport/web/auth/uamtk":{reader:{success:["result_code",0],result:"newapptk"}},"passport/web/login":{reader:{success:["result_code",0]}},"otn/uamauthclient":{reader:"passport/web/auth/uamtk"},"otn/login/checkUser":{reader:function(t){var r=$.Deferred();if(t&&t["validateMessagesShowId"]==="_validatorMessage"&&t["status"]===false&&t["httpstatus"]===200&&t["messages"][0]==="ç½ç»ç¹å¿"){return r.reject("IPForbid")}if(n(t,"data.flag")===true){return r.resolve(t.data)}return r.reject("æªç»å½")}},"otn/passcodeNew/checkRandCodeAnsyn":{reader:{success:["data.result","1"]}},"otn/forgetPassword/checkUserInfo":{reader:r},"otn/forgetPassword/mobileCode":{reader:r},"otn/forgetPassword/findPasswordByEmail":{reader:r},"otn/forgetPassword/checkMobileCode":{reader:r},"otn/forgetPassword/editPwdByMobileCode":{reader:r},"otn/login/loginAysnSuggest":{reader:{success:["data.loginCheck","Y"]}},"otn/passengers/query":{reader:{success:["data.datas"],result:"data.datas"}},"otn/passengers/delete":{noLookUp:true,reader:{success:["data.flag"]}},"otn/userSecurity/bindTel":{reader:function(t,n){t=t||n;var r={};r.canBuy=true;var i;try{i=t.match(/var mobile = \'(.*)\'/);r.mobileIsCheck=i?false:true;i=t.match(/var userreceive = \'(.*)\'/);r.userreceive=i?i[1]:null}catch(s){return $.Deferred().reject(t)}if(r.userreceive=="X"){r.canBuy=false}return r}},"otn/modifyUser/initQueryUserInfo":{reader:function(t,n){t=t||n;var r=null;var i=null;var s=null;var o=null;var u=null;var a=null;var f=null;try{o=t.match(/ç¨æ·åï¼<\/span>\n<div class="con">([^<]*)<\/div>/)[1];r=t.match(/å§åï¼<\/span>\n<div class="con">([^<]*)<\/div>/)[1];i=t.match(/ææºå·ç ï¼<\/span>\n<div class="con">([^<]*)<\/div>/)[1];f=t.match(/(?:é®\s*ç®±|çµå­é®ä»¶)ï¼<\/span>\n<div class="con">([^<]*)<\/div>/)[1];s=t.match(/è¯ä»¶å·ç ï¼<\/span>\n<div class="con">([^<]*)<\/div>/)[1];u=t.match(/æ ¸éªç¶æï¼<\/span>\n<div class="con">(.*)>(.*)<\/div>/)[2];a=t.match(/è¯ä»¶ç±»åï¼<\/span>\n<div class="con">([^<]*)<\/div>/)[1];if(a.indexOf("èº«ä»½è¯")>-1){a="1"}else if(a.indexOf("æ¸¯æ¾³")>-1){a="C"}else if(a.indexOf("å°æ¹¾")>-1){a="G"}else if(a.indexOf("æ¤ç§")>-1){a="B"}}catch(l){return $.Deferred().reject(t)}return{account:o,name:r,tel:i,email:f,id:s,verityStatus:u||"å·²éè¿",id_no_type:a}}},"otn/queryOrder/queryMyOrderNoComplete":{noLookUp:true,reader:function(t){var r=$.Deferred();var i=n(t,"data.to_page");if(i==="cache"){var s=n(t,"data.orderCacheDTO.waitTime");var o=n(t,"data.orderCacheDTO.message.message");if(!o){o="è®¢åæéä¸­...";if(s){o+=" ææ°é¢ä¼°æéæ¶é´ä¸º"+Common.humanizeTime(s)}}t.messages=[o];r.reject(t)}else if(t&&t.status&&t.messages.length===0){r.resolve(t)}else{r.reject(t)}return r.promise()}},"otn/confirmPassenger/getQueueCount":{noLookUp:true,reader:function(t){var n=$.Deferred();if(t&&t.status){if(t.data&&t.data.isRelogin==="Y"){return n.reject("æªç»å½")}return n.resolve.apply(n,arguments)}return n.reject.apply(n,arguments)}}};e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=n(360);var o=n(365)("util:3w:JCookie");var u=function(){function e(){i(this,e);this.URLKeywords=["submitOrderRequest","autoSubmitOrderRequest"]}r(e,[{key:"run",value:function(){}},{key:"setCookie",value:function(t,n){this.url=t;this.setting=n;var r=this.URLKeywords.some(function(e){return t.indexOf(e)>-1});if(r){if(n.jsCookie){return this.setCookieJar()}else{return this.setClientCookie()}}else{return $.Deferred().resolve()}}},{key:"setCookieJar",value:function(){return $.Deferred().resolve()}},{key:"setClientCookie",value:function(){var t=this.getJcCookie();console.log("setClientCookie",t);var n=QApp.sniff.android?this.setAndroidClientCookie(t):this.setIOSClientCookie(t);return n}},{key:"getJcCookie",value:function(){var t=this.setting.data,n=t.query_from_station_name,r=t.query_to_station_name,i=t.train_date,s=t.train_date,o=t.tour_flag;var u=pc12306.getStationCode(n);var a=pc12306.getStationCode(r);return{_jc_save_fromStation:escape(n+","+u),_jc_save_toStation:escape(r+","+a),_jc_save_fromDate:escape(i),_jc_save_toDate:escape(s),_jc_save_wfdc_flag:escape(o)}}},{key:"genHeaderCookie",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:";";var r=Object.entries(t).map(function(e){return e.join("=")}).join(n);return r}},{key:"setAndroidClientCookie",value:function(t){var n="https://kyfw.12306.cn/otn";var r={timeout:1,httpTimeout:1,noRetry:true,type:"post",data:{cookie:this.genHeaderCookie(t,",")}};s(n,r);return Common.delay()}},{key:"setIOSClientCookie",value:function(t){var n="otn/resources/css/validation.css";var r={dataType:"css",header:{Cookie:this.genHeaderCookie(t,";")}};return this.ajax(n,r)}},{key:"ajax",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return pc12306.ajax(t,n)}}]);return e}();e.exports=u},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(311);var s=o(i);var a=n(403);var f=function(){function e(t){u(this,e);this.pc12306=t||window.pc12306;this.queryTrainInfoObj=null;this.queueWaitTimeLimit=60}r(e,[{key:"getPC12306",value:function(){return this.pc12306||window.pc12306}},{key:"fetch12306LeftTicketInfo",value:function(t,n,r){function s(e){var t=e.data;var n=e.originYpInfo;if(t){i.resolve.apply(i,[t,n])}else{o.apply(this,arguments)}}function o(e){i.reject.apply(i,arguments)}var i=$.Deferred();this.getPC12306().leftTicketQuery(t,n,r).then(s,o);return i.promise()}},{key:"getPassCodeAndSelfCoding",value:function(t){t=t===false?false:true;var n=new a("book",t);return n.run()}},{key:"getPassengerTicketStr",value:function(t,n){console.log("getPassengerTicketStr",arguments);return this.getPC12306().getPassengerTickets(t,n)}},{key:"getOldPassengerStr",value:function(t){return this.getPC12306().getOldPassengers(t)}},{key:"queryLeftTicket",value:function(t){function p(){h.fetch12306LeftTicketInfo(a,f,i).then(d,v)}function d(e,t){c.resolve.apply(c,[e,t])}function v(){if(l>0){l--;p()}else{c.reject.apply(c,arguments)}}this.queryTrainInfoObj=t;var n=t.fromCity,r=t.toCity,i=t.date;var s=this.getPC12306(),o=s.getStationCode;var u=/[a-zA-Z]/.test(n);var a=u?n:o(n),f=u?r:o(r);var l=3,c=$.Deferred(),h=this;p();return c.promise()}},{key:"querySelectedTrainInfo",value:function(t,n){var r=t.find(function(e){return e.queryLeftNewDTO&&e.queryLeftNewDTO.station_train_code==n});return r}},{key:"submitOrder",value:function(t,n,r){return(0,s.default)(this._submitOrder.bind(this),arguments)}},{key:"_submitOrder",value:function(t,n,r){function u(){console.log("getTokens success:",arguments);return i}var i=this.querySelectedTrainInfo(t,n);var s=r==="gc"?"gc":"dc";if(!i)return $.Deferred().reject("noTrainData");if(i.buttonTextInfo!="é¢è®¢"){return $.Deferred().reject({messages:[i.buttonTextInfo]})}var o=window.secKillOn?$.Deferred().resolve():this.getPC12306().checkUser();return o.then(this.getPC12306().submitOrderRequest.bind(this.getPC12306(),i,s,false)).then(this.getPC12306().getTokens.bind(this.getPC12306())).then(u)}},{key:"checkIfNeedRangCodeOrNot",value:function(t,n,r,i){function o(e){console.log("checkIfNeedRangCodeOrNot success",arguments);var t=Common.deepGet(e,"data.ifShowPassCodeTime")||0;if(e.data.smokeStr){s.reject(e.data.smokeStr)}else if(e.data.ifShowPassCode=="Y"){s.resolve({needRandCode:true,ifShowPassCodeTime:t})}else{s.resolve({needRandCode:false,ifShowPassCodeTime:t})}}function u(e){console.log("checkIfNeedRangCodeOrNot fail",arguments);if(e.data&&e.data.isRelogin){s.reject("notLogin")}else{s.reject.apply(s,arguments)}}console.log("checkIfNeedRangCodeOrNot:",arguments);var s=$.Deferred();var a=i==="gc"?"gc":"dc";this.getPC12306().checkOrderInfo(t,n,r,a).then(o,u);return s.promise()}},{key:"selfCoding",value:function(t,n){var r=n.needRandCode;t=t===false?false:true;if(r)return this.getPassCodeAndSelfCoding(t);else return $.Deferred().resolve()}},{key:"getWaitTime",value:function(t){var n=arguments,r=this;var i=t==="gc"?"gc":"dc",s=10;console.log("getWaitTime this:",this);var o=function(t){console.log("getWaitTime success:",n);var o=Common.deepGet(t,"data.orderId");var u=Common.deepGet(t,"data.msg");var f=Common.deepGet(t,"data.waitTime");if(o){return Common.delay(2e3).then(function(){return o})}else if(u){return $.Deferred().reject(u)}else if(s>0){if(f&&f>=r.queueWaitTimeLimit){return $.Deferred().reject("queueing")}s--;return Common.delay(2500).then(a)}return r.queryMyOrderNoCompleteForQueue(i)};var u=function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++){r[i]=arguments[i]}console.log("getWaitTime fail:",n,s);if(s>7){s--;return Common.delay(2500).then(a)}else{var o;return(o=$.Deferred()).reject.apply(o,r)}};var a=function(){return r.getPC12306().queryOrderWaitTime(i).then(o.bind(r),u.bind(r))};return a()}},{key:"queryMyOrderNoCompleteForQueue",value:function(t){function n(e){if(e&&e.data&&e.data.orderDBList.length>0){return Common.delay(2e3).then(function(){return e.data.orderDBList[0].sequence_no})}else{var t=$.Deferred();return t.reject.apply(t,arguments)}}function r(e){var n=Common.lookUp(e);if(n.id==="queueing"){var r=Common.deepGet(e,"data.orderCacheDTO.waitTime");if(r&&r<this.queueWaitTimeLimit){return this.getWaitTime(t)}}var i=$.Deferred();return i.reject.apply(i,arguments)}return this.getPC12306().queryMyOrderNoComplete().then(n.bind(this),r.bind(this))}},{key:"resultOrderFroDcQueue",value:function(t){function r(){n.resolve.apply(n,arguments)}function i(){n.reject({orderNo:t})}var n=$.Deferred();this.getPC12306().resultOrderFroDcQueue(t).then(r,i);return n.promise()}},{key:"queryMyOrderNoComplete",value:function(){return this._queryMyOrderNoComplete().then(undefined,this._queryMyOrderNoComplete.bind(this)).then(undefined,this._queryMyOrderNoComplete.bind(this))}},{key:"_queryMyOrderNoComplete",value:function(){return Common.delay(2*1e3).then(this.getPC12306().queryMyOrderNoComplete.bind(this.getPC12306()))}},{key:"queryMyOrderNoCompleteContinuously",value:function(){function n(){return this.getPC12306().queryMyOrderNoComplete().then(r.bind(this))}function r(e){if(e.data&&e.data.orderDBList&&e.data.orderDBList.length>0){return e}if(t<=0){return $.Deferred().reject("æ²¡ææ¾å°æªæ¯ä»è®¢å")}t--;return Common.delay(4*1e3).then(n.bind(this))}var t=10;return n.call(this)}},{key:"getQueueCount",value:function(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),s=2;s<r;s++){i[s-2]=arguments[s]}return this.getPC12306().getQueueCount(t,n).then(function(){var e;return(e=$.Deferred()).resolve.apply(e,i)})}},{key:"delay",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}return Common.delay(t).then(function(){var e;return(e=$.Deferred()).resolve.apply(e,r)})}},{key:"occupy",value:function(t,n,r,i){function l(e){function o(e){var t={key:"hyBuy_3W_occupy_needRandCode",isSuccessful:e};window.sendWatchMessage(t)}function u(){n.selfCoding.bind(n,a).apply(n,r).then(n.delay.bind(n,i)).then(c.bind(n)).then(f,l)}function f(){return t.resolve.apply(t,arguments)}function l(e){if(a&&e&&e.data&&e.data.errMsg==="FALSE"&&!e.data.submitStatus){a=false;return u()}else{return t.reject.apply(t,arguments)}}var t=new $.Deferred;var n=this;var r=arguments;var i=(e&&e.ifShowPassCodeTime||0)/3;var s=e&&e.needRandCode||false;i=window.secKillOn?Math.max(i,1e3):Math.max(i,3e3);u();if(s){t.done(o.bind(this,true)).fail(o.bind(this,false))}return t}function c(e){if(r.isAsync=="1"){return this.getPC12306().confirmSingleForQueue(s,o,e,r.queryLeftNewDTO,i).then(this.getWaitTime.bind(this)).then(this.resultOrderFroDcQueue.bind(this)).then(this.queryMyOrderNoComplete.bind(this))}return this.getPC12306().confirmSingle(s,o,e,r.queryLeftNewDTO,i).then(this.queryMyOrderNoCompleteContinuously.bind(this))}console.log("core_occupy",arguments);var s=this.getPassengerTicketStr(t,n),o=this.getOldPassengerStr(t);var u="";var a=true;var f=window.secKillOn?0:3e3;return this.getPC12306()._getMyPassengers().then(this.delay.bind(this,f)).then(this.checkIfNeedRangCodeOrNot.bind(this,s,o,u,"dc")).then(this.getQueueCount.bind(this,n,r)).then(l.bind(this))}},{key:"getWaitTimeForResign",value:function(){function c(e){console.log("getWaitTimeForResign success:",arguments);var t=Common.deepGet(e,"data.orderId");var i=Common.deepGet(e,"data.msg");if(!t){var s=(new Date).getTime();console.log("----------æ¶é´å·®---------ï¼",s-a);if(s-a>n.queueWaitTimeLimit*1e3&&u){QunarAPI.train.triggerEvent({event:"resignQueueing",data:{isSuccessful:true,type:"3W"}});QunarAPI.train.triggerEvent({event:"stopRefresh"});f=$("#m-occupy-progress-rebook .percentage").html();Common.confirm({title:"å°é©¼æ¸©é¦¨æç¤º",content:"æ¨çè®¢åè¿å¥äºæéç­å¾ç¶æï¼æéäººæ°å¯è½è¾å¤ï¼æ¯å¦ç»§ç»­æéç­å¾ï¼",okText:"ç»§ç»­æé",cancelText:"åæ¶æé",onCancel:p.bind(this),onOk:d.bind(this)})}else if(i){r.reject.apply(r,[i])}else{Common.delay(o).then(l)}}else{r.resolve.apply(r,[t])}}function h(e){if(i>0){i--;Common.delay(o).then(l)}else{r.reject.apply(r,arguments)}}function p(){Common.showLoading("æ­£å¨åæ¶æé...");v()}function d(){QunarAPI.train.triggerEvent({event:"continueResignQueueByUser",data:{isSuccessful:true,type:"3W"}});QunarAPI.train.triggerEvent({event:"refreshBar",data:{progressNum:f}});u=false;l()}function v(){this.getPC12306().cancelQueueNoCompleteMyOrder("dc").then(m,g)}function m(){QunarAPI.train.triggerEvent({event:"cancelResignQueueByUser",data:{isSuccessful:true,type:"3W"}});Common.hideLoading();Common.alert({title:"å°é©¼æ¸©é¦¨æç¤º",content:"åæ¶æéæå",okText:"ç¥éäº",onOk:function(){QunarAPI.train.triggerEvent({event:"gotoDetail"})}})}function g(){QunarAPI.train.triggerEvent({event:"cancelResignQueueByUser",data:{isSuccessful:false,type:"3W"}});if(s>0){s--;v()}else{r.reject.apply(r,arguments)}}var t=this;var n=this,r=$.Deferred(),i=3,s=3,o=2e3,u=true,a=(new Date).getTime(),f="0";var l=function(){return t.getPC12306().queryOrderWaitTime("gc").then(c.bind(t),h.bind(t))};l();return r.promise()}}]);return e}();e.exports=f},function(e,t,n){"use strict";var r="/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAeAAD/7gAOQWRvYmUAZMAAAAAB/9sAhAAQCwsLDAsQDAwQFw8NDxcbFBAQFBsfFxcXFxcfHhcaGhoaFx4eIyUnJSMeLy8zMy8vQEBAQEBAQEBAQEBAQEBAAREPDxETERUSEhUUERQRFBoUFhYUGiYaGhwaGiYwIx4eHh4jMCsuJycnLis1NTAwNTVAQD9AQEBAQEBAQEBAQED/wAARCAC+ASUDASIAAhEBAxEB/8QAagABAAMBAQAAAAAAAAAAAAAAAAECAwQHAQEAAAAAAAAAAAAAAAAAAAAAEAEAAgICAQMCAgoDAAAAAAAAAQIRAyESBDFBE1EiFAVhcYGRsTJCYrIjoXIVEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwD0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHDPn7IiLdIxM39ZxxT96fx151zeKVjE1iJ7Zj7vrxGMOS81msRMdZmt5rE2iIza2J9Y94abaT03xqriK/FMR6x6e0A3nzdtbdZiluInNLTMc2iv0V/H3+HXfFIts7fzTMR9s/qc9fmjtSZzqrObTMRWM1vHOcfQmLfhdNI7Ra0TxH/fj2B1R582mIrGusYic2viOZ9uITbzb13zTpnX3jX2zz2ly1++czE5i2uOeZ4tOfaFrR28uYiZm0b6T1/tiOZB0V8vbW1qbtfS3W168+0fVnH5jedc2itYmOuImZnOYziMRKs0r88xqv3iuu8WvecxW059WPxz023i8TSl4mJr/AFTMW9P08wDsp5t51d5rWbdorNc2rjMe+aqV/MNkzeZpTFP7+ePX25U00n8PMT2mbWrF60jNo6RiYn9eGdKzbZtr/sjM/dNac88x6TxgHfbya0rHeLRaY7TitpiP24U8bzK7qVm0TF7TicVnr6/X0U8rZe+unj68/Jtj7oniYrEc/qyp4940bK4iaaN3EVt/RePb9oLa/O27NlqU1Z6xM+uPScesr+L5dt8xW1Os9e2YniecOP79Vr57UvNZikRxMza84hv4Or4tl67Jn5tcY65jrNZ5jHAO9nt2WpNIrET2ticzjj6x9TRt+bVGzrNe3tLDzsRbx7T7ba8/oBSfzDbG3p8XGM4+7P8Ag02eXam6NURTn+q18e2eY9nBNLfFN7ViJtM9Ptrzz7e//Dbf8nzxbE5rFccfSImQb6fOnbtjXisZmI/mifafT9ytPzC969orrrn2tsiJ/gw8bXeJ8eZieZzHOeIic8Y4U8W8R1ps2fFTpNs4jOe36YkHfHlXjVbZa2r7ZiPttMxz9ZiJZf8AoW7zTFOIz2zbH+GWG3vbRvrSZ2a+1IpbERn3n0jnlOyu3VsnZs7RFq4iLbIzOP4wDsjyL2ik1it+0TMxFuePTHbClvM3fJTXXVGb5x91fbmfSZYa4ik+FOyOs42ROY9pjjKum2qvw3jEY3WicfS3oDvjdM+TOnrxFO3b9uGzGJ1/iZjP+zpGYxPpmfdsAAAAAAAAAAAACDCQEYiTCQEYEgIwjrH0WARgwkBGBICMRPqYj190gIEgIMJARgSAgwkBAkBCQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//2Q==";var i=n(359);var s=n(387);var o=n(392);var u=n(313);var a=function(t,n){this.retryCount=3;this.type=t;this.notChangeSelfCodeMethod=n===false?false:true};a.prototype={constructor:a,run:function(){return u.execAsyncFunctionInApproximateInterval(this._autoValidateCode,this,this.retryCount,4*1e3,true)},_autoValidateCode:function(){this.selfCoding=new o;this.codeDeferred=$.Deferred();this._getCode();return this.codeDeferred.promise()},_getCode:function(){function t(e){window.sendWatchMessage({key:"hyBuy_"+this.type+"_3w_getAutoCode_getCode",isSuccessful:true});this._selfCode(e)}function n(){window.sendWatchMessage({key:"hyBuy_"+this.type+"_3w_getAutoCode_getCode",isSuccessful:false});this.codeDeferred.reject(arguments)}this._getFigureBase64().then(t.bind(this),n.bind(this))},_getFigureBase64:function(){function o(e){if(e.imageData==r){t.reject("è·åéªè¯ç å¤±è´¥");if(i.versionFlag){Common.setWifi()}return}t.resolve({image:e.image,imageData:e.imageData})}function u(e){t.reject(e)}var t=$.Deferred();var n=pc12306.getPassCodeUrl(this.type,this.notChangeSelfCodeMethod);(new s(n)).then(o,u);return t.promise()},_selfCode:function(t){function n(e){window.sendWatchMessage({key:"hyBuy_"+this.type+"_3w_getAutoCode_selfCode",isSuccessful:true});if(pc12306.isAsync()=="1"){setTimeout(this._checkCode.bind(this,e),4*1e3)}else{this._checkCode(e)}}function r(){window.sendWatchMessage({key:"hyBuy_"+this.type+"_3w_getAutoCode_selfCode",isSuccessful:false});this.codeDeferred.reject("","SelfCode failed after 3 times retry")}u.execAsyncFunctionInApproximateInterval(this.selfCoding.getCode.bind(this.selfCoding,t.imageData),this,1,0,true).then(n.bind(this),r.bind(this))},_checkCode:function(t){function r(){window.sendWatchMessage({key:"hyBuy_"+this.type+"_3w_getAutoCode_checkLogin",isSuccessful:true});this.codeDeferred.resolve(t)}function i(){window.sendWatchMessage({key:"hyBuy_"+this.type+"_3w_getAutoCode_checkLogin",isSuccessful:false});this.codeDeferred.reject("","CheckCode failed after 3 times retry")}var n={login:1,book:2};u.execAsyncFunctionInApproximateInterval(pc12306._checkRandCodeAnsyn.bind(pc12306,n[this.type],t,this.notChangeSelfCodeMethod),this,1,0).done(r.bind(this)).fail(i.bind(this))}};e.exports=a},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var a=n(360);var f=n(398);var l=n(396);var c=l.PcAjaxFactory;var h=function(e){function t(e,n){s(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.origin="https://cx.12306.cn";r.injectDFP=new f(r.origin);return r}u(t,e);i(t,[{key:"getId",value:function(t){return t.replace(/^https:\/\/cx\.12306\.cn\//,"").split("?")[0]}},{key:"addJsonAttr",value:function(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return t}},{key:"addSubmitToken",value:function(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return t}},{key:"checkAndSetJCookie",value:function(){return $.Deferred().resolve()}}]);return t}(c);var p=function(){function e(){s(this,e);this.origin="https://cx.12306.cn"}i(e,[{key:"ajax",value:function t(e,n){function r(){console.log("ajax path:",e);console.log("ajax success:",arguments);var t=$.Deferred();t.resolve.apply(t,arguments);return t}function i(){console.log("ajax path:",e);console.log("ajax fail:",arguments);var t=$.Deferred();t.reject.apply(t,arguments);return t}var t=new h(e,n);return t.run().then(r,i)}},{key:"commonSuccess",value:function(t){var n=$.Deferred();if(t.status){n.resolve(t.data||t)}else{n.reject.apply(n,arguments)}return n.promise()}},{key:"post",value:function(t,n,i){var s={};r(s,n||{},i||{});return this.ajax(t,{type:"post",data:s})}},{key:"get",value:function(t,n,i){var s={};r(s,n||{},i||{});return this.ajax(t,{type:"get",data:s})}},{key:"memberPointQuery",value:function(){var t="/tlcx/memberInfo/memberPointQuery";var n={queryType:0};return this.post(t,n)}},{key:"runCheckLogin",value:function(){return this.conf().then(this.uamauthclient.bind(this)).then(this.checkLogin.bind(this))}},{key:"conf",value:function(){var t="/tlcx/login/conf";return this.post(t).then(this.commonSuccess)}},{key:"checkLogin",value:function(){var t="/tlcx/login/checkLogin";return this.post(t).then(this.commonSuccess)}},{key:"uamauthclient",value:function(){return pc12306.uamtk().then(this._uamauthclient.bind(this))}},{key:"_uamauthclient",value:function(t){function s(e){e.setRequestHeader("Cookie","tk="+t)}var n="/tlcx/uamauthclient";var r={tk:t};if(!t)return $.Deferred().reject("tkEmpty");var i={params:r,type:"post",beforeSend:s};return this.ajax(n,i).then(this.post.bind(this,n,r))}},{key:"queryMemberAssignee",value:function(){var t="/tlcx/assignee/queryMemberAssignee";return this.post(t)}},{key:"queryMemberIntegration",value:function(){var t="/tlcx/memberInfo/queryMemberIntegration";return this.post(t)}},{key:"getProviceAndCity",value:function(){var t="/tlcx/main/getProviceAndCity";var n={code:11};return this.get(t,n)}},{key:"getLoginInfo",value:function(){var t="/tlcx/regist/getLoginInfo";return this.post(t)}},{key:"addMemberIntegration",value:function(t){var n="/tlcx/memberInfo/addMemberIntegration";var r={company:"åä½",education:3,marriage_status:0,job:"èå¡",nation:"æ°æ",occupation:9,state:11,city:2802,addressName:"ä¸éå±¯",postalCode:"100000",homePhone:"111111",faxNo:"222222",salary:5,consumePwd:"123456"};return this.post(n,r,t)}},{key:"editMemberIntegration",value:function(t){var n="/tlcx/memberInfo/editMemberIntegration";var r={company:"",education:3,marriage_status:0,job:"èå¡",nation:"æ°æ",occupation:9,state:11,city:2802,addressName:"",postalCode:"100000",homePhone:"",faxNo:"222222",salary:5,consumePwd:"123456"};return this.post(n,r,t)}},{key:"updateConsumePwd",value:function(t){var n="/tlcx/memberInfo/updateConsumePwd";var r={pwdFlag:"1",oldPwd:"",newPwd:""};return this.post(n,r,t)}},{key:"pointSimpleQuery",value:function(t){var n="/tlcx/memberInfo/pointSimpleQuery";var r={queryType:0,queryStartDate:"20181120",queryEndDate:"20181220",pageIndex:1,pageSize:10};return this.post(n,r,t)}},{key:"PointDetailQuery",value:function(t){var n="/tlcx/memberInfo/PointDetailQuery";var r={};return this.post(n,r,t)}},{key:"trainRetroClaimQuery",value:function(t){var n="/tlcx/memberInfo/trainRetroClaimQuery";var r={queryStartDate:"20181120",queryEndDate:"20181220",pageIndex:1,pageSize:10};return this.post(n,r,t)}},{key:"trainRetroClaim",value:function(t){var n="/tlcx/memberInfo/trainRetroClaim";var r={station_train_code:"K1565",train_date:"20181122",board_station_telecode:"BDC",arrive_station_telecode:"BTC",seat_type_code:1,coach_no:"02",seat_name:"040",ticket_price:80,sequence_no:"ED43935872",ticket_type:1,ticket_info:"21152301721201Q047242"};return this.post(n,r,t)}},{key:"queryPassenger",value:function(t){var n="/tlcx/assignee/queryPassenger";var r={pageIndex:1,pageSize:10};return this.post(n,r,t)}},{key:"addMemberAssignee",value:function(t){var n="/tlcx/assignee/addMemberAssignee";var r={pList:""};return this.post(n,r,t)}},{key:"addMemberAssigneeIndividual",value:function(t){var n="/tlcx/assignee/addMemberAssignee";var r={pList:"",transferee_id:"",cell_phone:"",email_address:""};return this.post(n,r,t)}},{key:"updateMemberAssignee",value:function(t){var n="/tlcx/assignee/updateMemberAssignee";var r={pList:"",transferee_id:"",cell_phone:"",email_address:""};return this.post(n,r,t)}},{key:"deleteMemberAssignee",value:function(t){var n="/tlcx/assignee/deleteMemberAssignee";var r={transferee_id:"",name:"å¼ ä¸",id_type:"1",id_no:""};return this.post(n,r,t)}}]);return e}();e.exports=p},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var o=n(360);var u=n(406);var a=n(412);var f=n(365)("util:mobile:wireless12306");var l=n(313);var c=function(){function e(){s(this,e);this.abortFlag=false;this.faceDectionInitData={}}i(e,[{key:"_fetch",value:function(t,n,i){i=r({data:n},i);this.lastFetcher=new u(t,i);var s=Common.logToProxy.bind(Common,"mobile/"+t,n);return this.lastFetcher.run().always(s)}},{key:"abortAll",value:function(){this.abortFlag=true}},{key:"allowAll",value:function(){this.abortFlag=false}},{key:"post",value:function(t,n){return this._fetch(t,n,{type:"post"})}},{key:"get",value:function(t,n){return this._fetch(t,n,{type:"get"})}},{key:"login",value:function(t,n){f("login arguments:",arguments);var r={user_name:t,password:Common.MD5(n),dfpStr:""};return this.post("login",r)}},{key:"logout",value:function(){return this.post("logout",{})}},{key:"queryLeftTicket",value:function(t,n){function o(e){return this._fetch(e,i,n)}function u(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=e.ticketResult,n=e.fallbackOperationType,r=e.error_msg;if(!Common.isArrayNotEmpty(t)&&n){f("retry queryLeftTicket",n);a(n);return o.call(this,n)}else if(r){return $.Deferred().reject(r)}else return e}function a(e){var t="wireless.queryLeftTicket.key";if(e)Common.storeInfo(t,e,true);else return Common.getStoredInfo(t)||"queryLeftTicket"}n=r({type:"get"},n);var i={train_date:t.train_date,purpose_codes:"00",from_station:t.from_station,to_station:t.to_station,station_train_code:"",start_time_begin:"0000",start_time_end:"2400",train_headers:"QB#",train_flag:"",seat_type:"0",seatBack_Type:"",ticket_num:"",dfpStr:""};f("queryLeftTicket:",i);var s=a();return o.call(this,s).then(u.bind(this))}},{key:"checkOrderInfo",value:function(t){function n(e){var n=r({},t,e);return n}return this._checkOrderInfo(t.location_code).then(n)}},{key:"_checkOrderInfo",value:function(t){f("checkOrderInfo:",arguments);var n={tour_flag:"dc",secret_str:t};return this.post("checkOrderInfo",n)}},{key:"confirmPassengerInfoSingle",value:function(t){var n=60;var r=this;var i={result:$.Deferred(),extraTry:{interval:1500,times:n-1},step1_confirmPassengerInfoSingle:function(){r._confirmPassengerInfoSingle(t).then(this.step1_success.bind(this),this.step1_fail.bind(this))},step1_success:function(t){if({}.toString.call(t.ticketResult)==="[object Array]"&&t.ticketResult.length>0){this.step1_occupationSuccess(t)}else{Common.delay(2*1e3).then(this.step2_getWaitTime.bind(this))}},step1_occupationSuccess:function(t){this.result.resolve(t)},step1_fail:function(t){this.result.reject(t)},step2_getWaitTime:function(){r.getWaitTime().then(this.step2_success.bind(this),this.step2_fail.bind(this))},step2_success:function(t){function n(e){var t=e.indexOf("å¦æ¨ç¡®è®¤");if(t>1)e=e.substr(0,t-1)+"ã";return e}if(t.orderId===null){if(this.extraTry.times<=0){this.result.reject("queueing");return}if(t.error_msg){this.result.reject(n(t.error_msg));return}this.extraTry.times--;setTimeout(this.step2_getWaitTime.bind(this),this.extraTry.interval)}else{this.step3_confirmSingleSuccess(t.orderId)}},step2_fail:function(t){if(this.extraTry.times<=0||t!=="åéè¯·æ±å¤±è´¥")return this.result.reject(t);this.extraTry.times--;setTimeout(this.step2_getWaitTime.bind(this),this.extraTry.interval*2)},step3_confirmSingleSuccess:function(t){r.confirmSingleSuc(t).then(this.step3_success.bind(this),this.step3_fail.bind(this))},step3_success:function(t){this.result.resolve(t)},step3_fail:function(t){this.result.reject(t)},run:function(){this.step1_confirmPassengerInfoSingle();return this.result}};return i.run()}},{key:"_confirmPassengerInfoSingle",value:function(t){f("confirmPassengerInfoSingle:",arguments);var n={from_station:"VNP",train_no:"240000G1110W",bed_level:"",from_station_telecode:"VNP",save_passenger_flag:"Y,Y",to_station:"AOH",seat_type_codes:"O,O",dynamicProp:"0+0+0+0",location_code:"",tour_flag:"dc",passenger_id_nos:"13040319520724214X,21021319830307601X",start_time:"08:35",pass_code:"",mobile_nos:"15306542350",station_train_code:"G111",purpose_codes:"00",bed_level_order_num:"0",ticket_type_order_num:"2",passenger_id_types:"1,1",p_str:"",yp_info:"",ticket_types:"3,1",passenger_names:"å¯æçº¢,ææ¥æ",to_station_telecode:"AOH",choose_seats:"",train_date:"20171229"};r(n,t);f("confirmPassengerInfoSingle:",n);return this.post("confirmPassengerInfoSingle",n)}},{key:"getWaitTime",value:function(){f("getWaitTime:",arguments);var t={tourFlag:"dc"};return this.post("getWaitTime",t)}},{key:"confirmSingleSuc",value:function(t){f("confirmSingleSuc:",arguments);var n={orderId:t};return this.post("confirmSingleSuc",n)}},{key:"queryPassenger",value:function(){return this.post("queryPassenger",{})}},{key:"querySinglePassenger",value:function(t){var n={name:"",card_type:"",card_no:"",passenger_type:""};var i=r(n,t);return this.post("querySinglePassenger",i)}},{key:"modifyUserInfo",value:function(t,n){function r(e){$.extend(t,{pass_word:e.result.toLowerCase(),"baseDTO.user_name":n.user_name,country_code:"CN",id_type_code:t.card_type,id_no:t.card_no,mobile_no:n.mobile,user_type:t.passenger_type,department:"",IVR_passwd:"",address:"",school_class:"",email:"",pwd_answer:"",preference_card_no:"",postalcode:"",pwd_question:"",phone_no:""});return t}function i(e){return this.post("modifyPassenger",e)}return a.encode(t.pass_word).done(r).done(i.bind(this))}},{key:"modifyPassenger",value:function(t){var n={preference_to_station_name:"",country_code:"CN",school_code:"",old_name:"",name:"",born_date:"",userCountry:"",department:"",email:"",enter_year:"",school_class:"",student_no:"",school_system:"",preference_card_no:"",old_card_type:"",card_no:"",address:"",phone_no:"",province_code:"",school_name:"",preference_from_station_name:"",preference_to_station_code:"",old_card_no:"",postalcode:"",province_name:"",auditStatus:"å·²éè¿",sex_code:"",preference_from_station_code:"",studentInfoList:[],passenger_type:"",card_type:"",mobile_no:""};var r=$.extend(n,t);return this.post("modifyPassenger",r)}},{key:"deletePassenger",value:function(t,n,r){var i={name:t,card_type:r,card_no:n,passenger_type:"1"};return this.post("deletePassenger",i)}},{key:"addPassenger",value:function(t){var n={userCountry:"ä¸­å½CHINA",name:"",sex_code:"M",born_date:"19800101",country_code:"CN",card_type:"",card_no:"",passenger_type:"",mobile_no:"",phone_no:"",email:"",address:"",postalcode:"",province_code:"",school_code:"",department:"",school_class:"",student_no:"",school_system:"",enter_year:"",preference_card_no:"",preference_from_station_code:"",preference_to_station_code:"",preference_from_station_name:"",preference_to_station_name:"",old_name:"",old_card_type:"",old_card_no:"",province_name:"",school_name:""};var i=r(n,t);return this.post("addPassenger",i)}},{key:"initUser",value:function(){return this.post("initUser",{})}},{key:"postPassCode",value:function(){return this.post("postPassCode",{})}},{key:"changeUser",value:function(){var t={IVR_passwd:"",preference_to_station_name:"",country_code:"CN",school_code:null,name:"éæé",born_date:"19600509",department:"",email:"bi79285518weizen4@163.com",enter_year:"2017",pass_word:"7b47b0ec8416a21913077568127c060e",pwd_answer:"",id_no:"211103196005090044",school_class:"",student_no:"",school_system:"1",preference_card_no:"",address:"",id_type_code:"1",phone_no:"",province_code:null,preference_from_station_name:"",preference_to_station_code:"",pass_code:"6066",postalcode:"",pwd_question:"",sex_code:"F",preference_from_station_code:"",mobile_no:"15375995431",user_type:"1"};return this.post("changeUser",t)}},{key:"queryOrder",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i={query_class:t};switch(t){case 1:break;case 2:var s=60,o=new Date,u=new Date(o.valueOf()-s*24*3600*1e3);var a=Common.formatDate(o,"YYYYMMdd"),f=Common.formatDate(u,"YYYYMMdd");var l={passenger_id_type:"a",rows_number:8,train_code:"",from_train_date:"",passenger_name:"",seat_msg:"",status_flag:"",passenger_id_no:"",to_train_date:"",page_no:0,sequence_no:"",from_reserve_date:f,to_reserve_date:a};r(i,l,n);break;case 5:if(typeof n==="string")n={sequence_no:n};r(i,n);break;default:}return this.post("queryOrder",i)}},{key:"queryHistoryOrder",value:function(t){var n=60,i=new Date,s=new Date(i.valueOf()-24*3600*1e3),o=new Date(s.valueOf()-n*24*3600*1e3);var u=Common.formatDate(s,"YYYYMMdd"),a=Common.formatDate(o,"YYYYMMdd");var f={rows_number:8,train_code:"",from_reserve_date:"",passenger_name:"",seat_msg:"",status_flag:"",passenger_id_no:"",to_reserve_date:"",page_no:0,sequence_no:"",query_class:2,from_train_date:a,to_train_date:u};r(f,t);return this.post("queryHistoryOrder",f)}},{key:"refundTicketRequest",value:function(t){var n=t.batch_no,r=t.coach_no,i=t.sequence_no,s=t.seat_no;var o={batch_no:n,coach_no:r,sequence_no:i,seat_no:s};return this.post("refundTicketRequest",o)}},{key:"submitTicketRequest",value:function(t){var n=t.batch_no,r=t.coach_no,i=t.sequence_no,s=t.seat_no;var o={batch_no:n,coach_no:r,sequence_no:i,seat_no:s};return this.post("submitTicketRequest",o)}},{key:"cancelOrder",value:function(t,n){var r={batch_no:"0",coach_no:"00",seat_no:"0000",sequence_no:t,cancel_flag:n};return this.post("cancelOrder",r)}},{key:"checkOrderInfoForResign",value:function(t,n){f("checkOrderInfoForResign:",arguments);var r={secret_str:t,tour_flag:n};return this.post("checkOrderInfo",r)}},{key:"requestChange",value:function(t){f("requestChange:",arguments);var n=t;return this.post("requestChange",n)}},{key:"getWaitTimeForResign",value:function(t){f("getWaitTimeForResign:",arguments);var n={tourFlag:t};return this.post("getWaitTime",n)}},{key:"confirmResignSuc",value:function(t){f("confirmResignSuc:",arguments);var n={orderId:t};return this.post("confirmResignSuc",n)}},{key:"confirmChangeTicket",value:function(t){f("confirmChangeTicket:",arguments);var n={pay_type:t.pay_type,lose_time:t.lose_time,secret_str:"åå°å¼å³è·åå¤±è´¥ï¼æéç½®å¼å³ä¸ºfalse",batch_no:t.batch_no,sequence_no:t.sequence_no,checkResignExpress:"N"};return this.post("confirmChangeTicket",n)}},{key:"checkUser4Regist",value:function(t){var n="19000101";var i=t.user_name,s=t.name,o=t.id_no,u=t.mobile_no;var a=Common.crypto.enc.Hex.stringify(Common.crypto.MD5(t.password));var f={user_name:i,name:s,id_no:o,password:a,mobile_no:u,born_date:n};var l={pwd_question:"",pwd_answer:"",IVR_passwd:"",pass_code:"",user_type:"1",id_type_code:"1",sex_code:o[16]%2===1?"M":"F",country_code:"CN",email:"",province_code:"11",school_code:"",department:"",school_class:"",student_no:"",enter_year:(new Date).getFullYear()+"",school_system:"4",postalcode:"",address:"",preference_from_station_code:"",preference_to_station_code:"",preference_card_no:""};r(f,l);return this.post("checkUser4Regist",f)}},{key:"registUser",value:function(t){var n=t.id_no.substring(6,14);var i=t.user_name,s=t.name,o=t.id_no,u=t.mobile_no,a=t.mo_msg,f=t.mo_content;var l=Common.crypto.enc.Hex.stringify(Common.crypto.MD5(t.password));var c=t.randCode;var h={user_name:i,name:s,id_no:o,password:l,mobile_no:u,pass_code:c,born_date:n,mo_msg:a,mo_content:f};var p=Common.getUserInfo()||{};var d={"baseDTO.user_name":p.user_name||"",user_type:"1",id_type_code:"1",sex_code:o[16]%2===1?"M":"F",country_code:"CN",email:"",province_code:"11",school_code:"",department:"",school_class:"",student_no:"",enter_year:(new Date).getFullYear()+"",school_system:"4",preference_from_station_code:"",preference_to_station_code:"",preference_card_no:"",pwd_question:"",pwd_answer:"",phone_no:"",address:"",postalcode:"",IVR_passwd:"",isChecked:"1",is_mo:"Y",fingerprint:"åå°å¼å³è·åå¤±è´¥ï¼æéç½®å¼å³ä¸ºfalse"};r(h,d);return this.post("registUser",h)}},{key:"getPay",value:function(t,n,r,i){var s={sequence_no:t,batch_no:r,order_timeout_date:n,pay_start:"1"};i?s.pay_start="2":null;return this.post("epay",s)}},{key:"queryFinishOrderTrack",value:function(t){var n={sequence_no:t,query_where:"H"};return this.post("queryOrderDetail",n)}},{key:"getPassCodeNew",value:function(t){var n={rand:"randp",module:"passenger",location_code:t};return this.post("getPassCodeNew",n)}},{key:"stationTrainQuery",value:function(t){var n={train_start_date:"20180101",train_station_code:"BJP",startTimes:"0000--2400",stopTimes:"0000--2400",trainType:"QB#"};r(n,t);return this.post("czxx.query",n)}},{key:"queryTrainInfo",value:function(t){var n={start_train_date:"20161115",train_code:"G1"};r(n,t);return this.post("queryTrainInfo.query",n)}},{key:"startSellTicketTimeQuery",value:function(t,n){var r={train_start_date:Common.formatDate(new Date,"YYYY-MM-dd-"),train_station_name:t,station_telecode:n};return this.post("qsscx.query",r)}},{key:"checkMobileCode",value:function(t,n){var r={pass_code:"",mobile_no:t,check_code:n};return this.post("checkMobileCode",r)}},{key:"cancelInQueueOrder",value:function(t){var n={tour_flag:t};return this.post("cancelInQueueOrder",n)}},{key:"initNewSysCache",value:function(){var t={};return this.post("initNewSysCache",t)}},{key:"initStation",value:function(){var t={};return this.post("initStation",t)}},{key:"getUserStatus",value:function(){var t={};return this.post("getUserStatus",t)}},{key:"queryMemberIntegration",value:function(){var t={user_name:""};return this.post("memberInfo.queryMemberIntegration",t)}},{key:"getCityInProvince",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:11;var n={province_code:t};return this.post("getCityInProvince",n)}},{key:"isFaceVerified",value:function(){var t=$.Deferred();var n=Common.getUserInfo()||{};if(n.faceIdentified)return t.resolve(true);return t.reject(false)}},{key:"psrQuery",value:function(){var t={pageIndex:1,pageSize:10};return this.post("psr.query",t)}},{key:"faceDetectionInit",value:function(t,n){function s(e){var t=$.Deferred();console.log("faceDetectionInit success:",arguments);return t.resolve.apply(t,arguments)}function o(e){var t=$.Deferred();console.log("faceDetectionInit fail:",arguments);return t.reject.apply(t,arguments)}var r=n;var i={metaInfo:JSON.stringify(r),sceneId:t||"5",terminalId:""};return this.post("faceDetectionInit",i).then(s,o)}},{key:"trivalUserImage",value:function(){var t="http://172.20.10.9:8090/test?procedure=getImgData";return o(t,{type:"POST",data:{type:"2"}}).then(function(e){console.log("trival succ",e);var t=decodeURIComponent(e.data);return $.Deferred().resolve(t)},function(e){console.log("trival err",e);return $.Deferred().reject(e)})}},{key:"activateMemberByFaceDetection",value:function(t){var n="activateMemberByFaceDetection";console.log("sceneId 1, operationType:",n);return this._fa(t,"1",n)}},{key:"faceDetectionAuthenticate",value:function(t){var n="faceDetectionAuthenticate";console.log("sceneId 5, operationType:",n);return this._fa(t,"5",n)}},{key:"faceDetectionAuthenticateAsync",value:function(t){var n="faceDetectionAuthenticateAsync";console.log("sceneId 9, operationType:",n);return this._fa(t,"9",n)}},{key:"closeAccount",value:function(t,n){var i="user.closeAccount";var s={closeType:"2",destroyReasons:"1|ä½¿ç¨ä¸ä¾¿#2|å®å¨æéç§é¡¾è#999|",uId:"",uName:"",uType:""};var o=r({},s,n);console.log("sceneId 7, operationType:",i,o);return this._fa(t,"7",i,o)}},{key:"_fa",value:function(t,n,i,s){function a(e){var t=$.Deferred();console.log("_fa success:",arguments);return t.resolve.apply(t,arguments)}function f(e){var t=$.Deferred();console.log("_fa fail:",arguments);return t.reject.apply(t,arguments)}var o={bizId:t.bizId,zimId:t.zimId,sceneId:n||""};var u={bioId:"ZOLOZ",bioType:1,biz:{encrypt:1,imageType:2,liveImage:t.biz&&t.biz.liveImage},terminalId:""};if(t.biz&&t.biz.liveImage){r(o,u)}if(s){r(o,s)}return this.post(i,o).then(a,f)}},{key:"identityVerificationQueryProgress",value:function(t,n){function r(e){console.log("abortRetry:",arguments);if(e)return true;return false}return l.execAsyncFunctionInApproximateInterval(this._identityVerificationQueryProgress,this,5,2*1e3,false,[t,n],r)}},{key:"_identityVerificationQueryProgress",value:function(t,n){function i(e){var t=$.Deferred();if(e&&e.succ_flag=="1"&&e.verify_result&&e.verify_result.auth_flag=="0"){return t.resolve(e)}var n=e&&e.verify_result&&e.verify_result.verify_error_msg;return t.reject(n)}var r="identityVerification.queryProgress";console.log("sceneId "+n+", operationType:",r);return this._fa(t,n,r).then(i.bind(this))}},{key:"pcScanQr",value:function(t){var n={qrStr:t,qrType:"login"};return this.post("pc.pcscanqr",n)}},{key:"qrCallBack",value:function(){var t={qrType:"login"};return this.post("pc.qrCallBack",t)}}]);return e}();e.exports=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var o=n(407);var u=a(o);var l=n(360);var c=n(388);var h=n(408);var p=n(410);var d=n(365)("util:mobile:Fetcher");var v=function(){function e(t,n){function r(e,t){if(!(e&&e.data)){return e}if(!e.data.requestData){e.dataTemp={requestData:[e.data]};e.data=e.dataTemp;delete e.dataTemp}if(!e.data.operationType){e.data.operationType=t}return e}f(this,e);this.origin="https://mobile.12306.cn";this.URL=this.origin+"/otsmobile/app/mgs/mgw.htm";this.operationTypePrefix="com.cars.otsmobile.";this.operationTypeKey=t;this.operationType=this.operationTypePrefix+t;this.settings=r(n,this.operationType);this.settings.responseNeedBase="not";this.originSettings=null;this.ajaxObj=null;this.encryptResult={};this.configKey="json.hy.12306.mobileDevice";this.osSpecificConfig={ios:{platform:"IOS",osType:"i",nbappid:"60000001",InjectDFP:p},android:{platform:"ANDROID",osType:"a",nbappid:"60000005",InjectDFP:h}};this.requestHeaders={Host:"mobile.12306.cn",nbappid:"60000001",WorkspaceId:"product",AppId:"9101430221728",tk:"y9iPkfmlpbPHhxRn0-8N4YuuHwJP971G1eSVZkhA0Fkhul2l0",Accept:"*/*",nbversion:"1.0.5.0","Accept-Language":"en-us","Accept-Encoding":"gzip, deflate",Platform:"ANDROID","Content-Type":"application/x-www-form-urlencoded;charset=utf-8",UniformGateway:"https://mobile.12306.cn/otsmobile/app/mds/mgw.htm",Connection:"keep-alive","User-Agent":"android"};this.shouldServerSign=false}s(e,[{key:"getConfig",value:function(){return Common.getAppConfig([this.configKey])}},{key:"applyConfig",value:function(t){var n="auto";var r="real";if(t[this.configKey]){try{var i=JSON.parse(t[this.configKey]);if(i.os){n=i.os;r=i.SDKElementType}}catch(s){d(this.configKey+" parse fail")}}if(n==="auto"){if(QApp.sniff.android){n="android"}else{n="ios"}}this.osSpecific=this.osSpecificConfig[n];this.injectDFP=new this.osSpecific.InjectDFP({SDKElementType:r})}},{key:"appendRequestBody",value:function(){var t=this.shouldAddRequestBody();if(t){var n=this.settings.data.requestData[0];this.settings.data.requestData=[{_requestBody:n}]}return this.settings}},{key:"shouldAddRequestBody",value:function(){var t=this._isGetRequest();return!t}},{key:"setRequestHeader",value:function(t){for(var n in this.requestHeaders){t.setRequestHeader(n,this.requestHeaders[n])}}},{key:"getTimeStr",value:function(){function t(e){var t={time_str:Common.formatDate(e,"YYYYMMddHHMISS"),ts:this.getTs(e.getTime())};return t}return Common.getServerTime().then(t.bind(this))}},{key:"getOsType",value:function(){return this.osSpecific.osType}},{key:"getDeviceNo",value:function(){return this.getDid()}},{key:"getCheckCode",value:function(t){var n=this.getDeviceNo();var r="F"+t.time_str+n;var i=Common.crypto.enc.Hex.stringify(Common.crypto.MD5(r));return i}},{key:"getVersionNO",value:function(){return"4.1.9"}},{key:"getUserNameForLogin",value:function(){if(this.operationTypeKey!=="login")return"";return this.settings.data.requestData[0].user_name}},{key:"getUserName",value:function(){var t=this.getUserNameForLogin();if(t)return t;var n=Common.getUserInfo()||{};t=n.user_name||"";return t}},{key:"prepareParams",value:function(){function o(){function e(e){d("getSign success",e);this.settings.data.sign=e;return e}return r.then(this.getSign.bind(this)).then(e.bind(this))}function u(){return $.Deferred().resolve(this.settings,this.requestHeaders)}var t=[];var n=[];var r=this.getTimeStr();var i=r.then(this.getCheckCode.bind(this));t.push(r);t.push(this.getDeviceNo());t.push(i);t.push(this.getVersionNO());n.push(this.getAppId());n.push(this.getDid());n.push(r);n.push(this.getTk());n.push(this.getNbappid());n.push(this.getNbversion());var s=$.when.apply($,t).then(this.enhanceSettings.bind(this)).then(this.appendRequestBody.bind(this)).then(o.bind(this));n.push(s);return s.then($.when.apply.bind($.when,$,n)).then(this.appendHeaders.bind(this)).then(u.bind(this))}},{key:"enhanceSettings",value:function(t,n,r,i){var s={time_str:t.time_str,os_type:this.getOsType(),mobile_no:"",device_no:n,user_name:this.getUserName(),check_code:r,version_no:i};this.settings.data.requestData[0].baseDTO=s;this.settings.data.ts=t.ts;var o=/(queryLeftTicket|login|confirmPassengerInfoSingle|requestChange|confirmPassengerInfoBack)/;if("dfpStr"in this.settings.data.requestData[0]||o.test(this.operationTypeKey)){var u=this.injectDFP.getStoredDFPStr();if(u&&this.settings.ipMode!=="group"){this.settings.data.requestData[0].dfpStr=u}}return this.settings}},{key:"getAppId",value:function(){return"9101430221728"}},{key:"getDid",value:function(){function t(e){var t=e.gid;var n=Common.MD5(t).substr(0,24);return n}function n(e){var t="WiZ6+aYjBBgDAKVP5d6ifake";return t}return Common.getDeviceNoFromCache()||Common.getDeviceInfo().then(t.bind(this),n.bind(this))}},{key:"getUserAgent",value:function(){return navigator.userAgent.replace(/Qunar[ia]Phone\/\d+/i,"")}},{key:"getTs",value:function(t){var n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","+","/"];var r=Math.pow(2,6);var i=[];var s=r;var o=-1;do{s--;o=63&t;i[s]=n[o];t=Math.floor(t/64)}while(t!=0);var u=i.slice(s,r).join("");return u}},{key:"getTk",value:function(){var t=Common.getUserInfo()||{};var n=t.tk||"";return n}},{key:"getNbappid",value:function(){return this.osSpecific.nbappid}},{key:"_getSignForQueryLeftTicket",value:function(t,n,r){var s=n;if((typeof s==="undefined"?"undefined":i(s))==="object")s=JSON.stringify(s);var o="bea2c6393eaeb9b76b666c421f4b615f";var u=o+"&operationType="+t+"&requestData="+s+"&ts="+r;d("str:",u);var a=Common.MD5(u);return a}},{key:"getSignForQueryLeftTicket",value:function(t){var n=this.settings.data.requestData;return this._getSignForQueryLeftTicket(this.operationType,n,t.ts)}},{key:"getStrForSign",value:function(t){var n=this.settings.data.requestData;if((typeof n==="undefined"?"undefined":i(n))==="object"){n=JSON.stringify(n)}n=Common.base64Encode(n);var r="Operation-Type="+this.operationType+"&Request-Data="+n+"&Ts="+t.ts;return r}},{key:"getSign",value:function(t){switch(this.operationTypeKey){case"queryLeftTicket":case"queryLeftTicketO":case"queryLeftTicketA":return this.getSignForQueryLeftTicket(t);case"confirmPassengerInfoSingle":return this.getSignAsync(t);default:if(this._isGetRequest()){return this.getSignForQueryLeftTicket(t)}else return this.getSignSync(t)}}},{key:"getSignSync",value:function(t){if(this.shouldServerSign)return this.getSignAsync(t);var n=this.getStrForSign(t);var r="bea2c6393eaeb9b76b666c421f4b615f";n=r+"&"+n;var i=Common.MD5(n);return i}},{key:"getSignAsync",value:function(t){function i(){switch(r){case"confirmPassengerInfoSingle":return u.default.signForPlaceOrder(n);default:return u.default.sign(n)}}function s(e){return e.data}var n=this.getStrForSign(t),r=this.operationTypeKey;return i().then(s)}},{key:"getNbversion",value:function(){return"1.0.3.0"}},{key:"getContentType",value:function(){var t="application/x-www-form-urlencoded;charset=utf-8";var n="application/json";var r=this._isGetRequest()?t:n;return r}},{key:"removeSomeHeaders",value:function(){if(!this._isGetRequest())return;var t=["Ts","Content-Length","Sign","Operation-Type","x-mgs-encryption","needLogin"];var n={};for(var r in this.requestHeaders){if(t.indexOf(r)<0){n[r]=this.requestHeaders[r]}}n.did=n.Did;delete n.Did;if(this.settings.ipMode==="group"){delete n.tk}this.requestHeaders=n;return t}},{key:"appendHeaders",value:function(t,n,i,s,o,u,a){var f={Host:"mobile.12306.cn",AppId:t,Did:n,"User-Agent":this.getUserAgent(),Ts:i.ts,tk:s,nbappid:o,UniformGateway:this.origin+"/otsmobile/app/mds/mgw.htm",WorkspaceId:"product",Sign:a,Platform:this.osSpecific.platform,"Operation-Type":this.operationType,Connection:"keep-alive","Accept-Language":"en-us",needLogin:"true","x-mgs-encryption":"1",Accept:"*/*","Content-Type":this.getContentType(),"Accept-Encoding":"gzip, deflate",nbversion:u,"X-Requested-With":"",Origin:"","L-Uuid":""};r(this.requestHeaders,f);this.removeSomeHeaders();this.settings.beforeSend=this.setRequestHeader.bind(this);return this.requestHeaders}},{key:"backupOriginSettings",value:function(){var t=r({},this.settings);console.log("backupOriginSettings",this.operationType,t);this.settings.data.requestData=JSON.stringify(this.settings.data.requestData);this.originSettings=r({},this.settings);this.originSettings.data.requestData=JSON.parse(this.originSettings.data.requestData)}},{key:"interceptParamsAndHeader",value:function(){console.log("interceptParamsAndHeader ",this.operationType,this.settings);console.log(this.operationTypeKey+" params:",this.settings);console.log(this.operationTypeKey+" origin:",this.originSettings);console.log(this.operationTypeKey+" headers:",this.requestHeaders)}},{key:"run",value:function(){function t(){return this.prepareParams().then(this.backupOriginSettings.bind(this)).then(this.interceptParamsAndHeader.bind(this)).then(this.encryptParams.bind(this)).then(this.ajax.bind(this)).then(this.interceptDecrypt.bind(this)).then(this.decryptResult.bind(this)).then(this.ajaxSuccess.bind(this),this.ajaxFail.bind(this)).then(this.interceptResultSuccess.bind(this),this.interceptResultFail.bind(this))}return this.getConfig().then(this.applyConfig.bind(this)).then(this.checkDFPAndStatiAjax.bind(this,t.bind(this)))}},{key:"checkDFPAndStatiAjax",value:function(t){t=this.injectDFP.run.bind(this.injectDFP,t);if(this.settings.ipMode==="group"){return t()}return Common.statiAjax(t,this.operationTypeKey,"mobile")}},{key:"interceptResultSuccess",value:function(t){d("interceptResultSuccess:",arguments);var n=$.Deferred();return n.resolve.apply(n,arguments)}},{key:"interceptResultFail",value:function(t){d("interceptResultFail:",arguments);var n=$.Deferred();return n.reject.apply(n,arguments)}},{key:"encryptParams",value:function(t){function n(e){console.log("encryptParams result success",e);this.settings.data=e.data;this.encryptResult=e;return this.settings}if(this.settings.type.toLowerCase()==="get")return this.settings;this.settings.binaryData=true;return u.default.encrypt(this.settings.data.requestData,null,this.operationTypeKey).then(n.bind(this))}},{key:"interceptDecrypt",value:function(t,n,r,i){function a(e,t,n,r){var i="";if(!(r&&r.headers))return i;i=r.headers.Memo||r.headers.Tips||"";return i}var s=$.Deferred(),o=n||t;if(!o){o=a.apply(this,arguments);if(o)return s.reject(o);else return s.reject("noDataFetchedFrom12306")}if(typeof o!=="string")o=String(o);if(!(o.startsWith("{")&&o.endsWith("}"))){o=Common.base64Decode(n||"").trim()}if(o.startsWith("{")&&o.endsWith("}")){if(this.settings.type&&this.settings.type.toLowerCase()==="get"){return s.resolve.apply(s,arguments)}try{o=JSON.parse(o);o=o.memo||o.tips||o.result&&o.result.error_msg;return s.reject(o)}catch(u){return s.resolve.apply(s,arguments)}}else return s.resolve.apply(s,arguments)}},{key:"decryptResult",value:function(t,n,r,i){d("decryptResult:",arguments);var s=$.Deferred();if(this.settings.type.toLowerCase()==="get")return s.resolve.apply(s,arguments);var o=this._correctKeyFor304(i.headers,this.encryptResult.key);var a=n||t||"";return u.default.decrypt(a,o,this.operationTypeKey)}},{key:"sendToBE",value:function(t){return l("http://192.168.2.11:8090/test",{type:"POST",data:{data:encodeURIComponent(JSON.stringify(t)),type:"1"}}).then(function(e){console.log("sendtobe succ",e)},function(e){console.log("sendtobe err",e)})}},{key:"ajaxSuccess",value:function(t){console.log(this.operationTypeKey+" success:",arguments);console.log(this.operationTypeKey+" success:",t);var n=t;if(n&&n.result)n=n.result;if(n&&this.operationTypeKey=="queryLeftTicket"){var r=arguments[3].headers;n.updateTime=Date.parse(r.Date)}var i=$.Deferred();var s=this.operationTypeKey+" fail";if(!(n&&n.succ_flag==="1")){return this.ajaxFail(n&&n.error_msg||s)}return i.resolve(n)}},{key:"ajaxFail",value:function(t){var n=$.Deferred();return n.reject.apply(n,arguments)}},{key:"ajax",value:function(){function o(){var e=this.settings.data;e.requestData=encodeURIComponent(e.requestData);var t={operationType:e.operationType};r(t,e);this.URL+=Common.serialize(t);this.settings.data={}}function u(){d("ajax success",arguments);f.apply(this,arguments);var e=$.Deferred();return e.resolve.apply(e,arguments)}function a(e){e=e||{};d("ajax fail",arguments);f.apply(this,arguments);var t=$.Deferred();var n="",r="ajaxFailButNoErrorMsg";if(typeof e==="string")n=e;else n=e&&e.responseText||"";if(e&&e.status==403)n="403";n=n||r;return t.reject(n,n,e.status,e)}function f(e,t,n,r){d("decodeTipsAndMemo:",arguments);if(!(r&&r.headers))return;if(r.headers.Tips){r.headers.Tips=decodeURIComponent(r.headers.Tips)}if(r.headers.Memo){r.headers.Memo=decodeURIComponent(r.headers.Memo)}}if(i(this.settings.data.requestData)==="object"){this.settings.data.requestData=JSON.stringify(this.settings.data.requestData)}if(this.settings.type.toLowerCase()==="get")o.call(this);var t=window.secKillOn&&window.secKillIPLogin&&window.secKillIPLogin.includes("mobile");if((["group","one"].includes(this.settings.ipMode)||t)&&this.settings.ipMode!=="host"){var n=new c(this.URL,this.settings);var s=n.send();this.ajaxObj=n.getAjaxObj();return s}this.ajaxObj=l(this.URL,this.settings);console.log("----this.ajaxObj---:",this.URL,this.settings);return this.ajaxObj.then(u.bind(this),a.bind(this))}},{key:"abort",value:function(){if(!this.ajaxObj)return true;if(typeof this.ajaxObj.abort==="function"){this.ajaxObj.abort();return true}return false}},{key:"_isGetRequest",value:function(){return this.operationTypeKey.startsWith("queryLeftTicket")}},{key:"_correctKeyFor304",value:function(t,n){var r="wireless_ajax_info";var i=Common.getStoredInfo(r)||{};var s=i[this.operationTypeKey]||{};var o=t.Etag===s.Etag;var u=o&&t["Result-Status"]==="8001";if(u){this.watch("ajax",false);n=s.key}else{this.watch("ajax",true);var a={};var f=t.Etag;a[this.operationTypeKey]={Etag:f,key:n};Common.storeInfo(r,a)}return n}},{key:"watch",value:function(t,n){t="wireless_fetcher_"+t;var r={key:t,isSuccessful:n};window.sendWatchMessage(r)}}]);return e}();e.exports=v},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var u=n(360);var a=n(365)("util:mobile:Cipher");var f=function(){function e(){o(this,e);this.settings={type:"-1",vender:"crack",data:"xxxx",key:"",isReq2Online:false,useSignAtlas:false};this.retryCount=0;this.retryCountMax=3;this.shouldLocalAjax=false;this.url="http://192.168.43.173:8090/app"}s(e,[{key:"_localAjax",value:function(t,n,s,o){function c(e){var t=JSON.stringify(e);var n=/\\*"/g,r=/"(?=([\[{]))/g,i=/}"/g,s=/\]"/g;var o=t.replace(n,'"').replace(r,"").replace(i,"}").replace(s,"]");var u=JSON.parse(o);console.log("original str:",t);console.log("structure converted obj, only for compare usage:",u);console.log("structure converted str, only for compare usage:",JSON.stringify(u));return u}var a=this,f=arguments;if(!this.shouldLocalAjax)return $.Deferred().reject("localAjax switch is closed");console.log("_localAjax:",arguments);var l=JSON.stringify(t).indexOf("ZOLOZ")>=0;if(l)c(t);var h=function(t,n){var s=i({},a.settings);if((typeof t==="undefined"?"undefined":r(t))==="object")t=JSON.stringify(t);if(n){s.key=n;s.content=t}else s.content=Common.base64Encode(t);var o=JSON.stringify(s);var u={content:o};return u};var p=function(t,n){console.log("successAdapter",f);var r={};switch(s){case"-1":r={data:t.result,key:t.key};break;default:r={data:n||t.result,key:""}}return r};this.settings.type=s;var d={data:h(t,n),type:"post"};s=="-2"&&(window.yr=d);return u(this.url+"?procedure=encrypt",d).then(p)}},{key:"getData",value:function(t,n,s,o){var u=i({},this.settings,{type:s});if((typeof t==="undefined"?"undefined":r(t))==="object")t=JSON.stringify(t);if(n){u.key=n;u.data=t}else{u.data=Common.base64Encode(t)}if(o){u.vender="box"}console.log("getData",arguments,u);var a=JSON.stringify(u);return a}},{key:"_ajax",value:function(t,n,r,i,s){var o=this;var u="",f="invalid";switch(r){case"-2":u="è§£å¯å¤±è´¥";f="decrypt";break;case"-1":u="å å¯å¤±è´¥";f="encrypt";break;case"0":f="sign";u="ç­¾åå¤±è´¥";break;case"10":f="signForPlaceOrder";u="å åº§ç­¾åå¤±è´¥";break;default:u="å è§£å¯ç±»åä¸æ­£ç¡®"}var l=this.getData(t,n,r,s);var c=Number(r)>0?"0":String(r);var h={phoneEnDecryptSignType:c,param:l,sessionId:"",commandName:"",isAndroid:QApp.sniff.android};var p=function(t){var n=(Date.now()-o.startTimeStamp)/1e3;var r="wireless_cipher_enDecrypt_"+f;var i={key:r,duration:n,isSuccessful:t};window.sendWatchMessage(i)};var d=function(t){if(t.status===0&&t.reqResult){try{var n=JSON.parse(t.reqResult);if(n.data){a("t_tTrainPhoneEnDecryptSign success, "+r,n);p(true);return n}else{return v(t)}}catch(i){return v(t)}}else{return v(t)}};var v=function(t){if(o.retryCount<o.retryCountMax){o.retryCount++;return m()}else{console.warn("t_tTrainPhoneEnDecryptSign fail, "+r,t);p(false);return $.Deferred().reject(u)}};var m=function(){o.startTimeStamp=Date.now();a("t_tTrainPhoneEnDecryptSign params, "+r,h);return Common.postRequest("t_tTrainPhoneEnDecryptSign",h).then(d,v)};this.retryCount=0;return this._localAjax(t,n,r,i).then(null,m)}},{key:"encrypt",value:function(t,n,r){function s(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=e.data;t=this.base64ToHex(t);e.data=this.hexToBase64(t);return e}console.log("cipher encrypt",t,n,r);var i=this.isSpecialOperationType(r);return this._ajax(t,n,"-1","encrypt",i).then(s.bind(this))}},{key:"successHandler",value:function(t,n){a("successHandler",arguments);var r=$.Deferred();var i=[].slice.call(arguments,0);if(!n&&!t)return r.reject("è§£å¯å¤±è´¥");if(n.indexOf("{")<0){i[0]=Common.base64Decode(n)}try{i[0]=JSON.parse(i[0])}catch(s){a("args[0]:",i[0],s);return r.reject(s.message)}r.resolve.apply(r,i);return r}},{key:"decrypt",value:function(t,n,r){var i=this.isSpecialOperationType(r);return this.decryptByIP(t,n).then(undefined,this.decryptLocal.bind(this,t,n,i)).then(undefined,this.decryptAsync.bind(this,t,n,i))}},{key:"decryptAsync",value:function(t,n,r){console.log("decryptAsync",arguments);var i=function(t){var n=t.data;var r=$.Deferred();return r.resolve.apply(r,[n,n])};return this._ajax(t,n,"-2","decrypt",r).then(i).then(this.successHandler.bind(this))}},{key:"decryptByIP",value:function(t,n,r){function i(e){var t=e.result;return this.successHandler(t,t)}function s(e){return $.Deferred().reject(e)}if(!this.shouldLocalAjax)return $.Deferred().reject("localAjax switch is closed");console.log("decryptByIP",arguments);var o={type:"-2",key:n,content:t};var a={type:"post",data:{content:JSON.stringify(o)}};return u(this.url+"?procedure=decrypt",a).then(i.bind(this),s.bind(this))}},{key:"decryptLocal",value:function(t,n,r){function o(e){this.successHandler(e.decryptedData,e.decryptedData).then(i.resolve.bind(i),i.reject.bind(i))}function u(e){i.reject.apply(i,arguments)}var i=$.Deferred();console.log("decryptBy plugin",arguments);var s={respData:t,deKey:n,success:o.bind(this),fail:u};QunarAPI.train.localDecrypt(s);return i}},{key:"signForPlaceOrder",value:function(t,n){a("cipher signForPlaceOrder",t,n);return this._ajax(t,n,"10","signForPlaceOrder")}},{key:"sign",value:function(t,n){a("cipher sign",t,n);return this._ajax(t,n,"0","sign")}},{key:"base64ToHex",value:function(t,n){function s(e){var t="";for(var n=0;n<e.length;n+=2){if(n%32===0){t+="\n";r=n/2;t+=o(r)+"   "}else t+=" ";t+=e.substr(n,2)}t=t.trim();return t}function o(e){var t=e.toString(16);var n=8;if(t.length>n)n=t.length;var r="0".repeat(n)+t;r=r.substr(-n);return r}if(n===undefined){n=true}if(typeof t!=="string")return"";t=t.replace(/\n|\r/g,"");var r=0;var i=Common.crypto.enc.Base64.parse(t);i=Common.crypto.enc.Hex.stringify(i);if(n)s(i);return i}},{key:"hexToBase64",value:function(t){if(typeof t!=="string")return"";var n=Common.crypto.enc.Hex.parse(t);n=Common.crypto.enc.Base64.stringify(n);return n}},{key:"isSpecialOperationType",value:function(t){var n=/(faceDetection|identityVerificationQueryProgress|closeUserAccount)/i;return n.test(t)}}]);return e}();var l=new f;e.exports=l},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function a(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=function h(e,t,n){if(e===null)e=Function.prototype;var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);if(i===null){return undefined}else{return h(i,t,n)}}else if("value"in r){return r.value}else{var s=r.get;if(s===undefined){return undefined}return s.call(n)}};var f=n(398);var l=n(409);var c=function(e){function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.options=e;n.channel="AND";n.watcherKey="AND_DFP";n.cookieCodeKey="UDID";n.mappingKey="AndMapping";n.elementConfig=l;var r=365.242199174;var i=1e3;var s=60*i;var a=60*s;var f=24*a;var c=r/12*f;var h=r*f;n.timeUnits={second:i,minute:s,hour:a,day:f,month:c,year:h};n.requestHeaders=[["X-Requested-With","com.MobileTicket"],["Accept","*/*"],["Accept-Encoding","gzip"],["Accept-Language","zh-CN,en-US;q=0.9"]];return n}a(t,e);i(t,[{key:"ajax",value:function(n){var r=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};i.beforeSend=function(e){r.requestHeaders.forEach(function(t){e.setRequestHeader(t[0],t[1])});e.setRequestHeader("User-Agent",r.getFakeUserAgent())};return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ajax",this).call(this,n,i)}},{key:"getJS",value:function(){this.jsUrl="https://mobile.12306.cn/otsmobile/device/getDeviceJS?custID=default&serviceUrl=https://mobile.12306.cn/otsmobile/device/getDeviceInfo&channel="+this.channel+"&loadSource=script";return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJS",this).call(this)}},{key:"genHash",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:16;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:16;var r="";while(r.length<t){r+=Math.random().toString(n).slice(2)}return r.slice(0,t)}},{key:"luhn",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=0;t.split("").reverse().forEach(function(e,t){e=Number(e);if(t%2===0){e=e*2;if(e>9){e=e-9}}n+=e});var r=(10-n%10)%10;return r}},{key:"filterValue",value:function(t){return t.replace(/&|\+|\?|%|#|\/|=/g,"")}},{key:"chooseOne",value:function(t){var n=Common.range(0,t.length-1);return t[n]}},{key:"moreOrLess",value:function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;if(t>1){t=1}var o=(i-r)*t;var u=n-(n-r)*t;var a=u+o*Math.random();if(s){return a}return Math.round(a)}},{key:"changeOrNot",value:function(t,n,r){var i=Math.random();if(i<=t){return r()}return n}},{key:"_unixTime",value:function(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=this.parseTime(r.offset);return Math.round((Date.now()+i)/1e3)}},{key:"_battery",value:function(t,n,r){var i=50;n.replace(/,(\d+)/,function(e,t){i=+t});i=this._number(t,i,r);var s=5;if(i<100){s=this.chooseOne([2,4])}return"["+s+","+i+"]"}},{key:"_localIP",value:function(){var t=Common.range(0,255);var n=Common.range(2,253);return"192.168."+t+"."+n}},{key:"_wifi",value:function(){var t=["TP-LINK_","HUAWEI_","Tenda_","D-Link_","MERCURY_","FAST_"];var n=this.chooseOne(t)+this.genHash(6,36);var r=Common.randomMac();return"["+n+","+r+"]"}},{key:"_mac",value:function(t,n){var r=n.mask||[0];r[1]=r[1]||17;var i=t.slice(0,r[0]);var s=t.slice(r[1]);var o=Common.randomMac().slice(r[0],r[1]);return i+o+s}},{key:"_digit",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=t.length;var i=n.mask||[0];if(n.maskScale){i=n.maskScale.map(function(e){return Math.round(e*r)})}i[1]=i[1]||r;var s=i[1]-i[0];var o=t.slice(0,i[0]);var u=t.slice(i[1]);var a=o+this.genHash(s,10)+u;if(n.alg==="luhn"){a=a.slice(0,-1);a+=this.luhn(a)}return a}},{key:"_hash",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=t.length;if(!r){return this.genHash(16)}var i=n.mask||[0];if(n.maskScale){i=n.maskScale.map(function(e){return Math.round(e*r)})}i[1]=i[1]||r;var s=i[1]-i[0];var o=t.slice(0,i[0]);var u=t.slice(i[1]);var a=o+this.genHash(s)+u;return a}},{key:"_byte",value:function(t,n,r,i){n=+n/1024;var s=0;var o=0;if(r.target){var u=+i[r.target]/1024;s=u*r.minScale;o=u*r.maxScale}else{s=+r.min/1024;o=+r.max/1024}var a=this.moreOrLess(t,n,s,o)*1024;return a}},{key:"_number",value:function(t,n,r){var i=this.moreOrLess(t,+n,r.min,r.max,true);var s=r.fixed||0;var o=r.postZeros||0;i=i.toFixed(s);i=(+i).toFixed(o+s);return i}},{key:"parseTime",value:function(t){var n=this;var r=0;var i=1;if(typeof t==="string"){if(t.indexOf("-")===0){i=-1}t.replace(/([\d.]+)([a-z]*)/g,function(e,t,i){r+=+t*(n.timeUnits[i]||1)});return r*i}else if(typeof t==="number"&&!isNaN(t)){return t}return 0}},{key:"fakeField",value:function(t,n,r,i){var s=1;var o=["number","byte","battery"];if(r.limit){s=Math.abs(t/this.parseTime(r.limit))}var u=this["_"+r.type];var a=[s,n,r,i];if(u){if(o.includes(r.type)){n=u.apply(this,a)}else{n=this.changeOrNot(s,n,u.bind(this,n,r,i))}}n+="";return n}},{key:"fillWithFakeInfo",value:function(t){var n=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;t=r({},t);var s=Date.now();var o=s-i;this.elementConfig.forEach(function(e){e.fields.forEach(function(e){var r=e.name in t;if(r&&e.fake&&(!i||e.fake.limit)){t[e.name]=n.fakeField(o,t[e.name],e.fake,t)}})});return t}},{key:"getBaseInfo",value:function(){var t=this;var n={};this.elementConfig.forEach(function(e){var i=t.chooseOne(e.examples);n=r({},n,i)});return n}},{key:"getMapping",value:function(){var t={};this.elementConfig.forEach(function(e){e.fields.forEach(function(e){if(e.map){t[e.name]=e.map}})});return t}},{key:"fakeSDKElement",value:function(){var t=this.getStoredInfo();var n=t.fakeElement||this.getBaseInfo();var r=this.fillWithFakeInfo(n,t.elementTimeStamp||0);t.fakeElement=r;t.elementTimeStamp=Date.now();this.storeInfo(t);return r}},{key:"trimSDKElement",value:function(t){var n=this;this.elementConfig.forEach(function(e){if(e.name==="app"){t=r({},t,e.examples[0])}e.fields.forEach(function(e){if(e.replaceEle&&t[e.name]){t[e.name]=n.filterValue(t[e.name])}})});Object.keys(t).forEach(function(e){if(!t[e]){delete t[e]}});var i=this.getStoredCookieCode();if(i){t[this.cookieCodeKey]=i}else{delete t[this.cookieCodeKey]}return t}},{key:"setClientCookie",value:function(){return this.setClientCookieSuccess()}},{key:"adaptClientSDKElement",value:function(t){return r({},t)}},{key:"getClientSDKElement",value:function(){var t=this;var n=$.Deferred();var r=function(r){console.log("getClientSDKElement Success",r);r=t.adaptClientSDKElement(r);n.resolve(r)};var i=function(t){return n.reject(t)};var s=function(){if(QunarAPI.train.deviceInfo){QunarAPI.train.deviceInfo({success:r,fail:i})}else{n.reject()}};QunarAPI.ready(s);return n}},{key:"isSameOS",value:function(){return!!QApp.sniff.android}},{key:"getSDKElement",value:function(){var t=this;var n=void 0;var r=function(){return $.Deferred().resolve(t.fakeSDKElement())};if(this.options.SDKElementType==="fake"||!this.isSameOS()){n=r()}else{n=this.getClientSDKElement().then(undefined,r)}return n.then(this.trimSDKElement.bind(this))}},{key:"getFakeGlobal",value:function(){function n(e,t){var n=this.getMapping();$.extend(e,{SDKElement:t,dom:e.document,dfp:"",webviewType:this.channel});e[this.mappingKey]=n;return e}return $.when(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFakeGlobal",this).call(this),this.getSDKElement()).then(n.bind(this))}}]);return t}(f);e.exports=c},function(e,t){"use strict";e.exports=[{name:"vendor",desc:"ææºåå·ç¸å³",fields:[{name:"model",map:"k3LE",desc:"ææºåå·",examples:["Nexus5","MI6"]},{name:"uevent",map:"0Qzb",desc:'readFile("/sys/devices/virtual/misc/cpu_dma_latency/uevent")',examples:["MAJOR10MINOR41DEVNAMEcpu_dma_latency","isContent"]},{name:"hardware",map:"Jnh9",desc:"Build.HARDWARE:",examples:["hammerhead","qcom"]},{name:"displayRom",map:"2vam",replaceEle:true,desc:"Build.DISPLAY: ROM å",examples:["MOB30H","OPR1.170623.027"]},{name:"wifiMacAddress",map:"_Y6j",desc:"è®¾å¤ wifi mac å°åï¼ ååå·åå ä½å¼ä¸å",fake:{type:"mac",mask:[8]},examples:["00:90:4c:**:**:**","ec:d0:9f:**:**:**"]},{name:"resolution",map:"9_vV",desc:"åè¾¨ç",examples:["[3.0,1080,1776,3.0,442.451,443.345]","[3.0,1080,1920,3.0,428.625,427.789]"]},{name:"version",map:"XKTz",desc:" Android çæ¬",examples:["6.0.1","8.0.0"]},{name:"UDID",map:"NfP-",desc:"å¨å±å¯ä¸ IDï¼ ä»æå¡å¨è¿åç UDIDï¼ä½ç¨ç±»ä¼¼ 3W ç cookieCode",examples:[]},{name:"availableSD",map:"Uaj4",desc:"SD å©ä½å®¹é",fake:{type:"byte",limit:"1month",target:"totalSD",minScale:.1,maxScale:.5},examples:["0"]},{name:"totalSD",map:"LtgM",desc:"SD å®¹é",examples:["0"]},{name:"availableSystem",map:"H6Rg",desc:"ç³»ç»å©ä½å®¹é",fake:{type:"byte",limit:"1month",target:"totalSystem",minScale:.1,maxScale:.3},examples:["9176731648","18888654848"]},{name:"totalSystem",map:"bxIT",desc:"ç³»ç»æ»å®¹é",examples:["13478064128","55426072576"]},{name:"availableMemory",map:"qiHP",desc:"å¯ç¨åå­",fake:{type:"byte",limit:"1day",target:"totalMemory",minScale:.1,maxScale:.3},examples:["822972416","2099933184"]},{name:"totalMemory",map:"oUvy",desc:"æ»åå­",examples:["1945096192","6002786304"]},{name:"simulator",map:"YIxZ",desc:"SDK ä¸­æ æ­¤å¼",examples:[]},{name:"bootloader",map:"O0oS",desc:"Build.BOOTLOADER",examples:["HHZ20f","unknown"]},{name:"board",map:"hZFp",desc:"Build.BOARD",examples:["hammerhead","msm8998"]},{name:"product",map:"qHkh",desc:"Build.PRODUCT",examples:["hammerhead","sagit"]},{name:"sensors",map:"4i37",desc:"SDK ä¸­æ æ­¤å¼",examples:[]},{name:"bluetooth",map:"qCjR",desc:"èçå°åï¼ååå·åå ä½ç¸å",fake:{type:"mac",mask:[8]},examples:["22:22:ff:**:**:**","b4:ef:fa:**:**:**"]},{name:"IMEI",map:"9POg",desc:"IMEIï¼ååå·åå ä½ç¸å",fake:{type:"digit",mask:[8],alg:"luhn"},examples:["35349006*******","86587303*******"]},{name:"manufacturer",map:"EAAo",desc:"Build.MANUFACTURER",examples:["LGE","Xiaomi"]},{name:"device",map:"JjpN",desc:"Build.DEVICE",examples:["hammerhead","sagit"]},{name:"brand",map:"BKn7",desc:"Build.BRAND",examples:["google","Xiaomi"]},{name:"serial",map:"AUSx",desc:"Build.SERIAL,ç¡¬ä»¶ç¸å³çåºåå·",fake:{type:"hash",maskScale:[.5]},examples:["0af9a8500c0117e4","6d7df0f6"]},{name:"user",map:"BPiZ",desc:"Build.USER",examples:["android-build","builder"]},{name:"radio",map:"qjoF",desc:"Build.RADIO",examples:["unknown","unknown"]},{name:"syncookies",map:"4MYi",desc:'readFile("/proc/sys/net/ipv4/tcp_syncookies")',examples:["notExist","1"]},{name:"adb",map:"fhag",desc:'readFile("/sys/devices/virtual/misc/android_adb")',examples:["isContent","notExist"]},{name:"misc",map:"nDJC",desc:'md5(readFile("/proc/misc")) /proc/misc æä»¶ç hash',examples:["e140f632495a2ad6","1c88bfe4e99f60eb"]},{name:"stat",map:"QEYN",desc:'readFile("/proc/uid_stat")',examples:["isContent","notExist"]},{name:"IOPorts",map:"4-es",desc:'readFile("/proc/ioports")',examples:["f9017000-f9017fff:msm-watchdog","isContent"]},{name:"cpufreq",map:"DR1H",desc:'readFile("/sys/devices/system/cpu/cpu0/cpufreq")',examples:["isContent"]},{name:"tags",map:"l4wv",desc:"Build.TAGS",examples:["release-keys","release-keys"]},{name:"fingerprint",map:"RIY7",replaceEle:true,desc:"Build.FINGERPRINT, ROM ç¸å³çæçº¹æä»¥ä¸ç¨ fake",examples:["googlehammerheadhammerhead:6.0.1MOB30H2751534:userrelease-keys","Xiaomisagitsagit:8.0.0OPR1.170623.0278.3.8:userrelease-keys"]},{name:"id",map:"pWFF",desc:"Build.ID",examples:["MOB30H","OPR1.170623.027"]},{name:"switch",map:"eLSf",desc:'readFile("/sys/devices/virtual/switch")',examples:["isContent","isContent"]},{name:"ppp",map:"xCiW",desc:'readFile("/sys/devices/virtual/ppp")',examples:["isContent","isContent"]},{name:"host",map:"R0Cu",desc:"Build.HOST",examples:["wpef20.hot.corp.google.com","c3-miui-ota-bd101.bj"]},{name:"parameters",map:"9Sgh",desc:'readFile("/sys/module/alarm/parameters")',examples:["isContent","notExist"]},{name:"type",map:"EwPA",desc:"Build.TYPE",examples:["user","user"]},{name:"userAgent",map:"0aew",replaceEle:true,desc:'System.getProperty("http.agent")',examples:["Dalvik2.1.0(Linux;U;Android6.0.1;Nexus5BuildMOB30H)","Dalvik2.1.0(Linux;U;Android8.0.0;MI6MIUI8.3.8)"]},{name:"cpuType",map:"aKfq",desc:"SDK ä¸­æ æ­¤å¼",examples:[]},{name:"cpuABI",map:"U3oU",desc:"Build.CPU_ABI + Build.CPU_ABI2",examples:["armeabi-v7aarmeabi","armeabi-v7aarmeabi"]},{name:"musicHash",map:"FNei",desc:"ç¼å­å¼ï¼åé³ä¹æå³ç hash",fake:{type:"hash"},examples:["f62d0d00112820a1"]},{name:"photosHash",map:"GLBj",desc:"ç¼å­å¼ï¼åç§çæå³ç hash",fake:{type:"hash"},examples:["61a5a97aa93df766","632d5090344142d1"]},{name:"account",map:"mvIR",desc:"åè´¦å·ç¸å³ç hash",fake:{type:"hash"},examples:["ddf31a22ee9c04de"]},{name:"contactsHash",map:"kClR",desc:"ç¼å­å¼,åç§çæå³ç hash æ éæ ·",examples:[]},{name:"sensorList",map:"BtS2",desc:"ææä¼ æå¨ä¿¡æ¯åè¡¨ç hash",examples:["e210ecf5627d68c6","40dae77dfd5b7d4c"]}],examples:[{model:"Nexus5",uevent:"MAJOR10MINOR41DEVNAMEcpu_dma_latency",hardware:"hammerhead",displayRom:"MOB30H",wifiMacAddress:"00:90:4c:**:**:**",resolution:"[3.0,1080,1776,3.0,442.451,443.345]",version:"6.0.1",availableSD:"0",totalSD:"0",availableSystem:"9176731648",totalSystem:"13478064128",availableMemory:"822972416",totalMemory:"1945096192",bootloader:"HHZ20f",board:"hammerhead",product:"hammerhead",bluetooth:"22:22:ff:**:**:**",IMEI:"35349006*******",manufacturer:"LGE",device:"hammerhead",brand:"google",serial:"0af9a8500c0117e4",user:"android-build",radio:"unknown",syncookies:"notExist",adb:"isContent",misc:"e140f632495a2ad6",stat:"isContent",IOPorts:"f9017000-f9017fff:msm-watchdog",cpufreq:"isContent",tags:"release-keys",fingerprint:"googlehammerheadhammerhead:6.0.1MOB30H2751534:userrelease-keys",id:"MOB30H","switch":"isContent",ppp:"isContent",host:"wpef20.hot.corp.google.com",parameters:"isContent",type:"user",userAgent:"Dalvik2.1.0(Linux;U;Android6.0.1;Nexus5BuildMOB30H)",cpuABI:"armeabi-v7aarmeabi",sensorList:"e210ecf5627d68c6"},{model:"MI6",uevent:"isContent",hardware:"qcom",displayRom:"OPR1.170623.027",wifiMacAddress:"ec:d0:9f:**:**:**",resolution:"[3.0,1080,1920,3.0,428.625,427.789]",version:"8.0.0",availableSD:"0",totalSD:"0",availableSystem:"18888654848",totalSystem:"55426072576",availableMemory:"2099933184",totalMemory:"6002786304",bootloader:"unknown",board:"msm8998",product:"sagit",IMEI:"86587303*******",manufacturer:"Xiaomi",device:"sagit",brand:"Xiaomi",serial:"6d7df0f6",user:"builder",radio:"unknown",syncookies:"notExist",adb:"notExist",misc:"1c88bfe4e99f60eb",stat:"notExist",IOPorts:"isContent",cpufreq:"isContent",tags:"release-keys",fingerprint:"Xiaomisagitsagit:8.0.0OPR1.170623.0278.3.8:userrelease-keys",id:"OPR1.170623.027","switch":"isContent",ppp:"isContent",host:"c3-miui-ota-bd101.bj",parameters:"notExist",type:"user",userAgent:"Dalvik2.1.0(Linux;U;Android8.0.0;MI6MIUI8.3.8)",cpuABI:"armeabi-v7aarmeabi",sensorList:"d5d6db9e1e2e0f01"},{model:"MX4",uevent:"MAJOR10MINOR41DEVNAMEcpu_dma_latency",hardware:"mt6595",displayRom:"Flyme5.1.11.1A",wifiMacAddress:"38:bc:1a:**:**:**",resolution:"[3.0,1152,1920,3.0,418.011,416.82]",version:"5.1",availableSD:"0",totalSD:"0",availableSystem:"719458304",totalSystem:"13147488256",availableMemory:"357769216",totalMemory:"1987776512",bootloader:"unknown",board:"mx4",product:"meizu_mx4",bluetooth:"38:bc:1a:**:**:**",IMEI:"86209502*******",manufacturer:"Meizu",device:"mx4",brand:"Meizu",serial:"75UABL******",user:"flyme",radio:"unknown",syncookies:"1",adb:"isContent",misc:"18fa63d911241c33",stat:"isContent",cpufreq:"isContent",tags:"test-keys",fingerprint:"Meizumeizu_mx4mx4:5.1LMY47I1479148807:usertest-keys",id:"LMY47I","switch":"isContent",ppp:"isContent",host:"mz-builder-3",parameters:"notExist",type:"user",userAgent:"Dalvik2.1.0(Linux;U;Android5.1;MX4BuildLMY47I)",cpuABI:"armeabi-v7aarmeabi",sensorList:"40dae77dfd5b7d4c"},{model:"SM-N9200",uevent:"MAJOR10MINOR38DEVNAMEcpu_dma_latency",hardware:"samsungexynos7420",displayRom:"NRD90M.N9200ZHU3DQL1",wifiMacAddress:"fc:db:b3:**:**:**",resolution:"[2.625,1080,1920,2.625,386.3655,390.144]",version:"7.0",availableSD:"0",totalSD:"0",availableSystem:"23779057664",totalSystem:"26730586112",availableMemory:"1620262912",totalMemory:"3840675840",bootloader:"N9200ZHU3DQL1",board:"universal7420",product:"nobleltezh",bluetooth:"d0:87:e2:**:**:**",manufacturer:"samsung",device:"nobleltehk",brand:"samsung",serial:"0715f7fd********",user:"dpi",radio:"unknown",syncookies:"notExist",adb:"isContent",misc:"e60a16e6376e5376",stat:"notExist",cpufreq:"isContent",tags:"release-keys",fingerprint:"samsungnobleltezhnobleltehk:7.0NRD90MN9200ZHU3DQL1:userrelease-keys",id:"NRD90M","switch":"isContent",ppp:"isContent",host:"SWDD5910",parameters:"notExist",type:"user",userAgent:"Dalvik2.1.0(Linux;U;Android7.0;SM-N9200BuildNRD90M)",cpuABI:"armeabi-v7aarmeabi",sensorList:"c05c9929d13db932"},{model:"PE-TL00M",uevent:"MAJOR10MINOR31DEVNAMEcpu_dma_latency",hardware:"hi3630",displayRom:"PE-TL00MV100R001C01B133",wifiMacAddress:"f4:e3:fb:**:**:**",resolution:"[3.0,1080,1776,3.0,360.947,361.244]",version:"4.4.2",availableSD:"0",totalSD:"0",availableSystem:"790548480",totalSystem:"4160421888",availableMemory:"1446694912",totalMemory:"3158605824",bootloader:"unknown",board:"PE-TL00M",product:"PE-TL00M",bluetooth:"f4:e3:fb:**:**:**",IMEI:"86558702*******",manufacturer:"HUAWEI",device:"hwPE",brand:"Huawei",serial:"S7TDU154********",user:"jenkins",radio:"unknown",syncookies:"notExist",adb:"isContent",misc:"c17c77c1078bd392",stat:"notExist",cpufreq:"isContent",tags:"ota-rel-keys,release-keys",fingerprint:"HuaweiPE-TL00MhwPE:4.4.2HuaweiPE-TL00MC01B133:userota-rel-keys,release-keys",id:"HuaweiPE-TL00M","switch":"isContent",ppp:"isContent",host:"shzdea05",parameters:"notExist",type:"user",userAgent:"Dalvik1.6.0(Linux;U;Android4.4.2;PE-TL00MBuildHuaweiPE-TL00M)",cpuABI:"armeabi-v7aarmeabi",photosHash:"632d5090344142d1",sensorList:"36cff0b31dfae0d4"}]},{name:"app",desc:"éè·¯12306APP ç¸å³",fill:"no",fields:[{name:"packageName",map:"VQFA",desc:"åå",examples:["com.MobileTicket"]},{name:"appVersion",map:"wfQn",desc:"çæ¬å·",examples:["3.0.1.01221000"]},{name:"custID",desc:"custID åæ dfp æ¶çä¸ä¸ªåç±»",examples:["123"]},{name:"platform",desc:"å¹³å°",examples:["AND"]},{name:"sdkVersion",map:"Vkrm",desc:"SDK çæ¬å·",examples:["4.3.3"]}],examples:[{packageName:"com.MobileTicket",appVersion:"3.0.1.01221000",sdkVersion:"4.3.3",custID:"123",platform:"AND"}]},{name:"net",desc:"ç½ç»ç¸å³",fields:[{name:"currentWifi",map:"bOhy",replaceEle:true,desc:"å½åWIFI",fake:{type:"wifi",limit:"3month"},examples:["[brinsh,18:65:90:d9:70:43]"]},{name:"cellularIP",map:"PneH",desc:"å½å IP",fake:{type:"localIP",limit:"3month"},examples:["192.168.2.10","192.168.2.12"]},{name:"wifiList",map:"wXg4",desc:"ææ Wifi ä¿¡æ¯åè¡¨ç hashï¼æ ææéæ ·",examples:[]}],examples:[{currentWifi:"[test,18:65:90:d9:70:43]",cellularIP:"192.168.2.10"},{currentWifi:"[bds,18:65:90:d9:70:43]",cellularIP:"192.168.2.8"}]},{name:"sim",desc:"SIM å¡ç¸å³",fields:[{name:"baseStation",map:"yXoP",desc:"åºç«ï¼ç¼å­çå¼ï¼æ²¡ææ ·æ¬, å ä¸ºfake å¯è½ä¼å wifi å®ä½çç¾ï¼æ­¤å¼æ°¸è¿ä¸çæ",examples:[]},{name:"nearbyBaseStation",map:"EyOF",desc:"ç¸é»åºç«ï¼ç¼å­çå¼ï¼æ²¡ææ ·æ¬, å ä¸ºfake å¯è½ä¼å wifi å®ä½çç¾ï¼æ­¤å¼æ°¸è¿ä¸çæ",examples:[]},{name:"IMSI",map:"7UTv",desc:"IMSI",fake:{type:"digit",mask:[11]},examples:["46001102010****","46002310207****"]},{name:"phoneNumber",map:"nrYU",replaceEle:true,desc:"ææºå·",fake:{type:"digit",mask:[7]},examples:["86","15010763515"]},{name:"simSerialNumber",map:"WCxt",desc:"ICCID sim çåºåå·, è¿è¥åç ICCID è§åè¾æ··ä¹±ï¼è¿éåªçæçº¯æ°å­ç ICCUID",fake:{type:"digit",mask:[13]},examples:["8986011781103*******","898600210116f*******"]},{name:"simCountryIso",map:"Hx1a",desc:"SIM å½å®¶ä»£å·",examples:["cn"]},{name:"networkOperator",map:"csj7",desc:"çµä¿¡è¿è¥åä»£å·",examples:["46001","46000"]},{name:"networkCountryIso",map:"lRtB",desc:"ç½ç»å½å®¶ä»£å·ï¼ CDMA ä¸è·åä¸å°",examples:["cn"]},{name:"phoneType",map:"LrgZ",desc:"NONE 0 | GSM 1 | CDMA 2 | SIP 3",examples:["1"]},{name:"voiceMailNumber",map:"d8FW",replaceEle:true,desc:"è¯­é³é®ç®±å·ï¼æ²¡æéæ ·",examples:[]}],examples:[{IMSI:"46001102010****",phoneNumber:"86",simSerialNumber:"8986011781103*******",simCountryIso:"cn",networkOperator:"46001",networkCountryIso:"cn",phoneType:"1"},{IMSI:"46001013011****",simSerialNumber:"8986011780115*******",simCountryIso:"cn",networkOperator:"46001",networkCountryIso:"cn",phoneType:"1"}]},{name:"solid",desc:"ä¸éè¦ååçå¼",fill:"no",fields:[{name:"timeZone",map:"q5aJ",replaceEle:true,desc:"æ¶åº",examples:["[GMT08:00,AsiaShanghai]"]},{name:"coordinates",map:"Kavb",desc:"å°çä½ç½®åæ ï¼æ ææä¹æ ·æ¬, å ä¸º fake å¯è½ä¼å wifi å®ä½çç¾ï¼æ­¤å¼æ°¸è¿ä¸çæ",examples:["[0.0,0.0]"]},{name:"activeTime",map:"R7of",desc:"SDK ä¸­æ æ­¤å¼",examples:[]},{name:"algID",map:"algID",desc:"ç®æ³ IDï¼ æ²¡æå¨ SDKElement ä¸­åºç°",examples:[]},{name:"hashCode",map:"hashCode",desc:"æäº¤è¡¨åç hashï¼æ²¡æå¨ SDKElement ä¸­åºç°",examples:[]},{name:"networkType",map:"Swlw",desc:"ç½ç»ç±»å",examples:["WiFi"]},{name:"existPipe",map:"7eMA",desc:"å­å¨Qemu Pipeï¼ä»¿çå¨æ£æµ",examples:["0"]},{name:"existQemu",map:"JC9t",desc:"å¦å­å¨Qemuï¼ä»¿çå¨æ£æµ",examples:["0"]},{name:"isProxy",map:"m6C7",desc:"æ¯ä»£ç",examples:["0"]},{name:"isVPN",map:"G0rn",desc:"æ¯ VPN",examples:["0"]},{name:"rooted",map:"UqMW",desc:"rooted",examples:["0"]}],examples:[{timeZone:"[GMT08:00,AsiaShanghai]",networkType:"WiFi",existPipe:"0",existQemu:"0",isProxy:"0",isVPN:"0",rooted:"0"}]},{name:"free",desc:"å­¤ç«èªç±çå¼",fill:"empty",fields:[{name:"startupTime",map:"oA3w",desc:"å¼æºæ¶é´æ³",fake:{type:"unixTime",offset:"-20minute",limit:"15day"},examples:["1521609438"]},{name:"battery",map:"89Fw",desc:"çµé",fake:{type:"battery",limit:"1day",max:100,min:10},examples:["[2,44]","[3,60]"]},{name:"allList",map:"CneL",desc:"ææå®è£ APP åååè¡¨ç hash",fake:{type:"hash",limit:"5day"},examples:["29fe355062274c75"]},{name:"runningList",map:"gCnN",desc:"æ­£å¨è¿è¡ APP åååè¡¨ç hash",fake:{type:"hash",limit:"30minute"},examples:["6989e92b8058e97f"]},{name:"appCache",map:"9PRr",desc:"åºç¨ç¼å­å¤§å°",fake:{type:"number",limit:"5day",max:12e6,min:972e4},examples:["9916941","9791062"]},{name:"brightness",map:"qm7W",desc:"å±å¹äº®åº¦",fake:{type:"number",limit:"1day",max:100,min:20},examples:["82","99"]}],examples:[{startupTime:"",battery:"",allList:"",runningList:"",appCache:"",brightness:""},{startupTime:"",battery:"",allList:"",appCache:"",brightness:""},{startupTime:"",battery:"",allList:"",runningList:"",appCache:"",brightness:""},{startupTime:"",battery:"",allList:"",appCache:"",brightness:""},{startupTime:"",battery:"",allList:"",runningList:"",appCache:"",brightness:""}]}]},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var u=n(408);var a=n(411);var f=function(e){function t(e){i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.channel="IOS";n.watcherKey="IOS_DFP";n.cookieCodeKey="IDFV";n.mappingKey="iOSMapping";n.elementConfig=a;n.requestHeaders=[["Connection","keep-alive"],["Accept","*/*"],["Accept-Encoding","gzip"],["Accept-Language","zh-cn"]];return n}o(t,e);r(t,[{key:"_wifiList",value:function(){var t=this.genHash();var n=Common.randomMac();return"["+t+"-"+n+"]"}},{key:"_battery",value:function(t,n,r){var i=.5;n.replace(/-([\d.]+)/,function(e,t){i=+t});i=this._number(t,i,r);return"[unplugged-"+i+"]"}},{key:"_IDFA",value:function(){var t=this;var n=[8,4,4,4,12].map(function(e){return t.genHash(e)}).join("-").toUpperCase();return n}},{key:"adaptClientSDKElement",value:function(t){if(t.networkType){t.networkType="WiFi"}return t}},{key:"isSameOS",value:function(){return!!QApp.sniff.ios}}]);return t}(u);e.exports=f},function(e,t){"use strict";e.exports=[{name:"vendor",desc:"ææºåå·ç¸å³",fields:[{name:"model",map:"k3LE",desc:"ææºåå·",examples:["iPhone7,1","iPhone8,2"]},{name:"totalMemory",map:"oUvy",desc:"åå­æ»é",examples:["1022963712","2081947648"]},{name:"totalSystem",map:"bxIT",desc:"ç³»ç»æ»å®¹é",examples:["12624662528","127989493760"]},{name:"resolution",map:"9_vV",desc:"åè¾¨ç",examples:["[414-736]","[320-568]"]},{name:"userAgent",map:"0aew",replaceEle:true,desc:"ç³»ç»ç userAgentï¼æ éæ ·å¼",examples:[]},{name:"availableSystem",map:"H6Rg",desc:"ç³»ç»å©ä½å®¹é",fake:{type:"byte",limit:"1month",target:"totalSystem",minScale:.1,maxScale:.3},examples:["4336844800","4366512128"]},{name:"version",map:"XKTz",desc:"ç³»ç»çæ¬",examples:["8.1.3","10.3.3"]}],examples:[{model:"iPhone8,2",totalMemory:"2081947648",totalSystem:"127989493760",resolution:"[414-736]",availableSystem:"52503085056",version:"10.3.3"},{model:"iPhone7,1",totalMemory:"1022963712",totalSystem:"12624662528",resolution:"[414-736]",availableSystem:"4366512128",version:"8.1.3"},{model:"iPhone7,1",totalMemory:"1022963712",totalSystem:"12624662528",resolution:"[414-736]",availableSystem:"4336844800",version:"8.1.3"},{model:"iPhone5,2",totalMemory:"1064304640",totalSystem:"13034459136",resolution:"[320-568]",availableSystem:"9426055168",version:"10.3.3"},{model:"iPhone7,1",totalMemory:"1016070144",totalSystem:"15989485568",resolution:"[414-736]",availableSystem:"10457751552",version:"11.3"}]},{name:"app",desc:"éè·¯12306APP ç¸å³",fill:"no",fields:[{name:"packageName",map:"VQFA",desc:"åå",examples:["cn.12306.rails12306"]},{name:"appVersion",map:"wfQn",desc:"çæ¬å·",examples:["3.0.3"]},{name:"sdkVersion",map:"Vkrm",desc:"sdk çæ¬å·",examples:["4.3.4"]},{name:"custID",desc:"custID åæ dfp æ¶çä¸ä¸ªåç±»",examples:["123"]},{name:"platform",desc:"å¹³å°",examples:["IOS"]}],examples:[{packageName:"cn.12306.rails12306",appVersion:"3.0.3",sdkVersion:"4.3.4",custID:"123",platform:"IOS"}]},{name:"net",desc:"ç½ç»ç¸å³",fields:[{name:"cellularIP",map:"PneH",desc:"å±åç½ IP",fake:{type:"localIP",limit:"3month"},examples:["192.168.2.3","192.168.2.11"]},{name:"wifiList",map:"wXg4",replaceEle:true,desc:"MD5(å½å wifi ç SSID).slice(8, 24) - å½å wifi ç Mac",fake:{type:"wifiList",limit:"3month"},examples:["[c826bb00496da246-18:65:90:d9:70:43]"]}],examples:[{cellularIP:"192.168.2.11",wifiList:"[c826bb00496da246-18:65:90:d9:70:43]"}]},{name:"sim",desc:"SIM å¡ç¸å³",fields:[{name:"carrier",map:"WANY",desc:"è¿è¥å",examples:["ä¸­å½èé","ä¸­å½ç§»å¨"]},{name:"coordinates",map:"Kavb",desc:"å°çåæ [çº¬-ç»,æ¶é´æ³]ï¼ä¸ºé²æ­¢å wifi å®ä½çç¾ï¼æ­¤å¼ä¸è¿è¡ fake",examples:["[40.044553-116.349506,1521625016.362399]","[40.045093-116.349454,1522316189.339067]"]}],examples:[{carrier:"ä¸­å½ç§»å¨"},{carrier:"ä¸­å½èé"},{carrier:"ä¸­å½çµä¿¡"},{carrier:"ä¸­å½ç§»å¨"},{carrier:"ä¸­å½èé"}]},{name:"solid",desc:"ä¸éè¦ååçå¼",fill:"no",fields:[{name:"rooted",map:"UqMW",desc:"è¶ç±",examples:["0","1"]},{name:"fork",map:"jQx6",desc:"æ éæ ·å¼",examples:[]},{name:"activeTime",map:"R7of",desc:"æ éæ ·å¼",examples:[]},{name:"isVPN",map:"G0rn",desc:"æ¯ VPN",examples:["0"]},{name:"isProxy",map:"m6C7",desc:"æ¯ä»£ç",examples:["1","0"]},{name:"networkType",map:"Swlw",desc:"ç½ç»ç±»å",examples:["WiFi"]},{name:"language",map:"pO8w",desc:"ç³»ç»è¯­è¨",examples:["[zh_CN-ä¸­æï¼ä¸­å½ï¼]"]}],examples:[{rooted:"0",isVPN:"0",isProxy:"0",networkType:"WiFi",language:"[zh_CN-ä¸­æï¼ä¸­å½ï¼]"}]},{name:"free",desc:"å­¤ç«èªç±çå¼",fill:"empty",fields:[{name:"brightness",map:"qm7W",desc:"äº®åº¦",fake:{type:"number",limit:"1day",fixed:6,max:.9,min:.3},examples:["0.376980","0.632659"]},{name:"startupTime",map:"oA3w",desc:"å¼æºæ¶é´",fake:{type:"unixTime",offset:"-20minute",limit:"15day"},examples:["1520412503","1517905209"]},{name:"battery",map:"89Fw",desc:"çµæ± ç¶æ",fake:{type:"battery",limit:"1day",min:.1,max:1,fixed:2,postZeros:4},examples:["[unplugged-1.000000]","[unplugged-0.860000]"]},{name:"appCache",map:"9PRr",desc:"å½å app ç¼å­å¤§å°",fake:{type:"number",limit:"5day",postZeros:4,max:5e6,min:45e5},examples:["4657852.0000"]},{name:"contactsHash",map:"kClR",desc:"åèç³»äººç¸å³ç hash",examples:[]},{name:"appList",map:"nt7F",desc:"ååºç¨åè¡¨ç¸å³ç hash",examples:[]},{name:"account",map:"mvIR",replaceEle:true,desc:"è´¦å·ç¸å³ç hash",fake:{type:"hash",limit:"3month"},examples:["27742e89b52fb05f"]},{name:"IDFA",map:"bA0Q",desc:"",fake:{type:"IDFA"},examples:["AC8381F7-DEFB-433F-87B6-98C22B06F306","7A45045F-2051-457E-82F5-987DEB1A5F35"]},{name:"IDFV",map:"sxWp",desc:"æ­¤ IDFV å¹¶éçå®ç IDFVï¼èæ¯æå¡å¨è¿åç IDFVï¼ ç±»ä¼¼ 3W ç cookieCode",examples:["RDuD-VWHlTettmfT3VBo3Tf0Rk152hHO","RFCTTuupATcbuN6zFme5tYZJvfo2Wusr"]}],examples:[{brightness:"",startupTime:"",battery:"",appCache:".",account:"",IDFA:""},{brightness:"",startupTime:"",battery:"",IDFA:""},{brightness:"",startupTime:"",battery:"",IDFA:""},{brightness:"",startupTime:"",battery:"",appCache:"",account:"",IDFA:"",IDFV:""},{brightness:"",startupTime:"",battery:"",appCache:"",account:"",IDFA:""}]}]},function(e,t){"use strict";e.exports={encode:function(t){var n=$.Deferred();if(!t){return n.reject("md5 encode content not set")}QunarAPI.train.calculateMD5({toMD5:t,success:function(t){n.resolve(t)},fail:function(){n.reject("md5 encode fail")}});return n.promise()}}},function(e,t,n){"use strict";function G(e){return e&&e.__esModule?e:{"default":e}}var r=n(414);var i=G(r);var s=n(415);var o=G(s);var u=n(417);var a=G(u);var f=n(424);var l=G(f);var c=n(425);var h=G(c);var p=n(426);var d=G(p);var v=n(427);var m=G(v);var g=n(428);var y=G(g);var b=n(457);var w=G(b);var E=n(458);var S=G(E);var x=n(460);var T=G(x);var N=n(463);var C=n(471);var k=G(C);var L=n(477);var A=G(L);var O=n(481);var M=G(O);var _=n(486);var D=G(_);var P=n(487);var H=G(P);var B=n(490);var j=G(B);var F=n(491);var I=G(F);var q=n(492);var R=G(q);var U=n(495);var z=G(U);var W=n(513);var X=G(W);var V=n(514);var J=G(V);var K=n(524);var Q=G(K);var Y={getProvider:function(){return(new i.default).run()},login:function(t,n){return(new o.default(t,n)).run()},loginSilently:function(){function i(){var e,t,n;var r=Common.getStoredInfo("loginUser")||{};var i=r.timeStampPc||0;var s=r.timeStamp||0;e=+((+(new Date)-s)/1e3/60).toFixed(2);t=+((+(new Date)-i)/1e3/60).toFixed(2);n=Math.min(t,e);return n}var t=12;var n=i();var r=$.Deferred();if(n<t){return r.reject("silent login is not allowed to perform multiple times within "+t+" minutes")}return this.login()},psgRead:function(){return(new a.default).run()},psgDetail:function(t){return(new h.default(t)).run()},psgAdd:function(t,n){return(new l.default(t,n)).run()},psgDelete:function(t){return(new d.default(t)).run()},psgUpdate:function(t,n,r,i){return(new m.default(t,n,r,i)).run()},psgReadFromCache:function(){return(new a.default).queryPassengerFromStore()},queryMyOrder:function(t,n){return(new N.OrderQuery(t,n)).run()},refundTicket:function(t){return(new N.TicketRefund(t)).run()},cancelOrder:function(t){return(new N.OrderCancellation(t)).run()},occupy:function(t){return new w.default(t)},submitRegister:function(t){return(new S.default(t)).run()},reschedule:function(t,n,r,i){return(new k.default(t,n,r,i)).run()},refund:function(t){return(new T.default(t)).run()},getPayParamForCashierPage:function(t){return(new A.default(t)).run()},getOrderInfoForCashierPage:function(t){return(new M.default(t)).run()},orderQueryByOrderNo:function(t){return(new N.OrderQueryByOrderNo(t)).run()},queryOrderPayTime:function(t){return(new D.default(t)).run()},secKill:function(t){return new J.default(t)},rescheduleConfirm:function(t){return(new H.default(t)).run()},initUser:function(){return(new j.default).run()},checkMobileCode:function(t,n){return(new I.default(t,n)).run()},rescheduleContinue:function(t,n){return(new R.default(t,n)).run()},wechatPay:function(t,n,r){return(new z.default(t,n,r)).run()},loginProof:function(t){return(new X.default(t)).run()},faceVerification:function(t){return(new Q.default(t)).run()}};e.exports=Y},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=n(372);var o=function(){function e(){i(this,e);this.providerMobile=["mobile","3w"];this.provider3w=["3w","mobile"];this.providerDefault=this.providerMobile;this.successRateLowWatershed=.1;this.avgWatershed=2;this.watershedNonePeakTimeRatio=2;this.watershedPeakTimeRatio=1.5;this.decisionMaking=""}r(e,[{key:"getLastLoginSuccessProvider",value:function(){var t=Common.getStoredInfo("loginUser")||{};return t.provider||""}},{key:"isSuccessRateLow",value:function(t){var n=this.getAjaxDataByProvider(t);if(n.count>=3&&n.successRate<this.successRateLowWatershed){return true}return false}},{key:"getAjaxDataByProvider",value:function(t){var n=s.byAjaxSync();if(n[0].filter.provider==t)return n[0];return n[1]}},{key:"getAjaxData",value:function(){var t=s.byAjaxSync()||[];if(t.length!=2)t=null;return t}},{key:"getModuleData",value:function(){}},{key:"isAjaxDataAmple",value:function(){var t=this.getAjaxData();return t[0].count>=3&&t[1].count>=3}},{key:"isAllUndetermined",value:function(){var t=this.getAjaxData();if(t[0].count==0&&t[1].count==0){return true}return false}},{key:"isParticularProviderGood",value:function(t){var n=this.getAjaxData();var r=0;if(n[1].filter.provider===t)r=1;if(n[r].durationAverage>this.avgWatershed)return false;return true}},{key:"whichProviderFaster",value:function(t){function u(e){return r[e].durationAverage}t=t||"ajax";var n="";var r=this.getAjaxData();if(t!=="ajax")r=this.getModuleData();var i=0,s=1;var o=1;if(this.isAjaxDataAmple()){if(u(0)>u(1)){i=1;s=0}o=u(s)/u(i);if(u(i)<=this.avgWatershed&&o>=this.watershedNonePeakTimeRatio||u(i)>this.avgWatershed&&o>=this.watershedPeakTimeRatio){n=r[i].filter.provider}}return n}},{key:"counterpart",value:function(t){return t=="mobile"?"3w":"mobile"}},{key:"providerToArray",value:function(t){if(t==="mobile")return this.providerMobile;return this.provider3w}},{key:"filterOutNotProperVersion",value:function(t){function i(e){return t}function s(){var e=["3w"];var n=[];t.provider.forEach(function(e,t){if(e!="mobile")n.push(e)});if(n.length===0)n=e;t.provider=n;return $.Deferred().resolve(t)}var n="80011146";var r="133";return Common.isAppVersionEqualOrGreaterThan(n,r).then(i,s)}},{key:"_run",value:function(){function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=$.Deferred();var r=Common.getStoredInfo("getProvider_first_desicion")||{};var i=r.basis;var s=e[t]||"";if(i&&i===s){try{var o=JSON.parse(s);if(Common.boolPurify(o.auto))return n.reject(e)}catch(u){console.warn("switch.hy.12306.interface parse fail");return n.reject(e)}this.decisionMaking="firstDesicion from localStorage";return n.resolve(r.ultraResult)}else return n.reject(e)}function r(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=$.Deferred();var r=this.getProviderFromData();var i=e[t]||"";var s=[],o=[],u=null;var a=0,f=[],l=0,c=[],h=0;var p=0;var d=i&&typeof i==="string";if(!d)return n.resolve(r);i=i.replace(/[ ï¼%]/g,"");i=i.toLowerCase();try{u=JSON.parse(i)}catch(v){}if(!u)return n.resolve(r);console.log("obj:",u);if(u.auto===undefined)u.auto=true;if(Common.boolPurify(u.auto))return n.resolve(r);s=(u.config||"").split("|");s.forEach(function(e,t){f=e.split(",");if(f.length===0)return;if(f[0]=="3w"||f[0]=="mobile")l=100;else l=parseInt(f.shift(),10);if(f.length===0)return;a+=l;c.push(l);o.push(f)});if(o.length===0)return n.resolve(r);console.log("result, weight:",o,c);var m=Common.range(1,a);c.some(function(e,t){h+=e;if(h>=m){p=t;return true}return false});var g=o[p];var y={basis:e[t],ultraResult:g};Common.storeInfo("getProvider_first_desicion",y);console.log("ultraResult:",g);this.decisionMaking="server:"+JSON.stringify(e);return n.resolve(g)}function i(e){var t={decisionMaking:this.decisionMaking,provider:e};console.log("getProvider:",t);return t}var t="switch.hy.12306.interface";return Common.getAppConfig([t]).then(n.bind(this)).then(null,r.bind(this)).then(i.bind(this)).then(this.filterOutNotProperVersion.bind(this))}},{key:"getProviderFromData",value:function(){if(this.isAllUndetermined()){this.decisionMaking="all undetermined:"+this.providerDefault;return this.providerDefault}var t=this.getLastLoginSuccessProvider();if(t){if(this.isParticularProviderGood(t)||this.isSuccessRateLow(this.counterpart(t))){this.decisionMaking="last login success provider:"+t;return this.providerToArray(t)}}t=this.whichProviderFaster();if(t){if(!this.isSuccessRateLow(t)){this.decisionMaking="runs better:"+t;return this.providerToArray(t)}else if(!this.isSuccessRateLow(this.counterpart(t))){this.decisionMaking="runs better:"+this.counterpart(t);return this.providerToArray(this.counterpart(t))}}this.decisionMaking="default:"+this.providerDefault;return this.providerDefault}},{key:"fakeProvider",value:function(t){t=t||["mobile"];var n={decisionMaking:"fake result for test usage",provider:t};return $.Deferred().resolve(n)}},{key:"run",value:function(){return this._run()}}]);return e}();t.default=o},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=l(i);var o=n(316);var u=l(o);var a=n(314);var f=l(a);var d=function(e){function t(e,n){c(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.username=e;r.password=n;r.id="login";r.excludeRetryReason=[];return r}p(t,e);r(t,[{key:"resultInterceptor",value:function(t,n,r,i){this.pushAccountToQunar.apply(this,arguments)}},{key:"pushAccountToQunar",value:function(t,n,r,i){var s=t[0]||"";var o=s;var u=this.password||o&&o.pwd||"";var a=this.username||o&&o.user_name||"";if(!a||!u)return;var f=function(){return Common.event.trigger("pushed12306UserData")};if(!n){o={user_name:a,password:u};Common.push12306UserData(o,u,"",false,s);return}Common.push12306UserData(o,u,"",true,"").then(f,f)}},{key:"func3W",value:function(){function t(e){var t=e.username;return(new f.default).loginAndSaveUserInfo(t,e.password)}return Common.getUserInfoAsync(this.username,this.password).then(t.bind(this))}},{key:"funcMobile",value:function(){return(new u.default(this.username,this.password)).run()}}]);return t}(s.default);e.exports=d},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var o=n(372);var u=n(365)("fusion:FusionRunner");var a=function(){function e(){s(this,e);this.id="";this.excludeRetryReason=[];this.providerObj=null;this.startTimeStamp=0;this.runCount=0}i(e,[{key:"funcMobile",value:function(){}},{key:"func3W",value:function(){}},{key:"registInterceptor",value:function(t,n,r,i){function s(){if(n||!t[0]){this.watcher(n,r,i);return}var e=Common.lookUp(t[0]);switch(e.id){case"usernameOrPasswordNotProvided":break;default:this.watcher(n,r,i);this.watcherFail(i,e.id)}}s.call(this);this.collectPerformenceData.apply(this,arguments);this.resultInterceptor.apply(this,arguments)}},{key:"resultInterceptor",value:function(t,n,r,i){}},{key:"collectPerformenceData",value:function(t,n,r,i){var s={type:"module",id:this.id,isSuccessful:n,failReason:n?"":t[0],duration:r,timeStamp:+(new Date)-r*1e3,provider:i};o.addLogLater(s)}},{key:"watcher",value:function(t,n,i){var s="sino_fusion12306_"+this.id;var o={key:s,duration:n,isSuccessful:t};if(!i){window.sendWatchMessage(o)}else{var u=r({},o);u.key=s+"_"+i;window.sendWatchMessage(u)}}},{key:"watcherFail",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"unknownReason";var r="sino_failure_taxonomy_train_"+t+"_"+this.id+"_"+n;var i={key:r,isSuccessful:false};window.sendWatchMessage(i)}},{key:"runAndIntercept",value:function(t){function i(e){this.registInterceptor(e.result,e.isSuccessful,+e.timeConsuming,t)}var n=t==="mobile"?this.funcMobile:this.func3W;var r=Common.calculateTimeConsuming(n.bind(this));r.progress(i.bind(this));return r}},{key:"runTask",value:function(t){function r(e){console.log("handleTaskResult:",arguments);e=e||{};var t=e.result;delete e.result;e.id=this.id;e.timeStamp=+(new Date);e.failReason="";Common.event.trigger("fusionTask",e);if(!e.isSuccessful){e.failReason=t;n.reject(t[0])}else{n.resolve(t[0])}}var n=$.Deferred();this.runCount++;this.runAndIntercept(t).progress(r.bind(this));return n.promise()}},{key:"shouldRetryParticularReason",value:function(t){var n=t||"";var r=false;if(t&&typeof t.data==="string"){n=t.data}else if(Array.isArray(t)){n=t[0]||""}else{}var i=Common.lookUp(n);console.log("shouldRetryParticularReason:",i);if(i&&i.retryCount&&i.retryCount>0){r=true}else{}console.log("shouldRetryParticularReason:",r);return r}},{key:"genuineRun",value:function(t){function r(e){var t=i();if(t&&(this.runCount===0||this.shouldRetryParticularReason(e))){return this.runTask(t).then(undefined,r.bind(this))}return $.Deferred().reject(e||"æå¡å¨ç¹å¿ï¼è¯·ç¨ååè¯[FAIL:]")}function i(){var e="";if(n.length>0)e=n.shift();return e}this.providerObj=t;var n=[].slice.call(t.provider,0);return r.call(this)}},{key:"getTimecost",value:function(){var t=(+(new Date)-this.startTimeStamp)/1e3;t=+t.toFixed(2);return t}},{key:"ultraWatcher",value:function(t,n){var r=this.getTimecost();if(t||!n){this.watcher(t,r);return}var i=Common.lookUp(n);switch(i.id){case"usernameOrPasswordNotProvided":break;default:this.watcher(t,r)}}},{key:"triggerEvent",value:function(t,n){u("triggerEvent fusionTask",t,n);QunarAPI.train.triggerEvent({event:"fusionTask",data:{id:this.id,type:t}})}},{key:"ultraSuccess",value:function(t){this.triggerEvent("done",t);this.ultraWatcher(true)}},{key:"ultraFail",value:function(t){this.triggerEvent("fail",t);this.ultraWatcher(false,t)}},{key:"run",value:function(){this.startTimeStamp=+(new Date);this.triggerEvent("run");return fusion12306.getProvider().then(this.genuineRun.bind(this)).done(this.ultraSuccess.bind(this)).fail(this.ultraFail.bind(this))}}]);return e}();e.exports=a},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=l(i);var o=n(418);var u=l(o);var a=n(419);var f=l(a);var d=function(e){function t(){c(this,t);var e=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.psgMobile=new f.default;e.psg3W=new u.default;e.id="psgRead";e.excludeRetryReason=[];return e}p(t,e);r(t,[{key:"queryPassengerFromStore",value:function(){return this.psgMobile.queryPassengerFromStore()}},{key:"func3W",value:function(){return this.psg3W.queryPassengerFromNet()}},{key:"funcMobile",value:function(){return this.psgMobile.queryPassengerFromNet()}}]);return t}(s.default);e.exports=d},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(419);var s=o(i);var a=n(318);var f=n(311);var l=n(402);var c=function(){function e(){u(this,e);this.psgTools=new a(Common.getUserInfo());this.queryPassengerStrategy=["myPassenger","confirmPassenger"]}r(e,[{key:"addPassengerWithStore",value:function(t,n){return f(this._addPassengerWithStore.bind(this),arguments)}},{key:"_addPassengerWithStore",value:function(t,n){function r(e){n.belongTo.push("12306");(new s.default).addPassengerIntoStore(n);return e}return pc12306.getPsgTokens().then(pc12306.addMyPassengers.bind(pc12306,t)).then(r)}},{key:"deletePassenger",value:function(){}},{key:"modifyPassenger",value:function(){}},{key:"queryPassengerFromNet",value:function(){function t(e){var t=this.psgTools.updatePassengers("pc",e);t=this.psgTools.getShowDataPassengers(t,this.psgTools);var n={belongTo:"passengers12306",passengers12306:{failReason:"",isSuccessful:true,passengers:t}};return n}function n(e){e=Common.getError3W(e);var t={belongTo:"passengers12306",passengers12306:{failReason:String(e),isSuccessful:true,passengers:e}};return t}return f(this.runBestQueryPassengerProvider.bind(this)).then(t.bind(this),n.bind(this))}},{key:"getQueryPassengerStrategy",value:function(){return this.queryPassengerStrategy}},{key:"runBestQueryPassengerProvider",value:function(){var t=this;var n=this.getQueryPassengerStrategy();var r=function(n){return n==="myPassenger"?t.myPassengerQueryPassenger:n==="confirmPassenger"?t.confirmPassengerQueryPassenger:t.confirmPassengerHardWayQueryPassenger};var i=function s(){function o(e){var t=Common.getError3W(e);var n=Common.lookUp(t);if(n.id==="notLogin")return true;return false}function u(t){var r=$.Deferred();if(o(t))return r.reject.apply(r,arguments);window.sendWatchMessage({key:"hyBuy_queryPassengers3W_"+e,isSuccessful:false});if(n.length){return s()}return r.reject.apply(r,arguments)}function a(){window.sendWatchMessage({key:"hyBuy_queryPassengers3W_"+e,isSuccessful:true});var t=$.Deferred();return t.resolve.apply(t,arguments)}var e=n.shift();var i=r(e);return i.call(t).then(a.bind(t),u.bind(t))};return i()}},{key:"myPassengerQueryPassenger",value:function(){return pc12306.passengersQuery()}},{key:"confirmPassengerQueryPassenger",value:function(){return pc12306.getMyPassengers()}},{key:"confirmPassengerHardWayQueryPassenger",value:function(){var t=function(){return Common.getStoredInfo("apiStatePsgRead")||"fail"};var n=function(){var n=$.Deferred();var r=void 0;var i=function u(){if(r)return;var e=t();if(e==="depending"){return Common.delay(1e3).then(u)}if(e==="done"){return $.Deferred().resolve()}return $.Deferred().reject("fail state")};var s=function(){return n.resolve()};var o=function(){r=true;return n.reject("polling fail")};i().then(s,o);Common.delay(20*1e3).then(o);return n};var r=function(){var t=new l;var n=Common.formatDate(new Date(Date.now()+5*24*60*60*1e3));var r=function(t){var n=t.find(function(e){return e.buttonTextInfo==="é¢è®¢"});if(n){return pc12306.submitOrderRequest(n,"dc")}return $.Deferred().reject("submitOrderRequest fail")};return t.queryLeftTicket({fromCity:"XFB",toCity:"SUB",date:n}).then(r)};return n().then(undefined,r).then(pc12306.getMyPassengers.bind(pc12306))}}]);return e}();e.exports=c},function(e,t,n){"use strict";function a(){this._userInfo=Common.getUserInfo()||{};this.noOwnerRetry=2;this.waitingForVerificationRequeryCount=2;this.passengerTool=new u}var r=n(420);var i=n(421);var s=n(422);var o=n(318);var u=n(423);a.prototype={constructor:a,queryPassenger:function(){return Common.isWorkTime().then(this.queryPassengerFromNet.bind(this),this.queryPassengerFromStore.bind(this))},queryPassengerFromStore:function(){var t=this._getPassengerFromStore();i.convertPassengerForShow(this._userInfo,t);r.sortByName(t);r.mark(t,"12306");var n=r.generatePassengerSuccess("passengers12306",t);return n},isOwnerExists:function(t){var n=Common.getUserInfo()||{};var r=t.some(function(e,t){return e.user_name===n.nickname&&e.id_no===n.id_no});return r},shouldRetryNoOwner:function(t){var n={};var r=this.isOwnerExists(t);if(!r&&this.noOwnerRetry<=0){n={key:"hyBuy_selectPassengerMobile_noOwnerRetry_butStillNoOwner",isSuccessful:false};window.sendWatchMessage(n)}return!r&&this.noOwnerRetry>0},queryPassengerFromNet:function(){function t(e){var t=e.passengers12306.passengers||[];var n=t.every(function(e,t){return e.statusDesc==="å¾æ ¸éª"});n=n&&t.length>0;if(this.waitingForVerificationRequeryCount>0&&n){this.waitingForVerificationRequeryCount--;sendWatchMessage({key:"selectPassengers_allPsgWaitingForVerification"});return this.queryPassengerFromNet()}this.waitingForVerificationRequeryCount=1;return e}return this._queryPassengerFromNet().then(t.bind(this))},_queryPassengerFromNet:function(){function t(e){var t={};var n=e.passengerResult||[];if(this.shouldRetryNoOwner(n)){t={key:"hyBuy_selectPassengerMobile_noOwnerRetry",isSuccessful:false};window.sendWatchMessage(t);this.noOwnerRetry--;return Common.delay(1e3).then(this.queryPassengerFromNet.bind(this))}this.noOwnerRetry=2;if(n.length>0){n=i.convert12306Passenger(this._userInfo,"mobile",n);r.sortByName(n);r.mark(n,"12306");this._savePassengerToStore(n)}return r.generatePassengerSuccess("passengers12306",n)}function n(e,t){return r.generatePassengerFail("passengers12306",e,t)}return this.passengerTool.queryPassenger().then(t.bind(this),n.bind(this))},_getPassengerFromStore:function(){if(!this._userInfo){return[]}var t=Common.getStoredInfo(this._userInfo.user_name+"_passengers");t=t&&t.passengers||[];if(t[0]&&t[0].certNo){return t}t=i.convertCertAndPhone(t);this._savePassengerToStore(t);logger.d("PassengerMobile._getPassengerFromStore",t);return t},_savePassengerToStore:function(t){this._savePassengerToStoreByKey(this._userInfo.user_name+"_passengers",t);this._savePassengerToStoreByKey(this._userInfo.user_name_actual+"_passengers",this.removeOtherPassengersPhone(t))},_savePassengerToStoreByKey:function(t,n){Common.storeInfo(t,{passengers:n||[]},true)},isUserSelf:function(t){return Common.isUserSelf(this._userInfo,t)},removeOtherPassengersPhone:function(t){var n=this,r=[];if(t&&t.length){t.forEach(function(e){if(!n.isUserSelf(e)){if(e.mobile)e.mobile.value=""}r[r.length]=$.extend({},e)})}return r},addPassenger:function(t){function n(e){return r.generateSuccessMessage("addPassenger12306",e)}function i(e){return r.generateFailMessage("addPassenger12306",e)}return this.passengerTool.addPassenger(t).then(n,i)},addPassengerWithStore:function(t,n){function r(){var e=$.Deferred();n.belongTo.push("12306");this.addPassengerIntoStore(n);logger.d("addPassengerWithStore.success",arguments);return e.resolve.apply(e,arguments)}logger.d("addPassengerWithStore",arguments);return this.addPassenger(t).then(r.bind(this))},addPassengerIntoStore:function(t){var n=this._getPassengerFromStore();for(var i=0,s=n.length;i<s;i++){if(r.isSamePassenger(t,n[i])){return}}r.saveAddPassengerForAndroid(t);n.push(t);logger.d("passengerMobile.addPassengerIntoStore",arguments);this._savePassengerToStore(n)},deletePassenger:function(t){function s(e){return r.generateSuccessMessage("deletePassenger12306",e)}function o(e){return r.generateFailMessage("deletePassenger12306",e)}function u(e){var t="",n="";if(e.certs&&e.certs[0]){t=e.certs[0].certID||"";n=i.idTypeTo12306(e.certs[0].type)}else if(e.certType){t=e.certType.certId||e.certNo||"";n=Common.data.certTypeCode[e.certType.code]}return[e.name,t,n]}var n=u(t);return this.passengerTool.deletePassenger(n).then(s,o)},deletePassengerWithStore:function(t){function n(){var e=$.Deferred();this.deletePassengerFromStore(t);return e.resolve.apply(e,arguments)}return this.deletePassenger(t).then(n.bind(this))},deletePassengerFromStore:function(t){var n=this._getPassengerFromStore();var i=r.passengerIndexOf(n,t);if(i>=0){n.splice(i,1)}this._savePassengerToStore(n)},modifyPassenger:function(t){function n(e){logger.d("modifyPassenger.modifySelfFail:",arguments);return $.Deferred().reject({belongTo:"modifySelf",modifySelf:{data:e}})}function i(e){return r.generateSuccessMessage("modifyPassenger12306",e)}function o(e){return r.generateFailMessage("modifyPassenger12306",e)}logger.d("PassengerMobile.modifyPassenger",arguments);if(r.isUserSelf(this._userInfo,t)){return(new s(wireless12306.modifyUserInfo.bind(wireless12306),[t,this._userInfo])).run().then(undefined,n)}else{return this.passengerTool.modifyPassenger(t).then(i,o)}},modifyPassengerWithStore:function(t,n,r){function i(){var e=$.Deferred();this.modifyPassengerIntoStore(n.passenger,r);return e.resolve.apply(e,arguments)}logger.d("PassengerMobile.modifyPassenger",arguments);return this.modifyPassenger(t).then(i.bind(this))},modifyPassengerIntoStore:function(t,n){var i=this._getPassengerFromStore();var s=r.passengerIndexOf(i,n);if(s>=0){i[s]=t}this._savePassengerToStore(i)}};e.exports=a},function(e,t){"use strict";var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r={sortByName:function(t){},sortBySelected:function(t){t.sort(function(e,t){if(e.isSelected==t.isSelected)return 0;if(e.isSelected){return-1}return 1})},clearSelected:function(t){t=t||[];t.forEach(function(e){e.isSelected=false})},isSamePassenger:function(t,n){var r=t.name===n.name;if(!t.birthday)t.birthday="";if(!n.birthday)n.birthday="";r&&(r=t.birthday===n.birthday);if(r&&t.ticketType&&n.ticketType){r=Number(t.ticketType)===Number(n.ticketType)}if(r&&t.certNo&&n.certNo&&t.certNo===n.certNo){return r}if(r&&t.ticketType&&n.ticketType&&Number(t.ticketType)===1){return true}if(!t.certs||!n.certs){return r}if(t.certs.length===0&&n.certs.length===0)return r;if(t.certs.length<1||n.certs.length<1)return false;if(t.certs[0].number&&n.certs[0].number){return r&&t.certs[0].number===n.certs[0].number&&t.certs[0].type===n.certs[0].type}if(t.certs[0].certID&&n.certs[0].certID){return r&&t.certs[0].certID===n.certs[0].certID&&t.certs[0].type===n.certs[0].type}if(t.certs[0].numberObj&&t.certs[0].numberObj){return r&&t.certs[0].numberObj.value===n.certs[0].numberObj.value}return r},passengerIndexOf:function(t,n){var r=-1;for(var i=0;i<t.length;i++){if(this.isSamePassenger(t[i],n)){r=i;break}}return r},mergePassengers:function(t,n){var r=[].slice.call(t,0);n.forEach(function(e){var n=t.some(function(t,n){if(e.certs[0]&&t.certs[0]&&e.certs[0].certID===t.certs[0].certID&&e.certs[0].type===t.certs[0].type&&e.ticketType===t.ticketType&&e.name===t.name){r[n].belongTo.push("qunar");return true}return false});if(!n)r.push(e)});return r},attachIndex:function(t){if(t&&t.length){for(var n=0,r=t.length;n<r;n++){t[n].idx=n}}},mergeLocalPassenger:function(t,n){if(!t&&!n)return[];var r=[].slice.call(n,0);var i=this;t.forEach(function(e){var t=n.some(function(t,n){if(i.isSamePassenger(e,t)){r[n].belongTo.push("local");return true}return false});if(!t)r.push(e)});return r},fakeSelectable:function(t){t.forEach(function(e,t){e.genuineSelectable=e.selectable?1:0;e.selectable=1})},saveAddPassengerForAndroid:function(t){if(QApp.sniff.ios)return;Common.storeInfo("addQunarPassengerSuccessForAnd",t||{},true)},selectAddPassengerForAndroid:function(t){if(QApp.sniff.ios)return;var n=this;var r=Common.getStoredInfo("addQunarPassengerSuccessForAnd");if(r&&r.name){Common.storeInfo("addQunarPassengerSuccessForAnd",{},true);t.forEach(function(e,t){if(n.isSamePassenger(r,e)){e.isSelected=true}})}},bizModeTranslator:function(t){var n="both";switch(t){case"qunar":n="qunar";break;case"9":n="both";break;case"12306":case"6":default:n="12306";break}return n},getPassengerBelongTo:function(t){var n="12306";if(!(t.belongTo&&t.belongTo.length!==0))return n;var r=t.belongTo.indexOf("qunar")>=0;var i=t.belongTo.indexOf("12306")>=0;var s=t.belongTo.indexOf("local")>=0;if(s)n="local";if(i&&r)n="both";else if(r)n="qunar";return n},isUserSelf:function(t,n){return Common.isUserSelf(t,n)},_unifySelectable:function(t){t.forEach(function(e){e.genuineSelectable=e.selectable?1:0;e.selectable=e.genuineSelectable})},mark:function(t,n){t.forEach(function(e){e.belongTo=[n]});this._unifySelectable(t)},generatePassengerFail:function(t,n,r){var i={belongTo:t};i[t]={isSuccessful:false,failReason:n,passengers:[],data:r};return $.Deferred().reject(n,i)},generatePassengerSuccess:function(t,n){var r={belongTo:t};r[t]={isSuccessful:true,failReason:"",passengers:n};return r},generateSuccessMessage:function(t,n){return this._generateMessage(t,true,"",n)},generateFailMessage:function(t,r){var i=r;if((typeof r==="undefined"?"undefined":n(r))==="object"&&r.belongTo&&r[r.belongTo]){i=r[r.belongTo].failReason||"æå¡å¨ç¹å¿ï¼è¯·ç¨ååè¯"}return $.Deferred().reject(r,this._generateMessage(t,false,i,r))},_generateMessage:function(t,n,r,i){var s={belongTo:t};s[t]={isSuccessful:n,failReason:r,data:i};return s},signOwner:function(t,n){n.forEach(function(e){e.isOwner=Common.isUserSelf(t,e)})}};e.exports=r},function(e,t,n){"use strict";var r={ID:"1",PP:"B",NI:"1",TB:"G",GA:"C"};var i={0:"æäººç¥¨",1:"å¿ç«¥ç¥¨",2:"å­¦çç¥¨",3:"ä¼¤æ®åè­¦"};var s=n(318);var o={idTypeTo12306:function(t){return r[t]||""},qunarPassengerTypeMap:function(t){return i[t]||""},convertPassengerForShow:function(t,n){n.forEach(function(e,n){e.passenger_type_desc=this.qunarPassengerTypeMap(e.ticketType);e.deletable=!this.isUserSelf(t,e)?"true":undefined;e.idx=n}.bind(this))},isUserSelf:function(t,n){return Common.isUserSelf(t,n)},convertCertAndPhone:function(t){t=t||[];t.forEach(function(e){var t=e.card||{};$.extend(e,{certNo:t.certID,certType:{name:t.name,code:t.type},phone:e.mobile&&e.mobile.value})});return t},convertForAutoFillPassenger:function(t){t=t||[];t.forEach(function(e){if(e.certs&&e.certs.length>=1){return}var t=e.card||{};var n="";if(t.certID){n=t.certID}else if(t.numberObj&&t.numberObj.value){n=t.numberObj.value}else if(e.certNo){n=e.certNo}$.extend(e,{certNo:n,certType:{name:t.name,code:t.type},certs:[{type:t.type,numberObj:t.numberObj||{display:n,value:n},certID:n,number:n}],phone:e.mobile&&e.mobile.value})});return t},convert12306Passenger:function(t,n,r){r=this._convert12306PassengerForOldInterface(n,r);this.convertPassengerForShow(t,r);return r},_convert12306PassengerForOldInterface:function(t,n){var r=[];if(n&&n.length>0){n.forEach(function(e){var n=t==="pc"?this._getItemFromPcAPI(e):this._getItemFromMobileAPI(e);$.extend(n,{certNo:n.card.certID,certType:{name:n.card.name,code:n.card.type},phone:n.mobile.value});r.push(n)}.bind(this))}return r},convertLocalPassenger:function(t,n){this._rectifyQunarPassenger(n);this.convertPassengerForShow(t,n);this.attachCertNoAndType(n)},convertQunarPassenger:function(t,n){this._rectifyQunarPassenger(n);this.convertPassengerForShow(t,n);this.attachCertNoAndType(n)},attachCertNoAndType:function(t){var n=null;t.forEach(function(e){n=e.certs[0]||{};e.certNo=n.certID||"";e.certType={name:n.name||"",code:n.type||""};n.numberObj=n.numberObj||{};n.numberObj.value=n.numberObj.value||e.certNo})},_rectifyQunarPassenger:function(t){var n=[];var r={};var i=[];t.forEach(function(e){i=e.certs;if(!i)i=[e.certType||{}];i.forEach(function(t,i){if(t.numberObj)t.certID=t.certID||t.numberObj.value;else t.certID=t.cardId||t.certID;delete t.certId;delete t.cardId;if(i>=1){r=$.extend(true,{},e);r.certs=[t];n.push(r)}})});t.concat(n)},getAddPassenger:function(t){if(t.certs.length<=0){return{belongTo:[],certNo:t.certNo,name:t.name.toUpperCase(),card:{type:"",name:"",certID:t.certNo,numberObj:{display:"",value:""}},certs:[],birthday:t.birthday||"",certType:{name:"",code:""},deletable:"true",selectable:1,genuineSelectable:1,studentExt:t.studentExt,passenger_type_desc:this.qunarPassengerTypeMap(t.ticketType),ticketType:t.ticketType}}return{belongTo:[],certNo:t.certs[0].cardId,name:t.name.toUpperCase(),card:{type:t.certs[0].type,name:t.certs[0].name,certID:t.certNo,numberObj:{display:"",value:t.certs[0].cardId}},birthday:t.birthday||"",certType:{name:t.certs[0].name,code:t.certs[0].type},certs:[{type:t.certs[0].type,name:t.certs[0].name,certID:t.certs[0].cardId,number:t.certs[0].cardId,numberObj:{display:"",value:t.certs[0].cardId}}],deletable:"true",selectable:1,genuineSelectable:1,studentExt:t.studentExt,passenger_type_desc:this.qunarPassengerTypeMap(t.ticketType),ticketType:t.ticketType}},_getItemFromMobileAPI:function(t){var n=new s(Common.getUserInfo());return n._getItemFromMobileAPI(t)},_getItemFromPcAPI:function(t){var n=new s(Common.getUserInfo());return n._getItemFromPcAPI(t)}};e.exports=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=n(316);var o=function(){function e(t,n){i(this,e);this.func=t;this.paramsArr=n||[]}r(e,[{key:"shouldPerformLoginFirst",value:function(){var t=25;var n={shouldPerformLoginFirst:false,decisionMaking:"last login within "+t+" min"};if(!Common.isLastLoginWithin("mobile",t)){n={shouldPerformLoginFirst:true,decisionMaking:"last login beyond "+t+" min"}}return n}},{key:"performLoginSmartly",value:function(){var t=this.shouldPerformLoginFirst();if(t.result){return this.performLogin()}return $.Deferred().resolve(t)}},{key:"performLogin",value:function(){return(new s).run()}},{key:"runTask",value:function(){return this.func.apply(null,this.paramsArr)}},{key:"loginAndRerunTask",value:function(t){console.log("loginAndRerunTask:",arguments);var n=$.Deferred();var r=Common.lookUp(t);if(r.id!=="notLogin"){return n.reject.apply(n,arguments)}return this.performLogin().then(this.runTask.bind(this))}},{key:"run",value:function(){return this.performLoginSmartly().then(this.runTask.bind(this)).then(undefined,this.loginAndRerunTask.bind(this))}}]);return e}();e.exports=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(422);var s=o(i);var a=function(){function e(){u(this,e)}r(e,[{key:"queryPassenger",value:function(){function t(e){var t=e.passengerResult||[];e.passengerResult=Common.atopOwner(t);return e}return(new s.default(wireless12306.queryPassenger.bind(wireless12306))).run().then(t)}},{key:"querySinglePassenger",value:function(t){return(new s.default(wireless12306.querySinglePassenger.bind(wireless12306),[t])).run()}},{key:"addPassenger",value:function(t){return(new s.default(wireless12306.addPassenger.bind(wireless12306),[t])).run()}},{key:"deletePassenger",value:function(t){return(new s.default(wireless12306.deletePassenger.bind(wireless12306),t)).run()}},{key:"modifyPassenger",value:function(t){return(new s.default(wireless12306.modifyPassenger.bind(wireless12306),[t])).run()}}]);return e}();e.exports=a},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=l(i);var o=n(418);var u=l(o);var a=n(419);var f=l(a);var d=function(e){function t(e,n){c(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.passenger=e;r.formatPassenger=n;r.id="psgAdd";r.excludeRetryReason=[];return r}p(t,e);r(t,[{key:"func3W",value:function(){return(new u.default).addPassengerWithStore(this.passenger,this.formatPassenger)}},{key:"funcMobile",value:function(){return(new f.default).addPassengerWithStore(this.passenger,this.formatPassenger)}}]);return t}(s.default);e.exports=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=a(i);var o=n(311);var u=a(o);var h=n(423);var p=function(e){function t(e){f(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.id="psgDetail";n.excludeRetryReason=[];n.passenger=e;return n}c(t,e);r(t,[{key:"start",value:function(t){function i(e){return["1","B","G","C"][["NI","PP","TB","GA"].indexOf(e)]}function s(){var e={};var n=r.passenger;var s=i(n.certs[0].type);if(t){e={name:n.name,card_type:s,card_no:n.certs[0].certID,passenger_type:+n.ticketType+1+""}}else{e={_json_att:"",passenger_name:n.name,passenger_id_type_code:s,passenger_id_no:n.certs[0].certID,passenger_type:+n.ticketType+1+""}}return e}function o(e){r.StudentExtdata=e;Common.postRequestWithCache("t_tCitySuggest",{}).done(u).fail(f)}function u(e){r.CitySuggest=e;if(r.passenger&&r.passenger.ticketType==2){if(t){var i=s();(new h).querySinglePassenger(i).then(l,f)}else{pc12306.getPsgTokens().then(a,f)}}else{n.resolve({StudentExtdata:r.StudentExtdata,CitySuggest:r.CitySuggest})}}function a(e){var t=s();pc12306.querySinglePassenger(t).done(l).fail(f)}function f(e){var t=Common.getError3W(e);n.reject(t)}function l(e){function i(e){r.SchoolList=e;var t={StudentExtdata:r.StudentExtdata,CitySuggest:r.CitySuggest,SchoolList:r.SchoolList};n.resolve(t)}if(!r.passenger.studentExt){r.passenger.studentExt={}}if(e.studentInfoList&&e.studentInfoList[0]){r.passenger.studentExt.discountSectionBeginCode=e.studentInfoList[0].preference_from_station_code;r.passenger.studentExt.discountSectionEndCode=e.studentInfoList[0].preference_to_station_code;r.passenger.studentExt.intendedTime=e.studentInfoList[0].enter_year;r.passenger.studentExt.provinceCode=e.studentInfoList[0].province_code;r.passenger.studentExt.schoolCode=e.studentInfoList[0].school_code;r.passenger.studentExt.schooling=e.studentInfoList[0].school_system;r.passenger.studentExt.studentNo=e.studentInfoList[0].student_no}else if(e["studentInfoDTO.enter_year"]){r.passenger.studentExt.discountSectionBeginCode=e["studentInfoDTO.preference_from_station_code"];r.passenger.studentExt.discountSectionEndCode=e["studentInfoDTO.preference_to_station_code"];r.passenger.studentExt.intendedTime=e["studentInfoDTO.enter_year"];r.passenger.studentExt.provinceCode=e["studentInfoDTO.province_code"];r.passenger.studentExt.schoolCode=e["studentInfoDTO.school_code"];r.passenger.studentExt.schooling=e["studentInfoDTO.school_system"];r.passenger.studentExt.studentNo=e["studentInfoDTO.student_no"]}var t={code:r.passenger.studentExt.provinceCode};Common.postRequestWithCache("t_tSchoolList",t,r.passenger.studentExt.provinceCode).done(i).fail(f)}var n=$.Deferred();var r=this;Common.postRequest("t_tStudentExt",{}).done(o).fail(f);return n.promise()}},{key:"func3W",value:function(){return this.start(false)}},{key:"funcMobile",value:function(){return this.start(true)}}]);return t}(s.default);e.exports=p},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=l(i);var o=n(418);var u=l(o);var a=n(419);var f=l(a);var d=n(318);var v=n(311);var m=function(e){function t(e){c(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.passenger=e;n.id="psgDelete";n.excludeRetryReason=[];return n}p(t,e);r(t,[{key:"func3W",value:function(){function t(){var e=this.passenger;var t=new d;var n=Common.getCertsFromPassenger(e);var r=t.idTypeTo12306(n.type);var i=new f.default;return pc12306.deleteMyPassengers(e.name,r,n.certID).then(i.deletePassengerFromStore.bind(i,e))}return v(t.bind(this))}},{key:"funcMobile",value:function(){var t=new f.default;var n=this.passenger;return t.deletePassenger(n).then(t.deletePassengerFromStore.bind(t,n))}}]);return t}(s.default);e.exports=m},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=o(i);var l=n(419);var c=function(e){function t(e,n,r,i){u(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.id="psgUpdate";s.orgPassenger=r;s.param=n;s.dstPassenger=e;s.pwFlag=i;s.excludeRetryReason=[];return s}f(t,e);r(t,[{key:"checkUserSelf",value:function(){var t=Common.getUserInfo();if(t&&t.nickname==this.orgPassenger.name&&t.id_no==this.orgPassenger.certs[0].certID){return true}return false}},{key:"func3W",value:function(){function t(){var e=Common.getUserInfo()||{};if(this.checkUserSelf()){return pc12306.modifyUserInfo(this.dstPassenger,e,this.pwFlag)}else{return pc12306.editMyPassengers(this.dstPassenger)}}return pc12306.getPsgTokens().then(t.bind(this))}},{key:"funcMobile",value:function(){return(new l).modifyPassengerWithStore(this.dstPassenger,this.param,this.orgPassenger)}}]);return t}(s.default);e.exports=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=o(i);var l=n(429);var c=n(448);var h=function(e){function t(e){u(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.view=e;n.assist=null;n.id="occupation";n.excludeRetryReason=[];return n}f(t,e);r(t,[{key:"getAssist",value:function(){return this.assist}},{key:"func3W",value:function(){var t=this;return Common.delay(10*1e3).then(function(){t.assist=new c(t.view,t.view.params);return t.assist.run()})}},{key:"funcMobile",value:function(){var t=this;return Common.delay(10*1e3).then(function(){t.assist=new l(t.view,t.view.params);return t.assist.run()})}}]);return t}(s.default);e.exports=h},function(e,t,n){"use strict";function y(e,t,n){this.view=e;this.formData=t;this.trainInfo=n;this.payMethod="";this.payParams=null;this.occupationResultDefer=null;this.saveOrderManager=null;this.clientBuyTimeOut=15;this.clientBuyPremeditatedTimeOut=300;this.notStartSellRetryTimes=-1;this.resultDefer=$.Deferred();this.hasTimedOut=false;this.notifyServerDefer=null;this.saveOrderSuccessDefer=$.Deferred();this.qgpwwOrderResult=null;this.purchaseCardData=null}var r=function(){function e(e,t){var n=[];var r=true;var i=false;var s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=true;s=a}finally{try{if(!r&&o["return"])o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var i=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var s=n(430);var o=n(318);var u=n(384);var a=n(313);var f=n(431);var l=n(432);var c=n(433);var h=n(435);var p=n(444);var d=n(445);var v=n(446);var m=n(447),g=m.peakTime12306Handler;y.prototype={constructor:y,handleOccupySuccessAffairs:function(t,n,r){this.resultDefer.resolve.apply(this,arguments);var i=this.view;this.payMethod=t;if(n)this.payParams=n;i.occupySuccess(t,this.payParams,r);f.resultBeacon()},getCashInfo:function(){function n(e){function r(e){var t=$.Deferred();$.extend(true,this.payParams,e);f.setBeacon(f.steps.getCashInfo);return t.resolve.apply(t,arguments)}function i(e){var t=$.Deferred();var n=Common.concatFailReason("è·åæ¯ä»ä¿¡æ¯å¤±è´¥",e);this.exceptionHandler._alert.call(this,n);this.handleOccupyFailAffairs(e);f.setBeacon(f.steps.getCashInfo,false,e);return t.reject.apply(t,arguments)}var n={orderNo:t.orderInfo.orderNo,contactPhone:t.orderInfo.contact.phone,uuid:e.uuid||"",userId:e.userQunarID||"",userName:e.userName||"",hasLogin12306:Common.may12306LoggedIn(),source:200};return Common.postRequest("t_tTrainGetCashInfo",n).then(r.bind(this),i.bind(this))}var t=this.payParams;if(this.payMethod!=="qunar"&&this.payMethod!=="purchaseCardPay"){return $.Deferred().resolve(this.payParams)}return Common.getQunarUserInfo().then(n.bind(this))},handleOccupyFailAffairs:function(t){var n=this.view;n.occupyFail(t);f.resultBeacon(false,t)},qunarBuySuccessWatcher:function(){f.setBeacon(f.steps.serverOccupy)},qunarBuyFailWatcher:function(t){f.setBeacon(f.steps.serverOccupy,false,t)},goToOrderDetail12306:function(){QunarAPI.train.openView({viewName:"12306OrderList"})},goToSeatList:function(){this.view.lifetimeEnd();this.view.goToOta()},goToBooking:function(){this.view.lifetimeEnd();this.view.hide()},goToSearchList:function(){this.view.lifetimeEnd();var t=this.view.form.orderInfo.trainInfo;var n={railwayType:"twostation",dep:t.from,arr:t.to,date:t.depDateForShow};var r=QApp.sniff.android?"trainBigTrafficList":"search";var i=Common.getPhoneSchema()+"railway/"+r+"?"+$.param(n);Common.sendSchema(i)},goToRob:function(t){this.view.lifetimeEnd();var n=this.view.form.orderInfo.trainInfo;var r={dep:n.from,arr:n.to,date:n.depDateForShow,trainNumber:n.no,seat:n.seat,bizMode:4};var i=Common.getPhoneSchema()+"railway/fillCloudRobOrder?"+$.param(r);f.setBeacon(f.steps.rob);if(t){var s="placeSnatchTicketOrderWhenYpNotEnough";this.view.watcher(s,true);Common.sendSchema(t);return}Common.sendSchema(i)},goToQunarOrderDetail:function(t){var n=this.getSaveOrderManagerCore().getLatestResult();var r=null;if(n&&n.isSuccessful)r=n.args[0];if(!r)return false;t=r;this.view.lifetimeEnd();var i={orderNo:t.orderInfo.orderNo,contactPhone:t.orderInfo.contact.phone||"",backVCName:"main",toMain:true};var s=Common.getPhoneSchema()+"railway/orderDetail?"+$.param(i);Common.sendSchema(s);return true},getSaveOrderManager:function(){if(!this.saveOrderManager)this.saveOrderManager=new a.RunOnce;return this.saveOrderManager},getSaveOrderManagerCore:function(){function t(e){var t=e&&e.orderInfo&&e.orderInfo.orderNo||"";if(t.indexOf("qgpww")>=0){this.qgpwwOrderResult=e;this.saveOrderSuccessDefer.resolve(e)}else{this.saveOrderSuccessDefer.reject(e)}}if(!this.saveOrderManagerCore)this.saveOrderManagerCore=new a.RunOnce;this.saveOrderManagerCore.resultDefer.done(t.bind(this));return this.saveOrderManagerCore},attachDefaultFormParams:function(){var t=this.view;t.form=t.form||this.formData;t.form.orderInfo.agent.servicePhone=t.form.orderInfo.agent.servicePhone||"";var n,r="0";t.form.orderInfo.passengers.forEach(function(e,t){n=e.originCertNo||e.certNo;if(n&&e.certType.code==="NI"){r=(+n.charAt(16)+1)%2;r=r.toString()}e.gender=e.gender||r})},gotoPurchaseCardPay:function(t){var n=this.purchaseCardData;var r=t.orderInfo;var i={orderNo:r.orderNo,contactPhone:r.contact.phone||""};if(n&&n.hasPurchaseCard){this.goToQunarPay(t)}else{QApp.open("openBankPage",{param:{payParams:JSON.stringify(i),purchaseCardData:JSON.stringify(n),fromSource:"occupySeatMobilePage"}})}},goToQunarPay:function(t){var n=this.view;this.occupySuccessPayMethodWatcher({key:"qunar"});this.occupySuccessPayMethodWatcher({key:"qunar_client"});t.payInfo.payTypeList.length&&QunarAPI.train.checkout({submitResult:t,expressIsOn:n.form.orderInfo.withReceiver||false,success:function(t){}})},gotoOccupySeatedPage:function(t){var n=JSON.stringify(t);var r={};if(this.occupationResultData&&this.occupationResultData.ticketInfo12306List){r={tickets:this.occupationResultData.ticketInfo12306List,order_timeout_date:this.occupationResultData.lastPayTime}}else{r.tickets=this.getTicketsFake()}var i=Common.getPhoneSchema()+"railway/grabSeatFinish?"+"orderData="+encodeURIComponent(n)+"&ticketInfo="+encodeURIComponent(JSON.stringify(r));Common.sendSchema(i)},getTicketsFake:function(){var t=this.view.form;var n=t.orderInfo;var r=n.ticketPrice;var i=n.trainInfo.seat;var s;var o=[];n.passengers.forEach(function(e){s={passengerName:e.name,price:r,carriageName:"",seatName:"",seatTypeName:i};o.push(s)});return o},isCanBuyCarProduct:function(t){var n=t;if(n.canBuyCarProduct){return $.Deferred().resolve()}return $.Deferred().reject()},isOccupationSuc:function(){if(this.occupationResultData){return $.Deferred().resolve()}else{return $.Deferred().reject()}},gotoQunarPayOrGotoOccupySeatedPage:function(t){$.when(this.isCanBuyCarProduct(t)).then(this.gotoOccupySeatedPage.bind(this,t),this.goToQunarPay.bind(this,t))},goTo12306Pay:function(t,n){function u(){i.occupySuccessPayMethodWatcher({key:"12306"});i.occupySuccessPayMethodWatcher({key:"12306_client"});QApp.open("cashierPage",s)}function a(){Common.alert("è¯·åçº§å®¢æ·ç«¯åè¿è¡æ¯ä»")}var r=0;var i=this;t.ticketResult.forEach(function(e){r+=+e.ticket_price});var s={param:{orderNo:t.ticketResult[0].sequence_no,order_timeout_date:t.ticketResult[0].pay_limit_time,batch_no:t.ticketResult[0].batch_no,totalPrice:r,orderSaveData:JSON.stringify(this.saveOrderResp12306Pay),payMethod:n,tickets:JSON.stringify(this.getOccupation().form.tickets),purchaseCardData:JSON.stringify(this.purchaseCardData)}};var o={iosVersion:80011132,adrVersion:101};Common.isValidityAppVersion(o).then(u,a)},goToPay:function(){if(this._peakTimeRetry===true){this.sendWatchMessage({key:"peakTime12306_retry_occupySeat_success",isSuccessful:true});this._peakTimeRetry=false}var t=this.payParams&&this.payParams.orderInfo&&this.payParams.orderInfo.orderNo;t=t||this.saveOrderResp12306Pay&&this.saveOrderResp12306Pay.orderInfo&&this.saveOrderResp12306Pay.orderInfo.orderNo;this.view.broadcastSequenceNo(t);var n=this.occupationConfiguration;var r=n.buyAndPayMethod.occupySuccPayMode;if(r=="12306ProxyDebit"&&!this.view.watcherTag_proxyPay){var i="hyBuy_occupySeatMobile_occupySuc_proxyPay";if(this.payMethod=="qunar"){i+="_quanrPay"}this.view.watcherTag_proxyPay=true;window.sendWatchMessage({key:i,isSuccessful:true})}this.notifyPayMethodToServer(this.payMethod);switch(this.payMethod){case"qunar":this.gotoQunarPayOrGotoOccupySeatedPage(this.payParams);break;case"12306":this.goTo12306Pay(this.payParams,"12306");break;case"12306ProxyDebit":this.goTo12306Pay(this.payParams,"12306ProxyDebit");break;case"purchaseCardPay":this.gotoPurchaseCardPay(this.payParams);break;case"12306MixedCashierPay":this.goTo12306Pay(this.payParams,"12306MixedCashierPay");break;case"12306ProxyDebitMixedCashierPay":this.goTo12306Pay(this.payParams,"12306ProxyDebitMixedCashierPay");break}},notifyPayMethodToServer:function(t){function o(){}function u(){}var n=this.getSaveOrderManagerCore().getLatestResult();var r=null;if(n||n.isSuccessful)r=n.args[0];if(!r)return;var i={orderNo:r.orderInfo.orderNo,payMode:t};var s={type:9,content:JSON.stringify(i)};return Common.postRequest("t_tTrainNotifyServer",s).done(o.bind(this)).fail(u.bind(this))},goToLogin:function(){QunarAPI.train.openView({viewName:"login12306"})},occupy:function(t){function n(e){this.seatsMatchingWatcher(e.ticketResult);return e}if(this.occupationResultDefer)return this.occupationResultDefer;this.occupationRunner=fusion12306.occupy(this.view.form);this.occupationResultDefer=this.occupationRunner.run().done(n.bind(this)).done(this.notifyServerOccupationResult.bind(this,true)).progress(this.logUltraOccupationResult.bind(this)).always(this.logResultTimeCost.bind(this));return this.occupationResultDefer},logResultTimeCost:function(){var t=this.view.ultraOccupationResult?this.view.ultraOccupationResult.length:0;if(t===0)return;var n=this.view.ultraOccupationResult[t-1];this.watchTimeCost(n)},watchTimeCost:function(t){var n=Math.round(t.timecost);var r="hyBuy_"+QApp.router.getCurViewName()+"_confirmSingleSuccess_timecost_"+n+"s";var i={key:r,isSuccessful:t.isSuccessful};window.sendWatchMessage(i)},logUltraOccupationResult:function(t){t.totalTimecost=((Date.now()-this.view.getInTimeStamp)/1e3).toFixed(2);this.view.ultraOccupationResult=this.view.ultraOccupationResult||[];this.view.ultraOccupationResult.push(t)},getOccupation:function(){return this.occupationRunner&&this.occupationRunner.getOccupation()},abort:function(){var t=this.getOccupation();if(t)t.abort()},timeOutRenderQunarBuyAndPay:function(){this.getSaveOrderManager().run(this.qunarBuyAndPay,this)},calculateTimeBeforeDeparture:function(){function i(e){if(e)n=e;var i=(t.getTime()-n.getTime())/1e3/60;r.resolve({timeSpan:i,serverTime:e.serverTime})}var t=Common.parseDateTime(this.view.form.orderInfo.trainInfo.departureTime);var n=Date.now();var r=$.Deferred();Common.getServerTime().always(i);return r},getSwitch:function(){function n(e){if(!e["progressBarTimeout.appClientOccupy"])e["progressBarTimeout.appClientOccupy"]=this.clientBuyTimeOut;if(!e["switch.clientBuyPremeditatedTimeOut"])e["switch.clientBuyPremeditatedTimeOut"]=this.clientBuyPremeditatedTimeOut;if(!e["switch.appClientOccupy"])e["switch.appClientOccupy"]=true;if(!e["switch.appClientOccupyPay"])e["switch.appClientOccupyPay"]="2,4";if(e["switch.appClientOccupy"]==="true")e["switch.appClientOccupy"]=true;if(e["switch.appClientOccupy"]==="false")e["switch.appClientOccupy"]=false;t.resolve(e)}var t=$.Deferred();Common.getAppConfig(["progressBarTimeout.appClientOccupy","switch.appClientOccupy","switch.appClientOccupyPay","switch.clientBuyPremeditatedTimeOut"]).always(n);return t},getIsNeedOpenBank:function(){function f(e){i.purchaseCardData=e;r.resolve.apply(r,arguments)}function l(){r.reject.apply(r,arguments)}function c(e){var t=["qunar","12306","12306ProxyDebit"];if(t.indexOf(e)>-1){return true}return false}var t=this.getSaveOrderManagerCore().getResult();if(t&&t.length>0)t=t[t.length-1]["args"][0];else t=this.qgpwwOrderResult;var n=t.orderInfo,r=$.Deferred(),i=this,s=null;var o=this.occupationConfiguration.buyAndPayMethod;var u=o.occupySuccPayMode,a=o.occupyFailPayMode;if(c(u)&&c(a)){return}s={orderNo:n.orderNo,contactPhone:n.contact.phone||"",operateType:"1"};Common.postRequest("t_tTrainPurchaseCard",s).then(f,l);return r.promise()},getTrainServerJudge:function(){function t(e,t){if(t&&t.bstatus&&(t.bstatus.code===172||t.bstatus.code===180)){return true}return false}function n(){return this.qunarSaveOrderFake().then(this._getTrainServerJudge.bind(this))}function r(){}return a.execAsyncFunctionInApproximateInterval(n,this,3,1e3,true,[],t).fail(r.bind(this))},_getTrainServerJudge:function(t){function o(e){if(e.judgeCode===0||e.judgeCode==="0"){n.resolve(JSON.parse(e.resultJson))}else{u()}}function u(e){var t={occupyMode:2,canServerBackUp:true,occupySuccPayMode:"qunar",occupyFailPayMode:"qunar"};n.resolve(t)}var n=$.Deferred(),r=this.view.form;var i={bizMode:r.bizMode,trainOutTicketMode:2,trainStartTime:r.orderInfo.trainInfo.departureTime,orderNo:t.orderInfo.orderNo,contactPhone:t.orderInfo.contact.phone||"",useNewOccupyConf:true};this.view.collectRecord("orderNoQunar",t.orderInfo.orderNo);var s={judgeType:2,judgeParam:JSON.stringify(i)};Common.postRequest("t_tTrainServerJudge",s).done(o).fail(u);return n},isWorkTime:function(){function n(){t.resolve({isWorkTime:true})}function r(){t.resolve({isWorkTime:false})}var t=$.Deferred();Common.isWorkTime().then(n,r);return t},getAllControllElements:function(){function o(e,n,r,i){var s={buyAndPayMethod:n};var o=$.extend(true,{},e,s,r,i);t.resolve(o)}function u(e){t.reject.apply(t,arguments)}var t=$.Deferred();var n=this.isWorkTime();var r=this.getTrainServerJudge();var i=this.getSwitch();var s=this.calculateTimeBeforeDeparture();$.when(n,r,s,i).then(o.bind(this),u.bind(this));return t},parseAppClientOccupyPay:function(t){var n=t["switch.appClientOccupyPay"];n=n.replace(/[ ]+/g,"");n=n.replace(/ï¼/g,",");var r=n.split("@");var i,s,o,u=[];r.forEach(function(e,t){o={};i=e.split(",|");if(i.length===1)i=e.split("|");o.payMethod=i[0];u.push(o);if(!i[1])return;s=i[1].split("-");o["start"]=s[0];o["end"]=s[1]});return u},getAppClientOccupyPay:function(t){var n=this.parseAppClientOccupyPay(t);var r="2,4",i=t.timeSpan;n.some(function(e,t){if(!e.start||!e.end){r=e.payMethod;return true}else if(i>=e.start&&i<e.end){r=e.payMethod;return true}return false});return r},cacheUnavailableAccount:function(){l.cacheUnavailableAccount()},changeAccount:function(){this.view.isOccupationFailed=false;this.view.changeAccount=true;this.goToLogin()},exceptionHandler:{title:"å°é©¼æ¸©é¦¨æç¤º",_alert:function(t){QApp.Kami.alert.hide();this.view.alert({title:this.exceptionHandler.title,content:this.exceptionHandler._modifyMsg(t),onOk:this.goToSeatList.bind(this)})},_alertGoToBooking:function(t){QApp.Kami.alert.hide();this.view.alert({title:this.exceptionHandler.title,content:this.exceptionHandler._modifyMsg(t),onOk:this.goToBooking.bind(this)})},_modifyMsg:function(t){var n="ç³»ç»ç¹å¿ï¼è¯·ç¨ååè¯";if(t==="ypNotEnough")t="ä½ç¥¨ä¸è¶³";if(t==="queueing"){t="æéä¸­ï¼è¯·ç¨åå¨è®¢ååè¡¨ä¸­æ¥çè®¢ç¥¨ç»æ"}if(t==="getPasscodeNewFail")t="è®¢ç¥¨å¤±è´¥";if(t==="errors.order.change")t="å çº¿è·¯è°æ´,æä¸æ¯æè¯¥è½¦æ¬¡è´­ç¥¨";if(typeof t==="string"){if(/^[\w,.;!ï¼ï¼ ]*$/.test(t))t="è®¢ç¥¨å¤±è´¥";if(t.indexOf("system error")>=0)t=n;if(t.indexOf("ä¸è½ä¸ºç©º")>=0)t="æä¸æ¯æè¯¥è½¦æ¬¡è´­ç¥¨"}t=t||n;if((typeof t==="undefined"?"undefined":i(t))==="object")t=n;if(!navigator.onLine)t="è¿æ¥å¤±è´¥ï¼è¯·æ£æ¥æ¨çç½ç»";return t},remindUser:function(t){t=this.exceptionHandler._modifyMsg(t);this.exceptionHandler._alert.bind(this)(t)},confirmRetry:function(t,n){function i(){this.view.watcher("occupationFailRetry",true);this.notifyServerOccupationResult(false,n,true).always(o)}function s(){this.view.watcher("occupationFailRetry",false);this.notifyServerOccupationResult(false,n).always(this.view.hide.bind(this.view))}function o(){window.location.reload()}var r=new $.Deferred;QApp.Kami.alert.hide();this.view.watcher("occupationFailAndCanRetry",true);this.view.confirm({title:this.exceptionHandler.title,content:this.exceptionHandler._modifyMsg(t),okText:"éè¯",cancelText:"åæ¶",onOk:i.bind(this),onCancel:s.bind(this)});return r},cancelTooManyTimes:function(t){QApp.Kami.alert.hide();this.view.confirm({title:this.exceptionHandler.title,content:this.exceptionHandler._modifyMsg(t),okText:"ç¥éäº",cancelText:"æ¢è´¦å·è´­ä¹°",onOk:this.exceptionHandler.qunarHelpHandleBuyWithoutAccount.bind(this),onCancel:this.changeAccount.bind(this)});this.cacheUnavailableAccount()},cancelTooManyTimesSelfHandle:function(t){QApp.Kami.alert.hide();this.view.confirm({title:this.exceptionHandler.title,content:this.exceptionHandler._modifyMsg(t),okText:"å¨çº¿éåº§",cancelText:"æ¢è´¦å·è´­ä¹°",onOk:this.goToSeatList.bind(this),onCancel:this.changeAccount.bind(this)});this.cacheUnavailableAccount()},retry:function(t){t=this.exceptionHandler._modifyMsg(t);this.exceptionHandler._alertGoToBooking.bind(this)(t)},recommendDelivary:function(t){var n=this.view;var r=this.exceptionHandler._modifyMsg(t);n.confirm({title:this.exceptionHandler.title,content:r,cancelText:"åæ¶",okText:"ç¥éäº",onCancel:this.goToSeatList.bind(this),onOk:this.exceptionHandler.qunarHelpHandleBuyWithoutAccount.bind(this)})},verificationGuide:function(t){v.toVerificationGuide({verifyType:2},{notPassPassengerNames:this.view.formDataFor12306.passenger_names,form:this.view.form})},selfHandle:function(t){t=this.exceptionHandler._modifyMsg(t);this.exceptionHandler._alertGoToBooking.bind(this)(t)},qunarHelpHandle:function(t){if(!navigator.onLine)this.exceptionHandler._alert.bind(this)("è¿æ¥å¤±è´¥ï¼è¯·æ£æ¥æ¨çç½ç»");else this.getSaveOrderManager().run(this.qunarBuyAndPay,this,t)},qunarHelpHandleBuyWithoutAccount:function(t){this.goToSeatList()},notLogin:function(t){var n=this.view;if(t==="usernameOrPasswordNotProvided")t="è¯·æ¨åç»å½";QApp.Kami.alert.hide();n.confirm({title:this.exceptionHandler.title,content:t||"è¯·æ¨åç»å½",okText:"å»ç»å½",cancelText:"åæ¶",onCancel:this.goToSeatList.bind(this),onOk:this.goToLogin.bind(this)})},unpay:function(t){var n=this.view;QApp.Kami.alert.hide();n.confirm({title:this.exceptionHandler.title,content:"æ¨ææªæ¯ä»è®¢åï¼è¯·æ¨ä¼åå¤ç",okText:"å»å¤ç",cancelText:"åæ¶",onCancel:this.goToSeatList.bind(this),onOk:function(){QunarAPI.train.openView({viewName:"12306OrderList"});n.flags.unhandledOrders=true}})},checiNotFound:function(t){this.exceptionHandler._alert.bind(this)("æªæ¥è¯¢å°è¯¥è½¦æ¬¡")},ypNotEnoughMsg:function(){var t=this.view.form.orderInfo.trainInfo;t.candidateSeats=t.candidateSeats||[];var n=[t.seat].concat(t.candidateSeats);var r="æ¨æé¢å®ç "+t.no+" æ¬¡åè½¦"+n.join("ã")+"ä½ç¥¨ä¸è¶³ï¼";return r},ypNotEnoughSelfHandle:function(t){var n=this.exceptionHandler.ypNotEnoughMsg.bind(this)();n+="æ¨å¯ä»¥å°è¯æ´æ¢å¶ä»è½¦æ¬¡æåå¸­";QApp.Kami.alert.hide();this.view.displayYpMsg();this.view.alert({title:this.exceptionHandler.title,content:this.exceptionHandler._modifyMsg(n),okText:"æ´æ¢è½¦æ¬¡åå¸­",onOk:this.goToSearchList.bind(this)})},ypNotEnoughQunarHelpHandle:function(t,n){var r=this.exceptionHandler.ypNotEnoughMsg.bind(this)();r+="æ¨å¯ä»¥å°è¯æ¢ç¥¨ææ´æ¢å¶ä»è½¦æ¬¡ãåå¸­ã";QApp.Kami.alert.hide();this.view.displayYpMsg();this.view.confirm({title:this.exceptionHandler.title,content:this.exceptionHandler._modifyMsg(r),okText:"å¸®ææ¢ç¥¨",cancelText:"æ´æ¢è½¦æ¬¡åå¸­",onCancel:this.goToSearchList.bind(this),onOk:this.goToRob.bind(this,n)})},ypNotEnoughGotoOrderDetail:function(t){var n=this;this.notifyServerDefer.then(function(){n.view.watcher("ypNotEnough_gotoOrderDetail",true);return n.goToQunarOrderDetail(t)},this.exceptionHandler.ypNotEnoughQunarHelpHandle.bind(this,t))},ypNotEnoughPlaceSnatchTicketOrder:function(){function i(e){var t=e;if(!Common.boolPurify(t.guidable)||!t.jumpTo){return $.Deferred().reject(t)}this.goToRob(t.jumpTo);return"guideToSnatchTicket"}function s(e){return $.Deferred().reject(e)}var t=this.view.getTrainOrderSaveResult();var n=t.orderInfo.orderNo;var r={orderNo:n,trainOrderSaveParam:this.view.form};return Common.postRequest("t_tTrainOccupyFailGuideRob",r).then(i.bind(this),s.bind(this))},ypNotEnoughTurnToOrderDetailOrShowConfirm:function(t){if(this.view.ABTest.nonTicketOptimize==="B"){return Common.delay().then(this.exceptionHandler.ypNotEnoughGotoOrderDetail.bind(this,t))}return this.exceptionHandler.ypNotEnoughQunarHelpHandle.call(this,t)},ypNotEnoughHandle:function(t){this.exceptionHandler.ypNotEnoughPlaceSnatchTicketOrder.call(this).then(undefined,this.exceptionHandler.ypNotEnoughTurnToOrderDetailOrShowConfirm.bind(this))},_notStartSell:function(t){var n=4e3;if(this.notStartSellRetryTimes===6)n=3e3;else n=4e3;if(this.notStartSellRetryTimes<=0)return false;this.notStartSellRetryTimes--;this.occupationResultDefer=null;Common.delay(n).then(this.run.bind(this));return true},notStartSellSelfHandle:function(t){var n=this.exceptionHandler._notStartSell.call(this,t);if(n===false){this.exceptionHandler.remindUser.call(this,t)}},notStartSellQunarHelpHandle:function(t){var n=this.exceptionHandler._notStartSell.call(this,t);if(n===false){this.exceptionHandler.qunarHelpHandle.bind(this)(t)}}},cancelQgpwOrder:function(){return this.saveOrderSuccessDefer.then(Common.getQunarUserInfo.bind(Common)).then(this._cancelQgpwOrder.bind(this))},_cancelQgpwOrder:function(t){function i(){}function s(){}var n=this.qgpwwOrderResult;if(!n)return;var r={opt:1,orderNo:n.orderInfo.orderNo,orderId:n.orderInfo.orderId,contactPhone:n.orderInfo.contact.phone||"",uuid:t.uuid,username:t.userName};return Common.postRequest("t_tTrainOrderDeal",r).done(i.bind(this)).fail(s.bind(this))},hasTieInProducts:function(){var t=this.view.form.orderInfo.insurancePrice||0;if(t!=0)return true;if(this.view.getOtherPriorServicePrice()!=0)return true;return false},hasCoupons:function(){if(this.view.getCoupons()!=0)return true;return false},postAccountUserToServer:function(t){function a(){r.resolve(t)}function f(){r.resolve(t)}var n=Common.getUserInfo();var r=$.Deferred();if(!n)return r.reject("noUserInfo");var i=new o;var s={orderNo:t.orderInfo.orderNo,accountUser:{name:n.nickname,identityCode:n.id_no,identityType:i.idTypeToQunar(n.id_type_code),mobile:n.mobile,isAccountUser:true}};var u={type:11,content:JSON.stringify(s)};Common.postRequest("t_tTrainNotifyServer",u).done(a).fail(f);return r.promise()},_qunarSaveOrderFake:function(){var t=this.view.param.trainOrderSaveResult;var n;if(t){n=JSON.parse(Common.base64Decode(t));n=n.data||n;return this.postAccountUserToServer(n)}return this._qunarSaveOrder()},_qunarSaveOrder:function(){function t(e){var t=Common.getUserInfo()||{};var n=new o;if(e.userName){$.extend(this.view.form,{userid:e.qunarID,uuid:e.uuid,username:e.userName,accountUser:{name:t.nickname||"",identityCode:t.id_no||"",identityType:n.idTypeToQunar(t.id_type_code||""),mobile:t.mobile||"",isAccountUser:true}})}this.view.form.needCheckHistoryOrder=true;this.view.form.isNeedGetCashInfo=false;this.view.form.is12306accountLogin=Common.may12306LoggedIn();return Common.postRequest("t_tTrainOrderSave",this.view.form).done(r.bind(this)).fail(i.bind(this))}function n(){var e=$.Deferred();return e.reject.apply(e,arguments)}function r(){}function i(){}return Common.getQunarUserInfo().then(t.bind(this),n.bind(this))},notifyServerOccupationResult:function(t,n,r){function i(){if(this.notifyServerDefer)return this.notifyServerDefer;var e=null;if(t){e=this.getClientOccupationParamsForSaveOrder(n);this.notifyServerDefer=this._notifyServerOccupationResult(e,"");return this.notifyServerDefer}this.notifyServerDefer=this._notifyServerOccupationResult({},n,r);return this.notifyServerDefer}return this.saveOrderSuccessDefer.then(i.bind(this))},_notifyServerOccupationResult:function(t,n,r){function p(){f.setBeacon(f.steps.notifyServer)}function d(e){f.setBeacon(f.steps.notifyServer,false,e)}function v(e){var t={1:{code:"1",name:"æäººç¥¨"},0:{code:"2",name:"å¿ç«¥ç¥¨"},2:{code:"3",name:"å­¦çç¥¨"},3:{code:"4",name:"ä¼¤æ®åè­¦"}};return t[e]}var i=t.tickets||[];var s=this.getSaveOrderManagerCore().getResult();if(s&&s.length>0)s=s[s.length-1]["args"][0];else s=this.qgpwwOrderResult;var o=n&&n.origin;var u=n&&n.id;i.forEach(function(e,t){e.ticketType=v(e.ticketType)["code"];e.ticketTypeName=v(e.ticketType)["name"]});var a=i.length>0?0:1;if(a===1&&r){a=-2}var l=s.orderInfo;var c={orderNo:l.orderNo,contactPhone:l.contact.phone||"",occupyResult:a,occupyErrorReason:o||"",occupyErrorId:u,ticketInfo12306List:i,validOccupyResult:this.hasTimedOut?0:1,lastPayTime:t.lastPayTime};if(u==="noResultPerformServerBackup"){c.occupyResult=-1}if(i.length){this.occupationResultData=c}var h={type:7,content:JSON.stringify(c)};return Common.postRequest("t_tTrainNotifyServer",h).done(p).fail(d)},qunarSaveOrderFake:function(){return this.qunarSaveOrderCore(this._qunarSaveOrderFake)},qunarSaveOrder:function(){return this.qunarSaveOrderCore(this._qunarSaveOrder)},qunarSaveOrderCore:function(t){function n(e,n){function o(){var e=$.Deferred();return e.reject.apply(e,i)}var r=this;var i=arguments;if(!(n&&n.bstatus&&n.bstatus.code==172)){return o()}var s=new p(r.view,n.data.alertWindow);return s.show().then(t.bind(r),o)}return this.getSaveOrderManagerCore().run(t,this).then(undefined,n.bind(this))},qunarBuyAndPay:function(t,n){function o(e){clearTimeout(r.timeOutHandler);var t=r.occupationConfiguration.buyAndPayMethod;r.payMethod=t.occupySuccPayMode;if(!n){r.payMethod=t.occupyFailPayMode}if(!r.payParams)r.payParams=e;r.qunarBuySuccessWatcher();i.qunarBuySuccess("qunar",e,e)}function u(e,t){clearTimeout(r.timeOutHandler);e=e||"ç³»ç»ç¹å¿ï¼è¯·ç¨ååè¯";r.qunarBuyFailWatcher(e);i.qunarBuyFail(e);if(t&&t.bstatus&&t.bstatus.code==180){Common.sendSchema(t.data.jumpSchema)}else if(t&&t.bstatus&&t.bstatus.code==172){}else{r.exceptionHandler._alert.bind(r)(e)}}var r=this;var i=this.view;var s=this.qunarSaveOrder;i.form["appClientOccupyQunarEndorse"]=true;if(t===false)s=this._qunarSaveOrder;return s.call(this).done(o).fail(u)},getClientOccupationParamsForSaveOrder:function(t,n){function c(e){var t=e||"";t=t.replace(/^(\d{2})(\d{2})$/,"$1:$2");return t||f.depTimeForShow}function h(e){var t={1:{code:"1",name:"æäººç¥¨"},2:{code:"0",name:"å¿ç«¥ç¥¨"},3:{code:"2",name:"å­¦çç¥¨"},4:{code:"3",name:"ä¼¤æ®åè­¦"}};return t[e]}var r=[];var i=0,o=this;var a="";var f=this.view.form.orderInfo.trainInfo;t.ticketResult.forEach(function(e,t){o.seat_name=e.seat_name;a=e.lose_time;r[r.length]={ticketNo:e.sequence_no,carriageName:(e.coach_name||e.coach_no)+"è½¦",seatName:e.seat_name,seatTypeName:u.convertor.seatTypeCodeToName(e.seat_type_code,e.seat_no),price:e.ticket_price,ticketType:h(e.ticket_type_code)["code"],ticketTypeName:h(e.ticket_type_code)["name"],passengerName:e.passenger_name,passengerId:e.passenger_id_no,passengerIdTypeName:u._mapCert[e.passenger_id_type_code]["type"],ticketStatus:e.ticket_status_code||"i",trainFrom:s.codeToName(e.from_station_telecode)||f.from,trainTo:s.codeToName(e.to_station_telecode)||f.to,trainStartDate:e.train_date||f.departureTime.substr(0,8),trainStartTime:c(e.start_time),trainEndDate:f.arrivalTime.substr(0,8),trainEndTime:f.arrTimeForShow,trainNo:e.station_train_code};i+=+e.ticket_price});var l={orderNo12306:r[0].ticketNo,totalPrice:i,appClientOccupy:true,appClientOccupyPay:n,tickets:r,lastPayTime:a};return l},hasNextStrategyOrNot:function(){if(this.view.hasNextStrategy()){this.resultDefer.reject("changeStrategy");return true}return false},clientBuy:{noSeatDilemma:function(){var t=this.seat_name;if(t!=="æ åº§")return;var n=this.view.form.orderInfo.trainInfo;n.candidateSeats=n.candidateSeats||[];if(t!==n.seat&&n.candidateSeats.indexOf(t)<0){this.view.hasNoSeatDilemma=true;n.candidateSeats.push("æ åº§")}},informQunarWhenSuccess:function(t,n,r){this.view.form=r;var i=this.getClientOccupationParamsForSaveOrder(t,n);$.extend(r,i);r.orderInfo.appClientOccupyPrice=i.totalPrice;r.orderInfo.agent.servicePhone=r.orderInfo.agent.servicePhone||"";var s,o="0";r.orderInfo.passengers.forEach(function(e,t){s=e.originCertNo||e.certNo;if(s&&e.certType.code==="NI"){o=(+s.charAt(16)+1)%2;o=o.toString()}e.gender=e.gender||o});this.clientBuy.noSeatDilemma.call(this);return this.qunarSaveOrder()},_success_qunarPay:function(t){function r(e){this.handleOccupySuccessAffairs("qunar",e,t);setTimeout(function(){Common.hideLoading()},1e3);var r=(Date.now()-n)/1e3;window.sendWatchMessage({key:"hyBuy_occupySeatMobile_informQunar",isSuccessful:true,duration:r});return e}function i(e){this.handleOccupyFailAffairs(e);Common.hideLoading();e=e||"ç³»ç»ç¹å¿ï¼è¯·ç¨ååè¯";this.exceptionHandler._alert.bind(this)(e);var t=(Date.now()-n)/1e3;window.sendWatchMessage({key:"hyBuy_occupySeatMobile_informQunar",isSuccessful:false,duration:t,reason:e});return e}var n=Date.now();return this.clientBuy.informQunarWhenSuccess.call(this,t,"qunar",this.view.form).done(r.bind(this)).fail(i.bind(this))},_success_pay:function(t,n){function i(e){this.saveOrderResp12306Pay=e;this.getPayOptionsForPayPage();if(n==="qunar"||n==="purchaseCardPay")this.handleOccupySuccessAffairs(n,e,t);else this.handleOccupySuccessAffairs(n,t,t);setTimeout(function(){Common.hideLoading()},1e3);var i=(Date.now()-r)/1e3;window.sendWatchMessage({key:"hyBuy_occupySeatMobile_informQunar",isSuccessful:true,duration:i});return e}function s(e){this.handleOccupyFailAffairs(e);Common.hideLoading();e=e||"ç³»ç»ç¹å¿ï¼è¯·ç¨ååè¯";this.exceptionHandler._alert.bind(this)(e);var t=(Date.now()-r)/1e3;window.sendWatchMessage({key:"hyBuy_occupySeatMobile_informQunar",isSuccessful:false,duration:t,reason:e});return e}n=n||"qunar";var r=Date.now();return this.clientBuy.informQunarWhenSuccess.call(this,t,n,this.view.form).done(i.bind(this)).fail(s.bind(this))},qunarOrderDetail:function(t,n,r,i){function s(e){f.setBeacon(f.steps.checkUnpayOrder,true);Common.hideLoading();this.handleOccupyFailAffairs();this.goToQunarOrderDetail(e)}function o(e){f.setBeacon(f.steps.checkUnpayOrder,false);Common.hideLoading();var t="å è½½è®¢åè¯¦æå¤±è´¥[FAIL:"+e+"]";this.clientBuy.fail_selfHandleException.call(this,t)}Common.showLoading("æ­£å¨åå¤è®¢åè¯¦æ...");this.clientBuy.informQunarWhenSuccess.call(this,t,i,r).then(s.bind(this),o.bind(this))},abortConfirmPassengerInfoSingle:function(){},isConfirmPassengerInfoSingleAborted:function(){return false},unpayInterceptor:function(t,n,r,i,s,o){function u(){this.saveOrderManagerCore=null;this.clientBuy.qunarOrderDetail.call(this,t,n,r,o)}this.view.isOccupationFailed=true;this.view.stopUpdateProgressBar();if(this.view.redPacketInformer)this.view.redPacketInformer.hide();if(typeof s==="string"&&s.indexOf("æ¹ç­¾å¾æ¯ä»")>=0){this.goToOrderDetail12306();return}u.call(this)},startUnpayInterceptor:function(t,n,r,i,s,o){this.clientBuy.unpayInterceptor.apply(this,t)},_success_qunarPayHandler:function(t,n){function i(e){if(e.needUseOccupyPrice){this.view._occupySuccess(n,null,t,"alterPrice")}else{this.view._occupySuccess(n,null,t)}o.call(this)}function s(){this.view._occupySuccess(n,null,t);o.call(this)}function o(){this.getSaveOrderManager().run(this.clientBuy._success_pay,this,[t,n])}var r=[].slice.call(arguments,0);r.push(n);this.notifyServerOccupationResult(true,t).then(i.bind(this),s.bind(this))},success_qunarPay:function(t){this.clientBuy._success_qunarPayHandler.call(this,t,"qunar")},_success_12306Pay:function(t,n){var r=n;r.push(t);this.view._occupySuccess(t,null,n[0]);this.getSaveOrderManager().run(this.clientBuy._success_pay,this,[n[0],t])},success_12306ProxyDebitPay:function(t){var n=[].slice.call(arguments,0);this.clientBuy._success_12306Pay.call(this,"12306ProxyDebit",n)},success_12306Pay:function(t){var n=[].slice.call(arguments,0);this.clientBuy._success_12306Pay.call(this,"12306",n)},success_12306MixedCashierPay:function(t){var n=[].slice.call(arguments,0);this.clientBuy._success_12306Pay.call(this,"12306MixedCashierPay",n)},success_12306ProxyDebitMixedCashierPay:function(t){var n=[].slice.call(arguments,0);this.clientBuy._success_12306Pay.call(this,"12306ProxyDebitMixedCashierPay",n)},success_purchaseCardPay:function(t){this.clientBuy._success_qunarPayHandler.call(this,t,"purchaseCardPay")},fail_selfHandleException:function(t){this.clientBuy.fail_handler.call(this,t,"selfHandle")},fail_qunarHelpHandleException:function(t){this.clientBuy.fail_handler.call(this,t,"qunarHelpHandle")},fail_handler:function(t,n){function a(){var e="retry_"+r;this.view.watcher(e,false);window.location.reload()}function f(){var e;switch(t.id){case"ypNotEnough":this.exceptionHandler.ypNotEnoughHandle.bind(this)(o);break;case"conflictTrip":case"courtRestrict":case"transferTimeTooShort":case"credentialNumberNotInCorrectPattern":case"scheduleCanceled":this.exceptionHandler.remindUser.bind(this)(o);break;case"idUnauthorized":case"phoneUnautorized":case"imposture":this.exceptionHandler.verificationGuide.call(this,o);break;case"notLogin":case"passwordNotCorrect":case"usernameOrPasswordNotProvided":this.exceptionHandler.notLogin.bind(this)(o);break;case"existsUnpayOrder":this.exceptionHandler.unpay.bind(this)(o);break;case"cancelTooManyTimes":this.exceptionHandler.cancelTooManyTimes.bind(this)(o);break;case"addPassengerFail":this.exceptionHandler.qunarHelpHandleBuyWithoutAccount.call(this,o);break;case"noYpInfoProvided":case"notAllowedToSell":case"seatTypeNotAvailable":case"idTypeNotAvailable":case"loadOrderDetailFail":case"userLocked":case"cancelOrderFail":this.exceptionHandler.remindUser.bind(this)(o);break;case"notStartSell":this.exceptionHandler.notStartSellQunarHelpHandle.call(this,o);break;case"noResultPerformServerBackup":if(n==="qunarHelpHandle")this.timeOutStuff();else{e=true;l.call(this,o,t)}break;case"aborted":case"unpayOrderNotMatchTurnToOrderDetail":break;case"noUnpayOrder":case"passcodeNotCorrect":case"ticketInfoExpire":case"queryLeftTicketFail":case"getCheckCodeFail":case"getPasscodeNewFail":case"confirmBookingFail":case"systemMaintenance":case"queueing":case"systemBusy":case"subtractTicketFail":case"stationNotSupported":case"errorsOrderChange":case"enDecrypt":case"particularTrainOfParticularDateNotFound":default:i="serverBackup";this.view.collectRecord("failServerBackup",t.id);if(n==="qunarHelpHandle"){this.exceptionHandler.qunarHelpHandle.bind(this)(o)}else{e=true;l.call(this,o,t)}}if(i)s+=i+"_";s+=t.id;if(!e){this.notifyServerOccupationResult(false,t)}this.view.watcher(s,false)}function l(e,t){this.exceptionHandler.confirmRetry.call(this,e,t)}console.log("fail_handler:",arguments);t=Common.lookUp(t);var r=t.id+"("+t.origin+")";var i="",s="ultrafailure_";this.view.collectRecord("ultraFailReason",r);var o=t.display;if(this.clientBuy.isConfirmPassengerInfoSingleAborted()){this.view.stopUpdateProgressBar();return}Common.hideLoading();this.handleOccupyFailAffairs(o);var u=this;g(u,"occupySeat",t.id).then(a.bind(this)).fail(f.bind(this));this.resultDefer.reject.apply(this,arguments)}},buyAndPayProcess:{confirmPassengerInfoSingle:function(t){return this.occupy(t)},clientBuy_qunarPay:function(){this.buyAndPayProcess.confirmPassengerInfoSingle.call(this,this.view.formDataFor12306).done(this.clientBuy.success_qunarPay.bind(this)).fail(this.clientBuy.fail_selfHandleException.bind(this))},qunarBuy_qunarPay:function(){this.qunarBuyAndPay(false,true)},clientBuy_qunarPay_qunarHelpHandleException:function(){this.buyAndPayProcess.confirmPassengerInfoSingle.call(this,this.view.formDataFor12306).done(this.clientBuy.success_qunarPay.bind(this)).fail(this.clientBuy.fail_qunarHelpHandleException.bind(this))},_clientBuy_12306Pay:function(t,n){function r(e){var n=[].slice.call(arguments);var r=this;if(QApp.sniff.android){i().done(function(){t.apply(null,n)}).fail(function(){o.apply(r,n)})}else{if(s())t.apply(null,n);else o.apply(this,n)}}function i(){function e(e){var t=e.atomversion.train;if(t>72)return e;return $.Deferred().reject(e)}function t(e){return e}return Common.getAppVersionADR().then(e,t)}function s(){return Common.getAppVersionIOS()>80011132}function o(){this.clientBuy.success_qunarPay.apply(this,arguments)}this.buyAndPayProcess.confirmPassengerInfoSingle.call(this,this.view.formDataFor12306).done(r.bind(this)).fail(n);c()},clientBuy_12306Pay:function(){this.buyAndPayProcess._clientBuy_12306Pay.call(this,this.clientBuy.success_12306Pay.bind(this),this.clientBuy.fail_selfHandleException.bind(this))},clientBuy_12306ProxyDebitPay:function(){this.buyAndPayProcess._clientBuy_12306Pay.call(this,this.clientBuy.success_12306ProxyDebitPay.bind(this),this.clientBuy.fail_selfHandleException.bind(this))},clientBuy_12306Pay_qunarHelpHandleException:function(){this.buyAndPayProcess._clientBuy_12306Pay.call(this,this.clientBuy.success_12306Pay.bind(this),this.clientBuy.fail_qunarHelpHandleException.bind(this))},clientBuy_12306ProxyDebitPay_qunarHelpHandleException:function(){this.buyAndPayProcess._clientBuy_12306Pay.call(this,this.clientBuy.success_12306ProxyDebitPay.bind(this),this.clientBuy.fail_qunarHelpHandleException.bind(this))},qunarBuy_purchaseCardPay:function(){this.qunarBuyAndPay(false,true)},clientBuy_purchaseCardPay:function(){this.buyAndPayProcess.confirmPassengerInfoSingle.call(this,this.view.formDataFor12306).done(this.clientBuy.success_purchaseCardPay.bind(this)).fail(this.clientBuy.fail_selfHandleException.bind(this))},clientBuy_purchaseCardPay_qunarHelpHandleException:function(){this.buyAndPayProcess.confirmPassengerInfoSingle.call(this,this.view.formDataFor12306).done(this.clientBuy.success_purchaseCardPay.bind(this)).fail(this.clientBuy.fail_qunarHelpHandleException.bind(this))},clientBuy_12306MixedCashierPay:function(){this.buyAndPayProcess._clientBuy_12306Pay.call(this,this.clientBuy.success_12306MixedCashierPay.bind(this),this.clientBuy.fail_selfHandleException.bind(this))},clientBuy_12306MixedCashierPay_qunarHelpHandleException:function(){this.buyAndPayProcess._clientBuy_12306Pay.call(this,this.clientBuy.success_12306MixedCashierPay.bind(this),this.clientBuy.fail_qunarHelpHandleException.bind(this))},clientBuy_12306ProxyDebitMixedCashierPay:function(){this.buyAndPayProcess._clientBuy_12306Pay.call(this,this.clientBuy.success_12306ProxyDebitMixedCashierPay.bind(this),this.clientBuy.fail_selfHandleException.bind(this))},clientBuy_12306ProxyDebitMixedCashierPay_qunarHelpHandleException:function(){this.buyAndPayProcess._clientBuy_12306Pay.call(this,this.clientBuy.success_12306ProxyDebitMixedCashierPay.bind(this),this.clientBuy.fail_qunarHelpHandleException.bind(this))}},submitOrderProcess:function(t){var n=t;console.log("_method:",n);switch(n.occupyMode){case 2:this.occupyMode2_clientBuy(n);break;case 1:default:this.occupyMode1_qunarBuyQunarPay(n)}},occupyMode1_qunarBuyQunarPay:function(t){switch(t.occupySuccPayMode){case"qunar":this.buyAndPayProcess.qunarBuy_qunarPay.call(this);break;case"purchaseCardPay":this.buyAndPayProcess.qunarBuy_purchaseCardPay.call(this);break}},occupyMode2_clientBuy:function(t){switch(t.occupySuccPayMode){case"qunar":if(t.canServerBackUp){this.buyAndPayProcess.clientBuy_qunarPay_qunarHelpHandleException.call(this)}else{this.buyAndPayProcess.clientBuy_qunarPay.call(this)}break;case"12306":if(t.canServerBackUp){this.buyAndPayProcess.clientBuy_12306Pay_qunarHelpHandleException.call(this)}else{this.buyAndPayProcess.clientBuy_12306Pay.call(this)}break;case"12306ProxyDebit":if(t.canServerBackUp){this.buyAndPayProcess.clientBuy_12306ProxyDebitPay_qunarHelpHandleException.call(this)}else{this.buyAndPayProcess.clientBuy_12306ProxyDebitPay.call(this,{proxyDebit:true})}break;case"purchaseCardPay":if(t.canServerBackUp){this.buyAndPayProcess.clientBuy_purchaseCardPay_qunarHelpHandleException.call(this)}else{this.buyAndPayProcess.clientBuy_purchaseCardPay.call(this)}break;case"12306MixedCashierPay":if(t.canServerBackUp){this.buyAndPayProcess.clientBuy_12306MixedCashierPay_qunarHelpHandleException.call(this)}else{this.buyAndPayProcess.clientBuy_12306MixedCashierPay.call(this)}break;case"12306ProxyDebitMixedCashierPay":if(t.canServerBackUp){this.buyAndPayProcess.clientBuy_12306ProxyDebitMixedCashierPay_qunarHelpHandleException.call(this)}else{this.buyAndPayProcess.clientBuy_12306ProxyDebitMixedCashierPay.call(this)}break}},getClientBuyTimeOut:function(t){this.clientBuyTimeOut=t["progressBarTimeout.appClientOccupy"]||this.clientBuyTimeOut},getPayOptionsForPayPage:function(){var t=this.occupationConfiguration;var n=this.saveOrderResp12306Pay;if(!t||!n){return false}var r={qunarOrderNo:n.orderInfo.orderNo,qunarOrderContactPhone:n.orderInfo.contact.phone};var i=t.buyAndPayMethod.occupySuccPayMode;var s=new h(i,r);s.run()},mobile12306FormDataConvertor:function(t){var n=t.orderInfo.trainInfo,r=t.orderInfo.passengers;var i={getFromAndToStationCode:function(){var t=s.getStationByChineseCharacter(n.from.trim());var r=s.getStationByChineseCharacter(n.to.trim());if(t.length===1)t=t[0][2];else{t=""}if(r.length===1)r=r[0][2];else{r=""}return{from:t,to:r}},getSeats:function(){n.candidateSeats=n.candidateSeats||[];var t=n.candidateSeats.slice(0);t.unshift(n.seat);t=t.map(function(e,t){if(e==="æ åº§")return"noSeat";return u.convertor.seatTypeCharacterToCode(e)});return t},getPassengerInfo:function(){var t={mobile_nos:[],save_passenger_flag:[],ticket_types:[],passenger_id_types:[],passenger_id_nos:[],passenger_names:[],ticket_type_order_num:r.length.toString()};var n=new o;var i,s,u;r.forEach(function(e,r){t.mobile_nos.push(e.phone);t.save_passenger_flag.push("Y");t.ticket_types.push(n.passengerTypeTo12306(e.ticketType)||"1");i=e.certNo;s=e.name;u=e.certType.code;if(e.guardian&&e.ticketType=="1"){i=e.guardian.certNo;s=e.guardian.name;u=e.guardian.certType.code}t.passenger_id_nos.push(i);t.passenger_names.push(s);t.passenger_id_types.push(n.idTypeTo12306(u))});for(var a in t){if({}.toString.call(t[a])==="[object Array]"){t[a]=t[a].join(",")}}return t}};var a=i.getFromAndToStationCode();var f="";if(t.onlinePickingInfo){f=t.onlinePickingInfo.replace(/,/g,"")}var l={departureTime:n.departureTime,train_date:n.departureTime.substr(0,8),station_train_code:n.no,from_station:a.from,to_station:a.to,seats:i.getSeats(),seat_type_codes:"",ticket_types:"",passenger_id_types:"",passenger_id_nos:"",passenger_names:"",ticket_type_order_num:"",choose_seats:f,start_time:n.departureTime.substr(8,2)+":"+n.departureTime.substr(10,2)};$.extend(l,i.getPassengerInfo());return l},clientBuyProcess:function(t){function n(e){console.log("injectConfiguration:",arguments);var t={1:"ä¸å åº§",2:"å®¢æ·ç«¯åå åº§",3:"æå¡ç«¯åå åº§"};var n={qunar:"qunarä»£ä»",12306:"12306ç´ä»","12306ProxyDebit":"ç´ä»ä»£æ£",purchaseCardPay:"éè´­å¡æ¯ä»","12306MixedCashierPay":"ç´ä»æ··åæ¯ä»","12306ProxyDebitMixedCashierPay":"ç´ä»ä»£æ£æ··åæ¯ä»"};var r=e.buyAndPayMethod.occupyMode;var i=e.buyAndPayMethod.occupySuccPayMode;var s=e.buyAndPayMethod.occupyFailPayMode;var o=t[r]+"(occupyMode:"+r+")ï¼"+n[i]+"(occupySuccPayMode:"+i+")ï¼"+n[s]+"(occupyFailPayMode:"+s+")ï¼"+"åè®¸ååº:"+e.buyAndPayMethod.canServerBackUp;e.configDescription=o;this.occupationConfiguration=e;this.getPayOptionsForPayPage();this.getIsNeedOpenBank()}function r(e){n.call(this,e);this.view.collectRecord("payMetchod",e.configDescription);this.getClientBuyTimeOut(e);var t=e.buyAndPayMethod;var r=e["switch.appClientOccupy"];if(!r||r==="false"){this.clientBuyTimeOut=-1}if(this.clientBuyTimeOut>0&&t.occupyMode==2&&t.canServerBackUp){if(this.getOccupation())this.getOccupation().applyTimeout(this.clientBuyTimeOut*1e3)}this.submitOrderProcess(t)}function i(e,t){console.log("getAllControllElementsFail:",arguments);if(t&&t.bstatus&&t.bstatus.code==172){this.view.qunarBuyFail(e);return}if(e==="noUserInfo"){this.exceptionHandler.notLogin.bind(this)("æªæ¾å°12306ç¨æ·ååå¯ç ï¼è¯·æ¨åç»å½");return}this.timeOutRenderQunarBuyAndPay()}console.log("clientBuyProcess:",arguments);this.attachDefaultFormParams();this.view.formDataFor12306=this.mobile12306FormDataConvertor(this.view.form);this.occupy(this.view.formDataFor12306);this.getAllControllElements().done(r.bind(this)).fail(i.bind(this))},timeOutStuff:function(){this.hasTimedOut=true;this.timeOutRenderQunarBuyAndPay()},seatsMatchingWatcher:function(t){var n=this.view.form.onlinePickingInfo;if(!n)return;var r=this.getSeatsMatchingDegree(n,t);var i=r.ratio===1;this.view.watcher("chooseSeatsMatching",i)},getSeatsMatchingDegree:function(t,n){function f(e,t){var n=0;e.forEach(function(e){Object.entries(t).forEach(function(i){var s=r(i,2),o=s[0],u=s[1];var a=h(u,t[o+1]||0);var f=h(u,t[o-1]||0);n=Math.max(n,p(e,a),p(e,f))})});return n}function l(e){var t={1:0,2:0};e=e.split(",");e.forEach(function(e){e=e.split(/([A-F])$/);var n=+e[0];t[n]|=1<<i.indexOf(e[1])});var n=[];t[1]&&n.push(h(t[1],t[2]));t[2]&&n.push(h(t[2],t[1]));return n}function c(e){var t={};var n=[];e.forEach(function(e){var r=n.indexOf(e.coach_name);if(r<0){r=n.length;n.push(e.coach_name)}if(e.seat_no==="æ åº§")return;var s=e.seat_no.split(/([A-F])$/);if(s.length<2)return;var o=r*1e3+ +s[0];if(!(o in t)){t[o]=0}t[o]|=1<<i.indexOf(s[1])});return t}function h(e,t){return e<<i.length|t}function p(e,t){return(e&t).toString(2).replace(/0/g,"").length}console.log("getSeatsMatchingDegree:",arguments);var i="FEDCBA";var s=t.replace(/[,\d]/g,"").length;var o=f(l(t),c(n));var u=s-o;var a={success:o,fail:u,ratio:+(o/s).toFixed(2)};console.log("statiResult:",a);return a},run:function(){console.log("run:",arguments);Common.storeInfo("occupySeatFailRetryTimesInfo",{retryTimes:0},true);Common.event.off("unpayOrderNotMatch").on("unpayOrderNotMatch",this.clientBuy.startUnpayInterceptor.bind(this));this.clientBuyProcess();return this.resultDefer.promise()},occupySuccessPayMethodWatcher:function(t){var n=$.extend({},t);n.key="hyBuy_occupySuccess_payMethod_"+n.key;window.sendWatchMessage(n)}};e.exports=y},function(e,t,n){"use strict";var r=n(397);var i=r.split("@"),s;i.shift();var o={names:[],codes:[],aoes:[],abbrs:[],numcodes:[]};i.forEach(function(e){s=e.split("|");o.names.push(s[1]);o.codes.push(s[2]);o.aoes.push(s[3]);o.abbrs.push(s[4]);o.numcodes.push(s[5])});var u={find:function(t,n,r){return o[r][o[n].indexOf(t)]},_getStationByField:function(t,n){var i="@(?:[^@]+\\|){"+n+"}"+t+"(?:\\|[^@]+){"+(5-n)+"}(?=@|$)";var s=new RegExp(i,"g");var o=r.match(s);var u=[];if(!o)return u;o.forEach(function(e,t){u.push(e.substring(1).split("|"))});return u},getStationByChineseCharacter:function(t){return this._getStationByField(t,1)},getStationByChineseCharacterFuzzily:function(t){return this._getStationByField("[^|]*"+t+"[^|]*",1)},getStationByUpperCaseStationCode:function(t){return this._getStationByField(t,2)},codeToName:function(t){var n="";var r=this.getStationByUpperCaseStationCode(t);if(r&&r.length===1)n=r[0][1];return n},nameToCode:function(t){var n="";var r=this.getStationByChineseCharacter(t);if(r&&r.length===1)n=r[0][2];return n}};e.exports=u},function(e,t){"use strict";var n={steps:{start:"start",queryLeftTicketAndGetPasscodeNew:"queryLeftTicketAndGetPasscodeNew",particularTrainOfParticularDateNotFound:"failReason_particularTrainOfParticularDateNotFound",usernameOrPasswordNotProvided:"failReason_usernameOrPasswordNotProvided",confirmPassengerInfoSingle:"confirmPassengerInfoSingle",confirmSingleSuccess:"confirmSingleSuccess",informQunarWhenSuccess:"informQunarWhenSuccess",visitTooFrequentRetry:"visitTooFrequentRetry",subtractTicketFailRetry:"subtractTicketFailRetry",passcodeNotCorrectRetry:"passcodeNotCorrectRetry",queueExceptionRetry:"queueExceptionRetry",notStartSellRetry:"notStartSellRetry",ypExpireRetry:"ypExpireRetry",goToCheckout:"goToCheckout",serverOccupy:"serverOccupy",notStartSell:"failReason_notStartSell",scheduleCanceled:"failReason_scheduleCanceled",idUnauthorized:"failReason_idUnauthorized",phoneUnautorized:"failReason_phoneUnautorized",ticketInfoExpire:"failReason_ticketInfoExpire",systemMaintenance:"failReason_systemMaintenance",aborted:"failReason_aborted",visitTooFrequent:"failReason_visitTooFrequent",subtractTicketFail:"failReason_subtractTicketFail",conflictTrip:"failReason_conflictTrip",cancelTooManyTimes:"failReason_cancelTooManyTimes",ypNotEnough:"failReason_ypNotEnough",checiNotFound:"failReason_checiNotFound",notLogin:"failReason_notLogin",existsUnpayOrder:"failReason_existsUnpayOrder",passcodeNotCorrect:"failReason_passcodeNotCorrect",queueing:"failReason_queueing",unrecognizedException:"failReason_unrecognizedException",systemBusy:"failReason_systemBusy",errorsOrderChange:"failReason_errorsOrderChange",enDecrypt:"failReason_enDecrypt",userLocked:"failReason_userLocked",passwordNotCorrect:"failReason_passwordNotCorrect",courtRestrict:"failReason_courtRestrict",noYpInfoProvided:"failReason_noYpInfoProvided",addPassengerFail:"failReason_addPassengerFail",stationNotSupported:"failReason_stationNotSupported",credentialNumberNotInCorrectPattern:"failReason_credentialNumberNotInCorrectPattern",saveOrderMultipleTimes:"saveOrderMultipleTimes",saveOrderOverLap:"saveOrderOverLap",cancelUnpayOrder:"cancelUnpayOrder",checkUnpayOrder:"checkUnpayOrder",buyWithoutAccount:"buyWithoutAccount",rob:"rob",noSeatDilemma:"noSeatDilemma",requeryLeftTicket:"requeryLeftTicket",addPassenger_1:"addPassenger_1",addPassenger_2:"addPassenger_2",addPassenger_3:"addPassenger_3",addPassenger_4:"addPassenger_4",addPassenger_5:"addPassenger_5",confirmSingleSuccess_1:"confirmSingleSuccess_1",confirmSingleSuccess_2:"confirmSingleSuccess_2",confirmSingleSuccess_3:"confirmSingleSuccess_3",confirmSingleSuccess_4:"confirmSingleSuccess_4",confirmSingleSuccess_5:"confirmSingleSuccess_5",waitTimeBeforeSale:"waitTimeBeforeSale",getCashInfo:"getCashInfo",notifyServer:"notifyServer",ultraResult:"ultraResult",ultraSuccess:"ultraSuccess",ownerNotAuthorized:"ownerNotAuthorized"},getView:function(){return QApp.getViewSync(QApp.router.getCurViewName())},setBeacon:function(t,n,r){Common.event.trigger("occupy.progress.setBeacon",t,n,r);var i=this.getView();if(!i||!i.trigger)return;i.trigger("occupy.logTime.updateProcess.watcher",t,n,r)},resultBeacon:function(t,n){var r=this.getView();if(!r)return;r.trigger("occupy.result.watcher",t,n)}};e.exports=n},function(e,t){"use strict";var n={getAccountsArr:function(){var t=Common.getStoredInfo("cancelTooManyTimesAccounts");if(!Array.isArray(t))t=[];return t},setAccountsArr:function(t){Common.storeInfo("cancelTooManyTimesAccounts",t,true)},composeAccountItem:function(t){var n=Common.getUserInfo()||{};var r={username:n.user_name,password:n.pwd,timeStamp:t.getTime()};if(r.username&&r.password)return r;else return null},cacheUnavailableAccount:function(){function t(e){var t=this.composeAccountItem(e);var n=this.getAccountsArr();if(!t)return $.Deferred().reject("usernameOrPasswordNotProvided");this.stripValidAccount(e);if(!this.mayAccountUnavailable(t.username)){n.push(t);this.setAccountsArr(n)}return t}return Common.getServerTime().then(t.bind(this))},stripValidAccount:function(t){var n=this.getAccountsArr(),r=t.getDate();var i=n.filter(function(e){var t=(new Date(e.timeStamp)).getDate();return t===r});this.setAccountsArr(i)},mayAccountUnavailable:function(t){var n=this.getAccountsArr();return n.some(function(e){return e.username===t})},isAccountAvailable:function(t){function i(e){this.stripValidAccount(e);if(this.mayAccountUnavailable(t)){var n=s(e);r.reject(n)}else r.resolve("accountAvailable")}function s(e){var t="åºç¥¨å¤±è´¥ï¼å¯¹ä¸èµ·ï¼ç±äºæ¨åæ¶æ¬¡æ°è¿å¤ï¼ä»æ¥å°ä¸è½ç»§ç»­åçæ¨çè®¢ç¥¨è¯·æ±ãæå¤©æ¨å¯ç»§ç»­ä½¿ç¨è®¢ç¥¨åè½ã";var n=new Date(e.getTime()+24*60*60*1e3);if({}.toString.call(e)==="[object Date]"){t=t.replace("æå¤©",Common.formatDate(n,"MMæddæ¥"))}return t}var n=Common.getStoredInfo("loginUser");t=n.name;var r=$.Deferred();if(this.mayAccountUnavailable(t)){Common.getServerTime().then(i.bind(this));return r}else return r.resolve("accountAvailable")}};e.exports=n},function(e,t,n){"use strict";function a(){s=QApp.router.getCurViewName();u=QApp.getViewSync(s)}function f(e){window.sendWatchMessage(e)}var r=n(434);var i=r.bankCardObj;var s="",o="";var u=null;var l={getCardInfoFromQunar:function(t){var n=new $.Deferred;var r=(new Date).getTime();Common.getCardInfoFromQunar(t).then(function(e){if(e.ret){f({key:"hyBuy_"+s+"_getCardInfoFromQunar",isSuccessful:true,duration:(new Date).getTime()-r});n.resolve(e.data)}else{f({key:"hyBuy_"+s+"_getCardInfoFromQunar",isSuccessful:false,duration:(new Date).getTime()-r});n.reject(e)}},function(){f({key:"hyBuy_"+s+"_getCardInfoFromQunar",isSuccessful:false,duration:(new Date).getTime()-r});n.reject()});return n},getBindCardInfo:function(t){var n=new $.Deferred;var r=(new Date).getTime();var i=window.location.href,o=i.split("#");i=o[0]+"#payPageMobile?";i+="bindSource=0&couponBackType=0";var u=$.extend(t,{bindSource:0,successURL:i});Common.postRequest("t_tTrainBindCard",u).then(function(e){if(e&&e.status==0){f({key:"hyBuy_"+s+"_getBindCardInfo",isSuccessful:true,duration:(new Date).getTime()-r});n.resolve(e)}else{f({key:"hyBuy_"+s+"_getBindCardInfo",isSuccessful:false,duration:(new Date).getTime()-r});n.reject(e)}},function(e){f({key:"hyBuy_"+s+"_getBindCardInfo",isSuccessful:false,duration:(new Date).getTime()-r});n.reject(e)});return n},loginQunar:function(){function n(){Common.getQunarUserInfo().then(function(e){var n={};if(e.userName){n=$.extend({},{userId:e.qunarID,uuid:e.uuid,userName:e.userName});o=e.uuid}t.resolve(n)})}var t=new $.Deferred;QunarAPI.hy.login({shouldOpenLogin:false,success:function(){n()},fail:function(){t.reject("qunar not login")}});return t},storedResult:function(t){var n={};n[o]=t;Common.storeInfo(i,n)},clearStoredResult:function(){Common.storeInfo(i,{},true)}};var c={initTag:false,init:function(){var t=c;a();if(t.initTag){return}t.initTag=true;l.clearStoredResult();l.loginQunar().then(l.getBindCardInfo).then(t.getBindCardInfoSuc).then(undefined,function(e){})},getBindCardInfoSuc:function(t){var n=0,r="";try{n=u.assist.trainServerJudgeObj.payMode}catch(i){}switch(n){case 1:r="_payModeQunar";break;case 2:r="_payModeDirect";break;case 3:r="_payModeProxyDebit";break}if(t.bindCardResultCode==1){f({key:"hyBuy_"+s+"_getTrainServerJudge_hasBindCard"+r,isSuccessful:true});var o=t.cardIndex;var t={needBind:false};l.getCardInfoFromQunar(o).then(function(e){var n=Common.base64Decode(e.cardNo);t.bankCardNum=n;l.storedResult(t)},function(){l.storedResult(t)})}else if(t.bindCardResultCode==0){f({key:"hyBuy_"+s+"_getTrainServerJudge_needBindCard"+r,isSuccessful:true});var t={needBind:true,jumpToCardBindPageData:t};l.storedResult(t)}}};e.exports=c.init},function(e,t){"use strict";e.exports={bankCardObj:"BankCardObj",NotCompleted12306OrderNo:"NotCompleted12306OrderNoArr",payPageView_urlParam:"payPageView_urlParam",payPageView_pageInfo:"payPageView_pageInfo",payOptionsInfo:"payOptionsInfo",payUrlObj:"payUrlObj",payChannelUrl:"payChannelUrl"}},function(e,t,n){"use strict";function c(){a=QApp.router.getCurViewName();l=QApp.getViewSync(a)}function h(e,t){this.view=l;this.payMode="";this.initParams={payMethod:e,qunarOrderParam:{qunarOrderNo:t.qunarOrderNo,qunarOrderContactPhone:t.qunarOrderContactPhone}}}var r=n(434);var i=r.payOptionsInfo;var s=n(436);var o=new s;var u=n(437);var a="",f="";var l=null;h.prototype={constructor:h,initTag:false,run:function(){function n(e){f=e.uuid;return t.getPayOptions.bind(t)}c();if(this.initTag){return}this.initTag=true;var t=new u(this.view,this.initParams);o.getQunarUserInfo().then(n).then(this.storedResult.bind(this))},storedResult:function(t){var n={};n[f]={payOptions:t,timeStamp:Date.now()};Common.storeInfo(i,n)}};e.exports=h},function(e,t){"use strict";function n(e){this.initParam=e}n.prototype={constructor:n,_getQunarUserInfo:function(t){var n={uuid:t.uuid,userName:t.userName,userId:t.qunarID};return n},hasQunarUserInfo:function(){function n(e){if(e.userName){t.resolve(e)}else{t.reject()}}function r(){t.reject()}var t=$.Deferred();Common.getQunarUserInfo().then(n,r);return t},getQunarUserInfo:function(){return this.hasQunarUserInfo().then(this._getQunarUserInfo.bind(this))},noQunarUserInfo:function(){return this.gotoQunarLoginPage().then(this.run.bind(this))},gotoQunarLoginPage:function(){var t=$.Deferred(),n=this;QunarAPI.hy.login({shouldOpenLogin:true,success:function(){n.sendWatcher({key:"loginQunar"});t.resolve.apply(t,arguments)},fail:function(r){n.sendWatcher({key:"loginQunar",isSuccessful:false});t.reject.apply(t,arguments)}});return t},sendWatcher:function(t){var n=QApp.router.getCurViewName();t.key="hyBuy_"+t.key+"_By_"+n;window.sendWatchMessage(t)},run:function(){function r(){n.getQunarUserInfo().then(i,s)}function i(){t.resolve.apply(t,arguments)}function s(){n.gotoQunarLoginPage().then(r.bind(n),o)}function o(){t.reject.apply(t,arguments)}var t=$.Deferred(),n=this;r();return t.promise()}};e.exports=n},function(e,t,n){"use strict";function l(e,t){this.view=e;this.initParams=t}var r=n(438);var i=n(439);var s=n(440);var o=n(441);var u=n(443);var a=n(434);var f=a.payPageView_urlParam;l.prototype={constructor:l,loginQunar:function(){function n(){Common.getQunarUserInfo().then(function(e){var n={};if(e.userName){n=$.extend({},{userId:e.qunarID,uuid:e.uuid,userName:e.userName})}t.resolve(n)})}var t=$.Deferred();QunarAPI.hy.login({shouldOpenLogin:false,success:function(){n()},fail:function(){t.reject("needLoginQunarUser")}});return t.promise()},getPayConfigResultFromServer:function(){function n(e){var n=new u(e);var r=t.initParams.qunarOrderParam;var i={orderNo:r.qunarOrderNo,contactPhone:r.qunarOrderContactPhone};return n.getState(i)}var t=this;return this.loginQunar().then(n)},getAlipayConfig:function(){var t=$.Deferred();var n={canUseAlipay:true,hasSign:true};if(this.initParams.payMode=="directPay"){return t.resolve(n)}else if(this.initParams.payMode=="proxyPay"){return this.getPayConfigResultFromServer()}},getAlipayOptions:function(){function o(e,r){if(e.canUseAlipay){if(r.hasAlipayClient||e.hasSign){n.hasAlipay=true}n.hasAlipayClient=r.hasAlipayClient;n.hasAlipayClientSDK=r.hasAlipayClientSDK}n.signResult=e;cashierPageWatcher({key:"hasAlipayClient",isSuccessful:r.hasAlipayClient});t.resolve(n)}function u(){t.resolve(n)}var t=$.Deferred();var n={hasAlipay:false,hasAlipayClient:false,hasAlipayClientSDK:false,signResult:{hasSign:false,canUseAlipay:false}};var r=this.getAlipayConfig(),i=(new s).run();$.when(r,i).then(o,u);return t.promise()},getBankCardOptions:function(){function a(e){return r.hasBindBankCard(e,s)}function l(e){t.resolve(e);if(n.initParams.payMode=="directPay"){cashierPageWatcher({key:"directPayOrderLoginQunar"})}else{cashierPageWatcher({key:"proxyPayOrderLoginQunar"})}}function c(e){if(n.initParams.payMode=="directPay"){var r={};t.resolve(r);cashierPageWatcher({key:"directPayOrderLoginQunar",isSuccessful:false})}else{if(typeof e=="string"&&(e.indexOf("æªç»å½")>-1||e=="needLoginQunarUser")){t.reject("needLoginQunarUser")}else{t.reject.apply(t,arguments)}cashierPageWatcher({key:"proxyPayOrderLoginQunar",isSuccessful:false})}}var t=$.Deferred(),n=this;var r=new i;var s="";var o=window.location.href,u=o.split("cashierPage?");o=u[0]+"afterBindBankCardPage?";Common.storeInfo(f,{urlParam:u[1]},true);o+="bindSource="+0+"&couponBackType="+0;s=o;n.loginQunar().then(a).then(l,c);return t.promise()},getPayMode:function(){function s(e){n.judge=e;var r=e.payMode||3;var i=e.occupyMode;if(i==2){n.initParams.occupyMode="client"}else if(i==3){n.initParams.occupyMode="server"}if(r==2){n.initParams.payMode="directPay"}if(r==3){n.initParams.payMode="proxyPay"}n.initParams.payMethod=e.payMethod;t.resolve(e)}function o(){t.reject.apply(t,arguments)}var t=$.Deferred(),n=this;if(n.judge){return t.resolve(n.judge)}var i=new r;i.getTrainServerJudge(this.initParams).then(s,o);return t.promise()},getABTestConfig:function(){function s(){i.canNotSign=true;t.resolve(i)}function o(){t.resolve(i)}var t=$.Deferred(),n="170424_cr_cp_Dkpay",r=["G","H","E"];var i={canNotSign:false};Common.isAccordABTestWithKey(n,r).then(s,o);return t.promise()},getPayOptions:function(){function i(){var e=n.getAlipayOptions(),t=n.getBankCardOptions();var r=(new o(n.initParams)).run();var i=n.getABTestConfig();$.when(e,t,r,i).then(s,u)}function s(e,n,i,s){r.alipay=e;r.bankCard=n;r.hasWeChatClient=i.hasWeChat;r.hasWeChatFee=i.hasFee;if(s.canNotSign&&e.signResult.canUseAlipay&&n.cardIndex){r.alipay.signResult.hasSign=true}t.resolve(r)}function u(){t.reject.apply(t,arguments)}var t=$.Deferred(),n=this;var r={alipay:{},bankCard:{},hasWeChatClient:false};this.getPayMode().then(i,u);return t.promise()}};e.exports=l},function(e,t){"use strict";function n(){}n.prototype={constructor:n,judgeResult:null,getTrainServerJudge:function(t){var n=$.Deferred(),r=this;var i=t.isFromQunarOrderDetail,s=t.qunarOrderParam;if(i){if(this.judgeResult){return n.resolve(this.judgeResult)}Common.postRequest("t_tTrainServerJudge",{judgeType:2,judgeParam:JSON.stringify({orderNo:s.qunarOrderNo,contactPhone:s.qunarOrderContactPhone,useNewOccupyConf:true})}).always(function(e){if(e&&e.judgeCode==0){var t=JSON.parse(e.resultJson);t=r.adapterConfig(t);r.judgeResult=t;n.resolve(t);cashierPageWatcher({key:"req_getTrainServerJudge"})}else{n.reject.apply(n,arguments);cashierPageWatcher({key:"req_getTrainServerJudge",isSuccessful:false})}})}else{var o=t.payMethod,u;if(o=="12306ProxyDebit"||o=="12306ProxyDebitMixedCashierPay"){u=3}else{u=2}return n.resolve({payMode:u,payMethod:o})}return n.promise()},adapterConfig:function(t){var n=$.extend({},t);var r=t.occupySuccPayMode;switch(r){case"12306":case"12306MixedCashierPay":n.payMode=2;break;case"12306ProxyDebit":case"12306ProxyDebitMixedCashierPay":n.payMode=3;break}n.payMethod=r;return n}};e.exports=n},function(e,t,n){"use strict";function o(){this.cards={}}var r=n(313);var i=n(436);var s=new i;o.prototype={constructor:o,hasBindBankCard:function(t,n){function s(e){if(e&&e.status==0){r.resolve(e)}else{o.apply(r,arguments)}}function o(){r.reject.apply(r,arguments)}var r=$.Deferred();var i=$.extend(t,{bindSource:0,successURL:n});Common.postRequest("t_tTrainBindCard",i).then(s,o);return r},getCardInfoFromQunar:function(t){function s(){Common.getCardInfoFromQunar(t).then(o,u)}function o(e){if(e.ret){r.cards[t]=e.data;n.resolve(e.data)}else{u.apply(n,arguments)}}function u(){n.reject.apply(n,arguments)}var n=$.Deferred(),r=this;var i=r.cards[t];if(i){return n.resolve(i)}s();return n.promise()},jumptoCardBindPage:function(t,n){var r=t.bindCardReqParam;var i="",s="";for(var o in r){if(o=="bindCardRule"||o=="successURL"){i+=o+"="+encodeURIComponent(r[o])+"&"}else{i+=o+"="+r[o]+"&"}}s=t.bindCardUrl+"?"+i;if(n){QunarAPI.hy.openWebView({url:s})}else{window.location.href=s}},notifyServerBindInfo:function(t){function r(e){var r={};if(e.userName){r=$.extend({},{userid:e.qunarID,uuid:e.uuid,username:e.userName,bindSource:t.bindSource,couponBackType:t.couponBackType,cardIndex:t.cardIndex})}return n._notify(r)}var n=this;return Common.getQunarUserInfo().then(r)},_notify:function(t){function s(){return Common.postRequest("t_tTrainNotifyServer",n)}function o(e){if(e&&e.code==0){i.resolve(e)}else{u.apply(i,arguments)}}function u(){i.reject.apply(i,arguments)}var n={type:4,content:JSON.stringify(t)};var i=$.Deferred();r.execAsyncFunctionInApproximateInterval(s,this,3,0,true).then(o,u);return i}};e.exports=o},function(e,t){"use strict";function n(){this.adrVersion=65;this.adrSDkVersion=84;this.iosVersion=80011116}n.prototype={constructor:n,run:function(){function i(){t.resolve(r)}function s(){t.resolve(r)}var t=$.Deferred(),n=this;var r={hasAlipayClient:false,hasAlipayClientSDK:false};if(QApp.sniff.android){Common.getAppVersionADR().then(function(e){var t=e.atomversion.train;if(t>n.adrVersion){if(t>n.adrSDkVersion){r.hasAlipayClient=true;r.hasAlipayClientSDK=true;i();return}QunarAPI.train.hasApp({packageName:"com.eg.android.AlipayGphone",success:function(t){r.hasAlipayClient=t.hasInstall;i()}})}else{s()}},s)}else{if(Common.getAppVersionIOS()>n.iosVersion){QunarAPI.train.canOpenSchema({url:"alipay://alipayclient/",success:function(t){r.hasAlipayClient=t.result;i()}})}else{s()}}return t.promise()}};e.exports=n},function(e,t,n){"use strict";function i(e){this.initParams=e;this.payMethod=e.payMethod}var r=n(442);i.prototype={constructor:i,run:function(){function o(e,r){var i=e.hasInstall;if(i&&r.allowed){n.hasWeChat=true;n.hasFee=r.hasFee}t.resolve(n)}function u(){t.resolve(n)}var t=$.Deferred();var n={hasWeChat:false,hasFee:false};var i={adrName:"com.tencent.mm",iosName:"wechat://"};var s=(new r).run(i);$.when(s,this.getConfigAllowed()).then(o,u);return t.promise()},getConfigAllowed:function(){var t=$.Deferred();var n={allowed:false,hasFee:false};if(this.payMethod=="12306MixedCashierPay"||this.payMethod=="12306ProxyDebitMixedCashierPay"||this.payMethod=="12306"){n.allowed=true;return t.resolve(n)}return t.resolve(n)}};e.exports=i},function(e,t){"use strict";function n(){this.adrVersion=65;this.iosVersion=80011116}n.prototype={constructor:n,run:function(t){function s(){n.resolve(i)}function o(){n.resolve(i)}var n=$.Deferred(),r=this;var i={hasInstall:false};if(QApp.sniff.android){Common.getAppVersionADR().then(function(e){var n=e.atomversion.train;if(n>r.adrVersion){QunarAPI.train.hasApp({packageName:t.adrName,success:function(t){i.hasInstall=t.hasInstall;s()}})}else{o()}},o)}else{if(Common.getAppVersionIOS()>r.iosVersion){QunarAPI.train.canOpenSchema({url:t.iosName,success:function(t){i.hasInstall=t.result;s()}})}else{o()}}return n.promise()}};e.exports=n},function(e,t){"use strict";function n(e){this.qunarUserInfo=e;this.token=""}n.prototype={constructor:n,postRequest:function(t,n){var r={otherParamJson:JSON.stringify(n),type:t};$.extend(r,this.qunarUserInfo);return Common.postRequest("t_tTrainPayAuth",r)},getToken:function(t){function s(e){if(e.resultJson){var t=JSON.parse(e.resultJson);r.token=t.token;n.resolve(t.token)}else{o.apply(this,arguments)}}function o(){n.reject.apply(n,arguments)}var n=$.Deferred(),r=this;var i="1";$.extend(t,{tokenGetType:2});this.postRequest(i,t).then(s,o);return n.promise()},getState:function(t){function o(){$.extend(t,{tokenGetType:2});r.postRequest(s,t).then(u,a)}function u(e){if(e.resultJson){var t=JSON.parse(e.resultJson);var r=t&&t.authChannels||[];var i=r.some(function(e){if(e.type==="ALI_PAY"){t.canUseAlipay=true;t.hasSign=e.canSelect=="true"?false:true;t.protocolNo=e.protocolNo;t.signStatus={signed:e.authStatus=="1"?true:false,authorized:t.hasSign};return true}});n.resolve(t);cashierPageWatcher({key:"querySignStateAlipay",isSuccessful:i});cashierPageWatcher({key:"querySignState"})}else{a.apply(this,arguments)}}function a(){cashierPageWatcher({key:"querySignState",isSuccessful:false});n.resolve(i)}var n=$.Deferred(),r=this;var i={hasSign:false,canUseAlipay:false};var s="2";o();return n.promise()},getSignScheme:function(t){function s(e){var t=JSON.parse(e.resultJson);if(t&&t.jumpTo){cashierPageWatcher({key:"querySignSchema"});n.resolve(t.jumpTo)}else{o.apply(this.arguments)}}function o(){cashierPageWatcher({key:"querySignSchema",isSuccessful:false});n.reject.apply(n,arguments)}var n=$.Deferred();var r="4";var i={orderNo:t.qunarOrderNo,contactPhone:t.qunarOrderContactPhone,tokenGetType:2};this.postRequest(r,i).then(s,o);return n.promise()}};e.exports=n},function(e,t,n){"use strict";function i(e,t){this.view=e;this.winObj=t}var r=n(364);i.prototype={constructor:i,stati:function(t,n,i){var s=new r;s.sendDetail("repeatOrder_"+t,n,i)},injectThroughOgnl:function(t){$.extend(true,this.view.form,t.throughOgnl)},cancelWindow:function(t,n){this.stati("cancelWindow");n.reject(t)},jumpByScheme:function(t,n){this.stati("jumpByScheme");Common.sendSchema(t.jumpTo);n.reject(t)},retryWithThrough:function(t,n){this.stati("retryWithThrough");this.injectThroughOgnl(t);n.resolve(t)},forOrderSave:function(t,n){this.stati("forOrderSave");n.reject(t)},justAlert:function(t,n){this.stati("justAlert");n.reject(t)},dispatchAction:function(t,n){var r=function(){};switch(t.type){case 0:r=this.cancelWindow;break;case 1:r=this.jumpByScheme;break;case 2:r=this.retryWithThrough;break;case 3:r=this.forOrderSave;break;case 4:default:r=this.justAlert;break}return r.bind(this,t,n)},prepareParams:function(t){var n=this.winObj.buttons[0]||{};var r=null;var i={title:"å°é©¼æ¸©é¦¨æç¤º",content:this.winObj.content,okText:n.text,onOk:this.dispatchAction(n,t)};if(this.winObj.buttons.length>=2){r=this.winObj.buttons[1];i.cancelText=r.text;i.onCancel=this.dispatchAction(r,t)}return i},show:function(){var t=$.Deferred();var n=this.prepareParams(t);if(n.onCancel)this.view.confirm(n);else this.view.alert(n);this.view.stopUpdateProgressBar();return t.always(this.view.startUpdateProgressBar.bind(this.view))}};e.exports=i},function(e,t){"use strict";function n(e,t){this.form=e;this.trainOrderSaveResult=t}n.prototype={constructor:n,lifetimeEnd:function(){QunarAPI.train.closeScreenLight();QunarAPI.hy.enableBackGesture({enable:true})},toQunarPay:function(){this.occupySuccessPayMethodWatcher({key:"qunar"});this.occupySuccessPayMethodWatcher({key:"qunar_server"});var t=this.trainOrderSaveResult;var n=this.trainOrderSaveResult.orderInfo;n=n&&n.streetAddress?true:false;t.payInfo.payTypeList.length&&QunarAPI.train.checkout({submitResult:t,expressIsOn:n,success:function(t){}})},to12306Pay:function(t,n,r){function c(){a.occupySuccessPayMethodWatcher({key:"12306"});a.occupySuccessPayMethodWatcher({key:"12306_server"});QApp.open("cashierPage",f)}function h(){Common.alert("è¯·åçº§å®¢æ·ç«¯åè¿è¡æ¯ä»")}function p(){var e=i.ticketsPrice;if(n){e=0;if(n[0].ticketPrice){n.forEach(function(t){var n=(t.ticketPrice+"").replace("Â¥","");e+=parseFloat(n)})}}if(!e&&i.payFeeDetail&&i.payFeeDetail.ticketPriceList.length){e=i.payFeeDetail.ticketPriceList[0].unitPrice}return e}var i=this.trainOrderSaveResult.orderInfo;var s=this.passengerInfos||[];var o=-1;var u=p();var a=this;if(s.length>0)o=this.calculateTicketPrice(s);if(o!==-1)u=o;var f={param:{totalPrice:u,orderSaveData:JSON.stringify(this.trainOrderSaveResult),payMethod:t,tickets:JSON.stringify(n),sequence_no:n[0].ticketNo,order_timeout_date:n[0].lastPayTime,purchaseCardData:JSON.stringify(r)}};var l={iosVersion:80011132,adrVersion:101};Common.isValidityAppVersion(l).then(c,h)},toRob:function(){this.lifetimeEnd();var t=this.form.orderInfo.trainInfo;var n={dep:t.from,arr:t.to,date:t.depDateForShow,trainNumber:t.no,seat:t.seat,bizMode:4};var r=Common.getPhoneSchema()+"railway/fillCloudRobOrder?"+$.param(n);Common.sendSchema(r)},toSearchList:function(){this.lifetimeEnd();var t=this.form.orderInfo.trainInfo;var n={railwayType:"twostation",dep:t.from,arr:t.to,date:t.depDateForShow};var r=QApp.sniff.android?"trainBigTrafficList":"search";var i=Common.getPhoneSchema()+"railway/"+r+"?"+$.param(n);Common.sendSchema(i)},toOta:function(){this.lifetimeEnd();var t=this.form.backView||this.form.backVCName||"ota";Common.sendSchema(Common.getPhoneSchema()+"railway/"+t)},toOrderFill:function(){this.lifetimeEnd();this.hide()},toOrderDetail:function(){this.lifetimeEnd();var t={orderNo:this.trainOrderSaveResult.orderInfo.orderNo,contactPhone:this.trainOrderSaveResult.orderInfo.contact.phone,backVCName:"main",toMain:"true"};var n=Common.getPhoneSchema()+"railway/orderDetail?"+$.param(t);Common.sendSchema(n)},hide:function(){QApp.router.back()},gotoPurchaseCardPay:function(t,n){var r=this.trainOrderSaveResult.orderInfo;var i={orderNo:r.orderNo,contactPhone:r.contact.phone||""};if(n&&n.hasPurchaseCard){this.toQunarPay()}else{QApp.open("openBankPage",{param:{payParams:JSON.stringify(i),purchaseCardData:JSON.stringify(n),fromSource:"occupySeatServerPage"}})}},gotoOccupySeatedPage:function(t){var n=JSON.stringify(this.trainOrderSaveResult);var r={};if(t&&t.length){r={tickets:this.adapterTickets(t),order_timeout_date:t[0].lastPayTime}}else{r.tickets=this.getTicketsFake()}var i=Common.getPhoneSchema()+"railway/grabSeatFinish?"+"orderData="+encodeURIComponent(n)+"&ticketInfo="+encodeURIComponent(JSON.stringify(r));Common.sendSchema(i)},adapterTickets:function(t){var n=[],r;t.forEach(function(e){r={passengerName:e.passengerName,price:e.ticketPrice.replace("Â¥",""),carriageName:e.seatNo.split("è½¦")[0]+"è½¦",seatName:e.seatNo.split("è½¦")[1],seatTypeName:e.seat};n.push(r)});return n},getTicketsFake:function(){var t=this.form;var n=t.orderInfo;var r=n.ticketPrice;var i=n.trainInfo.seat;var s;var o=[];n.passengers.forEach(function(e){s={passengerName:e.name,price:r,carriageName:"",seatName:"",seatTypeName:i};o.push(s)});return o},isOccupationSuc:function(t){if(t&&t.length){return $.Deferred().resolve()}else{return $.Deferred().reject()}},isCanBuyCarProduct:function(){var t=this.trainOrderSaveResult;if(t.canBuyCarProduct){return $.Deferred().resolve()}return $.Deferred().reject()},gotoQunarPayOrGotoOccupySeatedPage:function(t){$.when(this.isCanBuyCarProduct()).then(this.gotoOccupySeatedPage.bind(this,t),this.toQunarPay.bind(this))},occupySuccessPayMethodWatcher:function(t){var n=$.extend({},t);n.key="hyBuy_occupySuccess_payMethod_"+n.key;window.sendWatchMessage(n)}};e.exports=n},function(e,t){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var r={};r.toVerificationGuide=function(e,t){function r(){function n(e){var t=e.url+"&"+$.param(i);Common.sendSchema(t)}function r(e){}if(!$.isEmptyObject(t)){var i={notPassPassengerNames:Common.base64Encode(t.notPassPassengerNames)||"",ticketPrice:t.form.orderInfo.ticketPrice,ticketSeat:Common.base64Encode(t.form.orderInfo.trainInfo.seat)};return Common.postRequest("t_tTrainIdentityGuide",t.form).done(n.bind(this)).fail(r)}else{QApp.open("intercept",e||{})}}function i(){if(!$.isEmptyObject(t.form)){t.form=JSON.stringify(t.form)}Common.openTrainSino("verificationGuide",n({},e,t))}e=e||{};t=t||{};if(e.verifyType==2){i()}else{r()}};e.exports=r},function(e,t){"use strict";function n(e,t,n){function o(e){if(!e){switch(t){case"login":e="éè·¯é¨é¨ç³»ç»ä¸ç¨³å®ï¼å»ºè®®æ¨éæ©å»åªå¿å¸®æ¨ä¹°çæ¹å¼è´­ç¥¨ï¼æ éç»å½";break;case"register":e="éè·¯é¨é¨ç³»ç»ä¸ç¨³å®ï¼å»ºè®®æ¨éæ©å»åªå¿å¸®æ¨ä¹°çæ¹å¼è´­ç¥¨ï¼æ éæ³¨å";break;case"addPsg":e="ç±äº12306ç³»ç»ç¹å¿ï¼æ¨æ¬æ¬¡æ·»å ä¹å®¢\næªæå\nè¯·æ¨éè¯\næéæ©å»åªå¿å¸®æ¨ä¹°ï¼æ·»å æåçæ´é«";break;case"occupySeat":e="ç®åè´­ç¥¨é«å³°æï¼éè·¯é¨é¨ç³»ç»ç¹å¿ï¼æ¬æ¬¡å åº§æªæå\nè¯·æ¨ç¹å»éè¯ï¼åæ¬¡è¿è¡å åº§\næ¨ä¹å¯ä»¥å»æ¯ä»ï¼å°é©¼å°èªå¨ä¸ºæ¨éè¯";break;default:}}return e}function u(e){var r=false;if(e.isOn==true&&e.options&&e.options.ids){for(var i=0;i<e.options.ids.length;i++){var s=e.options.ids[i];if(n.indexOf(s)>-1){r=true;break}}}var o=t+"FailRetryTimesInfo";var u=Common.getStoredInfo(o);var a=u?u.retryTimes:0;if(e.retryTimes&&a>=e.retryTimes){r=false}return r}function a(){if(t){sendWatchMessage({key:"peakTime12306_"+t+"fail_retry_show_times",isSuccessful:false,duration:""});var e={login:"ccc",register:"ccc",addPsg:"ddd",occupySeat:"ddd"};var n=e[t]||"unknown";if(n!="unknown"){var r={value:t,level:n};QunarAPI.train.updateInnerCat(r)}}}function f(i){function h(e){var r=t=="occupySeat";var i=t+"FailRetryTimesInfo";var o=r?"éè¯":"ç¥éäº";var u=function(){var n=r?"retry":"confirm";sendWatchMessage({key:"peakTime12306_"+t+"_"+n+"_click",isSuccessful:true,duration:""});var o=Common.getStoredInfo(i);var u=o?o.retryTimes:0;Common.storeInfo(i,{retryTimes:++u},true);r&&s.resolve()};var a=r?"å»æ¯ä»":"å»åªå¿å¸®ä½ ä¹°";var l=function(){Common.storeInfo(i,{retryTimes:0},true);var n=r?"toPay":"qunarBuy";sendWatchMessage({key:"peakTime12306_"+t+"_"+n+"_click",isSuccessful:true,duration:""});r?s.reject():s.resolve(f||{})};var c=Common.convertToLegibleForm(n,e);Common.hideLoading();var h={title:"å°é©¼æ¸©é¦¨æç¤º",content:c,okText:o,onok:u,cancelText:a,oncancel:l};Common.confirm(h)}var f=null;try{f=JSON.parse(i[r])}catch(l){s.reject()}if(f){var c=f[t]||{};if(u(c)){a();e?e._peakTimeRetry=true:null;c.reason=o(c.reason);h(c.reason)}else{s.reject()}}return s.promise()}var r="json.peakTime12306.errorTips";var i=[r];var s=$.Deferred();if(n){return Common.getAppConfig(i).then(f)}else{return s.reject()}}function r(e){var t=Common.getPhoneSchema();var n=t+"railway/bookingFromSearch?source="+e.source+"&date="+e.date+"&dep="+e.dep+"&arr="+e.arr+"&trainNumber="+e.trainNumber+"&agentId="+e.agentId+"&agentType="+1+"&ticketId="+e.ticketId+"&bizMode="+0+"&extra=&feedLog="+"&innerCat=from12306LoginToAgent";n=encodeURI(n);if(QApp.sniff.android){Common.sendSchema(n)}else{QunarAPI.train.closeThenOpenView({viewName:"ota",scheme:n,popStyle:"2"})}}function i(){if(QApp.sniff.android){Common.sendSchema(Common.getPhoneSchema()+"railway/ota")}else{QunarAPI.train.closeView({viewName:"ota"});setTimeout(function(){QunarAPI.train.closeView({viewName:"main"})},2e3)}}e.exports={peakTime12306Handler:n,toOrderFill:r,backToOtaOrMain:i}},function(e,t,n){"use strict";function f(e,t,n){o.apply(this,arguments);this.occupationResultDefer=null}var r=n(430);var i=n(318);var s=n(384);var o=n(429);var u=n(449);var a=n(431);f.prototype=$.extend(true,{},new o,{constructor:f,abortConfirmPassengerInfoSingle:function(){pc12306.ajaxAllow()},isConfirmPassengerInfoSingleAborted:function(){return pc12306.getAjaxAbortTag()},occupy:function(t){if(this.occupationResultDefer)return this.occupationResultDefer;this.occupation=new u(t,this.view.form);this.occupationResultDefer=this.occupation.run().progress(this.logUltraOccupationResult.bind(this)).always(this.logResultTimeCost.bind(this));return this.occupationResultDefer}});e.exports=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(450);var s=o(i);var l=n(452);var c=n(431);var h=n(430);var p=n(384);var d=n(455);var v=n(432);var m=n(318);var g=n(402);var y=n(310);var b=n(311);var w=false;var E=n(456);var S=function(e){function t(e){u(this,t);Console.log("Occupation3W constructor arguments",arguments);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.pc12306=new y;n.form=e;n.orderObj=null;n.providerId="3w";n.falsePasscodeRetryTimes=5;n.retryLater=3;n.ypExpiresTimes=2;n.visitTooFrequentRetryTimes=2;n.subtractTicketFailRetry=4;n.requestFailRetryTimes=4;n.queueExceptionRetry=8;n.notStartSellRetry=3;n.systemErrorRetry=4;n.unidentifiedErrorRetry=4;n.unrecognizedExceptionRetry=2;n.delayOrderTime=0;n.occupationStart=0;n.noYpRequeryWatershed=40;n.noYpRequeryTimeSpan=3.2;n.noYpRequeryTimeSpanTotal=7;n.occupySeat3WCore=new g(n.pc12306);n.queueWaitTimeLimit=60;n.hasAborted=false;return n}f(t,e);r(t,[{key:"mobile12306FormDataConvertor",value:function(t){var n=t.orderInfo.trainInfo,r=t.orderInfo.passengers;var i={getFromAndToStationCode:function(){var t=h.getStationByChineseCharacter(n.from.trim());var r=h.getStationByChineseCharacter(n.to.trim());if(t.length===1)t=t[0][2];else{t=""}if(r.length===1)r=r[0][2];else{r=""}return{from:t,to:r}},getSeats:function(){n.candidateSeats=n.candidateSeats||[];var t=n.candidateSeats.slice(0);t.unshift(n.seat);t=t.map(function(e,t){if(e==="æ åº§")return"noSeat";return p.convertor.seatTypeCharacterToCode(e)});return t},getPassengerInfo:function(){function o(e){i=t.passengerTypeTo12306(e.ticketType);s={passenger_name:e.name,passenger_id_type_code:t.idTypeTo12306(e.certType.code),passenger_id_no:e.certNo,passenger_type:i,ticket_type:i};if(i=="2"&&e.guardian){s.passenger_name=e.guardian.name;s.passenger_id_type_code=t.idTypeTo12306(e.guardian.certType.code);s.passenger_id_no=e.guardian.certNo}n.push(s)}var t=new m;var n=[];var i,s;r.map(o);return n}};var s=i.getFromAndToStationCode();var o="";if(t.onlinePickingInfo){o=t.onlinePickingInfo.replace(/,/g,"")}var u={departureTime:n.departureTime,train_date:n.departureTime.substr(0,8),station_train_code:n.no,from_station:s.from,to_station:s.to,seats:i.getSeats(),start_time:n.departureTime.substr(8,2)+":"+n.departureTime.substr(10,2),ticket_type_order_num:r.length.toString(),choose_seats:o,passengersForOccupy:null};u.passengersForOccupy=i.getPassengerInfo();return u}},{key:"run",value:function(){return this.genuineRun.apply(this,arguments)}},{key:"isPassengerNameRecognizable",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return true}},{key:"genuineRun",value:function(){function r(e,n,r){var i=((Date.now()-r)/1e3).toFixed(2);var s={isSuccessful:n,timecost:i,provider:"pc",args:[].slice.call(e,0)};t.notify(s)}function i(){r(arguments,true,n);t.resolve.apply(t,arguments)}function s(e){r(arguments,false,n);if(e.id&&e.id==="aborted"){return t.promise()}t.reject.apply(t,arguments)}this.pc12306.ajaxAllow();var t=this.timeOutResultDefer,n=Date.now();this.runRealTask.call(this).then(i,s);return t}},{key:"runRealTask",value:function(){var t=this;if(!Common.may12306LoggedIn())return $.Deferred().reject("usernameOrPasswordNotProvided");this.orderObj=this.mobile12306FormDataConvertor(this.form);var n=function(){var n=t.orderObj;if(n.from_station&&n.to_station)return t._run();else return $.Deferred().reject("åºåå°æç®çå°ä¸è½ä¸ºç©º")};var r=Common.getUserInfo()||{},i=r.user_name;if(this.occupationStart===0)this.occupationStart=Date.now();if(i){return v.isAccountAvailable(i).then(n)}else return n()}},{key:"_run",value:function(){function t(){return b(this.confirmPassengerInfoSingle.bind(this),arguments)}return this.queryLeftTicketAndGetPasscodeNew().then(t.bind(this)).always(this.confirmPassengerInfoSingleAlways.bind(this)).then(this.confirmPassengerInfoSingleSuccess.bind(this),this.confirmPassengerInfoSingleFail.bind(this))}},{key:"queryLeftTicketAndGetPasscodeNew",value:function(){this.orderObj=this.mobile12306FormDataConvertor(this.form);return l.queryLeftTicketAndGetPasscodeNew.run(this.orderObj,null,null,this.form.orderInfo.trainData).then(this.queryLeftTicketAndGetPasscodeNewSuccess.bind(this),this.queryLeftTicketAndGetPasscodeNewFail.bind(this))}},{key:"queryLeftTicketAndGetPasscodeNewSuccess",value:function(t){function o(){c.setBeacon(c.steps.confirmPassengerInfoSingle,true);return t}var n=this.pc12306.queryLeftTicketSuccessHandler(t.queryLeftNewDTO,this.orderObj);var r={ypObj:this.orderObj.ypObj,priorSeatType:this.orderObj.priorSeatType};Common.event.trigger("occupy.progress.notice",r);var i=QApp.getViewSync(QApp.router.getCurViewName());i&&i.progressBarNotice&&i.progressBarNotice(r);if(n===true){var s=this.calculateDelayOrderTime(t.instantTimeStamp);return Common.delay(s).then(o.bind(this))}else{switch(n){case"ypNotEnough":return this.noYpRequeryStrategy(t);case"noYpInfoProvided":default:return $.Deferred().reject("noYpInfoProvided",n,t)}}}},{key:"queryLeftTicketAndGetPasscodeNewFail",value:function(t,n,r){if(t==="ypNotEnough")return this.noYpRequeryStrategy(n);c.setBeacon(c.steps.queryLeftTicketAndGetPasscodeNew,false);return $.Deferred().reject(t,n,r)}},{key:"confirmPassengerInfoSingle",value:function(t){var n=this.orderObj.ypObj[this.orderObj.seats[0]].seatTypeCode;this.triggerConfirmEvent();return this.occupySeat3WCore.occupy(this.orderObj.passengersForOccupy,n,t,this.orderObj).then(this.pc12306.convert12306OrderTicket3WToConfirmSingleSuccessMobile.bind(this.pc12306))}},{key:"confirmPassengerInfoSingleAlways",value:function(){l.ultimateGoalManager.clear()}},{key:"confirmPassengerInfoSingleSuccess",value:function(t){c.setBeacon(c.steps.confirmSingleSuccess,true);return t}},{key:"confirmPassengerInfoSingleFail",value:function(t,n,r){console.log("confirmPassengerInfoSingleFail:",arguments);var i=this.getInfoFromConflictTrip(t,this.orderObj);console.log("editedMsg:",i);if(i)t=i;var s=$.Deferred();var o=Common.getError3W(t);var u=Common.lookUp(o);this.harnessOccupationProcess(false,[u]);if(!u)return s.reject.apply(s,arguments);switch(u.id){case"cancelOrderFail":w=false;break;case"cancelTooManyTimes":v.cacheUnavailableAccount();return this.timeOutResultDefer.reject(u);case"passcodeNotCorrect":l.ultimateGoalManager.clear();break;case"forbiddenState":case"illegalRequest":case"illegalState":case"serviceUnavailable":case"forceUpgradeNewVersion":case"badToken":case"connectRefused":case"movedTemporarily":Common.clearCache("3w");break;case"scheduleCanceled":case"notStartSell":case"ypNotEnough":case"ticketInfoExpire":case"subtractTicketFail":case"getWaitTimeBuyTicketFail":case"particularTrainOfParticularDateNotFound":Common.clearYpAndGoal("3w");break;case"existsUnpayOrder":window.sendWatchMessage({key:"hyBuy_occupySeat3W_existsUnpayOrder"});break}if(this.shouldRetryParticularReason(u)){var a=u.retryDelay||0;switch(u.id){case"existsUnpayOrder":Common.event.trigger("existsUnpayOrder");return Common.delay(2e3).then(this.unpayInterceptor.bind(this));case"visitTooFrequent":Common.clearCache("3w");return Common.delay(a).then(this._run.bind(this));case"queueing":return this.handleQueueing(t);default:return Common.delay(a).then(this._run.bind(this))}}if(u.id==="idUnauthorized"&&!this.isPassengerNameRecognizable(u.origin)&&this.idUnauthorizedRetry>0){this.idUnauthorizedRetry--;this.retryCountBundle.idUnauthorizedRetry=this.retryCountBundle.idUnauthorizedRetry||0;this.retryCountBundle.idUnauthorizedRetry++;return Common.delay(4*1e3).then(this._run.bind(this))}c.setBeacon(c.steps.confirmSingleSuccess,false,t);return s.reject(u)}},{key:"handleQueueing",value:function(t){function i(e){window.sendWatchMessage({key:"hyBuy_occupy_queueingAndOccupationSuccess",isSuccessful:e})}console.log("occupation3W fail queueing",t);var n=Common.deepGet(t,"data.orderCacheDTO.waitTime",0);if(n&&n<this.queueWaitTimeLimit){return Common.delay(n*1e3).then(this._run.bind(this)).done(i.bind(this,true)).fail(i.bind(this,false))}else{var r=Common.deepGet(t,"data.orderCacheDTO.tourFlag");return this.cancelQueueAndRestartOccupation(r)}}},{key:"isAborted",value:function(){return this.hasAborted}},{key:"cancelQueue",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"dc";return this.pc12306.cancelQueueNoCompleteMyOrder(t)}},{key:"fixArrivalTimeAndDuration",value:function(t,n,r,i,s){function f(e){var a,f=0,l=0;var c=Common.parseDateTime(o.departureTime);var h;if(e.trains&&e.trains.length>=0){a=e.trains[0]["time"]||"";a=a.trim();a=a.replace(/^(\d+)\D+(\d+)\D+$/,function(e,t,n){f=+t;l=+n});l+=f*60;h=new Date(c.getTime()+l*60*1e3);o.arrivalTime=Common.formatDate(h,"YYYYMMddHHMI");o.duration=l}u.resolve(t,n,r,i,s)}function l(e){u.resolve(t,n,r,i,s)}var o=r.orderInfo.trainInfo;var u=$.Deferred();var a={date:o.depDateForShow,trainNumbers:[{dep:o.from,trainNumber:o.no,arr:o.to}]};Common.postRequest("t_tSearchNumber",a).then(f,l);return u}},{key:"orderDataConvertor",value:function(t){return this.pc12306.convert12306OrderTicket3WToConfirmSingleSuccessMobile(t)}},{key:"queryOrderNotCompleted",value:function(){function t(e){return Common.getError3W(e)}return this.pc12306.queryMyOrderNoComplete().then(undefined,t)}},{key:"calculateElapsedTime",value:function(){if(this.occupationStart===0)return 0;var t=(Date.now()-this.occupationStart)/1e3;return t}},{key:"calculateYpAge",value:function(t){var n=0;if(t&&t.timeStamp)n=(Date.now()-t.timeStamp)/1e3;return n}},{key:"noYpRequeryStrategy",value:function(t){function s(){this.queryLeftTicketAndGetPasscodeNew().then(o,u)}function o(e){n.resolve(e);c.setBeacon(c.steps.requeryLeftTicket,true)}function u(e){n.reject(e);c.setBeacon(c.steps.requeryLeftTicket,false)}var n=$.Deferred();var r=this.calculateElapsedTime();var i=this.calculateYpAge(t);if(r>this.noYpRequeryTimeSpanTotal)return n.reject("ypNotEnough");if(i<this.noYpRequeryWatershed){setTimeout(s.bind(this),this.noYpRequeryTimeSpan*1e3)}else{s.bind(this)()}return n}},{key:"cancelOrder",value:function(t){return(new s.default(t)).func3W()}},{key:"resume",value:function(){l.queryLeftTicketAndGetPasscodeNew.resume();this.pc12306.ajaxAllow();this.hasAborted=false}},{key:"abort",value:function(){console.log("abort:",arguments);this.hasAborted=true;l.queryLeftTicketAndGetPasscodeNew.abort();this.clearTimeout();this.pc12306.abortAll()}}]);return t}(E);e.exports=S},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=l(i);var o=n(311);var u=l(o);var a=n(451);var f=l(a);var d=function(e){function t(e){c(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.id="canclelation";n.excludeRetryReason=[];n.orderInfo=e;return n}p(t,e);r(t,[{key:"func3W",value:function(t){function r(e){return n.resolve(e)}function i(e){var t=Common.getError3W(e,"åæ¶è®¢åå¤±è´¥");return n.reject(t)}function s(){return pc12306.cancelNoCompleteMyOrder(this.orderInfo.sequence_no).then(r.bind(this)).fail(i.bind(this))}var n=$.Deferred();(0,u.default)(s.bind(this)).fail(i.bind(this));return n.promise()}},{key:"funcMobile",value:function(){var t={orderList:[this.orderInfo]};return(new f.default(t)).run()}}]);return t}(s.default);t.default=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=n(422);var o=function(){function e(t){i(this,e);this.order12306=t}r(e,[{key:"getOrder",value:function(){if(this.order12306)return $.Deferred().resolve(this.order12306);else return wireless12306.queryOrder(1)}},{key:"getParamsFromOrderData",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=t.orderList,r=$.Deferred();var i={"undefined":"0","true":"1"};if(n[0]){var s=n[0],o=s.sequence_no,u=s.gq_flag;var a=i[u];return r.resolve(o,a)}else{return r.reject("ä¸å­å¨æªå®æè®¢å")}}},{key:"getParams",value:function(){return this.getOrder().then(this.getParamsFromOrderData.bind(this))}},{key:"_run",value:function(){return this.getParams().then(wireless12306.cancelOrder.bind(wireless12306))}},{key:"run",value:function(){return(new s(this._run.bind(this))).run()}}]);return e}();e.exports=o},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var o=n(312);var u=n(453);var a=n(310);var f=n(402);var l=4.8;var c=function(){function e(){s(this,e);this.setting={validityPeriod:l,preSubmitOrderInterval:3,quota:8};this.flags={preSubmitOrderAllowed:true};this.preSubmitOrderQueue=[];this.errorMessage={preSubmitOrderDenied:"preSubmitOrderDenied"};this.pc12306=new a;this.ccupySeat3WCore=new f(this.pc12306);this.initQueue()}i(e,[{key:"initQueue",value:function(){this.preSubmitOrderQueue=Common.getStoredInfo("preSubmitOrderQueue3W")||[];this.stripExpired();return this}},{key:"clearQueue",value:function(){this.preSubmitOrderQueue=[];this.push({})}},{key:"setValidityPeriod",value:function(t){this.setting.validityPeriod=t;return this}},{key:"isWithinValidityPeriod",value:function(t){var n=Date.now()-t.timeStamp;return n<=this.setting.validityPeriod*60*1e3}},{key:"preSubmitOrder",value:function(t,n){function u(){i.preSubmitOrderAllowed=true}function a(e){e.isAsync=pc12306.isAsync();console.log("preSubmitOrderSuccess:",arguments,pc12306.isAsync());n.preSubmitOrderTicketResult=e;n.isAsync=pc12306.isAsync();this.push(n);return n}function f(){return $.Deferred().reject.apply(this,arguments)}var r=$.Deferred(),i=this.flags,s=this.setting,o=this.errorMessage;if(i.preSubmitOrderAllowed){i.preSubmitOrderAllowed=false;setTimeout(u,s.preSubmitOrderInterval*1e3);return this.ccupySeat3WCore.submitOrder(t,n.station_train_code).then(a.bind(this),f)}else return r.reject(o.preSubmitOrderDenied)}},{key:"push",value:function(t){var n=this.preSubmitOrderQueue;this.stripExpired();if(n.length>=this.setting.quota)n.shift();n.push(t);Common.storeInfo("preSubmitOrderQueue3W",n,true)}},{key:"stripExpired",value:function(){var t=this;this.preSubmitOrderQueue=this.preSubmitOrderQueue.filter(function(e){return t.isWithinValidityPeriod(e)})}}]);return e}();var h=new c;var p=function(){function e(){s(this,e);this.setting={validityPeriod:l,queryLeftTicketInterval:3,quota:8};this.flags={queryLeftTicketAllowed:true};this.ticketQueue=[];this.errorMessage={queryLeftTicketDenied:"queryLeftTicketDenied",checiOrDateNotProvided:"checiOrDateNotProvided",particularTrainOfParticularDateNotFound:"particularTrainOfParticularDateNotFound"};this.ccupySeat3WCore=new f;this.initQueue()}i(e,[{key:"initQueue",value:function(){this.ticketQueue=Common.getStoredInfo("ticketQueue3W")||[];this.stripExpired();return this}},{key:"setValidityPeriod",value:function(t){this.setting.validityPeriod=t;return this}},{key:"isWithinValidityPeriod",value:function(t){var n=Date.now()-t.timeStamp;return n<=this.setting.validityPeriod*60*1e3}},{key:"getParticularLaneOfParticularDateLocally",value:function(t){this.initQueue();var n=["from_station","to_station","train_date"];var r=this.ticketQueue.find(function(e){return Common.compareObject(e,t,n)});return r}},{key:"broadcastYpInfo",value:function(t){Common.event.trigger("occupy.progress.notice",t);var n=QApp.getViewSync(QApp.router.getCurViewName());n&&n.progressBarNotice&&n.progressBarNotice(t)}},{key:"isAnyTicketAvailable",value:function(t,n){var r=pc12306.parseYpInfo(t.queryLeftNewDTO);var i=false;if(n.seats&&n.seats.length>0&&n.ticket_type_order_num){var s=pc12306.getPriorSeatType(r,n);if(s.result!=-1)i=true;this.broadcastYpInfo({ypObj:r,priorSeatType:s})}else{if(r){for(var o in r){if(r[o]["ticket"]>0){i=true;break}}}else return!!t.queryLeftNewDTO.yp_info}return i}},{key:"getParticularLaneOfParticularDate",value:function(t){function s(){var e={fromCity:t.from_station,toCity:t.to_station,date:Common.formatDate(t.train_date)};return this.ccupySeat3WCore.queryLeftTicket(e).then(u.bind(this))}function o(){this.flags.queryLeftTicketAllowed=true}function u(e,n){t.ticketResult=e;t.originYpInfo=n;this.push(t);console.log("queryLeftTicketSuccess:",t);return t}var n=$.Deferred();var r=this.getParticularLaneOfParticularDateLocally(t);if(r)return n.resolve(r);var i=this.flags;if(i.queryLeftTicketAllowed){i.queryLeftTicketAllowed=false;setTimeout(o.bind(this),this.setting.queryLeftTicketInterval*1e3);return s.call(this)}else{return n.reject(this.errorMessage.queryLeftTicketDenied)}}},{key:"push",value:function(t){var n=this.ticketQueue;this.stripExpired();if(n.length>=this.setting.quota)n.shift();n.push(t);Common.storeInfo("ticketQueue3W",n,true)}},{key:"getParticularTrainOfParticularDateLocally",value:function(t){this.initQueue();this.stripExpired();var n=["from_station","to_station","train_date"];var r=this.ticketQueue.find(function(e){return Common.compareObject(e,t,n)});var i=pc12306.findOutParticularCheci(r.ticketResult,t.station_train_code,t.departureTime);return i}},{key:"getParticularTrainOfParticularDate",value:function(t){function r(e){var r=this.leftTicketObjErrorMsg(e);if(r){this.stripParticularCheci(t.station_train_code,t.train_date);return n.reject(r)}if(this.isAnyTicketAvailable(e,t)){return h.preSubmitOrder([].concat(e),t)}else{if(e.queryLeftNewDTO.yp_info)return n.reject("ypNotEnough");else return n.reject("noYpInfoProvided",e.message,e)}}function i(e){var i=this.getParticularTrainOfParticularDateLocally(t);if(i)return r.call(this,i);else return n.reject(this.errorMessage.particularTrainOfParticularDateNotFound)}var n=$.Deferred();if(t.trainData){return h.preSubmitOrder([].concat(t.trainData),t)}if(!t.station_train_code&&t.train_date){return this.getParticularLaneOfParticularDate(t)}else if(t.station_train_code&&t.train_date){return this.getParticularLaneOfParticularDate(t).then(i.bind(this))}else{return n.reject(this.errorMessage.checiOrDateNotProvided)}}},{key:"leftTicketObjErrorMsg",value:function(t){var n="";if(t.queryLeftNewDTO.controlled_train_flag!=="0")n=t.queryLeftNewDTO.controlled_train_message;if(t.buttonTextInfo!="é¢è®¢")n=t.buttonTextInfo;return n}},{key:"stripExpired",value:function(){var t=this;this.ticketQueue=this.ticketQueue.filter(function(e){return t.isWithinValidityPeriod(e)})}},{key:"stripParticularCheci",value:function(t,n){var r,i=[];this.ticketQueue.forEach(function(e,s){if(e.train_date===n){r=pc12306.findOutParticularCheci(e.ticketResult,t)}if(!r)i.push(e)});this.ticketQueue=i;Common.storeInfo("ticketQueue3W",this.ticketQueue,true)}}]);return e}();var d=new p;var v=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"3W";s(this,e);this.storageKey="preoccupationUltimateGoal"+t}i(e,[{key:"set",value:function(t){Common.storeInfo(this.storageKey,t,true)}},{key:"get",value:function(){return Common.getStoredInfo(this.storageKey)}},{key:"clear",value:function(){h.clearQueue();this.set({})}},{key:"state",value:function(){var t=this.get();if(!t||$.isEmptyObject(t))return"notExists";var n=this.getElapsedTime(t);if(n>=l*60*1e3)return"expired";return"ok"}},{key:"getElapsedTime",value:function(t){return Date.now()-t.instantTimeStamp}}]);return e}();var m=new v("3W");var g=function(){function e(t){s(this,e);this.goal=t;this.aborted=false}i(e,[{key:"abort",value:function(){h.pc12306.abortAll();this.aborted=true}},{key:"resume",value:function(){h.pc12306.ajaxAllow();this.aborted=false}},{key:"queryLeftTicketSuccess",value:function(t){var n=$.Deferred();if(this.aborted===true)return n.reject("aborted");t=t.preSubmitOrderTicketResult;this.goal.train=t;if(!d.isAnyTicketAvailable(t,this.goal)){if(!t.queryLeftNewDTO.yp_info)return n.reject("noYpInfoProvided",t.message,t);return n.reject("ypNotEnough",this.goal)}console.log("ticket available:",this.goal);t.instantTimeStamp=Date.now();this.goal.instantTimeStamp=Date.now();m.set(this.goal);return n.resolve(t)}},{key:"run",value:function(){var t=r({},this.goal);if(this.goal.pageSource=="trainList"){return d.getParticularTrainOfParticularDate(t)}return d.getParticularTrainOfParticularDate(t).then(this.queryLeftTicketSuccess.bind(this))}}]);return e}();var y=function(){function e(t){s(this,e);this.missionPerformer=new g(t);this.aborted=false;this.validityPeriod=l}i(e,[{key:"missionFail",value:function(t,n,r){if(!this.aborted&&(typeof t==="string"&&t.indexOf("ç»å½")>=0||t&&t.type=="notLogin")){return o.run().then(this.loginSuccess.bind(this))}return $.Deferred().reject(t,n,r)}},{key:"abort",value:function(){this.missionPerformer.abort();this.aborted=true}},{key:"resume",value:function(){this.missionPerformer.resume();this.aborted=false}},{key:"loginSuccess",value:function(){if(this.aborted)return $.Deferred().reject("loginSuccessButAborted");else return this.missionPerformer.run()}},{key:"getGoal",value:function(){return this.missionPerformer.goal}},{key:"isWithinValidityPeriod",value:function(t){var n=Date.now()-t.timeStamp;return n<=this.validityPeriod*60*1e3}},{key:"getLastGoal",value:function(){var t=m.get(),n=this.getGoal();if(t&&t.from_station===n.from_station&&t.to_station===n.to_station&&t.train_date===n.train_date&&(n.pageSource==="trainList"?true:t.station_train_code===n.station_train_code)&&this.isWithinValidityPeriod(t)){var r=t.train&&t.train.queryLeftNewDTO;if(r){if(t.from_station===r.from_station_telecode&&t.to_station===r.to_station_telecode){return t}else{return null}}else return t}return null}},{key:"setValidityPeriod",value:function(t){this.validityPeriod=t;d.setValidityPeriod(t);return this}},{key:"run",value:function(){var t=this.getLastGoal();if(t){return $.Deferred().resolve(t.train)}else{m.clear();return this.missionPerformer.run().then(undefined,this.missionFail.bind(this))}}}]);return e}();var b=function(){function e(){s(this,e);this.locked=false;this.missionPerformerEnhanced=null;this.errorMessage={lastMissionNotAccomplished:"lastMissionNotAccomplished"}}i(e,[{key:"run",value:function(t,n,r,i){var s={departureTime:t.departureTime,from_station:t.from_station,to_station:t.to_station,station_train_code:t.station_train_code,train_date:t.train_date,ticket_type_order_num:t.ticket_type_order_num,seats:t.seats,timeStamp:t.timeStamp||Date.now(),canCodingByUser:t.canCodingByUser,pageSource:t.pageSource,trainData:i};n=n||l;this.missionPerformerEnhanced=new y(s);return this.missionPerformerEnhanced.setValidityPeriod(n).run()}},{key:"runOneByOneAlways",value:function(){this.locked=false}},{key:"runOneByOne",value:function(t,n){if(this.locked)return $.Deferred().reject(this.errorMessage.lastMissionNotAccomplished);this.locked=true;return this.run(t,n).always(this.runOneByOneAlways.bind(this))}},{key:"abort",value:function(){this.missionPerformerEnhanced&&this.missionPerformerEnhanced.abort();this.locked=false}},{key:"resume",value:function(){this.missionPerformerEnhanced&&this.missionPerformerEnhanced.resume()}}]);return e}();var w={DataConvertor:u.DataConvertor,ultimateGoalManager:m,queryLeftTicketAndGetPasscodeNew:new b,availableTicketQueue:d,MissionPerformerEnhanced:y};e.exports=w},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function f(e){this.vcData=e;this.errorMessage={noneOrMultipleStationCodeFound:"noneOrMultipleStationCodeFound"}}function l(){this.setting={validityPeriod:a,queryLeftTicketInterval:3,quota:8};this.flags={queryLeftTicketAllowed:true};this.ticketQueue=[];this.errorMessage={queryLeftTicketDenied:"queryLeftTicketDenied",checiOrDateNotProvided:"checiOrDateNotProvided",particularTrainOfParticularDateNotFound:"particularTrainOfParticularDateNotFound"}}function p(e){this.goal=e;this.aborted=false;this.canCodingByUser=false;this.autoSelfCoding=new i.default({trainInfo:e})}function d(e){this.missionPerformer=new p(e);this.aborted=false;this.validityPeriod=a}function v(){this.locked=false;this.missionPerformerEnhanced=null;this.errorMessage={lastMissionNotAccomplished:"lastMissionNotAccomplished"}}var r=n(454);var i=s(r);var o=n(430);var u=n(316);var a=4.8;f.prototype={constructor:f,isParticularAction:function(t){return this.vcData.action===t},getCurrentVc:function(){if(!this.vcData.vcstack)return"";var t=this.vcData.vcstack.split("-");return t[t.length-1]},isParticularVC:function(t){return this.getCurrentVc()===t},isParticularActionAndVC:function(t,n){return this.isParticularAction(t)&&this.isParticularVC(n)},getStationCode:function(t,n){var r={state:"success",data:{},errorMessage:""};var i=o.getStationByChineseCharacter(t);var s=o.getStationByChineseCharacter(n);r.data["from"]=i;r.data["to"]=s;if(i.length!==1||s.length!==1){r.state="fail";r.errorMessage=this.errorMessage.noneOrMultipleStationCodeFound}return r},_pickParticularVCActionData:function(){var t={state:"fail",data:null,errorMessage:""};var n=this.vcData.request.dep;var r=this.vcData.request.arr;var i=(this.vcData.request.date||"")+(this.vcData.request.dptHm||"");i=i.replace(/[:-]/g,"");var s=this.getStationCode(n,r);if(s.state==="fail")return s;var o=this.vcData.request.date||"";o=o.replace(/-/g,"");t.data={departureTime:i,train_date:o,station_train_code:"",from_station_name:n,to_station_name:r,from_station:s.data.from[0][2],to_station:s.data.to[0][2],timeStamp:Date.now()};t.state="success";return t},pickTrainListRefreshData:function(){return this._pickParticularVCActionData()},pickOtaRefreshData:function(){var t=this._pickParticularVCActionData();if(t.state==="success")t.data["station_train_code"]=this.vcData.request.trainNumber;return t},pickOrderFillRefreshData:function(){return this.pickOtaRefreshData()},pickRefreshData:function(){var t=null;if(!this.isParticularAction("refresh"))return t;switch(this.getCurrentVc()){case"trainList":t=this.pickTrainListRefreshData();break;case"ota":t=this.pickOtaRefreshData();break;case"orderFill":t=this.pickOrderFillRefreshData();break;default:t=null}return t}};l.prototype={constructor:l,initQueue:function(){this.ticketQueue=Common.getStoredInfo("ticketQueue")||[];return this},setValidityPeriod:function(t){this.setting.validityPeriod=t;return this},isWithinValidityPeriod:function(t){var n=Date.now()-t.timeStamp;return n<=this.setting.validityPeriod*60*1e3},getParticularLaneOfParticularDateLocally:function(t){this.initQueue();this.stripExpired();var n=this.ticketQueue.find(function(e,n){return e.from_station===t.from_station&&e.to_station===t.to_station&&e.train_date===t.train_date&&e.ticketResult instanceof Array});return n},getParticularLaneOfParticularDate:function(t){function i(){this.flags.queryLeftTicketAllowed=true}function s(e){t.ticketResult=e.ticketResult;t.originYpInfo=e;this.push(t);return t}var n=$.Deferred();var r=this.getParticularLaneOfParticularDateLocally(t);if(r)return n.resolve(r);if(!this.flags.queryLeftTicketAllowed){return n.reject(this.errorMessage.queryLeftTicketDenied)}this.flags.queryLeftTicketAllowed=false;setTimeout(i.bind(this),this.setting.queryLeftTicketInterval*1e3);var o={from_station:t.from_station,to_station:t.to_station,train_date:t.train_date};return wireless12306.queryLeftTicket(o).then(s.bind(this))},getQueueLength:function(){return this.ticketQueue.length},push:function(t){this.stripExpired();if(this.getQueueLength>=this.setting.quota)this.shift();this.ticketQueue.push(t);Common.storeInfo("ticketQueue",this.ticketQueue,true)},shift:function(){return this.ticketQueue.shift()},getParticularTrainOfParticularDateLocally:function(t){this.initQueue();this.stripExpired();var n=this.getQueueLength();var r;var i=null;for(var s=n-1;s>=0;s--){r=this.ticketQueue[s];if(r.train_date===t.train_date&&r.to_station===t.to_station&&r.from_station===t.from_station&&r.ticketResult instanceof Array){i=Common.findOutParticularCheci(r.ticketResult,t.station_train_code,t.departureTime)}if(i)break}return i},getParticularTrainOfParticularDate:function(t){function r(e){var r=this.getParticularTrainOfParticularDateLocally(t);if(!r)return n.reject(this.errorMessage.particularTrainOfParticularDateNotFound);else return r}var n=$.Deferred();if(t.trainData){return n.resolve(t.trainData)}if(!t.station_train_code&&t.train_date){return this.getParticularLaneOfParticularDate(t)}else if(t.station_train_code&&t.train_date){return this.getParticularLaneOfParticularDate(t).then(r.bind(this))}else{return n.reject(this.errorMessage.checiOrDateNotProvided)}},leftTicketObjErrorMsg:function(t){var n="";if(t.controlled_train_flag!=="0")n=t.controlled_train_message;else if(t.message)n=t.message;return n},stripAbnormalLeftTicketObj:function(){var t=[];var n=this;var r="";n.ticketQueue.forEach(function(e,i){t=[];e.ticketResult.forEach(function(e,i){r=n.leftTicketObjErrorMsg(e);if(!r)t.push(e)});e.ticketResult=t})},stripExpired:function(){var t=-1;var n=this;n.ticketQueue.some(function(e,r){if(n.isWithinValidityPeriod(e)){t=r;return true}return false});if(t!==-1)this.ticketQueue=this.ticketQueue.slice(t);else this.ticketQueue=[]},stripParticularCheci:function(t,n){var r,i=[];this.ticketQueue.forEach(function(e,s){if(e.train_date===n){r=Common.findOutParticularCheci(e.ticketResult,t)}if(!r)i.push(e)});this.ticketQueue=i;Common.storeInfo("ticketQueue",this.ticketQueue,true)}};var c=(new l).initQueue();var h={put:function(t){Common.storeInfo("preoccupationUltimateGoal",t,true)},get:function(){return Common.getStoredInfo("preoccupationUltimateGoal")},clear:function(){this.put({})},state:function(){var t=this.get();if(!t||$.isEmptyObject(t))return"notExists";var n=this.getElapsedTime(t);if(n>=a*60*1e3)return"expired";return"ok"},getElapsedTime:function(t){return Date.now()-t.instantTimeStamp}};p.prototype={constructor:p,setCanCodingByUser:function(){this.canCodingByUser=true},abort:function(){this.aborted=true},isAnyTicketAvailable:function(t){var n=Common.parseYpInfo(t);var r=false;if(this.goal.seats&&this.goal.seats.length>0&&this.goal.ticket_type_order_num){var i=Common.getPriorSeatType(t,this.goal);if(i.result!=-1)r=true;this.broadcastYpInfo({ypObj:n,priorSeatType:i})}else{if(!n){if(t.yp_info)return true;return false}for(var s in n){if(n[s]["ticket"]>0){r=true;break}}}return r},broadcastYpInfo:function(t){var n=QApp.getViewSync(QApp.router.getCurViewName());if(n&&n.progressBarNotice)n.progressBarNotice(t)},stripLeftTicketResult:function(t){c.stripParticularCheci(t.station_train_code,t.start_train_date)},queryLeftTicketSuccess:function(t){var n=$.Deferred();if(this.aborted===true)return n.reject("aborted");var r=c.leftTicketObjErrorMsg(t);if(r){this.stripLeftTicketResult(t);return n.reject(r)}this.goal.train=t;if(!this.isAnyTicketAvailable(t)){this.stripLeftTicketResult(t);if(!t.yp_info)return n.reject("noYpInfoProvided",t.message,t);return n.reject("ypNotEnough",this.goal)}var i=Common.getUserInfo()||{};if(!i.user_name||!i.pwd){return n.reject("noWayLogin")}return this.autoSelfCoding.run(t).then(this.selfCodingSuccess.bind(this))},codingSuccess:function(t){this.goal.pass_code=t;this.goal.instantTimeStamp=Date.now();h.put(this.goal);return this.goal},selfCodingSuccess:function(t){return this.codingSuccess(t)},updateProBar:function(){var t=QApp.getViewSync(QApp.router.getCurViewName());if(!(t&&t.stopUpdateProgressBar))return;t.stopUpdateProgressBar();t.resetNotice("è¯·æå¨è¾å¥ä¸æ¹éªè¯ç ")},startProBar:function(){var t=QApp.getViewSync(QApp.router.getCurViewName());if(!(t&&t.progressBarNoticeUpdateTimes))return;t.progressBarNoticeUpdateTimes=1;t.startUpdateProgressBar();t.progressBarNotice(t.ypInfo)},userCodingSuccess:function(t){this.startProBar();return this.codingSuccess(t)},userCodingFail:function(t){return t},run:function(){var t=$.extend(true,{},this.goal);if(this.goal.pageSource=="trainList"){return c.getParticularTrainOfParticularDate(t)}return c.getParticularTrainOfParticularDate(t).then(wireless12306.checkOrderInfo.bind(wireless12306)).then(this.queryLeftTicketSuccess.bind(this))}};d.prototype={constructor:d,missionFail:function(t,n,r){if(typeof t==="string"&&t.indexOf("ç»å½")>=0&&!this.aborted){return(new u).run().then(this.loginSuccess.bind(this))}return $.Deferred().reject(t,n,r)},abort:function(){this.aborted=true;this.missionPerformer.abort()},loginSuccess:function(){if(this.aborted)return $.Deferred().reject("loginSuccessButAborted");return this.missionPerformer.run()},getGoal:function(){return this.missionPerformer.goal},isWithinValidityPeriod:function(t){var n=Date.now()-t.timeStamp;return n<=this.validityPeriod*60*1e3},getLastGoal:function(){var t=h.get();var n=this.getGoal();var r=null;if(t&&t.from_station===n.from_station&&t.to_station===n.to_station&&t.train_date===n.train_date&&(n.pageSource==="trainList"?true:t.station_train_code===n.station_train_code)&&this.isWithinValidityPeriod(t)){r=t.train;if(r){if(t.from_station===r.from_station_telecode&&t.to_station===r.to_station_telecode){return t}else{return null}}else return t}return null},setValidityPeriod:function(t){this.validityPeriod=t;c.setValidityPeriod(t);return this},run:function(){var t=this.getLastGoal();if(t){return $.Deferred().resolve(t)}h.clear();return this.missionPerformer.run().then(undefined,this.missionFail.bind(this))},setCanCodingByUser:function(){this.missionPerformer.setCanCodingByUser()}};v.prototype={constructor:v,run:function(t,n,r,i){var s={departureTime:t.departureTime,from_station:t.from_station,to_station:t.to_station,station_train_code:t.station_train_code,train_date:t.train_date,ticket_type_order_num:t.ticket_type_order_num,seats:t.seats,timeStamp:t.timeStamp||Date.now(),canCodingByUser:t.canCodingByUser,pageSource:t.pageSource,trainData:i};n=n||a;this.missionPerformerEnhanced=new d(s);r?this.missionPerformerEnhanced.setCanCodingByUser():null;return this.missionPerformerEnhanced.setValidityPeriod(n).run()},runOneByOneAlways:function(){this.locked=false},runOneByOne:function(t,n){if(this.locked)return $.Deferred().reject(this.errorMessage.lastMissionNotAccomplished);this.locked=true;return this.run(t,n).always(this.runOneByOneAlways.bind(this))},abort:function(){this.missionPerformerEnhanced&&this.missionPerformerEnhanced.abort();this.locked=false}};var m={DataConvertor:f,ultimateGoalManager:h,queryLeftTicketAndGetPasscodeNew:new v,availableTicketQueue:c,MissionPerformerEnhanced:d};e.exports=m},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(384);var s=l(i);var o=n(392);var u=l(o);var a=n(359);var f=l(a);var h=function(){function e(t){c(this,e);this.occupyDataObj=t;this.errorImageBase64="/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAeAAD/7gAOQWRvYmUAZMAAAAAB/9sAhAAQCwsLDAsQDAwQFw8NDxcbFBAQFBsfFxcXFxcfHhcaGhoaFx4eIyUnJSMeLy8zMy8vQEBAQEBAQEBAQEBAQEBAAREPDxETERUSEhUUERQRFBoUFhYUGiYaGhwaGiYwIx4eHh4jMCsuJycnLis1NTAwNTVAQD9AQEBAQEBAQEBAQED/wAARCAC+ASUDASIAAhEBAxEB/8QAagABAAMBAQAAAAAAAAAAAAAAAAECAwQHAQEAAAAAAAAAAAAAAAAAAAAAEAEAAgICAQMCAgoDAAAAAAAAAQIRAyESBDFBE1EiFAVhcYGRsTJCYrIjoXIVEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwD0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHDPn7IiLdIxM39ZxxT96fx151zeKVjE1iJ7Zj7vrxGMOS81msRMdZmt5rE2iIza2J9Y94abaT03xqriK/FMR6x6e0A3nzdtbdZiluInNLTMc2iv0V/H3+HXfFIts7fzTMR9s/qc9fmjtSZzqrObTMRWM1vHOcfQmLfhdNI7Ra0TxH/fj2B1R582mIrGusYic2viOZ9uITbzb13zTpnX3jX2zz2ly1++czE5i2uOeZ4tOfaFrR28uYiZm0b6T1/tiOZB0V8vbW1qbtfS3W168+0fVnH5jedc2itYmOuImZnOYziMRKs0r88xqv3iuu8WvecxW059WPxz023i8TSl4mJr/AFTMW9P08wDsp5t51d5rWbdorNc2rjMe+aqV/MNkzeZpTFP7+ePX25U00n8PMT2mbWrF60jNo6RiYn9eGdKzbZtr/sjM/dNac88x6TxgHfbya0rHeLRaY7TitpiP24U8bzK7qVm0TF7TicVnr6/X0U8rZe+unj68/Jtj7oniYrEc/qyp4940bK4iaaN3EVt/RePb9oLa/O27NlqU1Z6xM+uPScesr+L5dt8xW1Os9e2YniecOP79Vr57UvNZikRxMza84hv4Or4tl67Jn5tcY65jrNZ5jHAO9nt2WpNIrET2ticzjj6x9TRt+bVGzrNe3tLDzsRbx7T7ba8/oBSfzDbG3p8XGM4+7P8Ag02eXam6NURTn+q18e2eY9nBNLfFN7ViJtM9Ptrzz7e//Dbf8nzxbE5rFccfSImQb6fOnbtjXisZmI/mifafT9ytPzC969orrrn2tsiJ/gw8bXeJ8eZieZzHOeIic8Y4U8W8R1ps2fFTpNs4jOe36YkHfHlXjVbZa2r7ZiPttMxz9ZiJZf8AoW7zTFOIz2zbH+GWG3vbRvrSZ2a+1IpbERn3n0jnlOyu3VsnZs7RFq4iLbIzOP4wDsjyL2ik1it+0TMxFuePTHbClvM3fJTXXVGb5x91fbmfSZYa4ik+FOyOs42ROY9pjjKum2qvw3jEY3WicfS3oDvjdM+TOnrxFO3b9uGzGJ1/iZjP+zpGYxPpmfdsAAAAAAAAAAAACDCQEYiTCQEYEgIwjrH0WARgwkBGBICMRPqYj190gIEgIMJARgSAgwkBAkBCQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//2Q=="}r(e,[{key:"run",value:function(t){function a(e){n.resolve(e,t)}var n=$.Deferred();var r=t.location_code,i=t.pc_types;var o=this.occupyDataObj.trainInfo;if(!o||!o.seats)return n.reject("can not AutoSelfCoding without seatInfo");var u=o.seats[0];u=/\d/.test(u)?u:s.default.convertor.seatTypeCharacterToCode(u);this.getPassCode(i,u,r).then(a);return n.promise()}},{key:"getPassCode",value:function(t,n,r){function o(){if(t.substr(0,1).toUpperCase()==="Y"){var e=t.split("*"),o=e[1].split("");if(o.indexOf(n)>-1){this._getPassCode(r).then(u)}else{i.resolve.apply(i,[s])}}else{i.resolve.apply(i,[s])}}function u(e){s=e;i.resolve.apply(i,[s])}var i=$.Deferred(),s="";o.call(this);return i.promise()}},{key:"_getPassCode",value:function(t){function i(e){if(e.passcode==r.errorImageBase64){n.reject.apply(n);if(f.default.versionFlag){Common.setWifi()}return}else{var t=e.passcode;r._getVerificationCode(t).then(s,o)}}function s(e){n.resolve.apply(n,[e])}function o(e){n.reject.apply(n,[e])}var n=$.Deferred(),r=this;wireless12306.getPassCodeNew(t).then(i,o);return n.promise()}},{key:"_getVerificationCode",value:function(t){function s(){return r.getCode(t).then(o,a)}function o(e){window.sendWatchMessage({key:"hyBuy_book_mobile_getAutoCode_selfCode",isSuccessful:true});n.resolve.apply(n,[e])}function a(){if(i>0){i--;setTimeout(s,2*1e3)}else{window.sendWatchMessage({key:"hyBuy_book_mobile_getAutoCode_selfCode",isSuccessful:false});n.reject.apply(n,["SelfCode failed after 3 times retry"])}}var n=$.Deferred(),r=new u.default,i=3;s();return n.promise()}}]);return e}();e.exports=h},function(e,t,n){"use strict";function u(e,t){this.orderQunar=e;this.order12306=t}var r=n(318);var i=new r;var s=n(384);var o=n(430);u.prototype={constructor:u,isInsuranceChecked:function(){return this.orderQunar.orderInfo.passengers.some(function(e,t){if(e.insuranceCount=="1")return true;return false})},pickoutBirthDayFromId:function(t){var n=/^\d{6}(\d{4})(\d{2})(\d{2})\w{4}$/;var r="";t.replace(n,function(e,t,n,i){r=t+"-"+n+"-"+i});return r},pickoutGenderFormId:function(t){var n=1;var r=2;var i=+t.charAt(16);if(i%2===0)return r;else return n},_convert12306TicketToQunar:function(t){var n=0;var r="";var o="0";var u=s._mapCert[t.passenger_id_type_code];if(t.passenger_id_type_code==="1"){n=this.pickoutGenderFormId(t.passenger_id_no);r=this.pickoutBirthDayFromId(t.passenger_id_no);if(this.isInsuranceChecked())o="1"}var a={gender:n,certNo:t.passenger_id_no,passengerId:"",certType:{name:u.name,code:u.type},insuranceCount:o,birthday:r,ticketType:i._passenger_type_to_qunar[t.ticket_type_code],name:t.passenger_name};return a},convert12306TicketToQunar:function(){function r(e){e.forEach(function(t,n){if(t.ticketType!="1")return;e.some(function(e,n){if(e.certNo==t.certNo&&e.ticketType=="0"){t.guardian=$.extend(true,{},e)}})})}var t=this;var n=[];this.order12306.orderList[0].myTicketList.forEach(function(e,r){n.push(t._convert12306TicketToQunar(e))});r(n);return n},characterToStationTelecode:function(t){var n=o.getStationByChineseCharacter(t);var r="";if(n.length!==1)return r;r=n[0][2];return r},stationTelecodeToCharacter:function(t){var n=o.getStationByUpperCaseStationCode(t);return n[0][1]},trainMatch:function(){var t={dateNotMatch:"dateNotMatch",checiNotMatch:"checiNotMatch",depatureStationNotMatch:"depatureStationNotMatch",arrivalStationNotMatch:"arrivalStationNotMatch",seatNotMatch:"seatNotMatch",departureTimeNotMatch:"departureTimeNotMatch"};var n=this.orderQunar.orderInfo.trainInfo;var r=this.order12306.orderList[0].myTicketList[0];var i=[];n.candidateSeats=n.candidateSeats||[];var o=[n.seat].concat(n.candidateSeats);var u=s._seat_type[r.seat_type_code];if(r.seat_name==="æ åº§")u="æ åº§";if(r.train_date+r.start_time!=n.departureTime){i.push(t.departureTimeNotMatch)}if(r.train_date!=n.departureTime.substr(0,8)){i.push(t.dateNotMatch)}if(r.station_train_code!=n.no){i.push(t.checiNotMatch)}if(r.from_station_telecode!=this.characterToStationTelecode(n.from)){i.push(t.depatureStationNotMatch)}if(r.to_station_telecode!=this.characterToStationTelecode(n.to)){i.push(t.arrivalStationNotMatch)}if(o.indexOf(u)<0){i.push(t.seatNotMatch)}console.log("match order resultArr:",i);return i},isPassengerMatch:function(){function r(e,t){return e.every(function(e,n){return t.some(function(t,n){if(e.ticketType!=t.ticketType)return false;if(e.ticketType=="1"){if(e.guardian.certNo==t.guardian.certNo&&e.guardian.certType.code==t.guardian.certType.code){return true}else{return false}}else{if(e.certNo==t.certNo&&e.certType.code==t.certType.code&&e.ticketType==t.ticketType){return true}else{return false}}})})}var t=this.convert12306TicketToQunar();var n=this.orderQunar.orderInfo.passengers;if(t.length!==n.length)return false;return r(n,t)&&r(t,n)},getMatchResult:function(){var t=this.trainMatch();if(!this.isPassengerMatch())t.push("passengersNotMatch");return t},isOrderMatch:function(){var t=this.getMatchResult();return t.length===0},_convert12306TicketToConfirmSingleSuccess:function(t){var n={passenger_id_no:t.passenger_id_no,seat_name:t.seat_name,batch_no:t.batch_no,coach_no:t.coach_no,pay_limit_time:t.pay_limit_time,passenger_name:t.passenger_name,coach_name:t.coach_name,reserve_time:t.reserve_time,limit_time:t.limit_time,pay_mode_code:t.pay_mode_code,passenger_id_type_code:t.passenger_id_type_code,distance:t.distance,ticket_price:t.ticket_price,lose_time:t.pay_limit_time,seat_type_code:t.seat_type_code,seat_no:t.seat_no,sequence_no:t.sequence_no,ticket_type_code:t.ticket_type_code};$.extend(true,t,n);return t},convert12306TicketToConfirmSingleSuccess:function(){var t=this;var n={succ_flag:"1",error_msg:"",isSuccessful:true,ticketResult:[]};this.order12306.orderList[0].myTicketList.forEach(function(e,r){n.ticketResult.push(t._convert12306TicketToConfirmSingleSuccess(e))});return n},gatherTrainInfo:function(){function i(e){return e.substr(0,2)+":"+e.substr(2,2)}var t=this.order12306.orderList[0].myTicketList[0];var n=t.train_date.split("");n.splice(6,0,"-");n.splice(4,0,"-");n=n.join("");var r=s._seat_type[t.seat_type_code];if(t.seat_name==="æ åº§")r="æ åº§";var o={departureTime:t.train_date+t.start_time,depDateForShow:n,dayDeltaForShow:"",ticketId:"",from:this.stationTelecodeToCharacter(t.from_station_telecode),seat:r,depTimeForShow:i(t.start_time),arrTimeForShow:i(t.arrive_time),arrivalTime:t.train_date+t.arrive_time,no:t.station_train_code,duration:"0000",distance:t.distance,durationForShow:"",to:this.stationTelecodeToCharacter(t.to_station_telecode),candidateSeats:[]};return o},composeQunarOrder:function(){var t=this.order12306.orderList[0].myTicketList[0];var n=this.convert12306TicketToQunar();var r=this.gatherTrainInfo();var i=$.extend(true,{},this.orderQunar);i.orderInfo.passengers=n;i.orderInfo.trainInfo=r;i.orderInfo.ticketPrice=+t.ticket_price;i.orderInfo.hiTicketPrice=t.ticket_price;i.orderInfo.couponList=[];i.minPaperTicketNum=0;return i},getOrderDetailMsg:function(){var t=this.order12306.orderList[0].myTicketList;var n=[];t.forEach(function(e,t){if(e.ticket_status_name==="æ¹ç­¾ä¸­")return;if(e.ticket_status_name==="æ¹ç­¾å¾æ¯ä»"){n.push(e.passenger_name+"["+e.ticket_status_name+"]");return}n.push(e.passenger_name)});var r=t[0]["train_date"];var i=r.substr(4,2)+"æ"+r.substr(6,2)+"æ¥";var s=t[0]["station_train_code"];var o=this.stationTelecodeToCharacter(t[0]["from_station_telecode"]);var u=this.stationTelecodeToCharacter(t[0]["to_station_telecode"]);var a=t[0]["start_time"];var f=a.substr(0,2)+":"+a.substr(2,2);var l=n.join("ã")+i+" "+s+" ä»"+o+"å°"+u+" "+f+" å¼è½¦";return l}};e.exports=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=n(453);var o=n(431);var u=n(430);var a=n(384);var f=n(451);var l=n(422);var c=n(455);var h=n(432);var p=n(318);var d=false;var v=function(){function e(t){i(this,e);this.form=t;this.orderObj=null;this.delayOrderTime=0;this.occupationStartTime=null;this.retryCountBundle={};this.timeOutResultDefer=$.Deferred();this.occupationProcess=[];this.timeoutMilliSec=20*1e3;this.backupTimeoutHandler=0;this.unpayInformDisplayed=false;this.idUnauthorizedRetry=1;this.cancelOrderFailRetry=1;this.providerId="mobile"}r(e,[{key:"mobile12306FormDataConvertor",value:function(t){var n=t.orderInfo.trainInfo,r=t.orderInfo.passengers;var i={getFromAndToStationCode:function(){var t=u.getStationByChineseCharacter(n.from.trim());var r=u.getStationByChineseCharacter(n.to.trim());if(t.length===1)t=t[0][2];else{t=""}if(r.length===1)r=r[0][2];else{r=""}return{from:t,to:r}},getSeats:function(){n.candidateSeats=n.candidateSeats||[];var t=n.candidateSeats.slice(0);t.unshift(n.seat);t=t.map(function(e,t){if(e==="æ åº§")return"noSeat";return a.convertor.seatTypeCharacterToCode(e)});return t},getPassengerInfo:function(){var t={mobile_nos:[],save_passenger_flag:[],ticket_types:[],passenger_id_types:[],passenger_id_nos:[],passenger_names:[],ticket_type_order_num:r.length.toString()};var n=new p;var i,s,o;r.forEach(function(e,r){t.mobile_nos.push(e.phone);t.save_passenger_flag.push("Y");t.ticket_types.push(n.passengerTypeTo12306(e.ticketType)||"1");i=e.certNo;s=e.name;o=e.certType.code;if(e.guardian&&e.ticketType=="1"){i=e.guardian.certNo;s=e.guardian.name;o=e.guardian.certType.code}t.passenger_id_nos.push(i);t.passenger_names.push(s);t.passenger_id_types.push(n.idTypeTo12306(o))});for(var u in t){if({}.toString.call(t[u])==="[object Array]"){t[u]=t[u].join(",")}}return t}};var s=i.getFromAndToStationCode();var o="";if(t.onlinePickingInfo){o=t.onlinePickingInfo.replace(/,/g,"")}var f={departureTime:n.departureTime,train_date:n.departureTime.substr(0,8),station_train_code:n.no,from_station:s.from,to_station:s.to,seats:i.getSeats(),seat_type_codes:"",ticket_types:"",passenger_id_types:"",passenger_id_nos:"",passenger_names:"",ticket_type_order_num:"",choose_seats:o,start_time:n.departureTime.substr(8,2)+":"+n.departureTime.substr(10,2)};$.extend(f,i.getPassengerInfo());return f}},{key:"calculateDelayOrderTime",value:function(t){var n=Date.now()-t;var r=this.delayOrderTime-n;return r>=0?r:0}},{key:"stripParticularCheci",value:function(t){if(!(t&&t.station_train_code))return;s.availableTicketQueue.stripParticularCheci(t.station_train_code,t.train_date)}},{key:"leftTicketAndPasscodeFail",value:function(t,n){if(t==="ypNotEnough")this.stripParticularCheci(n)}},{key:"leftTicketAndPasscodeSuccess",value:function(t){function s(){o.setBeacon(o.steps.confirmPassengerInfoSingle,true);delete this.orderObj.ypObj;delete this.orderObj.priorSeatType;delete this.orderObj.departureTime;return this.orderObj}this.orderObj.pass_code=t.pass_code;var n=Common.queryLeftTicketSuccessHandler(t.train,this.orderObj);var r={ypObj:this.orderObj.ypObj,priorSeatType:this.orderObj.priorSeatType,result:n};Common.event.trigger("ypInfo",r);if(n!==true){switch(n){case"ypNotEnough":this.stripParticularCheci(t);return $.Deferred().reject("ypNotEnough",n,t);case"noYpInfoProvided":default:return $.Deferred().reject("noYpInfoProvided",n,t)}}var i=this.calculateDelayOrderTime(t.instantTimeStamp);return Common.delay(i).then(s.bind(this))}},{key:"shouldRetryParticularReason",value:function(t){if(t&&t.retryCount>0){var n=t.id;var r=this.retryCountBundle;r[n]=r[n]||0;if(r[n]<t.retryCount){r[n]++;return true}}return false}},{key:"confirmAlways",value:function(){s.ultimateGoalManager.clear()}},{key:"isPassengerNameRecognizable",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";this.isOwner(t);var n=t.includes("èç³»äººå°æªéè¿");var r=this.orderObj.passenger_names.split(",");var i=n?r.some(function(e){return t.includes(e)}):true;return i}},{key:"isOwner",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=Common.getUserInfo()||{},r=n.nickname,i=r===undefined?"":r;var s=i&&t.includes("èç³»äººå°æªéè¿")&&t.includes(i);if(s){Common.event.trigger("collectRecord","mayBeOwnerUnauthorized",true)}return s}},{key:"getInfoFromConflictTrip",value:function(t,n){console.log("getInfoFromConflictTrip:",arguments);if(typeof t!=="string"||!n)return"";var r=/(\d{4})å¹´(\d{1,2})æ(\d{1,2})æ¥(\w+)æ¬¡/;var i="";var s="";t.replace(r,function(e,t,n,r,o){console.log("data replace:",arguments);i=Common.parseDateTime(t+"-"+n+"-"+r);i=Common.formatDate(i,"YYYYMMdd");s=o.toUpperCase()});console.log("date, trainNo:",i,s);if(i===n.train_date&&s===n.station_train_code){window.sendWatchMessage({key:"hyBuy_occupySeatMobile_takeConflictTripAsUnpayOrder"});return"æ¨è¿ææªå¤ççè®¢å"}return""}},{key:"confirmFail",value:function(t,n,r){console.log("confirmFail:",arguments);if(typeof t=="string"&&(t.indexOf("PCFET")>-1||t.indexOf("PGh0b")>-1)){try{var i=Common.base64Decode(t);t=i}catch(o){}}else{var u=this.getInfoFromConflictTrip(t,this.orderObj);console.log("editedMsg:",u);if(u)t=u}var a=$.Deferred();var f=Common.lookUp(t);if(this.isAborted())return a.reject(Common.lookUp("aborted"));this.harnessOccupationProcess(false,[f]);if(!f)return a.reject.apply(a,arguments);switch(f.id){case"cancelOrderFail":d=false;break;case"cancelTooManyTimes":h.cacheUnavailableAccount();return this.timeOutResultDefer.reject(f);case"passcodeNotCorrect":s.ultimateGoalManager.clear();break;case"forbiddenState":case"illegalRequest":case"illegalState":case"serviceUnavailable":case"forceUpgradeNewVersion":case"badToken":case"connectRefused":case"webGroupOrVirtualHostHasNotBeenDefined":Common.clearCache();break;case"scheduleCanceled":case"notStartSell":case"ypNotEnough":case"ticketInfoExpire":case"subtractTicketFail":case"getWaitTimeBuyTicketFail":Common.clearYpAndGoal();break;case"existsUnpayOrder":window.sendWatchMessage({key:"hyBuy_occupySeatMobile_existsUnpayOrder"});break}if(this.shouldRetryParticularReason(f)){switch(f.id){case"existsUnpayOrder":return Common.delay(2e3).then(this.unpayInterceptor.bind(this));case"visitTooFrequent":Common.clearCache();return Common.delay(f.retryDelay||0).then(this._run.bind(this));default:return Common.delay(f.retryDelay||0).then(this._run.bind(this))}}if(f.id==="idUnauthorized"&&!this.isPassengerNameRecognizable(f.origin)&&this.idUnauthorizedRetry>0){this.idUnauthorizedRetry--;this.retryCountBundle.idUnauthorizedRetry=this.retryCountBundle.idUnauthorizedRetry||0;this.retryCountBundle.idUnauthorizedRetry++;return Common.delay(4*1e3).then(this._run.bind(this))}return a.reject(f)}},{key:"fixArrivalTimeAndDuration",value:function(t,n,r,i,s){function f(e){var a,f=0,l=0;var c=Common.parseDateTime(o.departureTime);var h,p=/^((\d+)\D+)?(\d+)\D+$/;if(e.trains&&e.trains.length>=0){a=e.trains[0]["time"]||"";a=a.trim();a=a.replace(p,function(e,t,n,r){f=+(n||0);l=+(r||0)});l+=f*60;h=new Date(c.getTime()+l*60*1e3);o.arrivalTime=Common.formatDate(h,"YYYYMMddHHMI");o.duration=l}u.resolve(t,n,r,i,s)}function l(e){u.resolve(t,n,r,i,s)}var o=r.orderInfo.trainInfo;var u=$.Deferred();var a={date:o.depDateForShow,trainNumbers:[{dep:o.from,trainNumber:o.no,arr:o.to}]};Common.postRequest("t_tSearchNumber",a).then(f,l);return u}},{key:"unpayInform",value:function(t){function s(){r.startUpdateProgressBar();n.resolve("cancelOrderAndRestartOccupation")}function o(){r.startUpdateProgressBar();n.reject("gotoQunarOrder")}this.abort();this.unpayInformDisplayed=true;var n=$.Deferred();var r=QApp.getViewSync(QApp.router.getCurViewName());var i=r&&r.confirm||QApp.Kami.confirm;r.stopUpdateProgressBar();i({title:"å°é©¼æ¸©é¦¨æç¤º",content:"æ¨æå¾ä»è®¢å("+t+")ï¼è¯·ä¼åå¤çæ­¤è®¢åã(éè·¯å±è§å®ï¼æ¯æ¥åªè½åæ¶ä¸åï¼å¦åå½æ¥ä¸è½è´­ç¥¨ã)",okText:"æ¥çè®¢å",cancelText:"åæ¶å¾ä»è®¢å",onCancel:s.bind(this),onOk:o.bind(this)});return n}},{key:"cancelOrder",value:function(t){return(new f(t)).run()}},{key:"cancelOrderAndRestartOccupation",value:function(t){function i(e){Common.hideLoading();this.occupationStartTime=Date.now();return this._run()}function s(e){if(typeof e==="string"){if(e.indexOf("è¯¥ç¥¨ä¸åè®¸åæ¶")>=0){return i("failed",e)}else if(e.indexOf("system error")>=0&&this.cancelOrderFailRetry>0){this.cancelOrderFailRetry--;return Common.delay(4*1e3).then(this.cancelOrderAndRestartOccupation.bind(this,t))}}Common.hideLoading();var n="åæ¶è®¢åå¤±è´¥ã["+(e||"æå¡å¨æªååº")+"]";return this.confirmFail(n)}Common.showLoading("æ­£å¨åæ¶è®¢å...");this.resume();this.applyTimeout();var n=this.cancelOrder(t);var r=Common.delay(4e3);return $.when(n,r).then(i.bind(this),s.bind(this))}},{key:"cancelQueue",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"dc";return wireless12306.cancelInQueueOrder(t)}},{key:"cancelQueueAndRestartOccupation",value:function(){function n(){this.occupationStartTime=Date.now();return this._run().done(r.bind(this,true)).fail(r.bind(this,false))}function r(e){window.sendWatchMessage({key:"hyBuy_occupy_cancelQueueAndOccupationSuccess",isSuccessful:e})}var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"dc";return this.cancelQueue(t).then(n.bind(this))}},{key:"orderDataConvertor",value:function(t){return t}},{key:"queryOrderNotCompleted",value:function(){function t(e){var t=$.Deferred();if(Common.isArrayNotEmpty(e.orderList)&&!e.orderList[0].sequence_no&&e.orderList[0].queue_cancel_flag==1){return t.reject("queueing")}return t.resolve.apply(t,arguments)}return wireless12306.queryOrder().then(t.bind(this))}},{key:"unpayInterceptor",value:function(){function t(e){var t=e&&e.orderList&&e.orderList[0];var n=t&&t.myTicketList;return n&&n.length||0}function n(e){function l(){function e(){var e=[].slice.call(arguments,0);Common.event.trigger("unpayOrderNotMatch",e);return $.Deferred().reject("unpayOrderNotMatchTurnToOrderDetail")}return f.then(e)}e=this.orderDataConvertor(e);console.log("queryOrderNotCompletedSuccess:",e);if(t(e)==0){console.warn("no order fund:",e);return $.Deferred().reject("noUnpayOrder")}if(!Common.isArrayNotEmpty(e.orderList))return r.call(this);var n=e.orderList[0].queue_message;if(n)return r.call(this,n+e.error_msg);var i=$.Deferred();var s=new c(this.form,e);if(s.isOrderMatch()){return i.resolve(s.convert12306TicketToConfirmSingleSuccess(),"unpayOrderMatch")}if(window.secKillOn||(QApp.router.getCurViewName()||"").includes("worker")){return i.reject(Common.lookUp("å­å¨æªå®æè®¢å"))}var o=s.convert12306TicketToConfirmSingleSuccess();var u=s.composeQunarOrder();var a=s.getOrderDetailMsg();var f=this.fixArrivalTimeAndDuration(o,"fakeQunarOrder",u,e,a);if(this.isAborted()||this.unpayInformDisplayed)return i.reject(Common.lookUp("aborted"));return this.unpayInform(a).then(this.cancelOrderAndRestartOccupation.bind(this,e),l.bind(this))}function r(e){var t=this.lookUp(e);if(t.id==="queueing"){console.log("queryOrderNotCompletedFail queueing",e);var n=Common.deepGet(e,"data.orderCacheDTO.tourFlag");return this.cancelQueueAndRestartOccupation(n)}return $.Deferred().reject(t)}return this.queryOrderNotCompleted().then(n.bind(this),r.bind(this))}},{key:"isAborted",value:function(){return false}},{key:"resume",value:function(){}},{key:"abort",value:function(){s.queryLeftTicketAndGetPasscodeNew.abort();this.clearTimeout()}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(){clearTimeout(this.backupTimeoutHandler)})},{key:"applyTimeout",value:function(t){this.timeoutMilliSec=t||this.timeoutMilliSec;if(this.isAborted())return;this.backupTimeoutHandler=setTimeout(this.giveOutTimeoutResult.bind(this),this.timeoutMilliSec)}},{key:"chooseResult",value:function(){var t=this.occupationProcess.length;var n=null;if(t===0)return null;this.occupationProcess.some(function(e,t){if(e&&e.result&&(e.result.id==="ypNotEnough"||e.result.id==="idUnauthorized")){n=e;return true}return false});n=n||this.occupationProcess[t-1];return n.result[0]}},{key:"giveOutTimeoutResult",value:function(){var t="noResultPerformServerBackup";var n=this.occupationProcess.length;var r=this.timeOutResultDefer;if(r.state()!=="pending")return;var i=this.chooseResult();var s=Common.lookUp(t);if(n===0||!i){this.notifyResult([s],false);r.reject(s)}this.notifyResult([i],false);return r.reject(i)}},{key:"harnessOccupationProcess",value:function(t,n){var r={isSuccessful:t,result:n,timeStamp:+(new Date),timeCost:this.calculateTimeCost()};this.occupationProcess.push(r)}},{key:"runOccupy",value:function(){this.orderObj=this.mobile12306FormDataConvertor(this.form);return s.queryLeftTicketAndGetPasscodeNew.run(this.orderObj,null,null,this.form.orderInfo.trainData).fail(this.leftTicketAndPasscodeFail.bind(this)).then(this.leftTicketAndPasscodeSuccess.bind(this)).done(this.triggerConfirmEvent.bind(this)).then(wireless12306.confirmPassengerInfoSingle.bind(wireless12306)).always(this.confirmAlways.bind(this))}},{key:"triggerConfirmEvent",value:function(){Common.event.trigger("occupy.confirm",{providerId:this.providerId})}},{key:"checkUnpayOrder",value:function(){console.log("checkUnpayOrder unpayOrderChecked:",d);if(d)return $.Deferred().reject("unpayOrderChecked");d=true;return(new l(this.unpayInterceptor.bind(this))).run()}},{key:"lookUp",value:function(t){var n=Common.lookUp(t);return n}},{key:"_run",value:function(){function t(e){var t=Common.lookUp(e);console.log("noUnpayOrder:",arguments,t);if(t){switch(t.id){case"systemMaintenance":if(this.shouldRetryParticularReason(t)){d=false;return Common.delay(t.retryDelay).then(this._run.bind(this))}break;case"noUnpayOrder":case"unpayOrderChecked":default:return(new l(this.runOccupy.bind(this))).run().then(undefined,this.confirmFail.bind(this))}}var n=$.Deferred();return n.reject(t)}return this.checkUnpayOrder().then(undefined,t.bind(this))}},{key:"runRealTask",value:function(){function t(){var e="",t=$.Deferred();if(!Common.may12306LoggedIn()){e="usernameOrPasswordNotProvided"}if(!this.orderObj.from_station||!this.orderObj.to_station){e="åºåå°æç®çå°ä¸è½ä¸ºç©º"}if(e)t.reject(e);else t.resolve("necessitiesReady");return t}return t.call(this).then(h.isAccountAvailable.bind(h)).then(this._run.bind(this))}},{key:"collectTrainInfo",value:function(){var t=this.form&&this.form.orderInfo.trainInfo;this.orderObj=this.mobile12306FormDataConvertor(this.form);var n="",r=[];if(!t)return n;r=[t.from,this.orderObj.from_station,t.to,this.orderObj.to_station,t.depDateForShow+" "+this.orderObj.start_time,t.no,t.seat,this.orderObj.passenger_names];n=r.join("|");Common.event.trigger("collectRecord","itinerary",n);return n}},{key:"calculateTimeCost",value:function(){var t=((Date.now()-this.occupationStartTime)/1e3).toFixed(2);return t}},{key:"notifyResult",value:function(t,n){var r=this.calculateTimeCost();var i=this.timeOutResultDefer;var s={isSuccessful:n,timecost:r,provider:"mobile",args:[].slice.call(t,0)};i.notify(s)}},{key:"run",value:function(){function n(){var e=[].slice.call(arguments,0);this.notifyResult.call(this,e,true);this.harnessOccupationProcess(true,e);t.resolve.apply(t,e)}function r(e){e=this.lookUp(e);var n=[].slice.call(arguments,0);this.notifyResult.call(this,n,false);this.harnessOccupationProcess(false,n);var r=this.chooseResult();t.reject(r)}this.collectTrainInfo();var t=this.timeOutResultDefer;t.always(this.clearTimeout.bind(this));this.occupationStartTime=Date.now();this.runRealTask.call(this).then(n.bind(this),r.bind(this));return t}}]);return e}();e.exports=v},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=o(i);var l=n(456);var c=n(449);var h=function(e){function t(e){u(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.form=e;n.id="occupy";n.occupation=null;n.excludeRetryReason=[];return n}f(t,e);r(t,[{key:"getOccupation",value:function(){return this.occupation}},{key:"func3W",value:function(){this.occupation=new c(this.form);return this.occupation.run()}},{key:"funcMobile",value:function(){this.occupation=new l(this.form);return this.occupation.run()}}]);return t}(s.default);e.exports=h},function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=u(i);var o=n(459);var c=function(e){function t(e){a(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.formData=e;n.id="register_step"+(e.randCode?2:1);n.excludeRetryReason=[];return n}l(t,e);r(t,[{key:"transformToDeferred",value:function(t){var n=$.Deferred();if(Common.isDefered(t))return t;else if(t.then&&t.catch){t.then(n.resolve.bind(n),n.reject.bind(n)).catch(util.doNothing);return n.promise()}else return n.resolve(t)}},{key:"func3W",value:function(){var t=(new o.Register3W(this.formData)).submit();return this.transformToDeferred(t)}},{key:"funcMobile",value:function(){var t=(new o.RegisterMobile(this.formData)).submit();return this.transformToDeferred(t)}}]);return t}(s.default);t.default=c},function(e,t){"use strict";function i(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var u=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};o(this,e);this.formData=t}r(e,[{key:"createUserName",value:function(){function r(e){return this._checkUserName(e).then(i.bind(this),s.bind(this))}function i(){Console.log("createUserName success",t);n(this.formData,{user_name:t});return Promise.resolve(t)}function s(){t=this._createUserName();return r.call(this,t)}var t=this._createUserName();return r.call(this,t)}},{key:"_createUserName",value:function(){var t=function(){var t=97;var n=Math.floor(Math.random()*25);return String.fromCharCode(t+n)};var n=function(){return Math.floor(Math.random()*10)};var r=[12,6];var i=r.map(function(e,r){var i="";for(var s=0;s<e;s++){i+=r?n():t()}return i}).join("");return i}},{key:"_checkUserName",value:function(){}},{key:"submit",value:function(){var t=this.formData.randCode;if(t){return this._submitAll()}else{return this.createUserName().then(this._submit.bind(this))}}},{key:"_submit",value:function(){}},{key:"_submitAll",value:function(){}}]);return e}();var a=function(e){function t(e){o(this,t);return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}s(t,e);r(t,[{key:"_submit",value:function(){var t=this;var n=function(n){var r=$.Deferred();Console.log("getRandCode success",n);var i=n.error_msg,s=n.succ_flag,o=n.is_mo;var u={user_name:t.formData.user_name};var a={flag:o,form:u};s==="1"&&!i?r.resolve(a):r.reject(i);return r.promise()};var r=function(n){Console.warn("getRandCode fail",n);if(n==="è¯¥æ³¨ååå·²å­å¨"){t.formData.user_name=t._createUserName();return t._submit()}else return n};return wireless12306.checkUser4Regist(this.formData).then(n,r)}},{key:"_checkUserName",value:function(t){return Promise.resolve(t)}},{key:"_submitAll",value:function(){var t=this;var r=function(r){n(t.formData,r);console.log("formData",t.formData);return wireless12306.registUser(t.formData)};return wireless12306.checkUser4Regist(this.formData).then(r)}}]);return t}(u);var f=function(e){function t(e){o(this,t);return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}s(t,e);r(t,[{key:"_submit",value:function(){var t=this;var n=function(n){var r=$.Deferred();var i=n.data,s=i.msg,o=i.info_show;var u={flag:o,form:{user_name:t.formData.user_name}};s?r.reject(s):r.resolve(u);return r.promise()};var r=function(t){return t.data.msg};return server.pc12306.getRandCode(this.formData).then(n,r)}},{key:"_checkUserName",value:function(t){return server.pc12306.checkUserName(t)}},{key:"_submitAll",value:function(){var t=function(t){var n=$.Deferred();var r=t.data.msg;r?n.reject(r):n.resolve(t);return n.promise()};var n=function(t){return t.data.msg};return server.pc12306.subDetail(this.formData).then(t,n)}}]);return t}(u);t.RegisterMobile=a;t.Register3W=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}Object.defineProperty(t,"__esModule",{value:true});t.default=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=a(i);var o=n(461);var u=a(o);var h=function(e){function t(e){f(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.data=e;n.id="refund_orderDetail";n.excludeRetryReason=[];return n}c(t,e);r(t,[{key:"func3W",value:function(){var t=this.data;return(new u.default).func3W(t)}},{key:"funcMobile",value:function(){var t=this.data;return(new u.default).funcMobile(t)}}]);return t}(s.default);t.default=h;},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});t.default=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(462);var s=o(i);var a=function(){function e(t){u(this,e);this.retryCountBundle={};if(!t)return;this.engine=t;this.refundingData=null;this.conf=null;this.type=t.orderData.isAppRefund?"hy":"server";this.configKey="json.OrderDetail.refund.tips";this.configKeyHK="json.OrderDetail.refund.tips.HK";this.targetTicket={};this.shouldRetry=true}r(e,[{key:"init",value:function(){return $.when(this.fetchQunarOrder(),this.fetchConfig()).then(this.interceptInit.bind(this))}},{key:"interceptInit",value:function(t,n){var r;this.refundingData=t;this.conf=n;return(r=$.Deferred()).resolve.apply(r,arguments)}},{key:"fetchConfig",value:function(){if(this.conf)return $.Deferred().resolve(this.conf);else return Common.getAppConfig([this.configKey,this.configKeyHK])}},{key:"fetchQunarOrder",value:function(){var t=$.Deferred();if(this.refundingData)return t.resolve(this.refundingData);var n=this.engine.orderData,r=n.orderId,i=n.extra,s=n.orderNo,o=n.contactPhone;var u=this.engine.qunarUserInfo,a=u.uuid,f=u.username;var l={orderId:r,extra:i,orderNo:s,contactPhone:o,uuid:a,username:f};Console.log("t_tTrainOrderApplyRefunding",l);util.postRequest("t_tTrainOrderApplyRefunding",l).then(t.resolve,t.reject);return t.promise()}},{key:"ticketRefund",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var n=this.targetPsg;var r=this.engine.orderData.isAppRefund;this.shouldRetry=true;return r&&!t?this.appRefund(n):this.serverRefund(n)}},{key:"appRefund",value:function(t){function n(e){this.targetTicket=e.find(this._findTargetTicket.bind(this));return fusion12306.refund(this.targetTicket["12306"])}function r(e){function n(n){Console.log("_correctOrderInfo",n);this.targetTicket=n.find(this._findTargetTicket.bind(this));var r=this.targetTicket["12306"]["ticket_status_code"];var i=this.targetTicket["qunar"].ticketType!==1;var s=r==="c";var o=$.Deferred();if(s){o.resolve(e)}else{if(this.shouldRetry&&/[afr]/.test(r)&&i){this.shouldRetry=false;return this.appRefund(t)}else{util.watch("ticket_refund_recognition_error");o.reject("æå¡å¨ç¹å¿ï¼è¯·ç¨åéè¯")}}return o.promise()}this.engine.order12306=null;this.engine.matchError=undefined;this.engine.orderController.orderAlignment.shouldRefreshAfterSync=false;return this.engine.orderController.init().then(n.bind(this))}function i(){var e;util.watch("refund_ticket_app",true);return(e=$.Deferred()).resolve.apply(e,arguments)}function s(){var e;util.watch("refund_ticket_app",false);return(e=$.Deferred()).reject.apply(e,arguments)}function o(e){var t=this;Console.log("refund Success",e);this.engine.reduceAmount=0;orderHelper.orderData.reduceAmount=0;var n=["certNo","ticketType","passengerName"];var r=function(r){return util.compareObject(t.targetTicket["qunar"],r,n)};var i=this.engine.orderData.passengerInfos.find(r);if(i.ticketStatusDesc==="å·²æ¹ç­¾"){orderHelper.rescheduleResult.some(function(e){i=e.passengerInfos.find(r);return!!i})}this.targetTicket["qunar"]["ticketStatusDesc"]="å·²éç¥¨";i["ticketStatusDesc"]="å·²éç¥¨";i["isRefundAvailable"]=false;i["isRescheduleAvailable"]=false;return this.engine.matchedOrders}return this.engine.orderController.init().then(n.bind(this)).then(r.bind(this)).then(i.bind(this),s.bind(this)).then(o.bind(this))}},{key:"serverRefund",value:function(t){var n=this.engine.orderData,r=n.orderId,i=n.extra,s=n.orderNo,o=n.contactPhone,u=this.engine.qunarUserInfo,a=u.uuid,f=u.username,l=t.refundFee,c="";var h=[{name:t["passengerName"],certId:t["certNo"],ticketType:t["ticketType"]}];var p={orderId:r,extra:i,orderNo:s,contactPhone:o,uuid:a,username:f,refundFee:l,comment:c,passengers:h};Console.log("t_tTrainOrderApplyRefund params",p);return util.postRequest("t_tTrainOrderApplyRefund",p)}},{key:"_findTargetTicket",value:function(t){var n=["certNo","ticketType","passengerName"];return!t["qunar"]["invalid"]&&util.compareObject(t["qunar"],this.targetPsg,n)}},{key:"func3W",value:function(t){var n=this;var r=["batch_no","coach_name","coach_no","passenger_name","seat_name","sequence_no","seat_type_name","seat_no","from_station_name","to_station_name","start_train_date_page","from_station_telecode","to_station_telecode"];var i={train_code:t.station_train_code,train_date:t.train_date.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3")+" 00:00:00",start_time:"1970-01-01 "+t.start_time.replace(/^(\d{2})(\d{2})$/,"$1:$2")+":00",train_no:t.trainDTO&&t.trainDTO.train_no,id_type:t.passenger_id_type_code,id_no:t.passenger_id_no};r.forEach(function(e){i[e]=t[e]});var s=function(){return server.pc12306.deleteMyFinishedOrder_advanced(i)};var o=function(t){var r=Common.getError3W(t);var i=Common.lookUp(r);if(n.shouldRetryParticularReason(i)){switch(i.id){case"requestFail":case"movedTemporarily":Common.clearCache("3w");return Common.delay(i.retryDelay||0).then(n.func3W.bind(n));default:}}else{return r}};return server.loginProof3W(s).then(null,o)}},{key:"funcMobile",value:function(t){var n=this;var r=new s.default(t);var i=function(t){var r=Common.lookUp(t);if(n.shouldRetryParticularReason(r)){switch(r.id){case"enDecrypt":case"requestFail":case"RuntimeError":return Common.delay(r.retryDelay||0).then(n.funcMobile.bind(n));default:}}else{return t}};return r.run().then(null,i.bind(this))}},{key:"shouldRetryParticularReason",value:function(t){if(t&&t.retryCount>0){var n=t.id;var r=this.retryCountBundle;r[n]=r[n]||0;if(r[n]<t.retryCount){r[n]++;return true}}return false}}]);return e}();t.default=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});t.default=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(422);var s=o(i);var a=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};u(this,e);this.orderInfo=t}r(e,[{key:"refundTicketRequest",value:function(){return wireless12306.refundTicketRequest(this.orderInfo)}},{key:"submitTicketRequest",value:function(){return wireless12306.submitTicketRequest(this.orderInfo)}},{key:"refundSuccess",value:function(){}},{key:"_run",value:function(){return this.refundTicketRequest().then(this.submitTicketRequest.bind(this))}},{key:"run",value:function(){return(new s.default(this._run.bind(this))).run()}}]);return e}();t.default=a},function(e,t,n){"use strict";function c(e){return e&&e.__esModule?e:{"default":e}}var r=n(450);var i=c(r);var s=n(464);var o=c(s);var u=n(469);var a=c(u);var f=n(470);var l=c(f);e.exports={OrderCancellation:i.default,OrderQuery:o.default,TicketRefund:a.default,OrderQueryByOrderNo:l.default}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=a(i);var o=n(465);var u=a(o);var h=function(e){function t(e,n){f(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.ticketNos=e;r.onlyCompleted=n;r.id="orderQuery";r.excludeRetryReason=[];r.orderTask=new u.default;return r}c(t,e);r(t,[{key:"func3W",value:function(){return this.orderTask.func3W(this.ticketNos,this.onlyCompleted)}},{key:"funcMobile",value:function(){return this.orderTask.funcMobile(this.ticketNos,this.onlyCompleted)}}]);return t}(s.default);e.exports=h},function(e,t,n){"use strict";function p(e){return e&&e.__esModule?e:{"default":e}}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});t.default=undefined;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=n(466);var o=p(s);var u=n(467);var a=p(u);var f=n(311);var l=p(f);var c=n(468);var h=p(c);var v=function(){function e(){d(this,e);this.retryCountBundle={};this.orderTools=new a.default;this.pageIndex=0;this.retryCount=3}i(e,[{key:"transOrder",value:function(t,n){return t&&o.default.transformOrderListResult2Mobile(t,n)}},{key:"func3W",value:function(t,n){function i(){if(n){return s.call(this).then(o.bind(this),f.bind(this))}else{return s.call(this).then(o.bind(this)).then(u).then(a.bind(this),f.bind(this))}}function s(){var e=void 0,t=void 0;var n=new Date;e=Common.formatDate(n);var r=60*24*3600*1e3;var i=new Date(n.valueOf()-r);t=Common.formatDate(i);return pc12306.getMyOldOrder(t,e,null,this.pageIndex)}function o(e){var n=t&&!e.OrderDTODataList.some(function(e){return e.sequence_no===t});if(n&&this.pageIndex<=this.retryCount){this.pageIndex++;return i.call(this)}else{this.completeOrder=this.transOrder(e,"OrderDTODataList");return this.completeOrder}}function u(){return pc12306.getMyOrder()}function a(e){e=this.transOrder(e,"orderDBList");var t={completeOrder:this.completeOrder,noCompleteOrder:e};return t}function f(e){console.log("----------------æªå®æè®¢å3W-------------:",e);var n=r({},e);e=Common.getError3W(e);var i=Common.lookUp(e);var s=this.func3W.bind(this,t);var o=function(){};switch(i.id){case"requestFail":case"movedTemporarily":o=Common.clearCache.bind(Common,"3w");case"retryLater":return this.retry(i,s,o);case"queueing":return n;default:return e}}return(0,l.default)(i.bind(this))}},{key:"funcMobile",value:function(t,n){function i(e){var n=Common.lookUp(e);var r=this.funcMobile.bind(this,t);var i=function(){};switch(n.id){case"visitTooFrequent":case"forbiddenState":i=Common.clearCache;return this.retry(n,r,i);default:return e}}var r=new h.default({sequence_no:t});if(n){return r.run(1).then(null,i.bind(this))}else{return r.run(0).then(null,i.bind(this))}}},{key:"retry",value:function(t,n,r){if(this._shouldRetryParticularReason(t)){typeof r==="function"&&r();return Common.delay(t.retryDelay||0).then(n)}else{return t.origin}}},{key:"_shouldRetryParticularReason",value:function(t){if(t&&t.retryCount>0){var n=t.id;var r=this.retryCountBundle;r[n]=r[n]||0;if(r[n]<t.retryCount){r[n]++;return true}}return false}}]);return e}();t.default=v},function(e,t){"use strict";function i(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var o=function(){function e(){s(this,e)}r(e,null,[{key:"transformOrderListResult2Mobile",value:function(r,i){var s={succ_flag:"1",error_msg:"",statusCode:200,statusReason:"OK",responseHeaders:{Server:"Apache-Coyote/1.1",Expires:"Thu, 01 Jan 1970 00:00:00 GMT","Transfer-Encoding":"chunked","X-Powered-By":"Servlet 2.5; JBoss-5.0/JBossWeb-2.1",Pragma:"no-cache",Date:(new Date).toGMTString(),"Content-Type":"text/plain;charset=UTF-8"},isSuccessful:true,orderList:[]};if(Common.isArrayNotEmpty(r[i])){s.orderList=r[i].map(function(t){var r=n({queue_cancel_flag:null,check608Code:null,tourFlag:null,check608Msg:null,queue_message:null,ticketInfo:null,order_flag:"2"},t);r.ticket_totalnum=t.ticket_totalnum+"";r.order_date=e.formatDateTimeToMobile(t.order_date);r.ticket_price_all=e.formatPriceToMobile(t.ticket_price_all);r.myTicketList=e.formatTicketsToMobile(t.tickets);return r})}return s}},{key:"formatPriceToMobile",value:function(t){t=t+"";return t.slice(0,t.length-2)+"."+t.slice(t.length-2)}},{key:"formatDateTimeToMobile",value:function(t,n,r){if(t){t=t.replace(/[^0-9]/ig,"")}if(n==true){t=t.slice(8)}else if(r===true){t=t.slice(0,8)}return t}},{key:"formatTicketsToMobile",value:function(r){var s=r.map(function(t){var r=t.stationTrainDTO,s=t.passengerDTO,o=i(t,["stationTrainDTO","passengerDTO"]);o.train_date=e.formatDateTimeToMobile(o.train_date,false,true);o.pay_limit_time=e.formatDateTimeToMobile(o.pay_limit_time);o.limit_time=e.formatDateTimeToMobile(o.limit_time);o.ticket_price=e.formatPriceToMobile(o.ticket_price);o.reserve_time=e.formatDateTimeToMobile(o.reserve_time);o.start_time=e.formatDateTimeToMobile(r.start_time,true).slice(0,4);o.arrive_time=e.formatDateTimeToMobile(r.arrive_time,true).slice(0,4);o.eticket_flag=o.print_eticket_flag;o.flat_msg="";return n({},r,s,o)});return s}},{key:"formatDateTimeTo3W",value:function(n,r,i){var s="";if(n&&n.indexOf("-")===-1&&n.length>=8){if(r!==true){s+=n.slice(0,4)+"-"+n.slice(4,6)+"-"+n.slice(6,8)+" "}if(i!==true&&n.length>=12){s+=e.formatTimeTo3W(n.slice(8))}s=s.trim()}return s||n}},{key:"formatTimeTo3W",value:function(t){var n="";if(t.indexOf(":")===-1){if(t.length>=4){n=t.slice(0,2)+":"+t.slice(2,4)}if(t.length==6){n+=":"+t.slice(4)}}return n||t}}]);return e}();e.exports=o},function(e,t,n){"use strict";function o(){this.getOrderList=function(e,t,n){var r=this;var i=[];if(t&&t.length){t.forEach(function(t,s){i[i.length]=r[e=="pc"?"getByPc":"getByMobile"](t,n)})}if(i.length){return i}else{return[]}};this.getStationName=function(e){if(!s){s={};var t=i.split("@");$.each(t,function(){var e=$.trim(this);if(e.length==0){return}var t=e.split("|");s[t[2]]=t[1]})}return s[e]};this.getTicketRefund=function(e){if(e=="a"||e=="f"){return true}else{return false}};this.getTicketIsChanged=function(e){if(e=="e"||e=="q"){return"ing"}else if(e=="j"||e=="s"){return"ed"}else{return false}};this.getTicketReBook=function(e){if(e=="1"||e=="2"){return true}else{return false}};this.getSeatName=function(e){return r._seat_type[e]};this.getTicketName=function(e){return r._person_type[e]+"ç¥¨"};this.getIdTypeForQunar=function(e){return r._mapCert[e].type};this.getByPc=function(e){var t=this;var n={sequence_no:e.sequence_no,ticket_price_all:e.ticket_total_price_page,order_date:e.order_date,train_no:e.train_code_page,train_date:e.start_train_date_page,from_station:e.from_station_name_page[0],from_station_name:e.from_station_name_page[0],start_time:e.start_time_page,to_station:e.to_station_name_page[0],to_station_name:e.to_station_name_page[0],arrive_time:e.arrive_time_page,start_train_date_page:e.start_train_date_page,pay_flag:"N"};var r=[];$(e.tickets).each(function(e,i){r.push({passenger_name:i.passengerDTO.passenger_name,ticket_type_code:i.ticket_type_code,ticket_type_name:i.ticket_type_name,ticket_status_isCanRefund:t.getTicketRefund(i.ticket_status_code),ticket_status_name:i.ticket_status_name?i.ticket_status_name.split("(")[0]:"",ticket_price:i.str_ticket_price_page,seat_type_code:i.seat_type_code,seat_type_name:t.getSeatName(i.seat_type_code),seat_name:i.seat_name,seat_no:i.seat_no,batch_no:i.batch_no,coach_no:i.coach_no});n.pay_limit_time=i.pay_limit_time});n.tickets=r;return n};this.getByMobile=function(e,t){function a(e,n){var r=n.passenger_id_no;e.push({passenger_name:n.passenger_name,passenger_id_no:r,ticket_type_code:n.ticket_type_code,ticket_type_name:u.getTicketName(n.ticket_type_code),ticket_status_code:n.ticket_status_code,ticket_status_isCanRefund:u.getTicketRefund(n.ticket_status_code),ticket_status_isCanReBook:u.getTicketReBook(n.resign_flag),ticket_status_name:n.ticket_status_name?n.ticket_status_name.split("(")[0]:"",ticket_price:n.ticket_price,seat_type_code:n.seat_type_code,seat_type_name:u.getSeatName(n.seat_type_code),seat_name:n.seat_name,seat_no:n.seat_no,batch_no:n.batch_no,coach_no:n.coach_no});if(t){return}}function f(e){if(u.getTicketIsChanged(e.ticket_status_code)=="ing"){s+=parseFloat(e.ticket_price,10)}else if(u.getTicketIsChanged(e.ticket_status_code)=="ed"){o+=parseFloat(e.ticket_price,10)}}function l(e,t){e["train_no"]=t.station_train_code;e["pay_limit_time"]=t.pay_limit_time;e["arrive_time"]=t.arrive_time;e["start_time"]=t.start_time;e["from_station"]=u.getStationName(t.from_station_telecode);e["to_station"]=u.getStationName(t.to_station_telecode);e["train_date"]=t.train_date}var n={},r=[],i=[],s=0,o=0,u=this;n={order_date:e.order_date,ticket_price_all:e.ticket_price_all,sequence_no:e.sequence_no,ticket_totalnum:e.ticket_totalnum,pay_flag:e.pay_flag};var c=e.myTicketList;c.forEach(function(e,s){if(s==0){l(n,e)}if(e.ticket_status_code=="j"||e.ticket_status_code=="s"){if(!t){n.pay_flag="Y";n.gq_flag=true;l(n,e);a(i,e)}}a(r,e);f(e)});n.tickets=i.length>0?i:r;if(n.gq_flag){n.gq_price_before=s;n.gq_price_after=o}return n};this.translateOrderToQunar=function(e){var t=this,n=[],r={};var i=e.orderList[0].myTicketList;i.forEach(function(e,i){r={passengerName:e.passenger_name,passengerId:e.passenger_id_no,passengerIdTypeName:t.getIdTypeForQunar(e.passenger_id_type_code),ticketType:e.ticket_type_code-1,ticketNo:e.sequence_no,price:e.ticket_price,seatTypeName:t.getSeatName(e.seat_type_code),carriageName:e.coach_no+"è½¦",seatName:e.seat_name,ticketStatus:"1",trainNo:e.station_train_code,trainFrom:t.getStationName(e.from_station_telecode),trainTo:t.getStationName(e.to_station_telecode),trainStartDate:e.train_date.substr(0,4)+"-"+e.train_date.substr(4,2)+"-"+e.train_date.substr(6,2),trainStartTime:e.start_time.substr(0,2)+":"+e.start_time.substr(2,2)};n.push(r)});return n}}var r=n(384);var i=n(397);var s=null;e.exports=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});t.default=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(422);var s=o(i);var a=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};u(this,e);this.extraParams=t}r(e,[{key:"queryOrder",value:function(){return wireless12306.queryOrder(2,this.extraParams)}},{key:"queryMyOrderNoComplete",value:function(){return wireless12306.queryOrder(1)}},{key:"queryAll",value:function(){function t(e){this.completeOrder=e;return e}function n(e){var t=this.completeOrder;return{noCompleteOrder:e,completeOrder:t}}return this.queryOrder().then(t.bind(this)).then(this.queryMyOrderNoComplete).then(n.bind(this))}},{key:"_run",value:function(t){switch(t){case 0:return this.queryAll();case 1:return this.queryOrder();case 2:return this.queryMyOrderNoComplete();default:return this.queryAll()}}},{key:"run",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return(new s.default(this._run.bind(this,t))).run()}}]);return e}();t.default=a},function(e,t,n){"use strict";function c(e){return e&&e.__esModule?e:{"default":e}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=n(416);var o=c(s);var u=n(311);var a=c(u);var f=n(462);var l=c(f);var v=function(e){function t(e){h(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.id="refund";n.excludeRetryReason=[];n.orderInfo=e;return n}d(t,e);i(t,[{key:"_adaptOrderInfoTo3W",value:function(){var t=r({},this.orderInfo);var n=t.train_date;var i=t.start_time;if(n.indexOf("-")===-1){t.train_date=n.slice(0,4)+"-"+n.slice(4,6)+"-"+n.slice(6)}if(i.indexOf(":")===-1){t.start_time=i.slice(0,2)+":"+i.slice(2)}return t}},{key:"func3W",value:function(){function n(e){return t.resolve(e)}function r(e){var n=Common.getError3W(e,"éç¥¨å¤±è´¥");return t.reject(n)}function i(){var e=this._adaptOrderInfoTo3W();return pc12306.deleteMyFinishedOrder(e).then(n.bind(this)).fail(r.bind(this))}var t=$.Deferred();(0,a.default)(i.bind(this)).fail(r.bind(this));return t.promise()}},{key:"funcMobile",value:function(){return(new l.default(this.orderInfo)).run()}}]);return t}(o.default);e.exports=v},function(e,t,n){"use strict";function h(e){return e&&e.__esModule?e:{"default":e}}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(466);var s=h(i);var o=n(416);var u=h(o);var a=n(311);var f=h(a);var l=n(422);var c=h(l);var m=function(e){function t(e){p(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.id="orderQueryByOrderNo";n.orderNo=e;n.excludeRetryReason=[];return n}v(t,e);r(t,[{key:"func3W",value:function(){function t(e,t){var n={};var r=$.Deferred();if(e&&e.orderDBList&&e.orderDBList.length){var i=s.default.transformOrderListResult2Mobile(e,"orderDBList");if(i.orderList[0].sequence_no===this.orderNo){n=i}}if(t&&t.OrderDTODataList&&t.OrderDTODataList.length){n=s.default.transformOrderListResult2Mobile(t,"OrderDTODataList")}return r.resolve(n)}function n(){var e=void 0,n=void 0;var r=new Date;e=Common.formatDate(r);var i=60*24*3600*1e3;var s=new Date(r.valueOf()-i);n=Common.formatDate(s);return $.when(pc12306.getMyOrder(),pc12306.getMyOldOrder(n,e,this.orderNo)).then(t.bind(this))}return(0,f.default)(n.bind(this))}},{key:"funcMobile",value:function(){function n(){return wireless12306.queryOrder(5,this.orderNo)}var t=new c.default(n.bind(this));return t.run()}}]);return t}(u.default);e.exports=m},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=l(i);var o=n(472);var u=l(o);var a=n(475);var f=l(a);var d=function(e){function t(e,n,r,i){c(this,t);var s=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.id="reschedule";s.obj=e;s.timeLines=n;s.bindDomFuns=r;s.controll=i;s.excludeRetryReason=[];return s}p(t,e);r(t,[{key:"func3W",value:function(){return(new u.default(this.obj,this.timeLines,this.bindDomFuns,this.controll)).run()}},{key:"funcMobile",value:function(){return(new f.default(this.obj,this.timeLines,this.bindDomFuns,this.controll)).run()}}]);return t}(s.default);e.exports=d},function(e,t,n){"use strict";function S(e){return e&&e.__esModule?e:{"default":e}}function x(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(402);var s=S(i);var o=n(311);var u=S(o);var a=n(384);var f=S(a);var l=n(473);var c=S(l);var h=n(474);var p=S(h);var d=n(464);var v=S(d);var m=n(432);var g=S(m);var y=n(453);var b=S(y);var w=n(431);var E=S(w);var T=["é¦æ¸¯è¥¿ä¹é¾"];var N=function(){function e(t,n,r,i){x(this,e);this.occupyDataObj=t;this.timeLines=n;this.bindDomFuns=r;this.controll=i;this.unpayOrderChecked=false;this.retryCountBundle={};this.idUnauthorizedRetry=1;this.needWaitTime=60;this.retryCount=2;this.pageIndex=0}r(e,[{key:"_run",value:function(){var t=this.getTicketKey(),n=this.occupyDataObj.passengers[0].sequence_no,r=this.getOldToStationName();var i=this.occupyDataObj.trainInfo.from,o=this.occupyDataObj.trainInfo.to,u=this.occupyDataObj.trainInfo.trainStartDate,a=false,f="N";var l=new s.default;var c=true;if(this.isChangeToStation(o,r)){f="Y"}var h=false;return this.isHKTrain(i,o).then(this.isCanResign.bind(this)).then(this.getCompleteOrder.bind(this)).then(pc12306.resignTicket.bind(pc12306,t,n,f)).then(this.handleResignTicket.bind(this,n,h)).then(pc12306.queryLeftTicket.bind(pc12306,i,o,u,a)).then(this.adaptParamsForSubmitOrder.bind(this)).then(pc12306.submitOrder.bind(pc12306)).then(this.adaptParamsForCheckIfNeedRangCodeOrNot.bind(this)).then(l.checkIfNeedRangCodeOrNot.bind(l)).then(this.adaptParamsForGetQueueCount.bind(this)).then(l.getQueueCount.bind(l)).then(Common.delay.bind(Common,3e3)).then(this.adaptParamsForSelfCoding.bind(this)).then(l.selfCoding.bind(l,c)).then(this.adaptParamsForConfirmResign.bind(this)).then(pc12306.confirmResignOrder.bind(pc12306))}},{key:"run",value:function(){function s(){return n.resolve.apply(n,arguments)}function o(e){if(e&&e.notRealFail){return n.reject.apply(n,arguments)}else if(e&&e.goto12306List){return n.reject.apply(n,arguments)}else{return r.handleFailReason(e)}}var t=this;var n=$.Deferred(),r=this;var i=function(){return t._run().then(s,o)};return(0,u.default)(i)}},{key:"handleFailReason",value:function(t){var n=$.Deferred(),r=null,i=null;if(t&&t.id&&t.display){r=t}else{i=Common.getError3W(t);r=Common.lookUp(i)}if(!r)return n.reject.apply(n,arguments);switch(r.id){case"queueing":return this.handleQueueOrder(t);case"cancelOrderFail":this.unpayOrderChecked=false;return n.reject.apply(n,[r.display]);case"cancelTooManyTimes":g.default.cacheUnavailableAccount();return n.reject.apply(n,[r.display]);case"passcodeNotCorrect":b.default.ultimateGoalManager.clear();break;case"forbiddenState":case"illegalRequest":case"illegalState":case"serviceUnavailable":case"forceUpgradeNewVersion":case"badToken":case"connectRefused":case"movedTemporarily":Common.clearCache("3w");break;case"scheduleCanceled":case"notStartSell":case"ypNotEnough":case"ticketInfoExpire":case"subtractTicketFail":case"getWaitTimeBuyTicketFail":Common.clearYpAndGoal("3w");break;case"existsUnpayOrder":window.sendWatchMessage({key:"hyBuy_occupySeat3W_existsUnpayOrder"});break;case"notLogin":QunarAPI.train.openView({viewName:"login12306"});break;case"notFitResignCondition":break}if(this.shouldRetryParticularReason(r)){var s=r.retryDelay||0;switch(r.id){case"resignTicketFail":Common.clearCache("3w");return Common.delay(s).then(this.run.bind(this));case"visitTooFrequent":Common.clearCache("3w");return Common.delay(s).then(this.run.bind(this));default:return Common.delay(s).then(this.run.bind(this))}}if(r.id==="idUnauthorized"&&!this.isPassengerNameRecognizable(r.origin)&&this.idUnauthorizedRetry>0){this.idUnauthorizedRetry--;this.retryCountBundle.idUnauthorizedRetry=this.retryCountBundle.idUnauthorizedRetry||0;this.retryCountBundle.idUnauthorizedRetry++;return Common.delay(4*1e3).then(this.run.bind(this))}E.default.setBeacon(E.default.steps.confirmSingleSuccess,false,t);return n.reject.apply(n,arguments)}},{key:"handleQueueOrder",value:function(){function i(){return pc12306.cancelQueueNoCompleteMyOrder("dc").then(s,o)}function s(){QunarAPI.train.triggerEvent({event:"cancelResignQueue",data:{isSuccessful:true,type:"3W"}});if(n.retryCount>0){n.retryCount--;return n.run().done(u.bind(this,"resignSuccessAfterCancelResignQueue",true)).fail(u.bind(this,"resignSuccessAfterCancelResignQueue",false))}else{return t.reject.apply(t,["ç³»ç»ç¹å¿ï¼è¯·ç¨åéè¯ï¼"])}}function o(){QunarAPI.train.triggerEvent({event:"cancelResignQueue",data:{isSuccessful:false,type:"3W"}});if(r>0){r--;return i()}else{return t.reject.apply(t,arguments)}}function u(e,t){QunarAPI.train.triggerEvent({event:e,data:{isSuccessful:t,type:"3W"}})}console.log("handleQueueOrder:",arguments);QunarAPI.train.triggerEvent({event:"resignQueueing",data:{isSuccessful:true,type:"3W"}});var t=$.Deferred(),n=this,r=3;return i()}},{key:"shouldRetryParticularReason",value:function(t){if(t&&t.retryCount>0){var n=t.id;var r=this.retryCountBundle;r[n]=r[n]||0;if(r[n]<t.retryCount){r[n]++;return true}}return false}},{key:"isPassengerNameRecognizable",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return true}},{key:"adaptParamsForSubmitOrder",value:function(t){console.log("adaptParamsForSubmitOrder:",arguments);var n=t.data,r=this.occupyDataObj.trainInfo.no;if(t&&t.data&&t.status){Common.storeInfo("adaptParamsForSubmitOrder_trainDatas",{trainDatas:n});return $.Deferred().resolve(n,r,"gc")}else{return $.Deferred().reject(arguments)}}},{key:"adaptParamsForGetQueueCount",value:function(t){var n=$.Deferred();var r=Common.getStoredInfo("adaptParamsForSubmitOrder_trainDatas").trainDatas,i=this.occupyDataObj.trainInfo.no;Common.storeInfo("ifNeedRandCode",t);var s=this.occupyDataObj.trainInfo.seats[0];var o=f.default.convertor.seatTypeCharacterToCode(s);var u=pc12306.querySelectedTrainInfo(r,i);Common.storeInfo("adaptParamsForSubmitOrder_trainDatas",null,true);if(!u)return n.reject("noTrainData");return n.resolve.apply(n,[o,u])}},{key:"adaptParamsForSelfCoding",value:function(){var t=Common.getStoredInfo("ifNeedRandCode");return $.Deferred().resolve(t)}},{key:"adaptParamsForCheckIfNeedRangCodeOrNot",value:function(t){var n=this,r=$.Deferred();var i=n.getPassengerTicketStr(),s=n.getOldPassengersStr();var o="";return r.resolve(i,s,o,"gc")}},{key:"adaptParamsForConfirmResign",value:function(t){var n=Common.getStoredInfo("leftTicketData");var r=pc12306.analysisYpInfo(n.data.data.result,n.data.data.map),i=this.occupyDataObj.trainInfo.no;var s=r;var o=pc12306.querySelectedTrainInfo(s,i);var u="",a="";return $.Deferred().resolve(this.getPassengerTicketStr(),this.getOldPassengersStr(),a,t,o,u)}},{key:"getPassengerTicketStr",value:function(){var t="";var n=this.occupyDataObj.passengers,r=this.occupyDataObj.trainInfo.seats[0];var i=f.default.convertor.seatTypeCharacterToCode(r);n.forEach(function(e){t+=i+",0,"+e.ticket_type_code+","+e.passenger_name+","+e.passenger_id_type_code+","+e.passenger_id_no+","+""+","+"Y"+"_"});t=t.substring(0,t.length-1);return t}},{key:"getOldPassengersStr",value:function(){var t="";var n=this.occupyDataObj.passengers;n.forEach(function(e){t+=e.passenger_name+","+e.passenger_id_type_code+","+e.passenger_id_no+","+"_"});return t}},{key:"getTicketKey",value:function(){var t=this,n=t.occupyDataObj,r=n.passengers,i="";r.forEach(function(e){if(e.start_train_date_page){i+=e.sequence_no+",1,"+e.coach_no+","+e.seat_no+","+e.start_train_date_page+"#"}else if(e.train_date&&e.start_time){i+=e.sequence_no+",1,"+e.coach_no+","+e.seat_no+","+t.parseTrainDate(e.train_date)+" "+t.parseStartTime(e.start_time)+"#"}});return i}},{key:"getOldToStationName",value:function(){var t=void 0;if(this.occupyDataObj.passengers[0].stationTrainDTO){t=this.occupyDataObj.passengers[0].stationTrainDTO.to_station_name;return t}else if(this.occupyDataObj.passengers[0].to_station_name){t=this.occupyDataObj.passengers[0].to_station_name;return t}}},{key:"parseTrainDate",value:function(t){var n=void 0;n=t.slice(0,4)+"-"+t.slice(4,6)+"-"+t.slice(6);return n}},{key:"parseStartTime",value:function(t){var n=void 0;n=t.slice(0,2)+":"+t.slice(2);return n}},{key:"isChangeToStation",value:function(t,n){var r=true,i=t,s=n;c.default.notChangeStationArr.forEach(function(e){if(e.indexOf(i)>-1&&e.indexOf(s)>-1){r=false}});c.default.isChangeStationArr.forEach(function(e){if(e.indexOf(i)>-1&&e.indexOf(s)>-1){r=true}});for(var o=0;o<i.length-1;o++){var u=i.substring(o,o+2);if(s.indexOf(u)>-1){r=false;break}}return r}},{key:"isHKTrain",value:function t(e,n){function o(o){console.log("getStationsSucc:",arguments);try{r=JSON.parse(o[i])}catch(u){r=T}if(r.includes(e)||r.includes(n)){t=true}s.resolve(t)}function u(){r=T;if(r.includes(e)||r.includes(n)){t=true}s.resolve(t)}var r=null,t=false,i="json.orderDetail.HKTrainStations",s=$.Deferred();Common.getAppConfig([i]).then(o,u);return s.promise()}},{key:"isCanResign",value:function(t){var n=$.Deferred(),r=this;var i=(new Date).getTime();var s=r.getTicketTimeMilliSecond(),o=s.ticketTimeMilliSecond,u=s.trainDateStr1;var a=this.occupyDataObj.trainInfo.trainStartDate,f=a.slice(0,4)+a.slice(5,7)+a.slice(8);var l=o-i;if(l<48*3600*1e3&&f>u&&!t){var c="éè·¯å±è§å®ï¼å¼è½¦å48å°æ¶ä»¥åï¼ä¸åè®¸åçç¥¨é¢æ¥æä»¥åçæ¹ç­¾ã";return n.reject.apply(n,[c])}else{return n.resolve.apply(n)}}},{key:"getTicketTimeMilliSecond",value:function(){var t=this.occupyDataObj.passengers[0].train_date,n=this.occupyDataObj.passengers[0].start_time,r="",i="",s="";var o=t.slice(0,4)+"/"+t.slice(4,6)+"/"+t.slice(6);n=n.slice(0,2)+":"+n.slice(2);r=o+" "+n;i=(new Date(r)).getTime();s={trainDateStr1:t,trainDateStr2:o,ticketTime:r,ticketTimeMilliSecond:i};return s}},{key:"getCompleteOrder",value:function(){var t=void 0,n=void 0;var r=new Date,i=this;n=Common.formatDate(r);var s=60*24*3600*1e3;var o=new Date(r.valueOf()-s);t=Common.formatDate(o);return pc12306.getMyOldOrder(t,n,null,i.pageIndex)}},{key:"handleResignTicket",value:function(t,n,r){var i=$.Deferred();var s=new v.default,o=new p.default(this.occupyDataObj,this.timeLines,this.bindDomFuns,this.controll);if(typeof r=="string"&&r=="ä¸å­å¨æªå®æè®¢å"){return i.resolve()}else if(typeof r=="string"&&r=="å­å¨æªå®æè®¢å"){return s.func3W(t).then(o.run.bind(o,n))}else{return i.reject(r)}}}]);return e}();e.exports=N},function(e,t){"use strict";var n=[["æ­¦æ±","æ±å£","æ­¦æ"],["å°å·","å°å·ä¸","å°å·è¥¿","å°å·æ°åº","æ²³å£å","è¥¿åº","çå°","æ°¸ç»","å¤å®è¥","æ¦ä¸­"],["éå·","éå·ä¸","éå·è¥¿","åé³å¯¨"],["æ´é³","æ´é³ä¸","æ´é³é¾é¨","å³æ"],["åäº¬","åäº¬è¥¿","åäº¬å ","åäº¬ä¸","æå¹³å"],["å¤©æ´¥","å¤©æ´¥è¥¿","å¤©æ´¥å","å¤©æ´¥å","æ¨æ³é","åç²®åå","å¡æ²½","æ»¨æµ·","äºå®¶å ¡"],["åå°æ»¨","åå°æ»¨è¥¿","åå°æ»¨ä¸","åå°æ»¨å","é¦å"],["éåº","éåºè¥¿","éåºå","éåºå","æ²åªå"],["é¿æ²","é¿æ²å","é¿æ²è¥¿","å¼ç¦å¯º","è§æ²å²­","å«æ¹å±±","è°·å±±","å°å±±","éºè°·"],["æé½","æé½å","æé½ä¸","çæµ¦"],["æµå","æµåè¥¿","å¤§ææ¹","ç« ä¸"],["ææ","ææå","çå®¶è¥è¥¿"],["æè¨","æ²æ°´å¿","å½é"],["åäº¬","åäº¬å","ä»æ"],["æ²é³","æ²é³å","æ²é³å","è£å½"],["ç³å®¶åº","ç³å®¶åºä¸","ç³å®¶åºå","èå","èåå","é«é"],["å¤ªå","å¤ªåä¸","å¤ªåå","æ±¾æ²³"],["å¤§éè¥¿","æ¹æº","è¥¿å®"],["è¥¿å®","è¥¿å®å","è¥¿å®å","é é","é¿æ¿å®«"],["å®ä¸","çµæ­¦","é¶å·"],["æ·±å³","æ·±å³ä¸","æ·±å³å","æ·±å³è¥¿","ç¦ç°"]];var r=[["åé³","åé³å¯¨"],["æ²³å£å","æ²³å£å"]];e.exports={notChangeStationArr:n,isChangeStationArr:r}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(396);var s=a(i);var o=n(450);var u=a(o);var l=function(){function e(t,n,r,i){f(this,e);this.occupyDataObj=t;this.timeLines=n;this.bindDomFuns=r;this.controll=i;this.cancelOrderFailRetry=2}r(e,[{key:"run",value:function(t,n){console.log("HandleUnpayOrder:",arguments);var r=$.Deferred();if(n.noCompleteOrder&&n.noCompleteOrder.orderList.length>0){var i=n.noCompleteOrder;return this.handleUnpayOrder(t,i)}else{return r.resolve.apply(r,arguments)}}},{key:"handleUnpayOrder",value:function(t,n){var r=arguments;var i=$.Deferred();var s=n.orderList[0],o=this.occupyDataObj.passengers,u=s.tickets;var a=this.occupyDataObj.passengers[0].sequence_no,f=s.sequence_no;var l=this.occupyDataObj.trainInfo.no,c=s.train_code_page;var h=this.occupyDataObj.trainInfo.trainStartDate,p="";var d=u[0].train_date,v=s.arrive_time_page;if(d.indexOf("-")>-1){p=d.slice(0,10)}else{p=d.slice(0,4)+"-"+d.slice(4,6)+"-"+d.slice(6,8)}var m=[],g=[];var y=[],b=[];o.forEach(function(e){m.push(e.passenger_id_no);y.push(e.ticket_type_code)});u.forEach(function(e){g.push(e.passengerDTO.passenger_id_no);b.push(e.ticket_type_code)});if(a==f&&l==c&&h==p&&this.isEqualsForArrs(m,g)&&this.isEqualsForArrs(y,b)){n.notRealFail=true;var w={sequence_no:f,arrive_time_str:c+",1970-01-01 "+v+":00;"};var E=function(){console.log("goToGetReturnMoneySuccess:",r);i.reject(n)};var S=function(){console.log("goToGetReturnMoneyFail:",r);i.reject.apply(i,r)};fusion12306.rescheduleContinue(w,n).then(E,S)}else{this.bindDomFuns.stopRefresh();var x=$("#m-occupy-progress-rebook .percentage").html();return this.handleUnpayConfirm(t,n,x)}return i.promise()}},{key:"isEqualsForArrs",value:function(t,n){var r=true;if(t.length!=n.length){r=false}else{for(var i=0,s=t.length;i<s;i++){if(n.indexOf(t[i])<0){r=false;break}}}return r}},{key:"handleUnpayConfirm",value:function(t,n,r){if(!Common.isArrayNotEmpty(n.orderList)){return this.queryOrderNotCompletedFail.call(this)}var i=n.orderList[0].sequence_no;var s=this.getOrderDetailMsg(n);return this.unpayConfirm(t,n,s,i,r)}},{key:"unpayConfirm",value:function(t,n,r,i,s){function l(){function f(){u.resolve.apply(u,arguments)}function l(){u.reject.apply(u,arguments)}Common.showLoading("æ­£å¨åæ¶è®¢å...");var e=n.orderList[0].tickets[0].ticket_status_name,r="cancel_order",a="0";if(e=="æ¹ç­¾å¾æ¯ä»"||e=="åæ´å°ç«å¾æ¯ä»"){r="cancel_resign";a="1"}o.cancelOrder(t,i,r,n.orderList[0],s,a).then(f,l)}function c(){var e={goto12306List:true};u.reject.apply(u,[e]);QunarAPI.train.openView({viewName:"12306OrderList"})}var o=this;var u=$.Deferred();var a=QApp.getViewSync(QApp.router.getCurViewName());var f=a&&a.confirm||QApp.Kami.confirm;f({title:"å°é©¼æ¸©é¦¨æç¤º",content:"æ¨æå¾ä»è®¢å("+r+")ï¼è¯·ä¼åå¤çæ­¤è®¢åã(éè·¯å±è§å®ï¼æ¯æ¥åªè½åæ¶ä¸åï¼å¦åå½æ¥ä¸è½è´­ç¥¨ã)",okText:"æ¥çè®¢å",cancelText:"åæ¶å¾ä»è®¢å",onCancel:l.bind(this),onOk:c.bind(this)});return u.promise()}},{key:"cancelNoCompleteMyOrder",value:function(t,n,r,i,s){return t?wireless12306.cancelOrder(n,s):(new u.default(i)).func3W(r)}},{key:"cancelOrder",value:function(t,n,r,i,s,o){function c(){Common.hideLoading();QunarAPI.train.triggerEvent({event:"modifyProgressBarContent",data:{content:"æ­£å¨åªåä¸ºæ¨å åº§ï¼è¯·èå¿ç­åï½"}});a.bindDomFuns.refreshBar(s);u.resolve.apply(u,arguments)}function h(e){if(typeof e==="string"){if(e.indexOf("è¯¥ç¥¨ä¸åè®¸åæ¶")>=0){c(e)}else if(e.indexOf("æ²¡æç»å½")>=0){Common.hideLoading();u.reject.apply(u,arguments)}else if(e.indexOf("system error")>=0&&a.cancelOrderFailRetry>0){a.cancelOrderFailRetry--;Common.delay(4*1e3).then(a.cancelOrder.bind(a,t,n,r,i,s,o)).then(u.resolve.bind(u),u.reject.bind(u))}}if(!$.isEmptyObject(e[0])){if(e[0]&&e[0].data&&e[0].data.existError=="Y"&&a.cancelOrderFailRetry>0){a.cancelOrderFailRetry--;Common.delay(4*1e3).then(a.cancelOrder.bind(a,t,n,r,i,s,o)).then(u.resolve.bind(u),u.reject.bind(u))}else if(e[0]&&e[0].data&&e[0].data.existError=="Y"&&a.cancelOrderFailRetry<=0){Common.hideLoading();var f="åæ¶è®¢åå¤±è´¥";var l={msg:f,id:"cancelOrderFail",display:f,keyWord:f};u.reject.apply(u,[l])}else{Common.hideLoading();var h=Common.getError3W(e);var p=Common.lookUp(h);switch(p.id){case"notLogin":QunarAPI.train.openView({viewName:"login12306"});u.reject.apply(u,[p]);break;default:u.reject.apply(u,[p])}}}}var u=$.Deferred(),a=this;var f=a.cancelNoCompleteMyOrder(t,n,r,i,o);var l=Common.delay(4e3);$.when(f,l).then(c.bind(this),h.bind(this));return u.promise()}},{key:"getOrderDetailMsg",value:function(t){var n=t.orderList[0].tickets;var r=[];n.forEach(function(e){if(e.ticket_status_name.indexOf("å¾æ¯ä»")>-1){r.push(e.passengerDTO.passenger_name+"["+e.ticket_status_name+"]")}});var i=n[0]["train_date"];var s=i.substr(5,2)+"æ"+i.substr(8,2)+"æ¥";var o=n[0].stationTrainDTO.station_train_code;var u=n[0].stationTrainDTO.from_station_name;var a=n[0].stationTrainDTO.to_station_name;var f=t.orderList[0].start_time_page;var l=r.join("ã")+s+" "+o+" ä»"+u+"å°"+a+" "+f+" å¼è½¦";return l}}]);return e}();e.exports=l},function(e,t,n){"use strict";function S(e){return e&&e.__esModule?e:{"default":e}}function x(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(422);var s=S(i);var o=n(384);var u=S(o);var a=n(473);var f=S(a);var l=n(474);var c=S(l);var h=n(432);var p=S(h);var d=n(453);var v=S(d);var m=n(431);var g=S(m);var y=n(476);var b=S(y);var w=n(454);var E=S(w);var T=["é¦æ¸¯è¥¿ä¹é¾"];var N=function(){function e(t,n,r,i){x(this,e);this.occupyDataObj=t;this.timeLines=n;this.bindDomFuns=r;this.controll=i;this.unpayOrderChecked=false;this.retryCountBundle={};this.idUnauthorizedRetry=1;this.ticketResult=null;this.selectedTrainData=null;this.newTicketDate=null;this.retryCount=2;this.queueWaitTimeLimit=60;this.errorImageBase64="/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAeAAD/7gAOQWRvYmUAZMAAAAAB/9sAhAAQCwsLDAsQDAwQFw8NDxcbFBAQFBsfFxcXFxcfHhcaGhoaFx4eIyUnJSMeLy8zMy8vQEBAQEBAQEBAQEBAQEBAAREPDxETERUSEhUUERQRFBoUFhYUGiYaGhwaGiYwIx4eHh4jMCsuJycnLis1NTAwNTVAQD9AQEBAQEBAQEBAQED/wAARCAC+ASUDASIAAhEBAxEB/8QAagABAAMBAQAAAAAAAAAAAAAAAAECAwQHAQEAAAAAAAAAAAAAAAAAAAAAEAEAAgICAQMCAgoDAAAAAAAAAQIRAyESBDFBE1EiFAVhcYGRsTJCYrIjoXIVEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwD0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHDPn7IiLdIxM39ZxxT96fx151zeKVjE1iJ7Zj7vrxGMOS81msRMdZmt5rE2iIza2J9Y94abaT03xqriK/FMR6x6e0A3nzdtbdZiluInNLTMc2iv0V/H3+HXfFIts7fzTMR9s/qc9fmjtSZzqrObTMRWM1vHOcfQmLfhdNI7Ra0TxH/fj2B1R582mIrGusYic2viOZ9uITbzb13zTpnX3jX2zz2ly1++czE5i2uOeZ4tOfaFrR28uYiZm0b6T1/tiOZB0V8vbW1qbtfS3W168+0fVnH5jedc2itYmOuImZnOYziMRKs0r88xqv3iuu8WvecxW059WPxz023i8TSl4mJr/AFTMW9P08wDsp5t51d5rWbdorNc2rjMe+aqV/MNkzeZpTFP7+ePX25U00n8PMT2mbWrF60jNo6RiYn9eGdKzbZtr/sjM/dNac88x6TxgHfbya0rHeLRaY7TitpiP24U8bzK7qVm0TF7TicVnr6/X0U8rZe+unj68/Jtj7oniYrEc/qyp4940bK4iaaN3EVt/RePb9oLa/O27NlqU1Z6xM+uPScesr+L5dt8xW1Os9e2YniecOP79Vr57UvNZikRxMza84hv4Or4tl67Jn5tcY65jrNZ5jHAO9nt2WpNIrET2ticzjj6x9TRt+bVGzrNe3tLDzsRbx7T7ba8/oBSfzDbG3p8XGM4+7P8Ag02eXam6NURTn+q18e2eY9nBNLfFN7ViJtM9Ptrzz7e//Dbf8nzxbE5rFccfSImQb6fOnbtjXisZmI/mifafT9ytPzC969orrrn2tsiJ/gw8bXeJ8eZieZzHOeIic8Y4U8W8R1ps2fFTpNs4jOe36YkHfHlXjVbZa2r7ZiPttMxz9ZiJZf8AoW7zTFOIz2zbH+GWG3vbRvrSZ2a+1IpbERn3n0jnlOyu3VsnZs7RFq4iLbIzOP4wDsjyL2ik1it+0TMxFuePTHbClvM3fJTXXVGb5x91fbmfSZYa4ik+FOyOs42ROY9pjjKum2qvw3jEY3WicfS3oDvjdM+TOnrxFO3b9uGzGJ1/iZjP+zpGYxPpmfdsAAAAAAAAAAAACDCQEYiTCQEYEgIwjrH0WARgwkBGBICMRPqYj190gIEgIMJARgSAgwkBAkBCQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//2Q=="}r(e,[{key:"_run",value:function(){console.log("_run:",arguments);var t=this.getOldToStationName();var n=this.occupyDataObj.trainInfo.from,r=this.occupyDataObj.trainInfo.to,i=this.occupyDataObj.trainInfo.trainStartDate.slice(0,4)+this.occupyDataObj.trainInfo.trainStartDate.slice(5,7)+this.occupyDataObj.trainInfo.trainStartDate.slice(8);this.newTicketDate=i;var s=pc12306,o=s.getStationCode;var u=o(n);var a=o(r);var f={from_station:u,to_station:a,train_date:i};var l="gc";if(this.isChangeToStation(r,t)){l="bgdz"}var h=true;var p=new b.default,d=new c.default(this.occupyDataObj,this.timeLines,this.bindDomFuns,this.controll),v=new E.default(this.occupyDataObj);return this.isHKTrain(n,r).then(this.isCanResign.bind(this)).then(wireless12306.queryOrder.bind(wireless12306,1)).then(p.transformUnpayOrderToMobile.bind(p)).then(d.run.bind(d,h)).then(wireless12306.queryLeftTicket.bind(wireless12306,f)).then(this.adaptParamsForCheckOrderInfo.bind(this,l)).then(wireless12306.checkOrderInfoForResign.bind(wireless12306)).then(v.run.bind(v)).then(this.adaptParamsForRequestChange.bind(this,l)).then(this.delay.bind(this,2e3)).then(wireless12306.requestChange.bind(wireless12306)).then(this.getWaitTimeForResign.bind(this,l)).then(wireless12306.confirmResignSuc.bind(wireless12306)).then(this.storeReturnMoney.bind(this)).then(this.queryUnpayOrderAfterOccupySuccess.bind(this)).then(p.transformUnpayOrderToMobile.bind(p))}},{key:"run",value:function(){function o(){return n.resolve.apply(n,arguments)}function u(e){if(e&&e.notRealFail){return n.reject.apply(n,arguments)}else if(e&&e.goto12306List){return n.reject.apply(n,arguments)}else if(e&&e.isQueueOrder){return r.handleQueueOrder(e)}else if(e&&typeof e=="string"&&(e.indexOf("PCFET")>-1||e.indexOf("PGh0b")>-1)){try{var t=Common.base64Decode(e);return r.handleFailReason(t)}catch(i){return r.handleFailReason(e)}}else{return r.handleFailReason(e)}}var t=this;var n=$.Deferred(),r=this;var i=function(){return t._run().then(o,u)};return(new s.default(i.bind(this))).run()}},{key:"handleQueueOrder",value:function(){function i(){wireless12306.cancelInQueueOrder("dc").then(s,o)}function s(){QunarAPI.train.triggerEvent({event:"cancelResignQueue",data:{isSuccessful:true,type:"mobile"}});if(n.retryCount>0){n.retryCount--;return n.run().done(u.bind(this,true)).fail(u.bind(this,false))}else{return t.reject.apply(t,["ç³»ç»ç¹å¿ï¼è¯·ç¨åéè¯ï¼"])}}function o(){QunarAPI.train.triggerEvent({event:"cancelResignQueue",data:{isSuccessful:false,type:"mobile"}});if(r>0){r--;i()}else{t.reject.apply(t,arguments)}}function u(e){QunarAPI.train.triggerEvent({event:"resignSuccessAfterCancelResignQueue",data:{isSuccessful:e,type:"mobile"}})}QunarAPI.train.triggerEvent({event:"resignQueueing",data:{isSuccessful:true,type:"mobile"}});var t=$.Deferred(),n=this,r=3;i();return t.promise()}},{key:"handleFailReason",value:function(t){var n=$.Deferred(),r=null,i=null;if(t&&t.id&&t.display){r=t}else{i=Common.getError3W(t);r=Common.lookUp(i)}if(!r)return n.reject.apply(n,arguments);switch(r.id){case"queueing":return this.handleQueueOrder(t);case"cancelOrderFail":this.unpayOrderChecked=false;return n.reject.apply(n,[r.display]);case"cancelTooManyTimes":p.default.cacheUnavailableAccount();return n.reject.apply(n,[r.display]);case"passcodeNotCorrect":v.default.ultimateGoalManager.clear();break;case"forbiddenState":case"illegalRequest":case"illegalState":case"serviceUnavailable":case"forceUpgradeNewVersion":case"badToken":case"connectRefused":case"movedTemporarily":Common.clearCache("mobile");break;case"scheduleCanceled":case"notStartSell":case"ypNotEnough":case"ticketInfoExpire":case"subtractTicketFail":case"getWaitTimeBuyTicketFail":Common.clearYpAndGoal("mobile");break;case"existsUnpayOrder":window.sendWatchMessage({key:"hyBuy_occupySeat3W_existsUnpayOrder"});break;case"notLogin":QunarAPI.train.openView({viewName:"login12306"});break;case"notFitResignCondition":break}if(this.shouldRetryParticularReason(r)){var s=r.retryDelay||0;switch(r.id){case"resignTicketFail":Common.clearCache("mobile");return Common.delay(s).then(this.run.bind(this));case"visitTooFrequent":Common.clearCache("mobile");return Common.delay(s).then(this.run.bind(this));default:return Common.delay(s).then(this.run.bind(this))}}if(r.id==="idUnauthorized"&&!this.isPassengerNameRecognizable(r.origin)&&this.idUnauthorizedRetry>0){this.idUnauthorizedRetry--;this.retryCountBundle.idUnauthorizedRetry=this.retryCountBundle.idUnauthorizedRetry||0;this.retryCountBundle.idUnauthorizedRetry++;return Common.delay(4*1e3).then(this.run.bind(this))}g.default.setBeacon(g.default.steps.confirmSingleSuccess,false,t);return n.reject.apply(n,arguments)}},{key:"shouldRetryParticularReason",value:function(t){if(t&&t.retryCount>0){var n=t.id;var r=this.retryCountBundle;r[n]=r[n]||0;if(r[n]<t.retryCount){r[n]++;return true}}return false}},{key:"isPassengerNameRecognizable",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return true}},{key:"adaptParamsForCheckOrderInfo",value:function(t,n){var r=$.Deferred(),i=this;var s="",o=this.occupyDataObj.trainInfo.no;this.ticketResult=n.ticketResult;this.ticketResult.forEach(function(e){if(e.station_train_code==o){s=e.location_code;i.selectedTrainData=e}});return r.resolve.apply(r,[s,t])}},{key:"adaptParamsForRequestChange",value:function(t,n,r){var i=r.location_code;var s=$.Deferred(),o=n,a=this.selectedTrainData,f=this.occupyDataObj.passengers,l=this.occupyDataObj.trainInfo.seats[0],c=u.default.convertor.seatTypeCharacterToCode(l);var h="",p="",d="",v="",m="",g="",y="",b="";f.forEach(function(e){h+=e.passenger_id_no+",";p+=e.passenger_id_type_code+",";d+=e.passenger_name+",";v+=e.coach_no+",";m+=e.batch_no+",";g+=c+",";y+=e.ticket_type_code+",";b+=e.seat_no+","});h=h.slice(0,h.length-1);p=p.slice(0,p.length-1);d=d.slice(0,d.length-1);v=v.slice(0,v.length-1);m=m.slice(0,m.length-1);g=g.slice(0,g.length-1);y=y.slice(0,y.length-1);b=b.slice(0,b.length-1);var w={to_station_telecode:a.to_station_telecode,train_no:a.train_no,orderId:f[0].sequence_no,ticket_type_order_num:f.length,passenger_id_nos:h,choose_seats:"",lc_change_confirm:"0",ori_coach_nos:v,ori_passenger_id_nos:h,pass_code:o,to_station:a.to_station_telecode,train_date:this.newTicketDate,from_station:a.from_station_telecode,bed_level_order_num:"0",yp_info:a.yp_info,location_code:i,sequence_no:this.occupyDataObj.passengers[0].sequence_no,station_train_code:a.station_train_code,from_station_telecode:a.from_station_telecode,passenger_names:d,ori_batch_nos:m,passenger_flag:"1",purpose_codes:"00",seat_type_codes:g,start_time:a.start_time,ticket_types:y,ori_passenger_id_type_codes:p,ori_seat_nos:b,passenger_id_types:p,p_str:"",tour_flag:"gc",dynamicProp:t=="gc"?"0+0+0+0":"0+0+0+B",bed_level:"",ori_passenger_names:d};return s.resolve.apply(s,[w])}},{key:"getWaitTimeForResign",value:function(t){function c(e){function i(e){var t=e.indexOf("å¦æ¨ç¡®è®¤");if(t>1)e=e.substr(0,t-1)+"ã";return e}if(!e.orderId){var t=(new Date).getTime();console.log("----------æ¶é´å·®---------ï¼",t-a);if(t-a>n.queueWaitTimeLimit*1e3&&u){QunarAPI.train.triggerEvent({event:"resignQueueing",data:{isSuccessful:true,type:"mobile"}});n.bindDomFuns.stopRefresh();f=$("#m-occupy-progress-rebook .percentage").html();Common.confirm({title:"å°é©¼æ¸©é¦¨æç¤º",content:"æ¨çè®¢åè¿å¥äºæéç­å¾ç¶æï¼æéäººæ°å¯è½è¾å¤ï¼æ¯å¦ç»§ç»­æéç­å¾ï¼",okText:"ç»§ç»­æé",cancelText:"åæ¶æé",onCancel:p.bind(this),onOk:d.bind(this)})}else if(e.error_msg){r.reject.apply(r,[i(e.error_msg)])}else{setTimeout(l,o)}}else{r.resolve.apply(r,[e.orderId])}}function h(){if(i>0){i--;setTimeout(l,o)}else{r.reject.apply(r,arguments)}}function p(){Common.showLoading("æ­£å¨åæ¶æé...");v()}function d(){QunarAPI.train.triggerEvent({event:"continueResignQueueByUser",data:{isSuccessful:true,type:"mobile"}});n.bindDomFuns.refreshBar(f);u=false;l()}function v(){wireless12306.cancelInQueueOrder("dc").then(m,g)}function m(){QunarAPI.train.triggerEvent({event:"cancelResignQueueByUser",data:{isSuccessful:true,type:"mobile"}});Common.hideLoading();Common.alert({title:"å°é©¼æ¸©é¦¨æç¤º",content:"åæ¶æéæå",okText:"ç¥éäº",onOk:function(){n.controll.gotoDetail()}})}function g(){QunarAPI.train.triggerEvent({event:"cancelResignQueueByUser",data:{isSuccessful:false,type:"mobile"}});if(s>0){s--;v()}else{r.reject.apply(r,arguments)}}var n=this,r=$.Deferred(),i=3,s=3,o=2e3,u=true,a=(new Date).getTime(),f="0";var l=function(){wireless12306.getWaitTimeForResign(t).then(c,h)};l();return r.promise()}},{key:"storeReturnMoney",value:function(t){var n=$.Deferred();var r=t.orderList[0];var i={returnMoneyFact:(r.return_fact*100).toString(),returnMoneyTotal:(r.return_total*100).toString(),returnMoneyCost:(r.return_cost*100).toString(),returnMoneyRate:r.return_rate.toString(),sequence_no:r.myTicketList[0].sequence_no,parOrderDTOJson:true,oldTicketDTOJson:true};Common.storeInfo("returnMoneyObj",i);return n.resolve.apply(n,arguments)}},{key:"isChangeToStation",value:function(t,n){var r=true,i=t,s=n;f.default.notChangeStationArr.forEach(function(e){if(e.indexOf(i)>-1&&e.indexOf(s)>-1){r=false}});f.default.isChangeStationArr.forEach(function(e){if(e.indexOf(i)>-1&&e.indexOf(s)>-1){r=true}});for(var o=0;o<i.length-1;o++){var u=i.substring(o,o+2);if(s.indexOf(u)>-1){r=false;break}}return r}},{key:"getOldToStationName",value:function(){var t=void 0;if(this.occupyDataObj.passengers[0].stationTrainDTO){t=this.occupyDataObj.passengers[0].stationTrainDTO.to_station_name;return t}else if(this.occupyDataObj.passengers[0].to_station_name){t=this.occupyDataObj.passengers[0].to_station_name;return t}}},{key:"isHKTrain",value:function t(e,n){function o(o){console.log("getStationsSucc:",arguments);try{r=JSON.parse(o[i])}catch(u){r=T}if(r.includes(e)||r.includes(n)){t=true}s.resolve(t)}function u(){r=T;if(r.includes(e)||r.includes(n)){t=true}s.resolve(t)}var r=null,t=false,i="json.orderDetail.HKTrainStations",s=$.Deferred();Common.getAppConfig([i]).then(o,u);return s.promise()}},{key:"isCanResign",value:function(t){var n=$.Deferred(),r=this;var i=(new Date).getTime();var s=r.getTicketTimeMilliSecond(),o=s.ticketTimeMilliSecond,u=s.trainDateStr1;var a=this.occupyDataObj.trainInfo.trainStartDate,f=a.slice(0,4)+a.slice(5,7)+a.slice(8);var l=o-i;if(l<48*3600*1e3&&f>u&&!t){var c="éè·¯å±è§å®ï¼å¼è½¦å48å°æ¶ä»¥åï¼ä¸åè®¸åçç¥¨é¢æ¥æä»¥åçæ¹ç­¾ã";return n.reject.apply(n,[c])}else{return n.resolve.apply(n)}}},{key:"getTicketTimeMilliSecond",value:function(){var t=this.occupyDataObj.passengers[0].train_date,n=this.occupyDataObj.passengers[0].start_time,r="",i="",s="";console.log("this.occupyDataObj.passengers[0]:",this.occupyDataObj);var o=t.slice(0,4)+"/"+t.slice(4,6)+"/"+t.slice(6);n=n.slice(0,2)+":"+n.slice(2);r=o+" "+n;i=(new Date(r)).getTime();s={trainDateStr1:t,trainDateStr2:o,ticketTime:r,ticketTimeMilliSecond:i};return s}},{key:"queryUnpayOrderAfterOccupySuccess",value:function(){function r(){return wireless12306.queryOrder(1).then(i)}function i(e){console.log("queryUnpayOrderAfterOccupySuccess:",arguments);if(Common.isArrayNotEmpty(e.orderList)){t.resolve.apply(t,[e])}else if(n>0){n--;setTimeout(r,2e3)}}var t=$.Deferred(),n=3;r();return t.promise()}},{key:"delay",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}return Common.delay(t).then(function(){var e;return(e=$.Deferred()).resolve.apply(e,r)})}}]);return e}();e.exports=N},function(e,t){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=function(){function e(){r(this,e)}n(e,[{key:"transformUnpayOrderToMobile",value:function(t){console.log("transformUnpayOrderToMobile:",arguments);var n=$.Deferred(),r=this;var i={noCompleteOrder:{succ_flag:"1",error_msg:"",statusCode:200,statusReason:"OK",responseHeaders:{Server:"Apache-Coyote/1.1",Expires:"Thu, 01 Jan 1970 00:00:00 GMT","Transfer-Encoding":"chunked","X-Powered-By":"Servlet 2.5; JBoss-5.0/JBossWeb-2.1",Pragma:"no-cache",Date:(new Date).toGMTString(),"Content-Type":"text/plain;charset=UTF-8"},isSuccessful:true,orderList:[]}};if(Common.isArrayNotEmpty(t.orderList)&&t.orderList[0].sequence_no&&!t.orderList[0].queue_message){var s=[],o=t.orderList[0],u=null,a=[];o.myTicketList.forEach(function(e){if(e.ticket_status_name.indexOf("å¾æ¯ä»")>-1){s.push(e)}});a=s;a.forEach(function(e){e.passengerDTO={passenger_id_no:e.passenger_id_no,passenger_id_type_code:e.passenger_id_type_code,passenger_id_type_name:e.passenger_id_type_name,passenger_name:e.passenger_name};e.stationTrainDTO={arrive_time:"1970-01-01 "+r.formatString(s).arrive_time_page+":00",distance:e.distance,from_station_name:e.from_station_name,from_station_telecode:e.from_station_telecode,start_time:"1970-01-01 "+r.formatString(s).start_time_page+":00",station_train_code:e.station_train_code,to_station_name:e.to_station_name,to_station_telecode:e.to_station_telecode};e.start_train_date_page=r.formatString(s).start_train_date_page;e.train_date=e.train_date.slice(0,4)+"-"+e.train_date.slice(4,6)+"-"+e.train_date.slice(6)+" "+"00:00:00"});u={arrive_time_page:r.formatString(s).arrive_time_page,cancel_flag:o.cancel_flag,confirm_flag:o.confirm_flag,from_station_name_page:[s[0].from_station_name],if_deliver:o.if_deliver,if_show_resigning_info:null,insure_query_no:o.insure_query_no,isNeedSendMailAndMsg:null,myTicketList:s,order_date:o.order_date,order_flag:o.order_flag,pay_flag:o.pay_flag,pay_resign_flag:o.pay_resign_flag,print_eticket_flag:o.print_eticket_flag,recordCount:null,reserve_flag_query:null,resign_flag:o.resign_flag,return_flag:o.return_flag,sequence_no:o.sequence_no,start_time_page:r.formatString(s).start_time_page,start_train_date_page:r.formatString(s).start_train_date_page,ticket_price_all:r.getTotalPrice(s),ticket_total_price_page:r.getTotalPrice(s),ticket_totalnum:s.length,tickets:a,to_station_name_page:[s[0].to_station_name],train_code_page:s[0].station_train_code};i.noCompleteOrder.orderList.push(u)}else if(Common.isArrayNotEmpty(t.orderList)&&!t.orderList[0].sequence_no&&t.orderList[0].queue_cancel_flag==1){t.isQueueOrder=true;return n.reject.apply(n,[t])}return n.resolve.apply(n,[i])}},{key:"formatString",value:function(t){console.log("formatString:",arguments);var n=t[0].arrive_time.slice(0,2)+":"+t[0].arrive_time.slice(2);var r=t[0].start_time.slice(0,2)+":"+t[0].start_time.slice(2);var i=t[0].train_date.slice(0,4)+"-"+t[0].train_date.slice(4,6)+"-"+t[0].train_date.slice(6)+" "+r;var s={arrive_time_page:n,start_time_page:r,start_train_date_page:i};return s}},{key:"getTotalPrice",value:function(t){console.log("getTotalPrice:",arguments);var n=0;t.forEach(function(e){n+=parseFloat(e.ticket_price)});var r=n.toFixed(2);return r}}]);return e}();e.exports=i},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=l(i);var o=n(478);var u=l(o);var a=n(479);var f=l(a);var d=function(e){function t(e){c(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.id="getPayParamForCashierPage";n.initParams=e;n.excludeRetryReason=[];return n}p(t,e);r(t,[{key:"func3W",value:function(){return(new u.default).getPayParam(this.initParams)}},{key:"funcMobile",value:function(){return(new f.default).getPayParam(this.initParams)}}]);return t}(s.default);e.exports=d},function(e,t,n){"use strict";function s(){}var r=n(311);var i=n(313);s.prototype={constructor:s,getPay:function(){return i.execAsyncFunctionInApproximateInterval(pc12306.getPayParams,pc12306,3,2*1e3,true,arguments)},_getPayParam:function(t){function i(e){if(e){n.resolve(e)}else{s("payForm error")}}function s(e){if(typeof e==="string"){if(e&&e.indexOf("è¯¥è®¢åä¸åè®¸æ¯ä»")>-1){n.reject("orderNotAllowedPay")}else if(e==""||e.indexOf("ç¹å¿")>-1){n.reject("è¯·ç»å½")}else{n.reject.apply(n,arguments)}}else{n.reject.apply(n,arguments)}r.resultDefer=null}var n=$.Deferred(),r=this;this.getPay(t).then(i.bind(this),s);return n.promise()},getPayParam:function(t){return r(this._getPayParam.bind(this),[].concat(t))}};e.exports=s},function(e,t,n){"use strict";function o(){}var r=n(422);var i=n(313);var s=n(480);o.prototype={constructor:o,getPay:function(){var t=new s;return i.execAsyncFunctionInApproximateInterval(t.run,t,3,2*1e3,true,arguments)},_getPayParam:function(t){function a(e){if(e){n.resolve(e)}else{f("payForm error")}}function f(e){if(typeof e==="string"){if(e&&e.indexOf("è¯¥è®¢åä¸åè®¸æ¯ä»")>-1){n.reject("orderNotAllowedPay")}else if(e==""||e.indexOf("ç¹å¿")>-1){n.reject("è¯·ç»å½")}else{n.reject.apply(n,arguments)}}else{n.reject.apply(n,arguments)}r.resultDefer=null}var n=$.Deferred(),r=this;var i=t.sequence_no,s=t.order_timeout_date,o=t.batch_no,u=t.gq_flag;this.getPay(i,s,o,u).then(a.bind(this),f);return n.promise()},getPayParam:function(t){var n=new r(this._getPayParam.bind(this),[].concat(t));return n.run()}};e.exports=o},function(e,t){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=function(){function e(){r(this,e)}n(e,[{key:"getPayPage",value:function(t){function r(e,n){var r=$.Deferred();var i={};if(typeof n==="string"&&n.indexOf("form")>-1){i=Common.getObjFromInputsWithFormAttributes(n);i=Common.adaptAction(i,t.epayurl);return r.resolve(i)}return r.reject.apply(r,arguments)}var n={interfaceName:t.interfaceName,interfaceVersion:t.interfaceVersion,tranData:t.tranData.replace(/r\n/g,""),merSignMsg:t.merSignMsg,appId:t.appId,transType:t.transType};if(!t.epayurl){return $.Deferred().reject("payPage error")}return Common.ajax(t.epayurl,{data:n,type:"POST"}).then(r)}},{key:"getPay",value:function(){return wireless12306.getPay.apply(wireless12306,arguments)}},{key:"run",value:function(t,n,r,i){return this.getPay.apply(this,arguments).then(this.getPayPage.bind(this))}}]);return e}();e.exports=i},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=l(i);var o=n(482);var u=l(o);var a=n(485);var f=l(a);var d=function(e){function t(e){c(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.id="getOrderInfoForCashierPage";n.initParams=e;n.excludeRetryReason=[];return n}p(t,e);r(t,[{key:"func3W",value:function(){return u.default.getOrderInfo(this.initParams)}},{key:"funcMobile",value:function(){return f.default.getOrderInfo(this.initParams)}}]);return t}(s.default);e.exports=d},function(e,t,n){"use strict";function u(){}var r=n(313);var i=n(311);var s=n(483);var o=s.checkOrderStatus;u.prototype={constructor:u,queryMyOrderNoComplete:function(){return r.execAsyncFunctionInApproximateInterval(pc12306.queryMyOrderNoComplete,pc12306,3,2*1e3,true,arguments)},_getOrderInfo:function(t){function r(e){var r=null;if(e&&e.data&&e.data.orderDBList.length>0){r=e.data.orderDBList[0]}else{return o(t).always(s)}if(t==r.sequence_no){var i={sequence_no:r.sequence_no,order_timeout_date:r.tickets[0].pay_limit_time,batch_no:r.tickets[0].batch_no,ticketPrice:r.ticket_total_price_page};n.resolve(i)}else{n.reject("noDesignatedOrder")}}function i(){n.reject.apply(n,arguments)}function s(e){var t=e&&e.status;switch(t){case"orderCanceled":n.reject("orderCanceled");break;case"orderCompleted":n.reject(["orderCompleted",e.data]);break;default:n.reject(e)}}var n=$.Deferred();this.queryMyOrderNoComplete().then(r,i);return n.promise()},getOrderInfo:function(t){var n=[].concat(t);return i(this._getOrderInfo.bind(this),n)}};e.exports=new u},function(e,t,n){"use strict";function s(e){var t=false,n=Common.getValueByNamespace(e,"orderList[0].myTicketList");if(n){t=n.every(function(e){return["N","Z"].indexOf(e.pay_mode_code)>-1});if(!t){return false}}else{return false}return t}function o(e){var t=Common.getValueByNamespace(e,"orderList[0].myTicketList");var n=[];t.map(function(e){n.push(e.ticket_status_code)});if(n.indexOf("b")>-1){}else if(n.indexOf("d")>-1){}else if(n.indexOf("p")>-1){}else if(n.indexOf("c")>-1){}else{}}function u(e){function a(e,r){if(!e.orderList||e.orderList.length==0){n.resolve({status:i.orderCanceled});return}t=s(e);if(t){n.resolve({status:i.orderCompleted,data:e});o(e)}else{n.resolve({status:i.orderNotCompleted,data:e})}}function f(){n.reject.apply(n,arguments)}function u(e){return fusion12306.orderQueryByOrderNo(e)}var t=false,n=$.Deferred();var r=Common.getServerTime(),u=u(e);$.when(u,r).then(a.bind(this),f.bind(this));return n.promise()}function a(e){var t=$.Deferred();u(e).then(function(e){if(e.status==i.orderCompleted){t.resolve(e)}else{t.reject(e)}},function(e){t.reject(e)});return t.promise()}function f(e){function n(t){var n=t.status,o=t.data;switch(n){case i.orderCanceled:r.syncOrderToQunar_orderCanceled(e).always(s);break;case i.orderCompleted:r.syncOrderToQunar_orderCompleted(o).always(s);break;case i.orderNotCompleted:r.syncOrderNoPay(o).always(s);break;default:s();break}}function s(){t.resolve.apply(t,arguments)}function o(){t.reject.apply(t,arguments)}var t=$.Deferred();u(e).then(n.bind(this),o.bind(this));return t.promise()}var r=n(484);var i={orderCanceled:"orderCanceled",orderCompleted:"orderCompleted",orderNotCompleted:"orderNotCompleted"};e.exports={checkOrderStatus:u,checkOrderIsCompleted:a,checkOrderStatusAndSyncOrderToQunar:f}},function(e,t,n){"use strict";function u(){i=QApp.router.getCurViewName();o=QApp.getViewSync&&QApp.getViewSync(i)}function a(e){var t=e.key;if(i=="payPageMobile"){i="payPage"}e.key="hyBuy_"+i+t;if(o&&o.isFromOccupySeat){e.key=e.key+"_fromOccupySeat"}if(o&&o.isFromQunarOrderDetail){e.key=e.key+"_fromQunarOrderDetail"}window.sendWatchMessage(e)}function f(e,t){var n=$.Deferred();Common.recursive({times:3,repeater:function(n){n.times--;Common.postRequest("t_tTrainNotifyServer",e).always(function(e,t){if(!e||e.code!=0&&n.times>=0){n.repeater.call(null,n)}else{n.cbk.call(null,e,t)}})},cbk:function(r,i){a({key:t,isSuccessful:r&&r.code==0?true:false});if(!(r&&r.code==0)&&i){console.log(i.bstatus.des+"["+i.bstatus.code+"]")}n.resolve(r)}});return n.promise()}function l(e){var t=new r;var n=Common.getUserInfo()||{};u();if(!n.user_name||!e)return $.Deferred().reject();var i={type:3,content:JSON.stringify({user12306Account:n.user_name,orderNo:e.orderNo,ticketNo:e.orderList[0].sequence_no,ticketInfo12306List:t.translateOrderToQunar(e)})};s=e.orderList[0].sequence_no;return f(i,"_syncOrderToQunar")}function c(e){var t=Common.getUserInfo()||{};if(!t.user_name)return $.Deferred().reject();u();var n={type:2,content:JSON.stringify({user12306Account:t.user_name,ticketNo:e})};s=e;return f(n,"_syncOrderToQunar_cancel")}function h(e){u();e={type:5,content:JSON.stringify({orderNo:e.orderNo,contactPhone:e.contactPhone})};return f(e,"_syncOrderToQunar_forServer")}function p(e){u();e={type:8,content:JSON.stringify(e)};return f(e,"_syncPaySuccessToQunar")}function d(e){var t={type:13,content:JSON.stringify(e)};return f(t,"_syncPaySuccessCBToQunar")}function v(e,t){var n=e.qunarOrderNo;var r={type:14,content:JSON.stringify({orderNo:n,ticketOutTime:Common.formatDate(t,"YYYYMMddHHMISS")})};return f(r,"_syncPaySuccessTimeToQunar")}function m(){return $.Deferred().resolve()}var r=n(467);var i="",s="";var o=null;e.exports={syncOrderToQunar_orderCompleted:l,syncOrderToQunar_orderCanceled:c,syncOrderToQunar_orderCompleted_forServer:h,syncPayChannelToQunar:p,syncPaySuccessToQunar:d,syncOrderPaySucTime:v,syncOrderNoPay:m}},function(e,t,n){"use strict";function u(){}var r=n(313);var i=n(422);var s=n(483);var o=s.checkOrderStatus;u.prototype={constructor:u,queryMyOrderNoComplete:function(){return r.execAsyncFunctionInApproximateInterval(wireless12306.queryOrder,wireless12306,3,2*1e3,true,arguments)},_getOrderInfo:function(t){function r(e){var r=null;if(e&&e.orderList&&e.orderList.length>0){r=e.orderList[0]}else{return o(t).always(s)}if(t==r.sequence_no){var i={sequence_no:r.sequence_no,order_timeout_date:r.myTicketList[0].pay_limit_time,batch_no:r.myTicketList[0].batch_no,ticketPrice:r.ticket_price_all};n.resolve(i)}else{n.reject("noDesignatedOrder")}}function i(){n.reject.apply(n,arguments)}function s(e){var t=e&&e.status;switch(t){case"orderCanceled":n.reject("orderCanceled");break;case"orderCompleted":n.reject(["orderCompleted",e.data]);break;default:n.reject(e)}}var n=$.Deferred();this.queryMyOrderNoComplete().then(r,i);return n.promise()},getOrderInfo:function(t){var n=[].concat(t);var r=new i(this._getOrderInfo.bind(this),n);return r.run()}};e.exports=new u},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=l(i);var o=n(311);var u=l(o);var a=n(422);var f=l(a);var d=function(e){function t(e){c(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.id="queryOrderPayTime";n.orderNo=e;n.excludeRetryReason=[];return n}p(t,e);r(t,[{key:"func3W",value:function(){function n(){return pc12306.queryFinishOrderTrack(this.orderNo).then(r,i)}function r(e){var n={list:e.data};t.resolve(n)}function i(){t.reject.apply(t,arguments)}var t=$.Deferred();(0,u.default)(n.bind(this),i);return t.promise()}},{key:"funcMobile",value:function(){function n(){return wireless12306.queryFinishOrderTrack(this.orderNo)}var t=new f.default(n.bind(this));return t.run()}}]);return t}(s.default);e.exports=d},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=l(i);var o=n(488);var u=l(o);var a=n(489);var f=l(a);var d=function(e){function t(e){c(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.id="rescheduleConfirm";n.obj=e;n.excludeRetryReason=[];return n}p(t,e);r(t,[{key:"func3W",value:function(){return(new u.default(this.obj)).run()}},{key:"funcMobile",value:function(){return(new f.default(this.obj)).run()}}]);return t}(s.default);e.exports=d},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(311);var s=o(i);var a=function(){function e(t){u(this,e);this.confirmDataObj=t}r(e,[{key:"_run",value:function(){var t=this.confirmDataObj,n=t.url,r=t.parOrderDTOJson,i=t.oldTicketDTOJson,s=t.sequence_no,o=t.batch_no;return pc12306.payConfirm(n,r,i,s,o)}},{key:"run",value:function(){function i(){return n.resolve.apply(n,arguments)}function o(){return n.reject.apply(n,arguments)}var t=this;var n=$.Deferred();var r=function(){return t._run().then(i,o)};return(0,s.default)(r)}}]);return e}();e.exports=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(422);var s=o(i);var a=function(){function e(t){u(this,e);this.confirmDataObj=t}r(e,[{key:"_run",value:function(){return wireless12306.confirmChangeTicket(this.confirmDataObj)}},{key:"run",value:function(){function i(){return n.resolve.apply(n,arguments)}function o(){return n.reject.apply(n,arguments)}var t=this;var n=$.Deferred();var r=function(){return t._run().then(i,o)};return(new s.default(r.bind(this))).run()}}]);return e}();e.exports=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=o(i);var l=function(e){function t(){u(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.id="initUser";e.excludeRetryReason=[];return e}f(t,e);r(t,[{key:"func3W",value:function(){function t(e){e=e||{};var t={verifyStatus:e.verityStatus=="å·²éè¿"?true:false};return t}return pc12306.getUserInfo().then(t)}},{key:"funcMobile",value:function(){function t(e){e=e||{};var t={verifyStatus:e.display_control_flag==2||e.display_control_flag==4?false:true};return t}return wireless12306.initUser().then(t)}}]);return t}(s.default);e.exports=l},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=l(i);var o=n(311);var u=l(o);var a=n(422);var f=l(a);var d=function(e){function t(e,n){c(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.id="checkMobileCode";r.mobile=e;r.randCode=n;r.excludeRetryReason=[];return r}p(t,e);r(t,[{key:"func3W",value:function(){function t(){return pc12306.checkMobileCode(this.mobile,this.randCode)}return(0,u.default)(t.bind(this))}},{key:"funcMobile",value:function(){function n(){return wireless12306.checkMobileCode(this.mobile,this.randCode)}var t=new f.default(n.bind(this));return t.run()}}]);return t}(s.default);e.exports=d},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=l(i);var o=n(493);var u=l(o);var a=n(494);var f=l(a);var d=function(e){function t(e,n){c(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.id="rescheduleContinue";r.continuePayParam=e;r.unpayOrder=n;r.excludeRetryReason=[];return r}p(t,e);r(t,[{key:"func3W",value:function(){return(new u.default(this.continuePayParam,this.unpayOrder)).run()}},{key:"funcMobile",value:function(){return(new f.default(this.continuePayParam,this.unpayOrder)).run()}}]);return t}(s.default);e.exports=d},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(311);var s=o(i);var a=function(){function e(t,n){u(this,e);this.continuePayParam=t;this.unpayOrder=n;console.log("constructor:",arguments)}r(e,[{key:"_run",value:function(){function u(){t.resolve()}function a(){t.reject.apply(t,arguments)}var t=$.Deferred(),n=Common.getStoredInfo("returnMoneyObj")||null,r=Common.getStoredInfo("oldTotalPrice").oldTotalPrice,i=this.unpayOrder.orderList,s=0,o=true;r=parseFloat(+r);i.forEach(function(e){var t=e.tickets;t.forEach(function(e){var t=e.str_ticket_price_page||e.ticket_price;s+=parseFloat(+t)})});if(s>r){u()}else if(!n||!n.parOrderDTOJson||!n.oldTicketDTOJson||!n.returnMoneyFact||!n.returnMoneyTotal||!n.returnMoneyCost||!n.returnMoneyRate){pc12306.continuePayNoCompleteMyOrder(this.continuePayParam).then(Common.delay.bind(Common,2e3)).then(pc12306.getReturnMoney.bind(pc12306,o)).then(u,a)}else{u()}return t.promise()}},{key:"run",value:function(){function i(){return n.resolve.apply(n,arguments)}function o(){return n.reject.apply(n,arguments)}var t=this;var n=$.Deferred();var r=function(){return t._run().then(i,o)};return(0,s.default)(r)}}]);return e}();e.exports=a},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(422);var s=a(i);var o=n(475);var u=a(o);var l=function(){function e(t,n){f(this,e);this.continuePayParam=t;this.unpayOrder=n}r(e,[{key:"_run",value:function(){var t=new u.default,n=$.Deferred();var r=Common.getStoredInfo("returnMoneyObj")||null,i=Common.getStoredInfo("oldTotalPrice").oldTotalPrice,s=this.unpayOrder.orderList,o=0,a=this.continuePayParam.sequence_no;i=parseFloat(+i);s.forEach(function(e){var t=e.tickets;t.forEach(function(e){var t=e.str_ticket_price_page||e.ticket_price;o+=parseFloat(+t)})});if(o>i){n.resolve()}else if(o==i){r={returnMoneyFact:"0",returnMoneyTotal:"0",returnMoneyCost:"0",returnMoneyRate:"0",sequence_no:this.continuePayParam.sequence_no,parOrderDTOJson:true,oldTicketDTOJson:true};Common.storeInfo("returnMoneyObj",r);n.resolve()}else if(!r||!r.parOrderDTOJson||!r.oldTicketDTOJson||!r.returnMoneyFact||!r.returnMoneyTotal||!r.returnMoneyCost||!r.returnMoneyRate){return wireless12306.confirmResignSuc(a).then(t.storeReturnMoney.bind(t))}else{n.resolve()}return n.promise()}},{key:"run",value:function(){function i(){return n.resolve.apply(n,arguments)}function o(){return n.reject.apply(n,arguments)}var t=this;var n=$.Deferred();var r=function(){return t._run().then(i,o)};return(new s.default(r.bind(this))).run()}}]);return e}();e.exports=l},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=l(i);var o=n(496);var u=l(o);var a=n(512);var f=l(a);var d=function(e){function t(e,n,r){c(this,t);var i=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.view=e;i.handledData=n;i.payInfo=r;i.id="wechatPay";return i}p(t,e);r(t,[{key:"func3W",value:function(){return(new f.default(this.view,this.handledData,this.payInfo)).run()}},{key:"funcMobile",value:function(){return(new u.default(this.view,this.handledData,this.payInfo)).run()}}]);return t}(s.default);e.exports=d},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var o=n(497);var u=n(502);var a=n(509);var f=n(505);var l=n(499);var c=n(501);var h=function(){function e(t,n,r){s(this,e);this.view=t;this.handledData=n;this.payInfo=r;this.bankId="33000020";this.transId="";this.getPayResultAction=null;this.gotoPayAction=null;this.serverTime=""}i(e,[{key:"prepareParamsForWapBuiness",value:function(t){console.log("prepareParamsForWapBuiness:",arguments);var n={bankId:this.bankId,ok:"æäº¤æ¯ä»"};r(t||{},n);return t}},{key:"prepareParamsForListenPayAction",value:function(t,n){var r=$.Deferred();var i=Common.getStoredInfo("weChatTransId")||{};var s=this.transId;if(i.sequenceNo===this.sequence_no){s=i.weChatTransId}var o={payChannel:t,transId:s};console.log("prepareParamsForListenPayAction-arg:",arguments,this.transId,o);return r.resolve(o)}},{key:"storeTransId",value:function(t){var n=$.Deferred();this.transId=t.out_trade_no||t.orderid||"";var r=Common.getStoredInfo("weChatTransId")||{};r.sequenceNo=this.sequence_no;r.weChatTransId=this.transId;Common.storeInfo("weChatTransId",r,true);return n.resolve.apply(n,arguments)}},{key:"storageNewUrlTime",value:function(t,n){console.log("storageNewUrlTime======",arguments);var r=$.Deferred();this.storedUrlCacheObjTime(this.payInfo.payChannel,this.serverTime);return r.resolve.apply(r,arguments)}},{key:"wapBusiness",value:function(t){var n=this;return o.wapBusiness(t,n.view,n.handledData)}},{key:"get_epay_wapPayGateway",value:function(t,n){return o.get_epay_wapPayGateway(t,n)}},{key:"webpay",value:function(t){return o.webpay(t)}},{key:"storedUrlCacheObjTime",value:function(t,n){var r=Common.getStoredInfo("storedWeChatDirectlyUrlTime")||{};r.sequenceNo=this.sequence_no;r.weChatUrlStoredTime=+n;Common.storeInfo("storedWeChatDirectlyUrlTime",r,true)}},{key:"invokeWechat",value:function(t){function i(e){var t=e.openResult;if(t){n.resolve("jumptoWeChatADRSuc")}else{n.reject("noWeChatClient")}}console.log("invokeWechat:",arguments);var n=$.Deferred();var r=t.openlink||t.openLink;console.log("openUrl",r);if(r===""||r===undefined){return n.reject("jumpToWeChatFail")}this.jumpToUrlCacheTool.storedUrlCacheObj(this.payInfo.payChannel,r);if(!QApp.sniff.android){Common.sendSchema(r);n.resolve("jumptoWeChatIOSSuc")}else{console.log("openurl:",r);QunarAPI.train.openApp({packageName:"com.tencent.mm",openUri:r,success:i.bind(this)})}return n.promise()}},{key:"pay",value:function(){function s(e){return n.resolve.apply(n,arguments)}function o(e){if(r<=0)return n.reject.apply(n,arguments);r--;var t=new f(e,i);return t.run()}var t=this,n=$.Deferred();var r=1;var i=function(){return t._pay().then(s.bind(t),o.bind(t))};return i()}},{key:"_pay",value:function(){this.gotoPayAction.notifyPayChannel(this.payInfo);this.getPayResultAction.listenActionProgress().progress(this.gotoPayAction.gotoPayProgress.bind(this.gotoPayAction,this.payInfo));return this.get_epay_wapPayGateway(this.view,this.handledData).then(this.prepareParamsForWapBuiness.bind(this)).then(this.wapBusiness.bind(this)).then(this.webpay.bind(this)).then(this.storeTransId.bind(this))}},{key:"getServerTime",value:function(){function n(e){if(!e||!e.serverTime)return r();var n=Common.parseDateTime(e.serverTime);console.log("getServerTime_serverTime",n,this);this.serverTime=n;t.resolve(n)}function r(){var e=new Date;this.serverTime=e;t.resolve(e)}var t=$.Deferred();QunarAPI.train.getServerTime({success:n.bind(this),fail:r.bind(this)});return t}},{key:"getStoredUrlTime",value:function(){var t=$.Deferred();var n=Common.getStoredInfo("storedWeChatDirectlyUrlTime")||{};if(n.sequenceNo===this.sequence_no){return t.resolve(n.weChatUrlStoredTime)}return t.resolve("getStoredTimeFail")}},{key:"_run",value:function(){function r(){return this.getjumpToUrlTool.getJumpToUrlFromCache(t).then(i,s)}function i(e){console.log("wechat_run_succ:",arguments);var t=e;return n.invokeWechat({openLink:t}).then(n.prepareParamsForListenPayAction.bind(n))}function s(){console.log("wechat_run_fail:",arguments);return n.pay().then(n.invokeWechat.bind(n)).then(n.storageNewUrlTime.bind(n)).then(n.prepareParamsForListenPayAction.bind(n))}function o(e){var t=$.Deferred();if(e==="getStoredTimeFail"){return t.reject("qrCodeTimeOut")}var n=+this.serverTime-e;console.log("compareNowTimeAndCacheUrlTime2",arguments,+this.serverTime,n);if(n>4*60*1e3){return t.reject("qrCodeTimeOut")}else{return t.resolve("qrCodeHasNotTimedOut")}}var t=this.payInfo,n=this;return this.getServerTime.call(this).then(n.getStoredUrlTime.bind(n)).then(o.bind(n)).then(r.bind(n),s.bind(n))}},{key:"run",value:function(){console.log("wireless WechatPay run handledData:",this.handledData);console.log("wireless WechatPay run view:",this.view);this.getPayResultAction=new u(this.view,this.handledData);this.gotoPayAction=new a(this.view,this.handledData);this.getjumpToUrlTool=new l(this.view,this.handledData);this.jumpToUrlCacheTool=new c(this.view,this.handledData);this.sequence_no=this.handledData&&this.handledData.ticketInfoParam?this.handledData.ticketInfoParam.sequence_no:"";return this._run()}}]);return e}();e.exports=h},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=n(376);var s=n(480);var o=n(498);var u=n(499);var a=n(501);var f={getObjFromInputs:function(t){console.log("---getObjFromInputs----:",arguments);return Common.getObjFromInputsWithFormAttributes(t)},get_epay_wapPayGateway:function(t,n){console.log("----get_epay_wapPayGateway----:",arguments);var r=new u(t,n);return r.getPayForm()},epay:function(t,n,r,i){return wireless12306.getPay.apply(wireless12306,arguments)},wapPayGateway:function(t){var n=new s;return n.getPayPage(t)},wapBusiness:function(t,n,r){function u(e){console.log("wapBusiness success:",arguments);i.clearForm();var t=o.getObjFromInputs(e);console.log("wapBusiness data:",t);return t}function f(){i.clearForm();return s.reject.apply(s,arguments)}console.log("wapBusiness arguments:",arguments);var i=new a(n,r),s=$.Deferred(),o=this;return Common.getPayFormFromRailWay(t).then(u,f)},getCookieForWebpay:function(t){function h(){console.log("highAdrVersion:",arguments);n.resolve(l)}function p(){console.log("lowAdrVersion:",arguments);l="";n.resolve(l)}var n=$.Deferred();var r=(Common.getPhoneSchema()||"").toLowerCase();t=t||r;var i="railway://safepay/?weixinPay";var s="railway/wxpay";var o=[{protocol:["qunariphone://"],appid:"wx065b247a5e4d0ee7",suffix:i},{protocol:["qunaraphone://"],appid:"wx77c3b11723345f37",suffix:s},{protocol:["qunariphonetrain://"],appid:"wxcb9c757c249009ea",suffix:i},{protocol:["qunaraphonetrain://"],appid:"wx799d4d93a341b368",suffix:s}];var u=o.find(function(e,n){return e.protocol.indexOf(t)>=0})||{};console.log("appObj:",u);var a=u.appid||"";if(!a)console.warn("appid not found:",t);var f=encodeURIComponent(t+u.suffix);var l="appid="+a+";";l+="scheme="+f;console.log("cookieStr:",l);var c=155;if(QApp.sniff.android){Common.isAndroidVersionHigherThan(c).then(h,p)}else{h()}return n.promise()},webpay:function(t){function r(){if(i.apply(this,arguments)){if(QApp.sniff.android){return this._webpay(t,true)}return this._webpay(t,false)}return n.resolve.apply(n,arguments)}function i(e,t,n,r){console.log("_webpay_hasCookie:",arguments);console.log("_webpay_arg0:",JSON.stringify(e));console.log("_webpay_html:",JSON.stringify(t));console.log("_webpay_status:",JSON.stringify(n));console.log("_webpay_server:",JSON.stringify(r));if(!r){return false}var i=r.headers.redirectHeaders;console.log("redirectHeaders:",i);var o=s(i);if(o){return true}else{return false}}function s(e){if(!QApp.sniff.android){return e[0].responseHeader["Set-Cookie"]}var t=Common.base64Decode(e);try{return JSON.parse(t)[0].responseHeader["Set-Cookie"]}catch(n){return""}}console.log("webPay arguments:",arguments);var n=$.Deferred();return this._webpay(t).then(r.bind(this))},_webpay:function(t,n){console.log("_webpay:",arguments);console.log("_webpay_data:",JSON.stringify(t));return this.getCookieForWebpay().then(this._webpay_.bind(this,t,n))},_webpay_:function(t,n,s){function a(){console.log("webpay success:",arguments);var e=c.apply(this,arguments);var t=$.Deferred();var n=[].slice.call(arguments,0);var i=n[3].headers.redirectHeaders;var s=h(i);var o=Common.getQueryStringObj(s);r(o||{},e);n[0]=o;console.log("webpay redirect url params:",o,e);return t.resolve.apply(t,n)}function f(){console.log("webpay fail:",arguments)}function l(e){if(n===false){return}e.setRequestHeader("Cookie",s)}function c(e,t){var n=this.getObjFromInputs(t)||{};return n}function h(e){if(!QApp.sniff.android){return e[0].url||""}var t=Common.base64Decode(e);try{return JSON.parse(t)[0].responseHeader.Location||""}catch(n){return""}}console.log("_webpay_:",arguments);var o="https://payapp.weixin.qq.com/t/webpay";o=Common.getUrlFromFormAttributes(t)||o;t.cookie=s;console.log("cookieStr:",s);var u={type:"post",data:Common.filterOutFormAttributes(t),beforeSend:l.bind(this)};console.log("webpay url & settings:",o,u);return i(o,u).fail(f.bind(this)).then(a.bind(this))}};e.exports=f},function(e,t){"use strict";function n(){this.resultDefer=null;this.resultTag=false}n.prototype={constructor:n,getPayParamAndTry:function(t){console.log("getPayParamAndTry:",arguments);return fusion12306.getPayParamForCashierPage(t)},getPayParamActual:function(t,n){function r(){console.log("getPayParamAndTry success:",arguments)}function i(){var e=$.Deferred();this.resultDefer=null;return e.reject.apply(e,arguments)}if(this.resultTag){this.resultDefer=null}if(!n){this.resultTag=true}if(!this.resultDefer){this.resultDefer=this.getPayParamAndTry(t).then(undefined,i.bind(this)).done(r)}return this.resultDefer},getPayParam:function(t,n){var r=t.ticketInfoParam;this.initParams=t;return this.getPayParamActual(r,n)}};e.exports=new n},function(e,t,n){"use strict";function l(e,t){this.view=e;this.initParams=t;this.isOccupyServer=this.initParams.occupyMode=="server"?true:false;this.jumpToUrlCacheTool=new o(e,t);this.payChannelType="PC";u=new r(e,t);this.allowPcFormToTouch=false}var r=n(500);var i=n(498);var s=n(439);var o=n(501);var u=null;var a=new s;var f={alipayTouch:"33000010",alipayClient:"33000010",unionpay:"00011000",wechatDirectly:"33000020"};l.prototype={constructor:l,_getBankCardNum:function(t){function s(){if(i==0){cashierPageWatcher({key:"getBankCardNumRetry",isSuccessful:true});var e=document.cookie;var n=e.split("; ")||[];var r=[];var s=true;for(var f=0;f<n.length;f++){var l=n[f].split("=");if(l[0]=="_q"||l[0]=="_t"||l[0]=="_v"){r.push(l[1])}}for(var c=0;c<r.length;c++){if(!r[c]){s=false;break}}if(r.length===3&&s){cashierPageWatcher({key:"getBankCardNumRetry_hasLoggedCookie",isSuccessful:true})}else{cashierPageWatcher({key:"getBankCardNumRetry_hasLoggedCookie",isSuccessful:false})}}a.getCardInfoFromQunar(t).then(o,u)}function o(e){var t=Common.base64Decode(e.cardNo);n.resolve(t)}function u(e){var s="getCardNumFailedThroughCardIndex";if(i<=0){return n.reject("getCardNumRetryFail")}i--;if(e&&e.errcode==="USER_NOT_LOGIN"){r.view.confirm({title:"å°é©¼æ¸©é¦¨æç¤º",content:"ä¸ºäºæ¯ä»å®å¨ï¼è¯·ç¡®è®¤æ¬äººç»å½",okText:"ç´æ¥è¾å¥å¡å·",cancelText:"ä¸é®ç»å½",onOk:l.bind(r),onCancel:f.bind(r,t)})}else{n.reject(s)}}function f(e){var t=this;return Common.isQunarLoggedIn(true).then(Common.getQunarUserInfo.bind(t),c.bind(t)).then(h.bind(t)).then(p.bind(t)).then(s.bind(t,e))}function l(){Common.hideLoading();var e=function(){var t=QApp.router.getCurViewName();return t=="cashierPage"?true:false};if(e()){QunarAPI.train.triggerEvent({event:"jumpToSelectBankCardPage"})}}function c(){var e="userCancelLoginQunar";n.reject(e)}function h(e){var t={uuid:e.uuid,userName:e.userName,userId:e.qunarID};return t}function p(e){var t=e.userName,n=e.uuid;var r={opt:10001,uuid:n,username:t,orderNo:this.initParams.qunarOrderParam.qunarOrderNo,contactPhone:this.initParams.qunarOrderParam.qunarOrderContactPhone};var i=$.Deferred();Common.postRequest("t_tTrainOrderDeal",r).always(function(e){i.resolve()});return i.promise()}var n=$.Deferred(),r=this;var i=1;s();return n.promise()},getBankCardNumIfNeed:function(t){function i(){if(n){this.cardIndex=n;return this._getBankCardNum.call(this,n)}else{return $.Deferred().resolve(this.bankCardNum)}}function s(e){r.bankCardNum=e;return r}console.log("getBankCardNumIfNeed:",arguments);var n=t.cardIndex,r=this;this.bankCardNum=t.cardNum;return i.call(this).then(s)},getPayForm:function(){function s(){r=(new Date).getTime()-n;cashierPageWatcher({key:i,isSuccessful:true,duration:r});t.resolve.apply(t,arguments)}function o(){cashierPageWatcher({key:i,isSuccessful:false,duration:r});t.reject.apply(t,arguments)}var t=$.Deferred();var n=(new Date).getTime(),r=0;var i="queryPayParam";if(this.isOccupyServer){i+="_byServer";this.getPayForm_fromSever.call(this).then(s.bind(this),o)}else{this.getPayForm_fromClient().then(s.bind(this),o)}return t.promise()},getPayForm_fromSever:function(){console.log("getPayForm_fromSever:",arguments);return this.getPayParamFromCache().then(undefined,this.getPayParamServerActual.bind(this))},getPayParamServerActual:function(){function r(e){console.log("--------getPayForm_fromSever----------:",arguments);var r=e.payGatewayPage;var i=Common.getObjFromInputsWithFormAttributes(r);n.payChannelType=e.payChannelType;n.storedPayParamCache(i);return t.resolve(i)}function i(){return t.reject.apply(t,arguments)}var t=$.Deferred(),n=this;return u.getPayFormFromServer().then(r,i)},getPayForm_fromClient:function(){return this.getPayParamFromCache().then(undefined,this.getPayParamActual.bind(this)).then(this.getCurrentProvider.bind(this))},getPayParamActual:function(){return i.getPayParam(this.initParams).then(this.storedPayParamCache.bind(this))},getPayParamFromCache:function(){return this.jumpToUrlCacheTool.getUrlCacheObj("payForm")},storedPayParamCache:function(t){var n=Common.getObjFromInputs(t);this.jumpToUrlCacheTool.storeForm(n,t);return $.Deferred().resolve(t)},submitWeb:function(t){function i(e){console.log("-------getPayFormFromRailWay_success-------:",arguments);if(e&&e.indexOf("form")>-1){n.resolve(e)}else{s.apply(this,arguments)}this.jumpToUrlCacheTool.clearForm()}function s(){n.reject.apply(n,arguments);this.jumpToUrlCacheTool.clearForm()}var n=$.Deferred();var r=Common.getObjFromInputs(t);console.log("----submitWeb-----:",r);r.bankId=this.bankId;if(this.payChannelType=="PC"){r.businessType=1}u.getPayFormFromRailWay(r).then(i.bind(this),s.bind(this));return n.promise()},submit_aliClientForm:function(t){function r(){return this._submit_aliClient(t)}function i(){return this._submit_aliClientByServer(t)}var n={iosVersion:80011138,adrVersion:114};if(this.payChannelType!="PC"){return r.call(this)}return Common.isValidityAppVersion(n).then(r.bind(this),i.bind(this))},_submit_aliClientByServer:function(t){function i(e){var t=e.content,n=$.Deferred();if(!t){return n.reject.apply(n,arguments)}return this.pcPayChannel(t)}var n=Common.getObjFromInputs(t);var r={type:"common",method:"post",url:"https://mapi.alipay.com/gateway.do",param:n,headers:{}};return Common.postRequest("t_tTrainClientHttp",r).then(i.bind(this))},_submit_aliClient:function(t){function s(e,t){var i="";if(n.payChannelType=="PC"){i=n.adpterPcForm(arguments[4]);if(!i){return n.pcPayChannel(t)}else{r=i}}else{r=arguments[4].requesturl;if(QApp.sniff.android){r=Common.base64Decode(r)}}r=r.split("?")[1];return r}var n=this,r="";var i=Common.getObjFromInputs(t);return Common.ajax("https://mapi.alipay.com/gateway.do",{data:i,type:"post"}).then(s)},adpterPcForm:function(t){var n=t&&t.redirectHeaders,r="",i="https://mrmoaprod.alipay.com/exterfaceAssign.htm";if(!this.allowPcFormToTouch||!n){return""}if(QApp.sniff.android){n=Common.base64Decode(n);n=JSON.parse(n)}if(!n.length){return""}n.some(function(e){if(e.url&&e.url.indexOf(i)>-1){r=e.url;return true}});return r},pcPayChannel:function(t){var n=$.Deferred();var r=t&&t.match(/<input name="qrContextId" type="hidden" value="([^"]+)/);if(r&&r.length>1){var i={qrContextId:r[1]};return this.getQrContextId(i)}else{return n.reject.apply(n,arguments)}},getQrContextId:function(t){function s(e,t){var i=t.match(/"qrCode":"([^"]*)"/);var s=t.match(/"token":"([^"]*)"/);var u=$.Deferred();if(i&&i.length>1){var a=i[1];var f=n+"://platformapi/startapp?saId=10000007&clientVersion=3.7.0.0718&qrcode="+a+"?_s=web-other";var l=s&&s[1];var c=o(r,l);this.storedCheckPcResultUrl(c);return f}else{return u.reject.apply(u,arguments)}}function o(e,t){var n="https://mrmoaprod.alipay.com/acq/qrPayLoopCheck.json?"+"qrTokenId="+(t?t:"")+"&qrContextId="+e+"&_input_charset=utf-8&_=";return n}var n="alipay";if(QApp.sniff.android){n="alipayqr"}var r=t.qrContextId;var i=o(r)+(new Date).getTime();return Common.ajax(i,{type:"get"}).then(s.bind(this))},submitFormByDifferentBankId:function(t){var n=this.payChannel;console.log("payChannel:",n);if(n=="alipayClient"){return this.submit_aliClientForm(t)}else if(n=="unionpay"){return u.getUnionpay(t)}else{if(this.payChannelType==="PC"&&this.allowPcFormToTouch){return this.submit_aliClientForm(t)}return t}},getJumpToUrlActual:function(t){this.bankId=f[t.payChannel];return this.getPayForm().then(this.getCurrentProvider.bind(this)).then(this.submitWeb.bind(this)).then(this.submitFormByDifferentBankId.bind(this)).then(this.setJumpToUrlCache.bind(this))},setJumpToUrlCache:function(t){console.log("setJumpToUrlCache:",t);this.jumpToUrlCacheTool.storedUrlCacheObj(this.payChannel,t);return $.Deferred().resolve(t)},getJumpToUrlFromCache:function(t){var n=t.payChannel;this.payChannel=n;return this.jumpToUrlCacheTool.getUrlCacheObj(n).then(this.getCurrentProvider.bind(this))},_getJumpToUrl:function(t){function r(e){this.storedTrainId(e);n.resolve.apply(n,arguments)}function i(){n.reject.apply(n,arguments)}function s(){this.getJumpToUrlActual(t).then(r.bind(this),i)}var n=$.Deferred();this.getJumpToUrlFromCache(t).then(r.bind(this),s.bind(this));return n.promise()},getJumpToUrl:function(t,n){function s(){var e=Array.prototype.slice.call(arguments);if(i=="unionpay"){e=e.concat([this.bankCardNum,this.cardIndex])}e.unshift(this.payChannelType);r.resolve.apply(r,e)}function o(){this.jumpToUrlCacheTool.clearForm();r.reject.apply(r,arguments)}var r=$.Deferred();var i=t.payChannel;this.allowPcFormToTouch=n;this.getBankCardNumIfNeed(t).then(this._getJumpToUrl.bind(this,t)).then(s.bind(this),o.bind(this));return r.promise()},storedTrainId:function(t){if(typeof t==="string"){try{t=decodeURIComponent(t)}catch(n){console.log("err:",n)}var r=Common.getQueryStringObj(t);this.initParams.TRANS_ID=r.TRANS_ID}},storedCheckPcResultUrl:function(t){this.jumpToUrlCacheTool.storedCheckPcResultUrl(t)},getCurrentProvider:function(){function r(e){var r=[].slice.call(e.provider,0);var i="";if(r.length>0)i=r.shift();if(i=="3w"){this.payChannelType="PC"}else{this.payChannelType="WL"}n.resolve.apply(n,t)}var t=Array.prototype.slice.call(arguments),n=$.Deferred();if(this.isOccupyServer){return n.resolve.apply(n,t)}fusion12306.getProvider().then(r.bind(this));return n.promise()}};e.exports=l},function(e,t,n){"use strict";function s(e){var t=e&&e.match(/action="([^"]+)" method="post"/);if(t&&t.length>1){var n=t[1];return n}else{return""}}function o(e,t){this.view=e;this.initParams=t;this.unionPayUrl="";this.canTryTimes=10}var r=n(313);var i={alipayTouch:"ALIPAY",alipayClient:"ALIPAY",unionpay:"UNIONPYA"};o.prototype={constructor:o,getUnionpay:function(t){function o(e){console.log("getTrans:",arguments);var n=s(t);console.log("getTrans url:",n);return Common.ajax(n,{data:e,type:"post"})}function u(e,t){console.log("getTrans successOne:",arguments);cashierPageWatcher({key:"req_trans"});var n=arguments[4]||{};if(QApp.sniff.ios){cashierPageWatcher({key:"req_trans_ios"});if(n.redirectHeaders&&n.redirectHeaders.length==2&&n.requesturl){cashierPageWatcher({key:"req_trans_redirectTwo"});return a.apply(null,arguments)}}else if(QApp.sniff.android){cashierPageWatcher({key:"req_trans_android"});var r=Common.base64Decode(n.redirectHeaders);var i="";try{i=JSON.parse(r);cashierPageWatcher({key:"req_trans_redirectTwo_"+i.length})}catch(o){i="";cashierPageWatcher({key:"req_trans_redirectTwo_"+i})}if(i&&i.length==3&&n.requesturl){cashierPageWatcher({key:"req_trans_redirectTwo"});cashierPageWatcher({key:"req_trans_redirectTwo_android"});return a.apply(null,arguments)}}var u=Common.getObjFromInputs(t);var f=s(t);console.log("getTrans  successOne============= req",u,f);cashierPageWatcher({key:"req_trans_noRedirectTwo"});return Common.ajax(f,{data:u,type:"post"}).then(a,l)}function a(){console.log("getTrans successTwo:",arguments);var e=(arguments[4]||{}).requesturl;console.log("getTrans successTwo url:",e);if(e){cashierPageWatcher({key:"req_payAction"});r.unionPayUrl=e;return n.resolve(e)}else{cashierPageWatcher({key:"req_payAction_urlNull"});l.apply(n,arguments)}}function f(){cashierPageWatcher({key:"req_trans",isSuccessful:false});return n.reject.apply(n,arguments)}function l(){cashierPageWatcher({key:"req_payAction",isSuccessful:false});return n.reject.apply(n,arguments)}var n=$.Deferred(),r=this;if(this.unionPayUrl){return n.resolve({url:this.unionPayUrl})}var i=Common.getObjFromInputs(t);return o(i).then(u,f)},getPayFormFromServer:function(){console.log("-----getPayFormFromServer-----:",arguments);return this.getPayChannelUrlFromServer(undefined,0)},_getPayChannelUrlFromServer:function(t,n){function u(e){Common.postRequest("t_tTrainServerJudge",e).then(a.bind(this),f.bind(this))}function a(e){console.log("-----_getPayChannelUrlFromServer_success-----:",arguments);if(e&&e.judgeCode==0&&e.resultJson){var t=JSON.parse(JSON.parse(e.resultJson).payInfo);if(typeof t==="string")t=JSON.parse(t);var n=t.status;if(n==2){return r.resolve(t)}else if(n==1){return r.reject("noOrder")}}r.reject.apply(r,arguments)}function f(e,t){console.log("-----_getPayChannelUrlFromServer_fail-----:",arguments);r.reject.apply(r,arguments)}console.log("-----_getPayChannelUrlFromServer-----:",arguments);var r=$.Deferred();var s=this.initParams.qunarOrderParam;var o={judgeType:3,judgeParam:JSON.stringify({orderNo:s.qunarOrderNo,contactPhone:s.qunarOrderContactPhone,needReqNewPayInfo:n||0,autoPayChannel:t&&i[t]})};u(o);return r.promise()},getPayChannelUrlFromServer:function(t,n){function s(e){if(e=="noOrder"){return true}}console.log("-----getPayChannelUrlFromServer-----:",arguments);var i=this.canTryTimes;return r.execAsyncFunctionInApproximateInterval(this._getPayChannelUrlFromServer,this,i,2*1e3,true,arguments,s)},getPayFormFromRailWay:function(t){return r.execAsyncFunctionInApproximateInterval(Common.getPayFormFromRailWay,Common,3,2*1e3,true,arguments)}};e.exports=o},function(e,t,n){"use strict";function s(e,t){this.view=e;this.initParams=t;this.sequence_no=t.ticketInfoParam.sequence_no;this.urlCacheObj={alipayTouch:"",alipayClient:"",unionpay:"",wechatDirectly:""};var n=t.ticketInfoParam.order_timeout_date;if(n){n=Common.formatDate(n,"YYYYMMddhhmmss");this.sequence_no+=n}}var r=n(434);var i=r.payChannelUrl;s.prototype={constructor:s,getUrlCacheObj:function(t){function i(e){n.resolve(e)}function s(){n.reject.apply(n,arguments)}var n=$.Deferred();var r=this.urlCacheObj[t];if(r){return n.resolve(r)}this.getUrlFromCache(t).then(i,s);return n.promise()},storedUrlCacheObj:function(t,n){this.urlCacheObj[t]=n;this.updateStoredForm(t,n)},isTimeOut:function(t){return Common.isOrderTimeOut(t)},getUrlFromCache:function(t){function s(){switch(t){case"alipayClient":r.alipayClientUrl?n.resolve(r.alipayClientUrl):o();break;case"alipayTouch":r.alipayTouchUrl?n.resolve(r.alipayTouchUrl):o();break;case"unionpay":r.unionpayUrl?n.resolve(r.unionpayUrl):o();break;case"payForm":r.payForm?n.resolve(r.payForm):o();break;case"checkPcResultUrl":r.checkPcResultUrl?n.resolve(r.checkPcResultUrl):o();break;case"wechatDirectly":r.wechatDirectlyUrl?n.resolve(r.wechatDirectlyUrl):o();break;default:break}}function o(){n.reject("urlCache tiemOut")}var n=$.Deferred();var r=Common.getStoredInfo(i)||{};if(!r.sequence_no||this.sequence_no!=r.sequence_no){return n.reject("urlCache noEqual")}this.isTimeOut(r.timeOut).then(s,o);return n.promise()},updateStoredForm:function(t,n){var r=Common.getStoredInfo(i)||{};if(r.sequence_no!=this.sequence_no){return}switch(t){case"alipayClient":r.alipayClientUrl=n;break;case"alipayTouch":r.alipayTouchUrl=n;break;case"unionpay":r.unionpayUrl=n;break;case"checkPcResultUrl":r.checkPcResultUrl=n;break;case"wechatDirectly":r.wechatDirectlyUrl=n;break;default:break}r.payForm="";Common.storeInfo(i,r,true)},storeForm:function(t,n){var r=t.orderTimeoutDate;var s=this.sequence_no;var o=Common.getStoredInfo(i)||{};var u={sequence_no:s,timeOut:r,alipayClientUrl:"",alipayTouchUrl:"",unionpayUrl:"",wechatDirectlyUrl:"",payForm:n};if(o.sequence_no==s&&o.timeOut==r){u=$.extend(o)}console.log("STOREDKEY_payUrlObj:",i);Common.storeInfo(i,u,true)},clearUrlCache:function(){Common.storeInfo(i,{},true)},clearForm:function(){this.updateStoredForm("form")},storedCheckPcResultUrl:function(t){this.updateStoredForm("checkPcResultUrl",t)},getCheckPcResultUrl:function(){return this.getUrlCacheObj("checkPcResultUrl")}};e.exports=s},function(e,t,n){"use strict";function p(e,t){this.view=e;this.initParams=t;this.cardIndex="";this.trainId="";this.checkOrderTimeout="";this.weChatTransId="";this.queryId=-1;this.jumpToUrlCacheTool=new c(e,t)}var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=n(483);var s=i.checkOrderStatus;var o=n(503);var u=n(439);var a=new u;var f=n(506);var l=n(313);var c=n(501);var h=null;p.prototype={constructor:p,gotoPayThenFromSelectBankPageToUnionPage:function(){QApp.open("selectBankCardPage",{param:{bankCardInfo:JSON.stringify(this.initParams.payOptionsResult.bankCard),payMode:this.initParams.payMode,ticketInfoParam:JSON.stringify(this.initParams.ticketInfoParam),occupyMode:this.initParams.occupyMode,qunarOrderParam:JSON.stringify(this.initParams.qunarOrderParam)}});return $.Deferred().resolve("jumptoSelectBankCardPage")},gotoPayThenFromBindCardPage:function(){var t=this.initParams.payOptionsResult.bankCard;a.jumptoCardBindPage(t,true);return $.Deferred().resolve("jumptoBindBankCardPage")},checkAliPayResultByUrl:function(t,n,r){function u(){s.trainId=t;cashierPageWatcher({key:"checkAliPayResultByUrl_suc"});i.resolve()}function a(e){var t="checkAliPayResultByUrl_";if(e=="payFail"){t+="fail"}else{t+="exception"}cashierPageWatcher({key:t});i.reject.apply(i,arguments)}function f(){Common.checkAliPayResultByUrl(t,n,"https://epay.12306.cn/pay/wapResponseC2",o).then(u.bind(this),a.bind(this))}console.log("checkAliPayResultByUrl:",arguments);var i=$.Deferred(),s=this;if(this.trainId||r==="weChatPayFinish"){console.log("this.trainId exists or weChatPayFinish:",this.trainId);return i.resolve()}var o=s.initParams.qunarOrderParam.qunarOrderNo;Common.checkAliPayResultByUrl(t,n,"",o).then(u,f);return i.promise()},checkAliPayResultByPcUrl:function(t){return pc12306.checkAliPayResultByPcUrl.apply(pc12306,arguments)},checkOrderStatus_occupyByClient:function(){function i(e){var t=e.status;switch(t){case"orderCanceled":n.resolve("orderCanceled");break;case"orderCompleted":n.resolve("orderCompleted",e.data,r.cardIndex);break;case"orderNotCompleted":n.resolve("orderNotCompleted");break}}function o(){n.resolve.apply(n,arguments)}var t=this.initParams.ticketInfoParam.sequence_no,n=$.Deferred(),r=this;s(t).then(i,o);if(this.checkOrderTimeout){setTimeout(o.bind(this,"orderNotCompleted"),this.checkOrderTimeout*1e3)}return n.promise()},checkPayResultByUrl:function(t){console.log("checkPayResultByUrl:",arguments);return this.getCheckPcResultUrl().then(this._checkPayResultByUrl.bind(this,t))},getCheckPcResultUrl:function(){function n(e){console.log("getCheckPcResultUrl:",arguments);t.resolve(e)}function r(){t.resolve("")}var t=$.Deferred();this.jumpToUrlCacheTool.getCheckPcResultUrl().then(n,r);return t.promise()},_checkPayResultByUrl:function(t,n){function i(){r.resolve("paySuc")}function s(e){if(e=="payFail"||e=="noPay"){r.resolve("payFail")}else{r.resolve("payNoResult")}}console.log("_checkPayResultByUrl:",arguments);var r=$.Deferred();if(t=="bankPaySuccess"){return r.resolve("paySuc")}else if(this.weChatTransId&&(t=="weChatPayFinish"||t=="userSelectYes")){this.checkAliPayResultByUrl(this.weChatTransId,33000020,t).then(i,s)}else{if(n){this.checkAliPayResultByPcUrl(n).then(i,s)}else if(this.initParams.TRANS_ID){this.checkAliPayResultByUrl(this.initParams.TRANS_ID,33000010,t).then(i,s)}else{return r.resolve("payNoResult")}}return r.promise()},checkPayResult_occupyByClient:function(t){function r(e,t){console.log("checkPayResult_occupyByClient success:",arguments);if(t&&t[0]=="orderCompleted"){return n.resolve.apply(n,t)}if(e=="paySuc"){n.resolve("gotoPayFinishPage",null,this.cardIndex);if(t=="orderNotCompleted"){}}else if(e=="payFail"){n.reject("nopay")}else{n.reject("nopay")}}function i(){n.resolve("gotoQunarOrderDetail")}var n=$.Deferred();$.when(this.checkPayResultByUrl(t),this.checkOrderStatus_occupyByClient()).then(r.bind(this),i);return n.promise()},checkPayResult_occupyByServer:function(t){function i(e){if(e=="paySuc"){s()}else if(e=="payFail"){u()}else{o()}}function s(){n.resolve("gotoPayFinishPage",null,r.cardIndex)}function o(){n.resolve("gotoQunarOrderDetail")}function u(){n.reject("nopay")}var n=$.Deferred(),r=this;this.checkPayResultByUrl(t).then(i);return n.promise()},checkPayResult:function(t){var n=this.initParams.qunarOrderParam.qunarOrderNo;console.log("checkPayResult=======:",arguments,t);if(t!="userSelectYes"&&t!="userSelectNo"){QApp.Kami["confirm"].hide()}if(t==="userSelectNo"){return t}if(t!=="userSelectNo"){Common.notifyC2SyncOrder(n)}Common.showLoading("æ­£å¨æ£æ¥è®¢å");this.listenActionDefer.notify("checkPayResult");if(t=="bankPaySuccess"){this.listenActionDefer.notify("paySuccess")}if(this.initParams.occupyMode=="server"){return this.checkPayResult_occupyByServer(t)}else{return this.checkPayResult_occupyByClient(t)}},listenActionProgress:function(){this.listenActionDefer=$.Deferred();return this.listenActionDefer.promise()},sendWatcherForListenPayAction:function(t){var n="unknown",r=t.toLowerCase();if(r.indexOf("wechat")>-1){n="wechat"}else if(r.indexOf("alipay")>-1){n="alipayClient"}else if(r.indexOf("touch")>-1){n="alipayTouch"}else if(r.indexOf("union")>-1||r.indexOf("bank")>-1){n="unionpay"}var i=this.initParams.occupyMode||"unknown";cashierPageWatcher({key:"gotoPay_jump_"+i+"_"+n,isSuccessful:true});sendTimeConsumeWatcher("jump_"+i+"_"+n)},listenPayAction:function(t,n,i){function a(){Common.hideLoading();o.view.onTrainEvent({event:"bankPaySuccess",handler:function(){u.resolve("bankPaySuccess")}})}function f(){Common.loading("æ­£å¨åå¤æ¯ä»...");o.queryId=setTimeout(l,2*1e3)}function l(){console.log("listenUserSelect:",arguments);Common.hideLoading();o.listenActionDefer.notify("listenUserSelectPayAction");QApp.Kami.confirm.show({content:"æ¯ä»è½¬è´¦å¯è½ä¼æå¾ç­çå»¶è¿ï¼æ¯ä»æååä¹å¯å·æ°è®¢åæ¥çç»æ",okText:"æ¯ä»æå",cancelText:"éå°é®é¢",onok:function(){u.resolve("userSelectYes")},oncancel:function(){u.resolve("userSelectNo")}})}function c(e){QunarAPI.train.checkout({alipayInfo:encodeURIComponent(e),success:function(t){var n=t.resultCode;QApp.Kami["confirm"].hide();switch(n){case 1:case 2:u.resolve("bankPaySuccess");break;case 3:u.reject("nopay");break;case 4:u.reject("payFail");break;default:u.reject("adrSdkError")}}})}function h(){function e(e){var t=e.status;if(t=="bankPaySuccess"){o.cardIndex=e.cardIndex;u.resolve("bankPaySuccess")}else{u.reject(t)}}Common.hideLoading();o.view.onTrainEvent({event:"bankPaySuccessBySelectBankCardPage",handler:e});o.view.onTrainEvent({event:"bankPayFailBySelectBankCardPage",handler:e})}function p(e){var t=Common.getQueryStringObj(e);var n=Common.getQueryStringObj(t.callback||"");console.log("parseWechatPayFinishUrl:",e,t,n);t.callbackObj=n;return t}function d(){function e(e){setTimeout(function(){t(e)},2e3)}function t(e){console.log("listenAdrSchemeCbk_handler:",arguments);if(!e||!e.data){return}var t=e.data;var n=p(t);if(n.from==="wxpay"){if(n.callbackObj.trade_state==="TRADE_PAID"||n.trade_state==="TRADE_PAID"){QApp.Kami["confirm"].hide();u.resolve("weChatPayFinish")}else{QApp.Kami["confirm"].hide();u.reject("nopay")}}}console.log("listenAdrSchemeCbk:",arguments);o.view.onTrainEvent({event:"TrainOTAPay",handler:e})}function v(){function e(e){setTimeout(function(){t(e)},2e3)}function t(e){function r(e){var t=e.split("?")[1];t=decodeURIComponent(t);var n=JSON.parse(t);if(n.memo){var r=n.memo.ResultStatus;if(r=="6001"){QApp.Kami["confirm"].hide();u.reject("nopay")}if(r=="9000"){QApp.Kami["confirm"].hide();u.resolve("bankPaySuccess")}}}function i(e){QApp.Kami["confirm"].hide();var t=p(e);if(t.from==="wxpay"&&t.callbackObj.trade_state==="TRADE_PAID"){u.resolve("weChatPayFinish")}else{u.reject("nopay")}}console.log("listenIOSSchemeCbk_handler:",arguments);var t=e.url;if(!t){return}var n=t.split("?");if(n.indexOf("weixinPay")===-1){r(t)}else{i(t)}}console.log("listenIOSSchemeCbk:",arguments);o.view.onTrainEvent({event:"TrainOTAPay",handler:e});o.view.onTrainEvent({event:"TrainAliSafepay",handler:e})}console.log("listenPayAction:",arguments,i);var s=t;if((typeof s==="undefined"?"undefined":r(s))==="object"){s=t.payChannel;this.weChatTransId=t.transId||""}this.sendWatcherForListenPayAction(s);var o=this;var u=$.Deferred();this.listenActionDefer.notify("listenPayAction");switch(s){case"jumptoTouchSuc":case"jumptoUnionPageSuc":case"jumptoBindBankCardPage":case"jumptoSelectBankCardPage":a();h();break;case"jumptoAlipayADRSDKSuc":c(n);case"jumptoAlipayIOSSuc":case"jumptoAlipayIOSByQrcodeSuc":v();case"jumptoAlipayADRSuc":case"jumptoTouchSucforPcForm":f();break;case"jumptoWeChatIOSSuc":v();f();break;case"jumptoWeChatADRSuc":d();f();break}cashierPageWatcher({key:"jumpAction_"+s});return u.promise()},jumpTo:function(t){if(t&&t.payChannel=="payBySelectBankCardPage"){return this.gotoPayThenFromSelectBankPageToUnionPage()}if(t&&t.payChannel=="payByBindBankCardPage"){return this.gotoPayThenFromBindCardPage()}if(t&&t.payChannel==="wechatDirectly"){t.payPrice=this.initParams.ticketInfoParam.ticketPrice;return fusion12306.wechatPay(this,this.initParams,t)}if(!h){h=new o(this.view,this.initParams)}return h.submitPay(t)},gotoPay:function(t,n){function r(){console.log("gotoPay_fail===========:",arguments);var e=arguments[0];if(e=="orderNotAllowedPay"){return this.checkPayResult.call(this)}else{var n=i(t);var r=this.initParams.occupyMode||"unknown";cashierPageWatcher({key:"gotoPay_jump_"+r+"_"+n,isSuccessful:false});return $.Deferred().reject(e)}}function i(e){var t="unknown",n=e.payChannel.toLowerCase();if(n.indexOf("wechat")>-1){t="wechat"}else if(n.indexOf("alipayclient")>-1){t="alipayClient"}else if(n.indexOf("alipaytouch")>-1){t="alipayTouch"}else if(n.indexOf("union")>-1||n.indexOf("bank")>-1){t="unionpay"}return t}console.log("gotoPay:",arguments);if(!n){Common.showLoading("æ­£å¨è·³è½¬")}this.getConfig();return this.jumpTo(t).then(this.listenPayAction.bind(this)).then(this.checkPayResult.bind(this),r.bind(this))},getConfig:function(){function r(e){var n=e&&e["switch.cashierPage_checkOrderTimeout"];if(n){t.checkOrderTimeout=parseInt(n)}}var t=this;if(this.checkOrderTimeout){return}var n=Common.getAppConfig(["switch.cashierPage_checkOrderTimeout"]);$.when(n).then(r)}};e.exports=p},function(e,t,n){"use strict";function o(e,t){this.view=e;this.initParams=t;this.sequence_no=t.ticketInfoParam.sequence_no;this.payOptionsResult=t.payOptionsResult;this.qhtmlCacheObj={alipayTouch:"",alipayClient:"",unionpay:""};this.payChannelType="";this.jumpToPayChannelTool=new r;this.getjumpToUrlTool=new i(e,t);this.allowPcFormToTouch=false}var r=n(504);var i=n(499);var s=n(505);o.prototype={constructor:o,jumptoAlipayTouch:function(t,n){return this.jumpToPayChannelTool.jumpTo_alipayTouch(t,n,this.payChannelType)},jumptoUnionpay:function(t,n,r){return this.jumpToPayChannelTool.jumpTo_unionpay.apply(this,arguments)},jumptoAppIOSByScheme:function(t){return this.jumpToPayChannelTool.jumpTo_alipayClientForIOS(t)},jumptoAppByQrcode:function(t){if(QApp.sniff.android){return this.jumptoAppADRByQrcode(t)}else{return this.jumptoAppIOSByQrcode(t)}},jumptoAppIOSByQrcode:function(t){return this.jumpToPayChannelTool.jumpto_alipayClientForIOSByQrcode(t)},jumptoAppADRByQrcode:function(t){return this.jumpToPayChannelTool.jumpto_alipayCLientForAdr(t)},jumptoAppADRByAlipaySdk:function(t){return this.jumpToPayChannelTool.jumpto_alipayCLientSDKForAdr(t)},adpterAppVersion:function(){function n(){this.allowPcFormToTouch=true;return $.Deferred().resolve()}function r(){return $.Deferred().resolve()}var t={iosVersion:80011143,adrVersion:128};return Common.isValidityAppVersion(t).then(n.bind(this),r)},submitPay:function(t){this.payChannel=t.payChannel;return this.adpterAppVersion().then(this.getJumpToUrl.bind(this,t)).then(this.jumptoPay.bind(this))},jumptoPay:function(t,n){console.log("-----------jumptoPay----------------:",arguments);this.payChannelType=t;var r=this.payChannel;if(r=="alipayClient"){return this.jumptoAlipay(n)}else if(r=="unionpay"){var i=Array.prototype.slice.call(arguments);i.shift();return this.jumptoUnionpay.apply(this,i)}else{if(this.payChannelType=="PC"&&this.allowPcFormToTouch){return this.jumptoAlipayTouch("",n)}return this.jumptoAlipayTouch(n,"")}},jumptoAlipay:function(t){console.log("this.allowPcFormToTouch");var n=$.Deferred();if(t===""||t===undefined){return n.reject("jumpToAlipyFail")}if(this.payChannelType=="PC"&&!this.allowPcFormToTouch){return this.jumptoAppByQrcode(t)}if(!QApp.sniff.android){return this.jumptoAppIOSByScheme(t)}if(this.payOptionsResult.alipay.hasAlipayClientSDK){return this.jumptoAppADRByAlipaySdk(t)}return this.jumptoAppADRByQrcode(t)},getJumpToUrl:function(t){function a(e){console.log("=====getJumpToUrl-success=====:",arguments);return r.resolve.apply(r,arguments)}function f(e){console.log("=====getJumpToUrl-fail=====:",arguments);if(e==="userCancelLoginQunar"||e==="getCardNumRetryFail"){return r.reject(e)}if(o<=0)return r.reject(e);o--;var t=new s(e,u);return t.run()}var n=this;var r=$.Deferred(),i=this;var o=1;var u=function(){return i.getjumpToUrlTool.getJumpToUrl(t,n.allowPcFormToTouch).then(a.bind(i),f.bind(i))};return u()}};e.exports=o},function(e,t){"use strict";function r(){}function i(e){if(Common.isSingleApp()&&Common.getAppVersionIOS()>80011138){Common.sendSchemaOutter(e)}else{Common.sendSchema(e)}}var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.prototype={constructor:r,jumpTo_alipayTouch:function(t,n,r){function s(){if(r==="PC"&&!n){i.resolve("jumptoTouchSucforPcForm")}else{i.resolve("jumptoTouchSuc")}}var i=$.Deferred();if(n){n="https://mclient.alipay.com/home/exterfaceAssign.htm?"+n;QunarAPI.train.openWebView({openUrl:n,catchUrl:"https://kyfw.12306.cn/opn/enotify/epayStatus",success:s})}else{QunarAPI.train.openWebView({openData:t,catchUrl:"https://mobile.12306.cn/otsmobile/epayPage/epay",success:s})}return i.promise()},jumpTo_unionpay:function(t,r,i){var s=QApp.router.getCurViewName();if((typeof t==="undefined"?"undefined":n(t))==="object"){t=t.url}QApp.open("unionpayPage",{param:{url:t,cardNo:r,cardIndex:i,fromPage:s}});return $.Deferred().resolve("jumptoUnionPageSuc")},jumpTo_alipayClientForIOS:function(t){var n={requestType:"SafePay",dataString:"",fromAppUrlScheme:Common.getPhoneSchema().replace("://","")};if(Common.getAppVersionIOS()>80011136){n.fromAppUrlScheme=n.fromAppUrlScheme+"://railway"}var r="";n.dataString=t;r=encodeURI(JSON.stringify(n));i("alipay://alipayclient/?"+r);return $.Deferred().resolve("jumptoAlipayIOSSuc")},jumpto_alipayClientForIOSByQrcode:function(t){i(t);return $.Deferred().resolve("jumptoAlipayIOSByQrcodeSuc")},jumpto_alipayCLientForAdr:function(t){function r(e){var t=e.openResult;if(t){n.resolve("jumptoAlipayADRSuc")}else{n.reject("noAlipayClient")}}var n=$.Deferred();QunarAPI.train.openApp({packageName:"com.eg.android.AlipayGphone",openUri:t,success:r});return n.promise()},jumpto_alipayCLientSDKForAdr:function(t){var n=$.Deferred();return n.resolve("jumptoAlipayADRSDKSuc",t)}};e.exports=r},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){this.err=e;this.func=t;this.retryCountBundle={};this.idUnauthorizedRetry=1}var r=n(453);var i=s(r);o.prototype={constructor:o,run:function(){return Common.getCurrentProvider().then(this._run.bind(this))},_run:function(t){console.log("=====ErrorRetry-_run=====:",arguments);var n=$.Deferred();var r={};if(this.err&&this.err.id&&this.err.display){r=this.err}else{var s=Common.getError3W(this.err);r=Common.lookUp(s)}if(!r)return n.reject.apply(n,[this.err]);switch(r.id){case"passcodeNotCorrect":i.default.ultimateGoalManager.clear();break;case"forbiddenState":case"illegalRequest":case"illegalState":case"serviceUnavailable":case"forceUpgradeNewVersion":case"badToken":case"connectRefused":case"movedTemporarily":Common.clearCache(t);break;case"scheduleCanceled":case"notStartSell":case"ypNotEnough":case"ticketInfoExpire":case"subtractTicketFail":case"getWaitTimeBuyTicketFail":Common.clearYpAndGoal(t);break;case"existsUnpayOrder":cashierPageWatcher("payFailReason_existsUnpayOrder");break}if(this.shouldRetryParticularReason(r)){var o=r.retryDelay||0;switch(r.id){case"visitTooFrequent":Common.clearCache(t);return Common.delay(o).then(this.func.bind(this));default:return Common.delay(o).then(this.func.bind(this))}}if(r.id==="idUnauthorized"&&this.idUnauthorizedRetry>0){this.idUnauthorizedRetry--;this.retryCountBundle.idUnauthorizedRetry=this.retryCountBundle.idUnauthorizedRetry||0;this.retryCountBundle.idUnauthorizedRetry++;return Common.delay(4*1e3).then(this.func.bind(this))}return n.reject.apply(n,[this.err])},shouldRetryParticularReason:function(t){if(t&&t.retryCount>0){var n=t.id;var r=this.retryCountBundle;r[n]=r[n]||0;if(r[n]<t.retryCount){r[n]++;return true}}return false}};e.exports=o},function(e,t,n){"use strict";function s(){this.hasPurchaseCard=false}var r=n(507);var i=n(508);s.prototype={constructor:s,readyParams:function(t,n){this.view=t;this.initParams=n;this.payByWeCharHandler=new r(n);this.getPurchaseCardDataHandler=new i(n)},_gotoPay:function(){return this.payByWeCharHandler.gotoPay()},isNotNeedOpenBankPageByPahMethod:function(){var t=this.initParams.payMethod;if(t=="12306"||t=="12306ProxyDebit"||this.hasPurchaseCard){return true}return false},getPurchaseCardDataSuccess:function(t){var n=t;var r=this.initParams.qunarOrderParam;var i={orderNo:r.qunarOrderNo,contactPhone:r.qunarOrderContactPhone||""};if(n&&n.hasPurchaseCard||this.hasPurchaseCard){return $.Deferred().resolve()}else{QApp.open("openBankPage",{param:{payParams:JSON.stringify(i),purchaseCardData:JSON.stringify(n),fromSource:"cashierPage"}});Common.hideLoading();return this.listenOpenBankCardSuccessEvent()}},listenOpenBankCardSuccessEvent:function(){function r(){n.hasPurchaseCard=true;Common.showLoading();t.resolve()}var t=$.Deferred(),n=this;this.view.onTrainEvent({event:"openBankCardSuccess",handler:r});this.view.onTrainEvent({event:"openBankCardFallBack",handler:r});return t.promise()},gotoPay:function(){if(this.isNotNeedOpenBankPageByPahMethod()){return this._gotoPay()}return this.getPurchaseCardDataHandler.getData().then(this.getPurchaseCardDataSuccess.bind(this)).then(this._gotoPay.bind(this))}};e.exports=new s},function(e,t){"use strict";function n(e){this.initParams=e;this.hasFee=e.payOptionsResult.hasWeChatFee;this.payParams={};this.tipRule=null}n.prototype={constructor:n,readyParams:function(){if(this.payParams.payInfo){return $.Deferred().resolve(this.payParams)}return this.getPayTip().then(this.getCashInfo.bind(this))},getPayTip:function(){function n(e){var t=e&&e["switch.cashierPageWXtipRule"];var n=JSON.parse(t||"{}");this.tipRule=n}var t=Common.getAppConfig(["switch.cashierPageWXtipRule"]);return $.when(t).then(n.bind(this))},getCashInfo:function(){function t(e){function n(e){var t=$.Deferred();$.extend(true,this.payParams,e);return t.resolve.apply(t,arguments)}function r(e){var t=$.Deferred();return t.reject.apply(t,arguments)}this.tipRule.tipPrice=this.getPrice();var t={orderNo:this.initParams.qunarOrderParam.qunarOrderNo,contactPhone:this.initParams.qunarOrderParam.qunarOrderContactPhone,uuid:e.uuid||"",userId:e.userQunarID||"",userName:e.userName||"",hasLogin12306:Common.may12306LoggedIn(),source:300,tipType:1,tipRule:JSON.stringify(this.tipRule)};return Common.postRequest("t_tTrainGetCashInfo",t).then(n.bind(this),r.bind(this))}return Common.getQunarUserInfo().then(t.bind(this))},wxPay:function(){var t=this.payParams;t.payInfo.payTypeList.length&&QunarAPI.train.checkout({submitResult:t,expressIsOn:t.orderInfo.withReceiver||false,success:function(t){Common.hideLoading()},fail:function(){console.log("QunarAPI.train.checkout fail:",arguments)}});setTimeout(function(){Common.hideLoading()},2e3);return $.Deferred().resolve("wechatPay_clickYes")},_gotoPay:function(){return this.getCashInfo().then(this.wxPay.bind(this))},isNeedConfirm:function(){if(this.hasFee&&this.tipRule&&this.tipRule.ratio){return true}else{return false}},getPrice:function(){var t=this.initParams.qunarOrderParam.qunarOrderTotalPrice,n=this.tipRule;if(!n.ratio){return 0}var r=t*n.ratio;r=r>n.minFee?r:n.minFee;r=r<n.maxFee?r:n.maxFee;return r.toFixed(1)},_waitConfirm:function(){function r(){n.resolve()}function i(){Common.hideLoading();n.reject("wechatPay_clickNo")}var t="ä½¿ç¨å¾®ä¿¡æ¯ä»ï¼éè¦æ¯ä»"+this.tipRule.tipPrice+"åæ¯ä»æç»­è´¹ï¼è®¢åéé¢ç"+this.tipRule.ratio*100+"ï¼ï¼";var n=$.Deferred();Common.confirm({content:t,okText:"ç»§ç»­å¾®ä¿¡æ¯ä»",cancelText:"å¶å®æ¹å¼æ¯ä»",onOk:r.bind(this),onCancel:i.bind(this)});return n.promise()},waitConfirm:function(){if(this.isNeedConfirm()){return this._waitConfirm()}return $.Deferred().resolve()},gotoPay:function(){return this.readyParams().then(this.waitConfirm.bind(this)).then(this._gotoPay.bind(this))}};e.exports=n},function(e,t){"use strict";function n(e){this.initParams=e;this.readyParams()}n.prototype={constructor:n,readyParams:function(){if(this.initParams.purchaseCardData){return}else{this.getIsNeedOpenBank()}},getIsNeedOpenBank:function(){function s(e){r.initParams.purchaseCardData=e;n.resolve.apply(n,arguments)}function o(){n.reject.apply(n,arguments)}var t=this.initParams.qunarOrderParam,n=$.Deferred(),r=this;var i={orderNo:t.qunarOrderNo,contactPhone:t.qunarOrderContactPhone||"",operateType:"1"};Common.postRequest("t_tTrainPurchaseCard",i).then(s,o);return n.promise()},getData:function(){if(this.initParams.purchaseCardData){return $.Deferred().resolve(this.initParams.purchaseCardData)}return this.getIsNeedOpenBank()}};e.exports=n},function(e,t,n){"use strict";function o(e,t){this.view=e;this.handledData=t;this.getPayResultAction=new r(e,this.handledData);this.notifyPaySucTag=false;if(this.handledData.qunarOrderParam.qunarOrderNo===""){this.notNeedSync=true}}var r=n(502);var i=n(510);var s=n(511);o.prototype={constructor:o,notifyServer:s,gotoNextPage:i,paySuccessHandler:function(t){switch(t){case"orderCompleted":if(!this.handledData.orderSaveData){this.gotoNextPage.gotoPrevPage.call(this)}else{this.gotoNextPage.gotoPayFinishPage.call(this,this.handledData.orderSaveData,this.handledData.orderSaveDataFrom)}break;case"gotoPayFinishPage":this.gotoNextPage.gotoPayFinishPage.call(this,this.handledData.orderSaveData,this.handledData.orderSaveDataFrom);break;case"gotoQunarOrderDetail":this.gotoNextPage.gotoQunarOrderDetail.call(this,this.handledData.qunarOrderParam);break}},notifyPayChannel:function(t){var n=this.handledData,r={};if(this.notNeedSync){return $.Deferred().resolve()}if(n.occupyMode=="client"&&t.payChannel!=="wechat"){r={ticketOutChannel:"wl",isAppOccupy:true,ticketNo:n.ticketInfoParam.sequence_no}}return this.notifyServer.syncPayChannelToServer(this.handledData.qunarOrderParam,t,r)},notifyPaySucAndChangeOrderStatus:function(t){if(this.notNeedSync){return $.Deferred().resolve()}this.notifyPaySuc(t).then(this.notifyServer.notifyServerChangeOrderStatusTo31.bind(this,this.handledData.qunarOrderParam))},notifyPaySuc:function(t,n){if(this.notNeedSync){return $.Deferred().resolve()}if(n=="gotoQunarOrderDetail"||this.handledData.occupyMode=="server"||this.notifyPaySucTag){return $.Deferred().resolve()}this.notifyPaySucTag=true;return this.notifyServer.syncPaySucToServer(this.handledData.qunarOrderParam,t)},notifyPaySuccessResultThen:function(t,n){var r=this.handledData.qunarOrderParam;if(this.notNeedSync){return $.Deferred().resolve()}if(t=="orderCompleted"){var i=n;i.orderNo=r&&r.qunarOrderNo;return this.notifyServer.notifyOrderCompleted(i)}else if(t=="gotoPayFinishPage"||t=="gotoQunarOrderDetail"){return this.notifyServer.notifyServerChangeOrderStatusTo31(r)}else{return $.Deferred().resolve()}},notifyPayFailResult:function(t){var n=this.handledData.ticketInfoParam.sequence_no;if(this.notNeedSync){return $.Deferred().resolve()}if(t=="orderCanceled"||t=="notAllowedPay"){return this.notifyServer.notifyOrderCanceled(n)}else{return $.Deferred().resolve()}},_gotoPay:function(t,n){function s(e,n,r){if(r){t.payIndex=r}cashierPageWatcherByUserState({key:"pay_by_"+t.payChannel});if(e=="wechatPay_clickYes"){return}sendTimeConsumeWatcher("paySuccess");if(this.handledData.ticketInfoParam.gq_flag)sendTimeConsumeWatcher("occupySeatRebook_paySuccess");cashierPageWatcher({key:"paySuccess"});return i.resolve.call(i,t,e,n)}function o(e){cashierPageWatcherByUserState({key:"pay_by_"+t.payChannel,isSuccessful:false});if(e=="wechatPay_clickNo"){return}sendTimeConsumeWatcher("payFail");cashierPageWatcher({key:"paySuccess",isSuccessful:false});return i.reject.apply(i,arguments)}var r=this,i=$.Deferred();t.payPrice=r.handledData.ticketInfoParam.ticketPrice;this.notifyPayChannel(t);this.getPayResultAction.listenActionProgress().progress(this.gotoPayProgress.bind(this,t));this.getPayResultAction.gotoPay(t,n).then(s.bind(this),o.bind(this));cashierPageWatcherByUserState({key:"clickPayChannel_"+t.payChannel});return i.promise()},weChatPaySuccess:function(t,n,r,i){var s=$.Deferred();if(i){t.payIndex=i}cashierPageWatcherByUserState({key:"pay_by_"+t.payChannel});if(n=="wechatPay_clickYes"){return}sendTimeConsumeWatcher("paySuccess");if(this.handledData.ticketInfoParam.gq_flag)sendTimeConsumeWatcher("occupySeatRebook_paySuccess");cashierPageWatcher({key:"paySuccess"});cashierPageWatcherByUserState({key:"clickPayChannel_"+t.payChannel});return s.resolve(t,n,r)},weChatPayFail:function(t,n){var r=$.Deferred();cashierPageWatcherByUserState({key:"pay_by_"+t.payChannel,isSuccessful:false});if(n=="wechatPay_clickNo"){return}sendTimeConsumeWatcher("payFail");cashierPageWatcher({key:"paySuccess",isSuccessful:false});cashierPageWatcherByUserState({key:"clickPayChannel_"+t.payChannel});return r.reject.apply(r,arguments)},gotoPay:function(t,n){return this._gotoPay(t,n).then(this.gotoPaySuccess.bind(this),this.gotoPayFail.bind(this,t,n))},gotoPayProgress:function(t,n){switch(n){case"checkPayResult":case"listenUserSelectPayAction":this.view.setPageCanNotBack.call(this);break;case"listenPayAction":sendTimeConsumeWatcher("openPayPage");this.view.hideSignWin.call(this);break;case"paySuccess":this.notifyPaySucAndChangeOrderStatus.call(this,t);break;default:break}},gotoPaySuccess:function(t,n,r){var i=$.Deferred();this.notifyPaySuc.apply(this,arguments).then(this.notifyPaySuccessResultThen.bind(this,n,r)).always(this.paySuccessHandler.bind(this,n));if(!this.notNeedSync){this.getOrderPayTimeAndSyncServer()}i.resolve();return i.promise()},gotoPayFail:function(t,n,r){var i=$.Deferred();this.notifyPayFailResult.call(this,r).always(function(){i.reject.call(i,r)});return i.promise()},getOrderPayTimeAndSyncServer:function(){QunarAPI.train.triggerEvent({event:"LetWorkerDoEvent",data:{command:"getOrderPayTimeAndSyncServer",params:{sequence_no:this.handledData.ticketInfoParam.sequence_no,qunarOrderNo:this.handledData.qunarOrderParam.qunarOrderNo}}})}};e.exports=o},function(e,t){"use strict";function n(){}n.prototype={constructor:n,gotoPayFinishPage:function(t,n){t=JSON.stringify(t);var r=Common.getPhoneSchema()+"railway/payFinish?data="+encodeURIComponent(t)+"&from="+n;Common.sendSchema(r)},gotoQunarOrderDetail:function(t,n){var r={orderNo:t.qunarOrderNo,contactPhone:t.qunarOrderContactPhone};var i=Common.getPhoneSchema()+"railway/orderDetail?"+$.param(r)+(n!==true?QApp.sniff.android?"&toMain=true":"&fromPayFinish=true&TGCNavigatorPopToVCKey=main":"");Common.sendSchema(i)},gotoPrevPage:function(){QunarAPI.train.triggerEvent({event:"PaySuccessEvent"});this.view.hide()},linktoSignAgreement:function(){QApp.open("signAgreement")}};e.exports=new n},function(e,t,n){"use strict";function f(){}var r=n(484);var i=r.syncOrderToQunar_orderCompleted;var s=r.syncOrderToQunar_orderCompleted_forServer;var o=r.syncOrderToQunar_orderCanceled;var u=r.syncPayChannelToQunar;var a=r.syncPaySuccessToQunar;f.prototype={constructor:f,notifyOrderCompleted:function(t){return i(t)},notifyOrderCanceled:function(t){return o(t)},notifyServerChangeOrderStatusTo31:function(t){var n=t;var r={orderNo:n.qunarOrderNo,contactPhone:n.qunarOrderContactPhone};return s(r)},getPayInfo:function(t,n){var r=t;var i="";switch(n.payChannel){case"unionpay":case"payBySelectBankCardPage":case"payByBindBankCardPage":i="bankCard";break;case"alipayTouch":case"alipayClient":i="alipay";break;case"wechat":i="qunar";break;case"wechatDirectly":i="wechatDirectly";break}var s={orderNo:r.qunarOrderNo,contactPhone:r.qunarOrderContactPhone,pay12306SuccInfo:{payIndex:n.payIndex,payPrice:n.payPrice,payType:i}};return s},syncPayChannelToServer:function(t,n,r){var i=this.getPayInfo(t,n);var s=$.extend({},i,r);return u(s)},syncPaySucToServer:function(t,n){var r=this.getPayInfo(t,n);return a(r)}};e.exports=new f},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var a=n(496);var f=function(e){function t(e,n,r){s(this,t);return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r))}u(t,e);i(t,[{key:"prepareParamsForWapBuiness",value:function(t){console.log("prepareParamsForWapBuiness:",arguments);var n={bankId:this.bankId,businessType:"1"};r(t||{},n);console.log("prepareParamsForWapBuiness params:",t);return t}}]);return t}(a);e.exports=f},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=l(i);var o=n(311);var u=l(o);var a=n(422);var f=l(a);var d=function(e){function t(e){c(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.id="loginProof";n.func=e;n.excludeRetryReason=[];return n}p(t,e);r(t,[{key:"func3W",value:function(){return(0,u.default)(this.func)}},{key:"funcMobile",value:function(){return(new f.default(this.func)).run()}}]);return t}(s.default);e.exports=d},function(e,t,n){"use strict";function c(e){return e&&e.__esModule?e:{"default":e}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=n(416);var o=c(s);var u=n(515);var a=c(u);var f=n(522);var l=c(f);var v=function(e){function t(e){h(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.options=e;n.id="secKill";return n}d(t,e);i(t,[{key:"abort",value:function(t){if(this.secKill){return this.secKill.abort(t)}}},{key:"destroy",value:function(){if(this.secKill){return this.secKill.destroy()}}},{key:"giveUp",value:function(){if(this.secKill){return this.secKill.giveUp()}}},{key:"setOptions",value:function(t){this.options=r({},this.options,t);if(this.secKill){return this.secKill.setOptions(this.options)}}},{key:"func3W",value:function(){this.secKill=new a.default(this.options);return this.secKill.run()}},{key:"funcMobile",value:function(){this.secKill=new l.default(this.options);return this.secKill.run()}}]);return t}(o.default);e.exports=v},function(e,t,n){"use strict";function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var u=n(516);var a=n(519);var f=n(449);var l=n(384);var c=n(314);var h=n(310);var p=n(521);var d=n(517);var v=n(365);var m=function(){function e(t){o(this,e);this.options=t;this.occupyCount=0;this.checkLoginCount=0;this.providerId="3w";this.watcherPrefix="appRob";this.config={wwwOccupyMode:"manual,auto",checkUserIntervalsSecond:[30,3*60],prepareQueryIntervalsSecond:[60,5*60]};this.ypOverride={};this.queryRunner=new u(r({},this.options));this.statistics=new p(this.options,this.providerId);this.checkUserInterval=this.config.checkUserIntervalsSecond[0];this.prepareQueryInterval=this.config.prepareQueryIntervalsSecond[0];this.debug=v("fusion:3w:appRob:SecKill")}i(e,[{key:"run",value:function(){var t=this;Console.log("pc-seckill-run:",arguments);this.dfd=$.Deferred();this.pc12306=new h;this.keepingLogin();this.runPrepareQuery();this.statistics.initStatistics();this.getConfig().then(function(){return t.login()}).then(this.queryAndOccupy.bind(this));return this.dfd.always(function(){return t.statistics.sendStatistics(true)})}},{key:"setOptions",value:function(t){this.options=r({},this.options,t);this.queryRunner.setOptions(t);this.statistics.setOptions(this.options)}},{key:"destroy",value:function(){this.statistics.offAll()}},{key:"giveUp",value:function(){this.statistics.giveUp()}},{key:"watch",value:function(t,n,r){return Common.sendWatchMessageLater({key:this.watcherPrefix+"_"+this.providerId+"_"+t,isSuccessful:n,duration:r})}},{key:"queryAndOccupy",value:function(){this.debug("queryAndOccupy:",arguments);return this.checkState().then(this.prepareQuery.bind(this)).then(this.queryLeftTicket.bind(this)).then(this.checkState.bind(this)).then(this.adapotOccupyForm.bind(this)).then(this.occupy.bind(this)).then(this.occupySuccess.bind(this,false),this.occupyFail.bind(this))}},{key:"retryOccupy",value:function(){return Common.delay(0).then(this._retryOccupy.bind(this))}},{key:"_retryOccupy",value:function(){function t(e){this.watch("retryCacheOccupy");return this.occupy(this.adapotOccupyForm(e)).then(this.occupySuccess.bind(this,true),this.occupyFail.bind(this))}function n(){return this.queryAndOccupy()}if(!this.occupyForm){return this.checkState().then(this.getLeftTicketFromCache.bind(this)).then(t.bind(this),n.bind(this))}return this.checkState().then(this.occupy.bind(this,this.occupyForm)).then(this.occupySuccess.bind(this,false),this.occupyFail.bind(this))}},{key:"getLeftTicketFromCache",value:function(){return this.queryRunner.getLeftTicketFromCache()}},{key:"occupySuccess",value:function(t,n){this.debug("occupySuccess",{fromCache:t,data:n});if(t){this.watch("occupySuccessByCache")}n.trainInfo=this.occupyForm.orderInfo.trainInfo;n.hasConfirmed=this.statistics.hasConfirmed;this.monitorLeftCacheState();this.occupyRunner=null;return this.dfd.resolve(n)}},{key:"monitorLeftCacheState",value:function(){function s(e){var n=Date.now(),r=$.Deferred();e=+e;t.offset=n-e;return r.resolve()}function o(){var e=Common.getTimeOffsetType(r,t.offset);Common.event.trigger("secKill.monitorLeftCacheState.occupySuccess",{providerId:t.providerId,updateTime:r,timeDiff:Date.now()-(r+t.offset)});var n="occupySuccessCacheState_"+i+"_"+e;t.watch(n)}var t=this,n=t.occupyForm,r=n.leftTicketUpdateTime,i=n.whatLine;Common.getServerTimeFromBaidu().then(s).then(o)}},{key:"updateYPOverride",value:function(){if(!this.occupyForm){return}var t=this.occupyForm.orderInfo.trainInfo,n=t.depDateForShow,r=t.from,i=t.to,s=t.no,o=t.seat;var u=[o];if(["ç¡¬åº§","äºç­åº§"].includes(o)){u.push("æ åº§")}this.ypOverride[r+"_"+i+"_"+s+"_"+n]={seats:u,ts:Date.now()}}},{key:"occupyFail",value:function(t){this.debug("occupyFail",t);this.occupyRunner=null;var n=void 0;var r="";var i=r;if(["noSeatDilemma"].includes(t)){n=t}else{var s=Common.lookUp(t);if(s.id==="unrecognizedException"&&s.origin){s=Common.lookUp(s.origin);if(s.id!=="unrecognizedException"){t=s.origin}}n=s.id;r=s.display;i=s.origin}this.debug("secKill.occupyFail",t,"["+n+"]"+i);Common.event.trigger("secKill.occupyFail",{providerId:this.providerId,error:"["+n+"]"+i});switch(n){case"ypNotEnough":case"noYpInfoProvided":case"seatTypeNotAvailable":this.updateYPOverride();this.occupyForm=null;return this.retryOccupy();case"notStartSell":case"ticketInfoExpire":case"particularTrainOfParticularDateNotFound":case"queryLeftTicketFail":case"notAllowedToSell":case"systemBusy":case"systemMaintenance":case"enDecrypt":case"stationNotSupported":case"checkFailBeforeOccupy":case"queueing":case"passcodeNotCorrect":case"getCheckCodeFail":case"getPasscodeNewFail":case"confirmBookingFail":case"subtractTicketFail":case"errorsOrderChange":case"networkProblem":case"submitFailAndRetry":case"getWaitTimeBuyTicketFail":case"movedTemporarily":case"operationFailed":case"preSubmitOrderDenied":case"connectRefused":case"retryLater":case"signFail":case"iPForbid":case"systemError":case"badGateway":case"queueingAbnormal":case"noUnpayOrder":case"requestFail":case"fetchPasscodeFail":case"imageLoadFail":case"visitTooFrequent":case"noDynamicJs":case"serviceUnavailable":case"unidentifiedError":case"notFound":case"noRespData":case"retryQueryLeftTicket":case"requestUnsent":case"decryptResultErorr":case"highFrequencyError":this.occupyForm=null;return this.retryOccupy();case"notLogin":case"loginInOtherPlaces":return this.login().then(this.retryOccupy.bind(this));default:this.watch("runner_fail_"+n);this.dfd.reject(t);break}}},{key:"abort",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"aborted";this.dfd&&this.dfd.reject(t);this.queryRunner&&this.queryRunner.abort(t);this.occupyRunner&&this.occupyRunner.abort(t);this.pc12306.abortAll()}},{key:"checkState",value:function(){var t=$.Deferred();if(this.dfd.state()!=="pending"){return t.reject()}return t.resolve.apply(t,arguments)}},{key:"runPrepareQuery",value:function(){var t=this;if(this.dfd.state()!=="pending"){return}var n=function(){if(t.dfd.state()==="pending"&&!t.occupyRunner){return t.prepareQuery()}};Common.safeDelay(this.prepareQueryInterval*1e3).then(n).then(this.runPrepareQuery.bind(this))}},{key:"prepareQuery",value:function(){var t=this;var n=this.options.order12306Account;if(!n){return $.Deferred().resolve("no need login")}return this.pc12306.leftTicketInit().then(function(){return t.pc12306._getMyPassengers()}).then(null,function(){return $.Deferred().resolve()})}},{key:"sendLoginWather",value:function(t,n){var r=this;this.queryRunner.analyzeLines().then(function(e){var i=e.isMatch?"secKill":"selfRob";r.watch("login_"+i,t);var s="unknown";var o="";if(!t&&n){n=Common.lookUp(n);if(n&&n.id){s=n.id;o=n.origin}r.watch("login_"+i+"_fail_"+s,t)}Common.event.trigger("secKill.login",{whatLine:i,isSuccessful:t,providerId:r.providerId,errorId:s,errorOrigin:o})})}},{key:"login",value:function(){var t=this;this.debug("login");var n=this.options.order12306Account;if(!n){return $.Deferred().resolve("no need login")}var r=function(r){var i=function(){var e=void 0;var i=/^.+@.+$/;switch(true){case r.email&&i.test(r.email):e=r.email;break;case(r.mobile||r.mobileNo)&&r.mobileVerify=="Y"&&t.phoneUnautorizedAccount!==n:e=r.mobile||r.mobileNo;break;default:e=r.user_name||n;break}return e}();var s=r.password||r.pwd;if(!i){t.watch("login_fail_usernameEmpty",false);return $.Deferred().reject("usernameOrPasswordNotProvided")}if(!s){t.watch("login_fail_passwordEmpty",false);return $.Deferred().reject("usernameOrPasswordNotProvided")}var o=function(n){var r;for(var i=arguments.length,s=Array(i>1?i-1:0),o=1;o<i;o++){s[o-1]=arguments[o]}n=Common.lookUp(n);if(n&&(n.retryCount>0||n.id==="notLogin")){var a=Date.now();var f=a-(t.offset||0);var l=60*60*1e3;var c=(f+8*l)%(24*l);var h=c>=6*l-1e4&&c<23*l+1e4;var p=0;if(!h){if(c<6*l-1e4){p=Math.max(6*l-6e4-c,0)}}return Common.delay(p).then(u)}return(r=$.Deferred()).reject.apply(r,[n].concat(s))};var u=function(){return t.rawLogin(i,s).then(undefined,o)};return u().done(t.sendLoginWather.bind(t,true)).fail(t.sendLoginWather.bind(t,false))};var i=function(r){if(t.options.appSeckill){return r}var i=Common.lookUp(r);if(i){if(["passwordNotCorrect","userLocked"].includes(i.id)){t.options.order12306Account=""}else if(i.id==="phoneUnautorized"){t.phoneUnautorizedAccount=n}}return $.Deferred().resolve()};return this.getUserInfo().then(this.checkIsSameUser.bind(this)).then(r).then(null,i)}},{key:"rawLogin",value:function(t,n){var r=new c;return r.login(t,n)}},{key:"getUserInfo",value:function(){var t=Common.getUserInfo();if(t&&t.pwd){return $.Deferred().resolve(t)}return Common.pull12306UserData()}},{key:"logout",value:function(){Common.clearCache(this.providerId)}},{key:"getUserInfoByOrderNo",value:function(){var t=this;var n=function(n){if(n&&n.accountName&&n.password){t.watch("getOrder12306Account",true);t.logout();return{user_name:n.accountName,pwd:n.password}}return r()};var r=function(){t.watch("getOrder12306Account",false);return $.Deferred().reject("qunarOrderAccountNotMatched")};return Common.postRequest("t_tTrain12306Account",{orderNo:this.options.orderNo}).then(n,r)}},{key:"checkIsSameUser",value:function(t){var n=this.options.order12306Account;var r=Common.isSameUser(n,t);if(r){return t}return this.getUserInfoByOrderNo()}},{key:"setIntervalByType",value:function(){function t(e){if(e.isMatch){this.checkUserInterval=this.config.checkUserIntervalsSecond[0];this.prepareQueryInterval=this.config.prepareQueryIntervalsSecond[0]}else{this.checkUserInterval=this.config.checkUserIntervalsSecond[1];this.prepareQueryInterval=this.config.prepareQueryIntervalsSecond[1]}}if(!this.getQueryLine){this.getQueryLine=new d(this.options)}return this.getQueryLine.analyzeLines().then(t.bind(this))}},{key:"keepingLogin",value:function(){var t=this;if(this.dfd.state()!=="pending"){return}this.setIntervalByType();var n=function(){if(t.dfd.state()==="pending"&&!t.occupyRunner){return t.login().then(undefined,function(){return $.Deferred().resolve()})}};Common.safeDelay(this.checkUserInterval*1e3).then(n).then(this.keepingLogin.bind(this))}},{key:"queryLeftTicket",value:function(){if(!this.queryRunner){this.queryRunner=new u(r({},this.options))}this.debug("queryLeftTicket");return this.queryRunner.run()}},{key:"getSeatTypeName",value:function(t){return t==="-"?"æ åº§":l._seat_type[t]}},{key:"adapotOccupyForm",value:function(t){var n=this;var r=t.resp,i=t.result;this.debug("adapotOccupyForm",{resp:r,result:i});var s=r.focused,o=r.serverIP,u=r.updateTime;var a=this.options.passengers;var f=Date.now();Common.event.trigger("secKill.querySuccess",{providerId:this.providerId,serverIP:o});s.forEach(function(e){var t=e.focusRule,r=e.seatYpMap,i=e.trainInfo,s=i.depDateForShow,o=i.from,u=i.to,a=i.no;var l=[];var c=n.ypOverride[o+"_"+u+"_"+a+"_"+s];var h=[];if(c&&f-c.ts<120*1e3){h=c.seats}e.ypWeight=t.seatList.reduce(function(e,t){var i=n.getSeatTypeName(t);var s=r[t];if(h.includes(i)){s=0}l.push({count:s,seatType:i,seatCode:t});return e+s},0);l.sort(function(e,t){return t.count-e.count});e.seatWithYp=l});s.sort(function(e,t){return t.ypWeight-e.ypWeight});var l=s[0].trainInfo;if(s[0].seatWithYp){var c=s[0].seatWithYp[0];if(!(c.seatType==="æ åº§"&&["ç¡¬åº§","äºç­åº§"].includes(l.seat))){l.originSeat=l.seat;l.originCandidateSeats=l.candidateSeats;l.seat=c.seatType;l.candidateSeats=s[0].seatWithYp.slice(1).map(function(e){return e.seatType})}}if(!l.departureTime){l.departureTime=(l.depDateForShow+s[0].start_time).replace(/[^\d]/g,"")}this.occupyForm={whatLine:i.whatLine,leftTicketUpdateTime:u,orderInfo:{trainInfo:s[0].trainInfo,trainData:s[0],passengers:a}};return this.occupyForm}},{key:"noSeatDilemmaHandler",value:function(t){var n=t.ticketResult.some(function(e){return e.seat_name==="æ åº§"});if(!n){return t}var r=this.occupyForm.orderInfo.trainInfo;if([r.seat].concat(s(r.candidateSeats)).includes("æ åº§")){return t}return $.Deferred().reject("noSeatDilemma")}},{key:"getConfig",value:function(){var t=this;return Common.getRenamedConfig({config:"json.hy.secKill"}).then(function(e){var n=e.config;if(n){t.config=r({},t.config,n);window.secKillIPLogin=(t.config.ipLogin||"")+""}})}},{key:"sendOccupyWather",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var r=arguments[2];var i=arguments[3];this.watch("occupy"+n+"_"+t,r);var s="unknown";var o="";var u=void 0;if(!r&&i){var a=Common.lookUp(i);if(a&&a.id){s=a.id;o=a.origin}this.watch("occupy"+n+"_"+t+"_fail_"+s,r)}if(r&&i){u=Common.deepGet(i,"ticketResult.0.sequence_no")}Common.event.trigger("secKill.occupy",{whatLine:t,occupyRunnerId:n,providerId:this.providerId,isSuccessful:r,orderNo12306:u,errorId:s,errorOrigin:o})}},{key:"occupy",value:function(t){var n=this;this.debug("occupy",t);this.wwwOccupyModeArray=(this.config.wwwOccupyMode||"manual,auto").split(",");var r=this.wwwOccupyModeArray[this.occupyCount%this.wwwOccupyModeArray.length];var i=["auto","manual"];if(i.includes(r)){this.occupyRunnerId=r}else{this.occupyRunnerId=i[Math.round(Math.random())]}if(this.occupyRunnerId==="auto"){this.occupyRunner=new a(t.orderInfo)}else{this.occupyRunner=new f(t)}this.occupyCount+=1;Common.event.trigger("secKill.occupyStart",{providerId:this.providerId,occupyRunnerId:this.occupyRunnerId});var s=function(t){var r=Common.lookUp(t);if(r&&r.errId==="notLogin"){return n.login().then(function(){return n.occupyRunner.run()}).then(n.noSeatDilemmaHandler.bind(n))}return t};return this.occupyRunner.run().then(this.noSeatDilemmaHandler.bind(this),s).done(this.sendOccupyWather.bind(this,t.whatLine,this.occupyRunnerId,true)).fail(this.sendOccupyWather.bind(this,t.whatLine,this.occupyRunnerId,false))}}]);return e}();e.exports=m},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){var n=[];var r=true;var i=false;var s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=true;s=a}finally{try{if(!r&&o["return"])o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var u=n(381);var a=n(517);var f=n(389);var l=n(398);var c=n(518);var h=n(310);var p=n(365);var d=function(){function e(t){o(this,e);this.options=t;this.watcherPrefix="appRob";this.id="queryLeftTicket";this.interface="www";this.providerId="3w";this.poolLimit=1;this.minQueryInterval=1e3;this.lastQueryTime=0;this.poolSize=0;this.pollingCount=0;this.pollingTotalTime=0;this.lastBatchWatcherTime=0;this.batchWatcherData={};this.startWatcherData={};this.queryFailCount=0;this.robType="selfRob";this.defaultConfig={checkDuplicate:false,poolLimit:1,minQueryInterval:2e3,poolLimitOfKillTime:3,minQueryIntervalOfKillTime:0,poolLimitOfStormTime:5,minQueryIntervalOfStormTime:0,queryConfigInterval:1*60*60*1e3,timeoutPerQuery:1e4,timeoutPerQuerySecKill:4e3,addDFPCookie:false,queryNoCookie:true,selfRobIPMode:"group",secKillIPMode:"group",cachedLeftTicketValidSeconds:60};this.config=i({},this.defaultConfig);this.getConfigTimer=0;this.getQueryLine=new a(this.options,this.providerId);this.releaseTime=new c;this.injectDFP=new l;this.queryCount=0;this.leftTicketCache=[];this.sentCache={};this.sentCacheMaxLive=3*60*1e3;this.debug=p("util:3w:appRob:QueryLeftTicket")}s(e,[{key:"setOptions",value:function(t){this.options=i({},this.options,t);this.debug("queryleftTicket-setoptions:",this.options);this.getQueryLine.setOptions(this.options)}},{key:"run",value:function(){var t=this;this.dfd=$.Deferred();this.lastBatchWatcherTime=0;this.initAPI();this.debug("queryleftTicket-run:",this.options);this.polling();this.heartbeatWatcher();this.getConfig();var n=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++){r[i]=arguments[i]}t.stopIPEvaluation();Common.delay(2e3).then(function(){return t.sendBatchWatcher(true)});t.debug.apply(t,["QueryLeftTicket success"].concat(r))};var r=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++){r[i]=arguments[i]}t.sendBatchWatcher(true);t.debug.apply(t,["QueryLeftTicket fail"].concat(r))};return this.dfd.done(n).fail(r)}},{key:"initAPI",value:function(){this.pc12306=new h}},{key:"startIPEvaluation",value:function(){if(!this.ipEvaluationRunner){var t={};this.ipEvaluationRunner=new f(t);this.ipEvaluationRunner.run()}}},{key:"stopIPEvaluation",value:function(){if(this.ipEvaluationRunner){this.ipEvaluationRunner.stop();this.ipEvaluationRunner=null}}},{key:"getConfig",value:function(){function n(e){var n=e.allBizTypeConfigs.configMap;if(n){try{var s=JSON.parse(n["json.hy.secKill"]),o=s.queryOptions,u=s.mobileQueryOptions,a=s.tvQueryOptions,f=s.tvMobileQueryOptions,l=s.addDFPCookie,c=l===undefined?t.defaultConfig.addDFPCookie:l,h=s.queryNoCookie,p=h===undefined?t.defaultConfig.queryNoCookie:h,d=s.cachedLeftTicketValidSeconds,v=d===undefined?t.defaultConfig.cachedLeftTicketValidSeconds:d;if(t.interface!=="www"&&u){o=u}if(Common.isTV()){if(a){o=a}if(t.interface!=="www"&&f){o=f}}var m=o.queryConfigInterval||t.defaultConfig.queryConfigInterval;t.config=i({},t.defaultConfig,o,{addDFPCookie:c,queryNoCookie:p,cachedLeftTicketValidSeconds:v});clearTimeout(t.getConfigTimer);t.getConfigTimer=setTimeout(t.getConfig.bind(t),m)}catch(g){r()}}else{r()}}function r(){t.config=i({},t.defaultConfig);clearTimeout(t.getConfigTimer);t.getConfigTimer=setTimeout(t.getConfig.bind(t),t.defaultConfig.queryConfigInterval)}var t=this;if(t.dfd.state()!=="pending"){return}Common.postRequest("t_tTrainConfig").then(n,r)}},{key:"abort",value:function(t){this.dfd&&this.dfd.reject(t);this.pc12306&&this.pc12306.abortAll();this.stopIPEvaluation()}},{key:"polling",value:function(){if(this.dfd.state()!=="pending"){return}var t=Date.now();if(t-this.lastQueryTime<this.minQueryInterval){clearTimeout(this.pollingTimer);this.pollingTimer=setTimeout(this.polling.bind(this),this.minQueryInterval-(t-this.lastQueryTime));return}this.lastQueryTime=t;if(this.poolSize<this.poolLimit){this.query();this.polling()}}},{key:"analyzeLines",value:function(){return this.getQueryLine.analyzeLines()}},{key:"shouldChangeToSecKill",value:function(t){var n=this;if($.isEmptyObject(t.queryLine)||t.isMatch||!this.options.order12306Account){return $.Deferred().resolve(t)}else{return this.releaseTime.checkReleaseTime(t.queryLine).then(function(e){var r=e.isReleaseTime,s=e.killStart;if(r){n.debug("shouldChangeToSecKill");if(t.whatLine&&t.whatLine=="serverLine"){return $.Deferred().reject()}t=i({},t);t.isMatch=true;t.killStart=s;t.whatLine="secKill"}return $.Deferred().resolve(t)})}}},{key:"query",value:function(){var t=this;this.debug("query",this.providerId,this.poolSize);var n=this;var r=false;n.poolSize+=1;var i=function(){if(r)return;r=true;n.poolSize=Math.max(0,n.poolSize-1);t.polling()};n.getQueryLine.getLine().then(n.shouldChangeToSecKill.bind(n)).then(n._query.bind(n)).always(i);Common.delay(60*1e3).then(i)}},{key:"_query",value:function(t){function y(e,n,r,i){this.debug("prepareBatchWatcher:",arguments);this.prepareBatchWatcher(e,t.whatLine);if(e==="success"){this.monitorLeftCacheState(n.updateTime,t.whatLine,t.offset)}if(e==="fail"){var s="unkown";var o="";if(i&&+i!==200){s=i}else{s=Common.lookUp(n||r);if(s.id){o=s.origin||s.display;s=s.id}}this.prepareBatchWatcher("fail_"+s,t.whatLine,o)}}function b(e){u.debug("querySuccess:",arguments);var t=u.dfd.state()==="pending"&&e.resp.focused&&e.resp.focused.length;E(t,e.result);e.resp.focused&&e.resp.focused.length?this.saveQueryResult(e):null;if(t){Common.storeInfo("querySuccess",{orderNo:u.options.orderNo,outTime:Date.now()+2*60*1e3},true);QunarAPI.train.triggerEvent({event:"querySuccess",data:{orderNo:u.options.orderNo}});u.queryFailCount=0;u.dfd.resolve(e);return e}}function w(e){u.debug("queryFail:",arguments);E(false,null,e);if(u.queryFailCount<5){u.queryFailCount++}else{u.queryFailCount=0;QunarAPI.train.triggerEvent({event:"queryFail",data:{orderNo:u.options.orderNo}})}}function E(e,t,n){var r=Date.now()-g;u.pollingCount+=1;u.pollingTotalTime+=r;Common.event.trigger("secKill.afterQueryLeftTicket",{providerId:u.providerId,isSuccessful:e,timeCost:r,options:u.options,result:t,reason:n});QunarAPI.train.triggerEvent({event:"tvRob.afterQueryLeftTicket",data:{isSuccessful:e,result:t,reason:n}})}this.debug("_query:",arguments,this.config);var n=Date.now();if(!t.isMatch&&t.restTime&&n<t.restTime){var r=t.restTime-n;return Common.delay(r)}if(this.options.appSeckill||this.options.selfGrabStatus){this.startIPEvaluation()}if($.isEmptyObject(t.queryLine)){if(t.killStart===null){return Common.delay(1e3)}var i=t.killStart-n;this.debug("timeDiff:",t.killStart,n,i);return Common.delay(i)}this.sendStartWatcher(t);this.stopIPEvaluation();this.poolLimit=this.config.poolLimit;this.minQueryInterval=this.config.minQueryInterval;this.timeoutPerQuery=this.config.timeoutPerQuery;var s=this.config.selfRobIPMode||this.defaultConfig.selfRobIPMode;if(t.isMatch){s=this.config.secKillIPMode||this.defaultConfig.secKillIPMode;var o=n-t.killStart;if(o>0){this.timeoutPerQuery=this.config.timeoutPerQuerySecKill;this.poolLimit=this.config.poolLimitOfKillTime;this.minQueryInterval=this.config.minQueryIntervalOfKillTime;if(o<1e3*120){this.poolLimit=this.config.poolLimitOfStormTime;this.minQueryInterval=this.config.minQueryIntervalOfStormTime}this.polling()}}var u=this;var a=t.queryLine.line,f=a.dptCode,l=a.arrCode,c=a.date,h=a.requestType;var p=u.getFromAndToCityCode(f,l);var d=p.dptCode;var v=p.arrCode;var m=h=="ADULT"?false:true;var g=Date.now();return this.sendQuery(d,v,c,m,s).done(y.bind(this,"success")).fail(y.bind(this,"fail")).then(u.getQueryLine.assembleLeftTicket.bind(u.getQueryLine,t,this.interface)).then(u.pushData.bind(u,t.whatLine)).then(b.bind(u),w.bind(u))}},{key:"saveQueryResult",value:function(t){if(this.dfd.state()=="pending"){return}this.leftTicketCache.push({ts:Date.now(),data:t})}},{key:"getLeftTicketFromCache",value:function(){var t=this.leftTicketCache.shift();var n=Date.now();while(t&&n-t.ts>this.config.cachedLeftTicketValidSeconds*1e3){t=this.leftTicketCache.shift()}if(t&&n-t.ts<=this.config.cachedLeftTicketValidSeconds*1e3){return $.Deferred().resolve(t.data)}else{return $.Deferred().reject()}}},{key:"canOccupy",value:function(t,n){var r=["selfRob","secKill"].includes(t)&&this.options.order12306Account&&n.result.lineTag!="similarityLine";if(r&&this.providerId==="mobile"){r=Common.deepGet(n,"resultLeftTicket.trainList.0.note")===""}return r}},{key:"needPush",value:function(t,n){if(t==="secKill"){return false}if(!this.config.checkDuplicate){return true}var r=n.resultLeftTicket,i=r.arrCode,s=r.interfaceType,o=r.date,u=r.dptCode,a=r.trainList;var f=s==="www"?"secretStr":"location_code";var l=Common.deepGet(a[0],"queryLeftInfo."+f);var c=[u,i,o,l].join("_");var h=Date.now();if(this.sentCache[c]){this.prepareBatchWatcher("duplicate",t);this.debug("duplicate",c,a[0].queryLeftInfo);return false}this.sentCache[c]=h;for(var p in this.sentCache){if(h-this.sentCache[p]>this.sentCacheMaxLive){delete this.sentCache[p]}}return true}},{key:"pushData",value:function(t,n){function a(){this.prepareBatchWatcher("pushData_Success",t);this.debug("pushData_succ:",arguments)}function f(){this.prepareBatchWatcher("pushData_Fail",t);this.debug("pushData_fail:",arguments)}this.debug("pushData:",arguments);var r=$.Deferred();if($.isEmptyObject(n.resultLeftTicket)){return r.reject({whatLine:t})}var s=this.needPush(t,n);if(s||t==="secKill"){this.prepareBatchWatcher("matched",t)}var o={};if(["selfRob","secKill"].includes(t)){o.channel="appsameline"}if(s&&t=="selfRob"&&n.result.lineTag){this.prepareBatchWatcher("matched",n.result.lineTag)}var u=i({},n.resultLeftTicket,o);s&&Common.ajax("https://trainrefresh.qunar.com/bypass/api/pushData",{data:JSON.stringify(u),type:"post",header:{"Content-type":"application/json"}}).then(a.bind(this),f.bind(this));if(this.canOccupy(t,n)){this.prepareBatchWatcher("matchedWithAccount",t);return r.resolve(n)}return r.reject({whatLine:t})}},{key:"heartbeatWatcher",value:function(){var t=this;setTimeout(function(){if(t.dfd.state()==="pending"){t.sendBatchWatcher();t.heartbeatWatcher()}},6e4)}},{key:"monitorLeftCacheState",value:function(t,n,r){var i=Common.getTimeOffsetType(t,r);Common.event.trigger("secKill.monitorLeftCacheState",{type:i,providerId:this.providerId});var s="cacheState_"+i;this.prepareBatchWatcher(s,n)}},{key:"prepareBatchWatcher",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"selfRob";var r=arguments[2];if(["selfRob","secKill"].includes(n)){this.robType=n}Common.event.trigger("secKill.query",{type:t,whatLine:n,failOrigin:r,providerId:this.providerId});var i=n+"_"+t;if(!this.batchWatcherData[i]){this.batchWatcherData[i]=0}this.batchWatcherData[i]+=1}},{key:"sendStartWatcher",value:function(t){var n=t.whatLine;if(!this.lastBatchWatcherTime){this.lastBatchWatcherTime=Date.now()}if(!this.startWatcherData[n]){this.startWatcherData[n]=true;Common.event.trigger("secKill.queryStart",{providerId:this.providerId,result:t});Common.watcherLater({key:this.watcherPrefix+"_"+this.providerId+"_"+this.id+"_"+n+"_start"});if(this.options.order12306Account){Common.watcherLater({key:this.watcherPrefix+"_"+this.providerId+"_"+this.id+"_"+n+"_startWithAccount"})}}}},{key:"sendBatchWatcher",value:function(){var t=Date.now();var n=this.watcherPrefix+"_"+this.providerId+"_"+this.id;var i=Object.entries(this.batchWatcherData).map(function(e){var t=r(e,2),i=t[0],s=t[1];return{key:n+"_"+i,count:s}});if(!i.length){return}if(this.lastBatchWatcherTime){i.push({key:n+"_online",count:1,duration:t-this.lastBatchWatcherTime})}Common.watcherLater(i);this.batchWatcherData={};this.lastBatchWatcherTime=t}},{key:"sendQuery",value:function(t,n,r,i,s){function f(e){if(e){a.header.Cookie=a.header.Cookie+"; "+e}if(this.config.queryNoCookie){delete a.header.Cookie;a.jsCookie=false;a.noCookie=true}return this.pc12306.leftTicketQuery(t,n,r,i,a)}function l(){var e=pc12306.getStationName(t);var i=pc12306.getStationName(n);var s=r.replace(/^(\d{4})(\d{2})(\d{2})/,"$1-$2-$3");return["_jc_save_fromStation="+escape(e+","+t),"_jc_save_toStation="+escape(i+","+n),"_jc_save_fromDate="+escape(s),"_jc_save_toDate="+escape(s),"_jc_save_wfdc_flag=dc"]}var o=this.timeoutPerQuery||this.config.timeoutPerQuery;r=r.slice(0,4)+"-"+r.slice(4,6)+"-"+r.slice(6);var u=l().join("; ");var a={timeout:o+Math.min(1e3,o*.2),httpTimeout:o,noRetry:true,jsCookie:true,ipMode:s,header:{Connection:"close",Cookie:u,"User-Agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.67 Safari/537.36"}};if(this.config.addDFPCookie){return this.injectDFP.getDFP4Cookie().then(f.bind(this))}return f.call(this)}},{key:"getFromAndToCityCode",value:function(t,n){var r=false,i=t,s=n,o=t,a=n,f=u.length;for(var l=0;l<f;l++){var c=u[l],h=c.length,p=c.includes(i),d=c.includes(s);if(p){o=c[Math.floor(Math.random()*h)]}if(d){a=c[Math.floor(Math.random()*h)]}if(p&&d){r=true;break}}if(r){return{dptCode:i,arrCode:s}}else{return{dptCode:o,arrCode:a}}}}]);return e}();e.exports=d},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var o=n(381);var u=n(365);var a=function(){function e(t,n){s(this,e);this.providerId=n;this.defaultOptions={selfGrabStatus:false};this.options=r({},this.defaultOptions,t);this.serverLine=[];this.similarityLines=[];this.offset=null;this.getSelfGrabCount=0;this.config={waitForSaleMinute:5,preKillSecond:5,killMinute:10,preNotifyMinute:5,restMinuteAfterKillEnd:2,selfGrabMode:["order","server","server"]};this.pullLineParams={deviceId:"",channel:"app",interfaceType:this.providerId=="3w"?"www":"wl"};this.lastPullLine=0;this.lastPullSimilarityLine=0;this.pullLineInterval=30*1e3;this.pullSimilarityLineInterval=2*60*1e3;this.restTime=null;this.debug=u("util:"+(this.providerId||"")+":appRob:GetQueryLine")}i(e,[{key:"setOptions",value:function(t){this.options=r({},this.options,t)}},{key:"setTimeOffset",value:function(t){function r(e){var t=Date.now(),r=$.Deferred();e=+e;n.offset=t-e;return r.resolve()}var n=this;if(n.offset===null){return Common.getServerTimeFromBaidu().then(r).then(t.bind(n))}return t.call(n)}},{key:"getLine",value:function(){return this.setTimeOffset(this._getLine)}},{key:"_getLine",value:function(){this.debug("getLine_start:",this.options,this.serverLine);var t=this,n={saleStart:null,killStart:null,restTime:this.restTime,offset:t.offset||0},r=$.Deferred();var i=Date.now();var s=i-(t.offset||0);var o=60*60*1e3;var u=(s+8*o)%(24*o);var a=u>=6*o-1e4&&u<23*o+1e4;if(!a){return r.resolve(n)}if(!t.options.appSeckill&&!t.options.showSelfGrab){return r.resolve(n)}if(!t.options.appSeckill&&t.options.showSelfGrab){if(!t.options.selfGrabStatus){n.killStart=Date.now()+2e3;return r.resolve(n)}return t.simulateSelfGrab(t.options.orderLine)}if(t.options.appSeckill&&!t.options.showSelfGrab){return t.analyzeLines().then(t.getSeckillLine.bind(t))}if(t.options.appSeckill&&t.options.showSelfGrab){if(!t.options.selfGrabStatus){return t.analyzeLines().then(t.getSeckillLine.bind(t))}else{return t.analyzeLines().then(t._getLine_.bind(t))}}return r.resolve(n)}},{key:"_getLine_",value:function(t){var n=this;var r=t.onSaleLines,i=t.isMatch;if(i){this.options.showSelfGrab=true;this.options.selfGrabStatus=true;return n.getSeckillLine(t)}else{return n.simulateSelfGrab(r)}}},{key:"getRandomIndex",value:function(t){return Math.floor(Math.random()*t)}},{key:"simulateSelfGrab",value:function(t){var n=this.config.selfGrabMode;var r=n[this.getSelfGrabCount%n.length]||"order";this.getSelfGrabCount+=1;this.debug("lineType",r);var i=this,s={saleStart:null,killStart:null,whatLine:"",isMatch:false,restTime:this.restTime,offset:i.offset||0},o=$.Deferred();i.checkServerLine();if(r==="order"){var u=t.length,a=i.getRandomIndex(u);s.queryLine=t[a]||{};s.whatLine="selfRob";return o.resolve(s)}else{var f=i.serverLine.length,l=i.getRandomIndex(f);if(f==0){return i.simulateSelfGrab(i.options.orderLine)}else{s.queryLine=i.serverLine[l]||{};s.whatLine="serverLine";return o.resolve(s)}}}},{key:"getSeckillLine",value:function(t){var n=this,r={saleStart:null,killStart:null,whatLine:"secKill",isMatch:t.isMatch,restTime:this.restTime,offset:n.offset||0},i=$.Deferred();if(t.secKillLines.length==0){if(t.futureLines.length>0&&t.onSaleLines.length==0){r.saleStart=t.saleStartTime;r.killStart=t.killStartTime}else if(t.futureLines.length==0&&t.onSaleLines.length>0){r.killStart=Date.now()+2e3}return i.resolve(r)}var s=t.secKillLines.length,o=n.getRandomIndex(s);r.saleStart=t.saleStartTime;r.killStart=t.killStartTime;if(Date.now()<t.killStartTime){r.queryLine={}}else{r.queryLine=t.secKillLines[o]||{}}return i.resolve(r)}},{key:"analyzeLines",value:function(){var t=this;return this.getConfig().then(function(){return t.setTimeOffset(t._analyzeLines)})}},{key:"_analyzeLines",value:function(){var t=this;var n=this,r=$.Deferred();var i=function(){var i=Date.now();var s=[];var o=[];var u=[];var a=null;var f=false;n.options.orderLine.forEach(function(e){var r=+Common.parseDateTime(e.line.startSaleTime+"")+n.offset;var a=r-t.config.waitForSaleMinute*60*1e3;var f=r+t.config.killMinute*60*1e3;var l=i>=a&&i<=f&&n.options.appSeckill;if(l){o.push(e)}if(!l&&r>i){s.push(e)}if(!l&&r<=i){u.push(e)}});if(o.length>0){f=true;a=+Common.parseDateTime(o[0].line.startSaleTime+"")+n.offset}else if(o.length==0&&s.length>0){var l=[];s.forEach(function(e){l.push(+Common.parseDateTime(e.line.startSaleTime+"")+n.offset)});a=Math.min.apply(Math,l)}var c=a&&a-t.config.waitForSaleMinute*60*1e3,h=a&&a-t.config.preKillSecond*1e3,p=a&&a+t.config.killMinute*60*1e3;if(o.length&&p){t.restTime=p+t.config.restMinuteAfterKillEnd*60*1e3}return r.resolve({config:t.config,onSaleLines:u,secKillLines:o,futureLines:s,saleStartTime:a,isMatch:f,waitStartTime:c,killStartTime:h,killEndTime:p})};return i()}},{key:"getConfig",value:function(){var t=this;if(this.configUpdated){return $.Deferred().resolve()}return Common.getRenamedConfig({config:"json.hy.secKill"}).then(function(e){var n=e.config;if(n){t.config=r({},t.config,n);t.configUpdated=true}})}},{key:"getOutIp",value:function(){function n(e){t=r({},e);return Common.ajax("https://trainrefresh.qunar.com/bypass/api/pushIp?deviceId="+e.gid+"&source=app")}function i(e){if(e&&e.errCode==0){Common.storeInfo("outIP",{ip:e.data})}else{Common.storeInfo("outIP",{ip:t.gid})}}var t={};return Common.getDeviceInfo().then(n).then(i,i)}},{key:"preparePullServerLine",value:function(){if(this.readyToPullServerLine){return $.Deferred().resolve()}var t=this;var n=function(){var n=$.Deferred();t.pullLineParams.deviceId=(Common.getStoredInfo("outIP")||{}).ip||"";t.readyToPullServerLine=true;return n.resolve()};return this.getOutIp().then(n,n)}},{key:"checkServerLine",value:function(){var t=this;var n=function(){var n=Date.now();if(n-t.lastPullLine>t.pullLineInterval){t.lastPullLine=n;t.produceServerLine()}if(n-t.lastPullSimilarityLine>t.pullSimilarityLineInterval&&t.options.orderLine){t.lastPullSimilarityLine=n;t.pullSimilarityLine()}};return this.preparePullServerLine().then(n)}},{key:"getPullSimilarityLineParam",value:function(t){function i(){var e=[];t.forEach(function(t){e.push({dptCode:t.line.dptCode,arrCode:t.line.arrCode,date:t.line.date})});return e}var n=r({},this.pullLineParams,{lines:i()});return n}},{key:"pullSimilarityLine",value:function(){function r(e){if(e.status==0&&e.data&&e.data.lines){t.similarityLines=e.data.lines.filter(function(e){return e.line&&e.trainSeatMap})}}var t=this;var n=Common.touchDomainHelper.getTouchUrl("https://touch.train.qunar.com/api/json/refresh/pullLineAndTrain");return Common.ajax(n,{data:JSON.stringify(t.getPullSimilarityLineParam(t.options.orderLine)),type:"post",beforeSend:t.setRequestHeader.bind(t)}).then(r.bind(t))}},{key:"produceServerLine",value:function(){function n(e){if(e.success&&e.data){t.serverLine=e.data.batchData;var n=e.data.control.refreshMaxSeconds;var r=e.data.control.sleepMills;if(n){t.pullLineInterval=n*1e3}else if(r){t.pullLineInterval=r}else{t.pullLineInterval=30*1e3}}}var t=this;Common.ajax("https://trainrefresh.qunar.com/bypass/api/pullLine",{data:JSON.stringify(t.pullLineParams),type:"post",beforeSend:t.setRequestHeader.bind(t)}).then(n.bind(t))}},{key:"setRequestHeader",value:function(t){t.setRequestHeader("Content-type","application/json")}},{key:"isSameCity",value:function t(e,n){var r=o.length,t=false;for(var i=0;i<r;i++){var s=o[i],u=s.includes(e),a=s.includes(n);if(u&&a){t=true;break}}return t}},{key:"getSimilarityLine",value:function(t){var n={};if(!this.similarityLines.length){return n}var i=this.similarityLines.length;for(var s=0;s<i;s++){var o=this.similarityLines[s];if(this.isSameCity(o.line.dptCode,t.dptCode)&&this.isSameCity(o.line.arrCode,t.arrCode)&&o.line.date==t.date){n=r({},o);break}}if(!$.isEmptyObject(n)){n.focusTrainList=[];for(var u in n.trainSeatMap){var a=n.trainSeatMap[u];var f=u.split("_");var l=a.split("");var c={dptTime:f[0],trainNo:f[1],dptCode:f[2],arrCode:f[3]};n.focusTrainList.push({train:c,seatList:l})}}return n}},{key:"_assembleLeftTicket",value:function(t,n,r,i){var s=this,o=[],u=t.focusTrainList,a=n=="www"?r.data:r.ticketResult,f=u.length,l=a.length;for(var c=0;c<f;c++){for(var h=0;h<l;h++){if(n=="www"){if(u[c].train.dptCode==a[h].queryLeftNewDTO.from_station_telecode&&u[c].train.arrCode==a[h].queryLeftNewDTO.to_station_telecode&&u[c].train.trainNo==a[h].queryLeftNewDTO.station_train_code&&(!u[c].train.dptTime||u[c].train.dptTime==a[h].queryLeftNewDTO.start_time.split(":").join(""))){a[h].trainInfo=u[c].trainInfo;a[h].focusRule=u[c];a[h].seatYpMap=s.getSeatYpMap3W(a[h].queryLeftNewDTO);o.push(a[h])}}else{if(a[h].location_code&&u[c].train.dptCode==a[h].from_station_telecode&&u[c].train.arrCode==a[h].to_station_telecode&&u[c].train.trainNo==a[h].station_train_code&&(!u[c].train.dptTime||u[c].train.dptTime==a[h].start_time.split(":").join(""))){a[h].trainInfo=u[c].trainInfo;a[h].focusRule=u[c];a[h].seatYpMap=s.getSeatYpMapMobile(a[h]);o.push(a[h])}}}}var p=n=="www"?s.getTrainList3W(o):s.getTrainListMobile(o);var d=[];var v=[];for(var m=0;m<p.length;m++){if(o[m].focusRule.seatList.length==0){d.push(p[m]);i&&v.push(o[m])}else{for(var g=0;g<o[m].focusRule.seatList.length;g++){if(p[m].seatYpMap[o[m].focusRule.seatList[g]]>0){d.push(p[m]);i&&v.push(o[m]);break}}}}var y={};y.lastTrainList=d;if(i){y.focused=v}return y}},{key:"assembleLeftTicket",value:function(t,n,i){var s=this,o=t.queryLine.line,u=t.whatLine=="selfRob"?s.getSimilarityLine(o):{},a={};var f=s._assembleLeftTicket(o,n,i,true);var l=t.whatLine=="selfRob"&&!$.isEmptyObject(u)?s._assembleLeftTicket(u,n,i,false):{lastTrainList:[]};var c=f.lastTrainList;var h=l.lastTrainList;i.focused=f.focused;if(c.length>0||h.length>0){a=r({},this.pullLineParams,{dptCode:o.dptCode,arrCode:o.arrCode,date:o.date,requestType:"ADULT",trainList:s.getLastTrainList(c,h,t),cdnIp:i.serverIp||"",refreshFunc:"FOCUS_YP",cdnCacheDate:s.getCdnCacheDate(i.updateTime)})}return{resultLeftTicket:a,result:t,resp:i}}},{key:"getLastTrainList",value:function(t,n,r){if(["serverLine","secKill"].includes(r.whatLine)){return t.concat(n)}if(t.length>0&&n.length==0){return t}if(t.length==0&&n.length>0){r.lineTag="similarityLine";return n}if(t.length>0&&n.length>0){var i=t.concat(n);r.lineTag="selfRobAndSimilarityLine";return i}return t.concat(n)}},{key:"getCdnCacheDate",value:function(t){if(!t){return null}var n=new Date(t);return Common.formatDate(n,"YYYYMMddHHMISS")}},{key:"getTrainList3W",value:function(t){var n=[],r=this;t.forEach(function(e){var t=e.queryLeftNewDTO;var i={trainNo:t.station_train_code,dpt:t.from_station_name,arr:t.to_station_name,dptCode:t.from_station_telecode,arrCode:t.to_station_telecode,dptTime:t.start_time.slice(0,2)+t.start_time.slice(3,5),arrTime:t.arrive_time.slice(0,2)+t.arrive_time.slice(3,5),duration:Common.formatDuration(t.lishi),note:e.buttonTextInfo,saleTime:"",seatTypes:t.seat_types,seatYpMap:r.getSeatYpMap3W(t),queryLeftInfo:{yp_info:t.yp_info,secretStr:decodeURIComponent(e.secretStr),from_station_name:t.from_station_name,to_station_name:t.to_station_name,train_no:t.train_no,station_train_code:t.station_train_code,seat_types:t.seat_types,from_station_telecode:t.from_station_telecode,to_station_telecode:t.to_station_telecode,location_code:t.location_code,pc_types:"",yp_info_cover:"",start_time:t.start_time,swz_num:t.swz_num,tz_num:t.tz_num,zy_num:t.zy_num,ze_num:t.ze_num,gr_num:t.gr_num,rw_num:t.rw_num,yw_num:t.yw_num,rz_num:t.rz_num,yz_num:t.yz_num,wz_num:t.wz_num,qt_num:t.qt_num,gg_num:t.gg_num,yb_num:t.yb_num}};n.push(i)});return n}},{key:"getTrainListMobile",value:function(t){var n=[],r=this;t.forEach(function(e){var t={trainNo:e.station_train_code,dpt:e.from_station_name,arr:e.to_station_name,dptCode:e.from_station_telecode,arrCode:e.to_station_telecode,dptTime:e.start_time.slice(0,2)+e.start_time.slice(3,5),arrTime:e.arrive_time.slice(0,2)+e.arrive_time.slice(3,5),duration:Common.formatDuration(e.lishi),note:e.message,saleTime:"",seatTypes:r.getSeatTypesMobile(e),seatYpMap:r.getSeatYpMapMobile(e),queryLeftInfo:{yp_info:e.yp_info,secretStr:"",from_station_name:e.from_station_name,to_station_name:e.to_station_name,train_no:e.train_no,station_train_code:e.station_train_code,seat_types:"",from_station_telecode:e.from_station_telecode,to_station_telecode:e.to_station_telecode,location_code:e.location_code,pc_types:"",yp_info_cover:e.yp_info_cover,start_time:e.start_time,swz_num:"",tz_num:"",zy_num:"",ze_num:"",gr_num:"",rw_num:"",yw_num:"",rz_num:"",yz_num:"",wz_num:"",qt_num:"",gg_num:"",yb_num:""}};n.push(t)});return n}},{key:"getSeatTypesMobile",value:function(t){var n=Common.parseYpInfo(t);var r="";for(var i in n){r+=n[i].seatTypeCode}return r}},{key:"getSeatYpMap3W",value:function(t){var n=t.seat_types;var r=n.split("").sort();var i={};for(var s=0;s<r.length;s++){if(r[s]==r[s+1]){r[s]="0";break}}r.forEach(function(e){if(t[Common.seatTypeMap[e]]=="æ"){i[e]=100}else if(t[Common.seatTypeMap[e]]=="æ "){i[e]=0}else{i[e]=+t[Common.seatTypeMap[e]]}});if("0"in i){i["-"]=i["0"];delete i["0"]}return i}},{key:"getSeatYpMapMobile",value:function(t){var n=Common.parseYpInfo(t);var r={};for(var i in n){if(i.toString()=="noSeat"){r["-"]=n[i].ticket}else{r[i]=n[i].ticket}}return r}}]);return e}();e.exports=a},function(e,t){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();e.exports=function(){function e(){r(this,e);this.releaseTimeRangeSeconds=[10,10*60];this.timeCache={}}n(e,[{key:"checkReleaseTime",value:function(t){function s(e){var t=e.getHours();var s=0;try{if(t===5||t===6){s=new Date(+e);s.setHours(6);s.setMinutes(0);var u=Math.round((e-s)/1e3);if(u>-r.releaseTimeRangeSeconds[0]&&u<r.releaseTimeRangeSeconds[1]){i.killStart=r.getEnterTimeByLine(n,+e,+s);i.isReleaseTime=true;return i}}}catch(a){console.log(a);o();return i}o();return i}function o(){r.timeCache={}}var n=t.line;var r=this;var i={isReleaseTime:false};return Common.getServerTimeFromBaidu().then(s)}},{key:"getEnterTimeByLine",value:function(t,n,r){if(!t){return new Date(r)}var i=t.date+"-"+t.arrCode+"-"+t.dptCode;if(!this.timeCache[i]){this.timeCache[i]=n}return new Date(this.timeCache[i])}}]);return e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=n(384);var o=n(318);var u=n(386);var a=n(520);var f=n(455);var l=n(310);var c=n(365)("fusion:pc:AutoSubmitOccupy");e.exports=function(){function e(t){i(this,e);this.id="auto";this.options=t}r(e,[{key:"run",value:function(){var t=this;this.pc12306=new l;return this.autoSubmitOrderRequest().then(this.confirmSingle.bind(this)).then(function(e){if(t.isAsync){return t.getWaitTime().then(t.resultOrderFroDcQueue.bind(t)).then(t.queryMyOrderNoComplete.bind(t))}return t.queryMyOrderNoCompleteContinuously(e)}).then(undefined,this.handleUnpayOrder.bind(this)).then(this.orderDataConvertor.bind(this))}},{key:"autoSubmitOrderRequest",value:function(){var t=this.options.trainData;var n=this.getSeatType();var r=this.getPassengers();var i=function(t){if(!t.status||!t.data){return s(t)}var n=t.data,r=n.submitStatus,i=n.smokeStr,o=n.isRelogin,u=n.errMsg;if(i){return s(i)}if(!r){if(o){return s("æªç»å½")}return s(u)}return t};var s=function(t){return $.Deferred().reject(t)};return this.pc12306.autoSubmitOrderRequest(t,r,n,false).then(i)}},{key:"abort",value:function(t){if(this.dfd){this.dfd.reject(t)}if(this.pc12306){this.pc12306.abortAll()}}},{key:"handleUnpayOrder",value:function(t){function r(e){c("handleUnpayOrder",t);if(Common.deepGet(e,"data.orderDBList.0.tickets.length")){var n=this.orderDataConvertor(e);var r=new f({orderInfo:{passengers:this.options.passengers,trainInfo:this.options.trainInfo}},n);if(r.isOrderMatch()){return $.Deferred().resolve(e)}}return $.Deferred().reject(t)}c("handleUnpayOrder",t);var n=Common.lookUp(t);if(n&&n.id==="existsUnpayOrder"){return this.pc12306.queryMyOrderNoComplete().then(r.bind(this))}return $.Deferred().reject(t)}},{key:"confirmSingle",value:function(t){var n=+t.data.ifShowPassCodeTime/3||1e3;var r=t.data.result.split("#");this.isAsync=r[3]==="1";return this.getQueueCountAsync(t).then(this.selfCoding.bind(this,t.data.ifShowPassCode)).then(Common.delay.bind(Common,n)).then(this.confirmSingleForQueueAsys.bind(this,r))}},{key:"getQueueCountAsync",value:function(t){var n=this.getSeatType();return this.pc12306.getQueueCountAsync(this.options.trainData,n,t.data.isCheckOrderInfo)}},{key:"selfCoding",value:function(t){var n=this;if(t!=="Y"){delete this.randCode;return}var r=this.pc12306.getGlobalState("queryCaptchaType")||"otn";var i=new(r==="otn"?u:a)("occupy");return i.run().then(function(e){return n.randCode=e})}},{key:"confirmSingleForQueueAsys",value:function(t){var n=this.getSeatType();var r=this.getPassengers();Common.event.trigger("occupy.confirm",{providerId:"3w"});return this.pc12306.confirmSingleForQueueAsys(t,r,n,this.randCode)}},{key:"getPassengers",value:function(){function s(e){r=t.passengerTypeTo12306(e.ticketType);i={passenger_name:e.name,passenger_id_type_code:t.idTypeTo12306(e.certType.code),passenger_id_no:e.certNo,passenger_type:r,ticket_type:r};if(r=="2"&&e.guardian){i.passenger_name=e.guardian.name;i.passenger_id_type_code=t.idTypeTo12306(e.guardian.certType.code);i.passenger_id_no=e.guardian.certNo}n.push(i)}var t=new o;var n=[];var r,i;this.options.passengers.map(s);return n}},{key:"getSeatType",value:function(){var t=this.options,n=t.trainData,r=t.trainInfo;var i=this.pc12306.parseYpInfo(n.queryLeftNewDTO);var o=s.converSeatType[r.seat]||"noSeat";return i[o].seatTypeCode}},{key:"orderDataConvertor",value:function(t){return this.pc12306.convert12306OrderTicket3WToConfirmSingleSuccessMobile(t)}},{key:"getWaitTime",value:function(t){var n=arguments,r=this;var i=t==="gc"?"gc":"dc",s=10;c("getWaitTime this:",this);var o=function(t){c("getWaitTime success:",n);var o=Common.deepGet(t,"data.orderId");var u=Common.deepGet(t,"data.msg");var f=Common.deepGet(t,"data.waitTime");if(o){return Common.delay(2e3).then(function(){return o})}else if(u){return $.Deferred().reject(u)}else if(s>0){if(f&&f>=r.queueWaitTimeLimit){return $.Deferred().reject("queueing")}s--;return Common.delay(2500).then(a)}return r.queryMyOrderNoCompleteForQueue(i)};var u=function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++){r[i]=arguments[i]}c("getWaitTime fail:",n,s);if(s>7){s--;return Common.delay(2500).then(a)}else{var o;return(o=$.Deferred()).reject.apply(o,r)}};var a=function(){return r.pc12306.queryOrderWaitTime(i).then(o.bind(r),u.bind(r))};return a()}},{key:"queryMyOrderNoCompleteForQueue",value:function(t){function n(e){if(e&&e.data&&e.data.orderDBList.length>0){return Common.delay(0).then(function(){return e.data.orderDBList[0].sequence_no})}else{var t=$.Deferred();return t.reject.apply(t,arguments)}}function r(e){var n=Common.lookUp(e);if(n.id==="queueing"){var r=Common.deepGet(e,"data.orderCacheDTO.waitTime");if(r&&r<this.queueWaitTimeLimit){return this.getWaitTime(t)}}var i=$.Deferred();return i.reject.apply(i,arguments)}return this.pc12306.queryMyOrderNoComplete().then(n.bind(this),r.bind(this))}},{key:"resultOrderFroDcQueue",value:function(t){function r(){n.resolve.apply(n,arguments)}function i(){n.reject({orderNo:t})}var n=$.Deferred();this.pc12306.resultOrderFroDcQueue(t).then(r,i);return n.promise()}},{key:"queryMyOrderNoComplete",value:function(){return this.pc12306.queryMyOrderNoComplete().then(undefined,this.delayAndQueryMyOrderNoComplete.bind(this)).then(undefined,this.delayAndQueryMyOrderNoComplete.bind(this))}},{key:"delayAndQueryMyOrderNoComplete",value:function(){return Common.delay(2*1e3).then(this.pc12306.queryMyOrderNoComplete.bind(this.pc12306))}},{key:"queryMyOrderNoCompleteContinuously",value:function(){function n(){return this.pc12306.queryMyOrderNoComplete().then(r.bind(this))}function r(e){if(e.data&&e.data.orderDBList&&e.data.orderDBList.length>0){return e}if(t<=0){return $.Deferred().reject("æ²¡ææ¾å°æªæ¯ä»è®¢å")}t--;return Common.delay(1e3).then(n.bind(this))}var t=10;return n.call(this)}}]);return e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var u=n(365)("util:pc:PassportValidator");var a=n(386);var f=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++){r[o]=arguments[o]}var u=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));u.imgUrl="https://kyfw.12306.cn/passport/captcha/captcha-image?"+"login_site=E"+"&module="+u.module+"&rand="+u.rand+"&"+Math.random();return u}o(t,e);r(t,[{key:"checkCode",value:function(t){u("checkCode:",arguments);return this.pc12306.checkRandCodeAnsyn(1,t).then(function(){return t})}}]);return t}(a);e.exports=f},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){var n=[];var r=true;var i=false;var s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=true;s=a}finally{try{if(!r&&o["return"])o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var u=n(365)("util:appRob:Statistics");var a=function(){function e(t,n){o(this,e);this.options=t;this.providerId=n;this.timePoints={start:Date.now(),querySuccess:null,queryStart:null};this.totalQueryTimeCost=0;this.totalQueryCount=0;this.failReasons=[];this.monitorLeftFailReasons={};this.loginFailReasons={};this.ipFailReasons={};this.monitorLeftCacheState={};this.events={};this.watcherPrefix="appRob"}s(e,[{key:"on",value:function(t,n){var r=this;var i=function(t){if(t.providerId===r.providerId){n(t)}};this.events[t]=i;Common.event.on(t,i)}},{key:"offAll",value:function(){Object.entries(this.events).forEach(function(e){var t=i(e,2),n=t[0],r=t[1];Common.event.off(n,r)})}},{key:"watch",value:function(t,n,r){if(!this.robType){return}return Common.sendWatchMessageLater({key:"appRob_"+this.providerId+"_"+this.robType+"_"+t,isSuccessful:n,duration:r})}},{key:"giveUp",value:function(){this.collectFailReason("userLeavedOrderDetail");this.sendStatistics()}},{key:"setOptions",value:function(t){this.options=r({},this.options,t)}},{key:"initStatistics",value:function(){var t=this;if(this.statistics){return}this.failReasons=[];this.statistics={isBackground:0,isReLogin:0,isManualQuit:0,isForbidIp:0};this.emptyStatisticsCount();this.lastSendStatisticsTime=0;this.on("loginSuccess",function(){if(t.timePoints.querySuccess){t.watch("reLogin");t.statistics.isReLogin=1}t.statistics.loginSuccessCount=(t.statistics.loginSuccessCount||0)+1});this.on("occupy.confirm",function(){t.hasConfirmed=true});this.on("secKill.ipForbid",function(){t.watch("ipForbid");t.statistics.isForbidIp=1});this.on("secKill.querySuccess",function(e){var n=e.serverIP;t.statistics.leftIp4OccupySuc=n;if(!t.timePoints.querySuccess){t.timePoints.querySuccess=Date.now()}});this.on("secKill.queryStart",function(e){var n=e.result;if(!t.timePoints.queryStart){t.timePoints.queryStart=Date.now();if(n&&n.queryLine.line.startSaleTime){var r=n.queryLine.line.date;var i=n.queryLine.line.focusTrainList.map(function(e){return e.train.trainNo}).join(",");t.statistics.saleTime=n.queryLine.line.startSaleTime.toString();t.statistics.depDate=r.slice(0,4)+"-"+r.slice(4,6)+"-"+r.slice(6);t.statistics.trainNoList=i.slice(0,50);t.timePoints.saleStart=n.saleStart;t.robType=n.whatLine;t.sendStatistics()}}});this.on("secKill.occupyFail",function(e){var n=e.error;t.collectFailReason(n)});this.on("secKill.occupyStart",function(e){var n=e.occupyRunnerId;t.occupyRunnerId=n});this.on("secKill.query",function(e){var n=e.type,r=e.whatLine,i=e.failOrigin,s=e.providerId;if(n==="success"){t.statistics.monitorLeft200Count=(t.statistics.monitorLeft200Count||0)+1}else if(n.includes("fail_")){var o=s+"_"+n+"_"+i;t.monitorLeftFailReasons[o]=(t.monitorLeftFailReasons[o]||0)+1}});this.on("secKill.ipEvaluation",function(e){var n=e.type,r=e.providerId;if(n==="success"){t.statistics.ipSuccessCount=(t.statistics.ipSuccessCount||0)+1}else if(n==="fail"){t.statistics.ipFailCount=(t.statistics.ipFailCount||0)+1}else if(n.includes("fail_")){var i=r+"_"+n;t.ipFailReasons[i]=(t.ipFailReasons[i]||0)+1}});this.on("secKill.monitorLeftCacheState",function(e){var n=e.type,r=e.providerId;var i=r+"_"+n;t.monitorLeftCacheState[i]=(t.monitorLeftCacheState[i]||0)+1});this.on("secKill.monitorLeftCacheState.occupySuccess",function(e){var n=e.updateTime,r=e.timeDiff;t.monitorLeftCacheState["updateTime"]=n;t.monitorLeftCacheState["timeDiff"]=r});this.on("secKill.occupy",function(e){var n=e.isSuccessful,r=e.orderNo12306;if(!n){t.statistics.occupyFailCount=(t.statistics.occupyFailCount||0)+1}else{t.statistics.orderNo12306=r}});this.on("secKill.login",function(e){var n=e.whatLine,r=e.isSuccessful,i=e.providerId,s=e.errorId,o=e.errorOrigin;if(!r){t.statistics.loginFailCount=(t.statistics.loginFailCount||0)+1;if(s){var u=o?o.slice(0,300):"";var a=n+"_"+i+"_"+s+"_"+u;t.loginFailReasons[a]=(t.loginFailReasons[a]||0)+1}}});this.on("secKill.afterQueryLeftTicket",function(e){var n=e.isSuccessful,r=e.timeCost,i=e.options;t.totalQueryTimeCost+=r;t.totalQueryCount+=1;var s=(t.statistics.hasLeftCount||0)+(n?1:0);t.statistics.monitorLeftCount=(t.statistics.monitorLeftCount||0)+1;t.statistics.hasLeftCount=s;t.statistics.netSpeed=Math.floor(t.totalQueryTimeCost/t.totalQueryCount);t.statistics.monitorLeftInterval=i.pollingInterval;t.heartbeatSendStatistics()});QunarAPI.hy.getDeviceInfo({hybridId:"flight_train_app1",success:function(n){t.statistics.hyVersion=n.qpVersion;t.statistics.deviceModel=(n.model||"").slice(0,20);t.statistics.deviceSdk=(n.osVersion+""||"").slice(0,20);var r=n.vid;if(QApp.sniff.android){r=n.atomversion.train}t.statistics.platformVersion=r}});QunarAPI.getNetworkType({success:function(n){t.statistics.netType=n.networkType}});if(QApp.sniff.ios){this.statistics.manufacturer="apple"}else{QunarAPI.train.deviceInfo({success:function(n){t.statistics.manufacturer=(n.manufacturer||"").slice(0,20)}})}}},{key:"emptyStatisticsCount",value:function(){this.statistics=r({},this.statistics,{occupyFailCount:0,monitorLeft200Count:0,loginSuccessCount:0,loginFailCount:0,ipSuccessCount:0,ipFailCount:0,monitorLeftCount:0,hasLeftCount:0})}},{key:"collectFailReason",value:function(t){var n=[this.providerId];if(this.providerId==="3w"&&this.occupyRunnerId){n.push(this.occupyRunnerId)}this.failReasons.push(n.join("-")+"-"+t)}},{key:"prepareAjaxLog",value:function(){var t=this;var n=(Common.getStoredInfo("12306Logs")||{}).logs||[];n=n.filter(function(e){return e[0]==="ajax"&&e[4]===t.providerId}).slice(0,20);n=n.map(function(e){var t=i(e,7),n=t[0],r=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6];var l=Common.formatDate(new Date(f),"MM-dd HH:MI");return[s,o,a,l].join(" ").trim()}).join(",").slice(0,1200);return n}},{key:"prepareOccupyFailReason",value:function(t){var n=t.join("|");n=n.slice(Math.max(0,n.length-1200),n.length);return n}},{key:"heartbeatSendStatistics",value:function(){var t=Date.now();if(t-this.lastSendStatisticsTime>60*1e3){this.sendStatistics()}}},{key:"prepareMonitorLeftFailReason",value:function(){var t="";try{t=JSON.stringify(this.monitorLeftFailReasons)}catch(n){t="runTimeError"}return t.slice(0,1200)}},{key:"prepareLoginailReason",value:function(){var t="";try{t=JSON.stringify(this.loginFailReasons)}catch(n){t="runTimeError"}return t.slice(0,1200)}},{key:"prepareIpFailReason",value:function(){var t="";try{t=JSON.stringify(this.ipFailReasons)}catch(n){t="runTimeError"}return t.slice(0,1200)}},{key:"prepareMonitorLeftCacheState",value:function(){var t="";try{t=JSON.stringify(this.monitorLeftCacheState)}catch(n){t="runTimeError"}return t.slice(0,1200)}},{key:"sendStatistics",value:function(t){var n=this.options,i=n.orderNo,s=n.contactPhone,o=n.trainFrom,a=n.trainTo,f=n.order12306Account;if(!this.statistics.trainNoList||!f){return}var l=Common.isTV()?"tv":"phone";var c=+Date.now();if(c-this.lastSendStatisticsTime<1e3){console.error("duplicate function call");return}this.lastSendStatisticsTime=c;var h=this.timePoints,p=h.start,d=h.querySuccess,v=h.queryStart,m=h.saleStart;var g=!!this.statistics.orderNo12306&&this.hasConfirmed;if(this.statistics.orderNo12306&&!this.hasConfirmed){this.statistics.occupyFailReason="æªæ¯ä»è®¢åå¹éæå";this.statistics.orderNo12306=""}else if(this.failReasons.length){this.statistics.occupyFailReason=this.prepareOccupyFailReason(this.failReasons)}if(v){var y=c-v;t&&this.watch("costTime",g,y);this.statistics.costTime=Math.floor(y/1e3)}if(d&&m){var b=d-m;t&&this.watch("firstTime4Left",true,b);this.statistics.firstTime4Left=d-m}if(m){var w=p-m;t&&this.watch("remainKillTime",true,w);this.statistics.remainKillTime=Math.floor(w/1e3)}if(!g){delete this.statistics.leftIp4OccupySuc}var E=this.prepareAjaxLog();var S=this.prepareMonitorLeftFailReason();var x=this.prepareLoginailReason();var T=this.prepareIpFailReason();var N=this.prepareMonitorLeftCacheState();var C="";if(this.providerId==="3w"){C=this.occupyRunnerId}var k=r({orderNo:i,userPhone:s,trainFrom:o,trainTo:a,platform:QApp.sniff.os,robType:this.robType,appType:l,interfaceType:this.providerId,occupyType:C,order12306account:f.slice(0,50),ajaxLog:E,monitorLeftFailReason:S,loginFailReason:x,ipFailReason:T,monitorLeftCacheState:N},this.statistics);u("t_tTrainOrderAppSeckillResultStatistics",k);var L=void 0;if(!i){L=Promise.resolve()}else{L=Common.postRequest("t_tTrainOrderAppSeckillResultStatistics",k).then(undefined,function(){return Promise.resolve()})}this.emptyStatisticsCount();return L}}]);return e}();e.exports=a},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function a(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=function g(e,t,n){if(e===null)e=Function.prototype;var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);if(i===null){return undefined}else{return g(i,t,n)}}else if("value"in r){return r.value}else{var s=r.get;if(s===undefined){return undefined}return s.call(n)}};var f=n(515);var l=n(523);var c=n(456);var h=n(316);var p=n(521);var d=n(405);var v=n(365);var m=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.providerId="mobile";n.statistics=new p(n.options,n.providerId);n.queryRunner=new l(r({},n.options));n.debug=v("fusion:mobile:appRob:SecKill");return n}a(t,e);i(t,[{key:"run",value:function(){var t=this;this.dfd=$.Deferred();this.wireless12306=new d;this.statistics.initStatistics();this.getConfig().then(function(){return t.login()}).then(this.queryAndOccupy.bind(this));return this.dfd.always(function(){return t.statistics.sendStatistics(true)})}},{key:"abort",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"aborted";this.dfd&&this.dfd.reject(t);this.queryRunner&&this.queryRunner.abort(t);this.occupyRunner&&this.occupyRunner.abort(t);this.wireless12306.abortAll()}},{key:"setOptions",value:function(t){if(!this.queryRunner){this.queryRunner=new l(r({},this.options))}this.queryRunner.setOptions(t)}},{key:"rawLogin",value:function(t,n){var r=function(){var r=new h(t,n);return r.run()};return this.wireless12306.initUser().then(null,r)}},{key:"logout",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"logout",this).call(this);var n=Common.getUserInfo();delete n.tk;Common.setUserInfo(n,true)}},{key:"prepareQuery",value:function(){return $.Deferred().resolve()}},{key:"queryLeftTicket",value:function(){if(!this.queryRunner){this.queryRunner=new l(r({},this.options))}return this.queryRunner.run()}},{key:"occupy",value:function(t){var n=this;this.occupyRunner=new c(t);Common.event.trigger("secKill.occupyStart",{providerId:this.providerId});var r=function(t){var r=Common.lookUp(t);if(r&&r.errId==="notLogin"){return n.login().then(function(){return n.occupyRunner.run()}).then(n.noSeatDilemmaHandler.bind(n))}return t};return this.occupyRunner.run().then(this.noSeatDilemmaHandler.bind(this),r).done(this.sendOccupyWather.bind(this,t.whatLine,"",true)).fail(this.sendOccupyWather.bind(this,t.whatLine,"",false))}}]);return t}(f);e.exports=m},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var u=n(405);var a=n(516);var f=n(517);var l=n(391);var c=n(365);var h=function(e){function t(e){i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.interface="wl";n.providerId="mobile";n.debug=c("util:mobile:appRob:queryLeftTicket");n.getQueryLine=new f(n.options,n.providerId);return n}o(t,e);r(t,[{key:"initAPI",value:function(){this.wireless12306=new u}},{key:"startIPEvaluation",value:function(){if(!this.ipEvaluationRunner){var t={};this.ipEvaluationRunner=new l(t);this.ipEvaluationRunner.run()}}},{key:"abort",value:function(t){this.dfd&&this.dfd.reject(t);this.wireless12306&&this.wireless12306.abortAll();this.stopIPEvaluation()}},{key:"sendQuery",value:function(t,n,r,i,s){var o=this.timeoutPerQuery||this.config.timeoutPerQuery;var u={timeout:o+Math.min(1e3,o*.2),httpTimeout:o,noRetry:true,ipMode:s};return this.wireless12306.queryLeftTicket({from_station:t,to_station:n,train_date:r},u)}}]);return t}(a);e.exports=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(416);var s=a(i);var o=n(422);var u=a(o);var h=n(525);var p=function(e){function t(e){f(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.sceneId=e;n.id="FaceVerification";return n}c(t,e);r(t,[{key:"func3W",value:function(){return this.funcMobile(this.sceneId)}},{key:"funcMobile",value:function(){function t(){var e=this;var t=$.Deferred();setTimeout(function(){t.resolve()},2e3);return t.then(function(){console.log("continue run");return(new h(e.sceneId)).run()})}return(new u.default(t.bind(this))).run()}}]);return t}(s.default);e.exports=p},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var o=n(360);var u=function(){function e(t){s(this,e);this.sceneId=(t||"9")+"";console.log("constructor:",t,this.sceneId);this.initResult={};this.base64Prefix="data:image/jpeg;base64,";this.pluginConfig={vender:"facePlus",source:"default"};this.disablePluginConfigFromQConfig=false}i(e,[{key:"getFaceInfoByAndroidTestPhone",value:function(t){console.log("getFaceInfoByAndroidTestPhone:",arguments);this.initResult=t;var n="http://172.20.10.2:8090/test?procedure=getFaceInfo";return o(n,{type:"POST",timeout:1*60*60*1e3,httpTimeout:1*60*60*1e3,data:{data:encodeURIComponent(JSON.stringify(t)),type:"1"}}).then(function(e){console.log("getFaceInfoByAndroidTestPhone succ",e);e.data=decodeURIComponent(e.data);return $.Deferred().resolve(e)},function(e){console.log("getFaceInfoByAndroidTestPhone err",e);return $.Deferred().reject(e)})}},{key:"getFaceInfoVender",value:function(){function n(e){console.log(t+" success:",arguments);var n=e&&e[t]||"";var r={};try{r=JSON.parse(n)}catch(i){console.warn("parse json fail, "+t+":",i)}if(r.vender&&!this.disablePluginConfigFromQConfig){this.pluginConfig={vender:r.vender,source:"switch"}}return this.pluginConfig}function r(e){console.log(t+" fail:",arguments);return $.Deferred().resolve(this.pluginConfig)}var t="switch.hy.12306.faceVerification";return Common.getAppConfig([t]).then(n.bind(this),r.bind(this))}},{key:"getFaceInfo",value:function(t){console.log("this.pluginConfig:",this.pluginConfig);switch(this.pluginConfig.vender){case"qunar":return this.getFaceInfoByQunar(t).then(this.signPictureSuccess.bind(this));case"facePlus":return this.getFaceInfoByFacePlus(t).then(this.signPictureForFacePlusSDK.bind(this));case"testPhone":return this.getFaceInfoByAndroidTestPhone(t).then(this.signPicture.bind(this));case"zoloz":default:return this.getFaceInfoByZoloz(t).then(this.signPicture.bind(this))}}},{key:"prepareParamsForGetFaceInfo",value:function(t){this.initResult=t;var n=t.protocol;if(QApp.sniff.iphone){n=JSON.parse(n);n=n.protocol||""}var r=$.Deferred();var i={protocol:n,zimId:t.zimId,success:r.resolve.bind(r),fail:r.reject.bind(r)};var s={defer:r,params:i};console.log("params:",s);return s}},{key:"signPictureOfFacePlusByAndroidTestPhone",value:function(t){function i(e){console.log("signPictureOfFacePlusByAndroidTestPhone success:");console.log(e);var t=decodeURIComponent(e.data);console.log(t);return t}function s(e){console.log("signPictureOfFacePlusByAndroidTestPhone fail:");console.log(e);return e}var n="http://172.20.10.2:8090/test?procedure=signPictureOfFacePlus";var r={type:"POST",timeout:1*60*60*1e3,httpTimeout:1*60*60*1e3,data:{data:encodeURIComponent(JSON.stringify(t)),type:"2"}};return o(n,r).then(i.bind(this),s.bind(this))}},{key:"getFaceInfoByFacePlus",value:function(t){function r(e){console.log("getFaceInfoByFacePlus success:",arguments);console.log("this.initResult:",this.initResult);var t={protocol:this.initResult.protocol,faceData:e.data.faceData,clientInfo:e.data.clientInfo};console.log("obj:",t);return t}function i(e){console.log("getFaceInfoByFacePlus fail:",arguments);return e}console.log("getFaceInfoByFacePlus:",arguments);var n=this.prepareParamsForGetFaceInfo(t);QunarAPI.train.getFaceInfoByFacePlus(n.params);return n.defer.then(r.bind(this),i.bind(this))}},{key:"getFaceInfoByQunar",value:function(t){console.log("getFaceInfoByQunar:",arguments);var n=this.prepareParamsForGetFaceInfo(t);QunarAPI.train.getFaceInfoByQunar(n.params);return n.defer}},{key:"getFaceInfoByZoloz",value:function(t){function r(e){console.log("plugin FaceInfo success:",arguments);var t=$.Deferred();return t.resolve(e)}function i(e){console.log("plugin FaceInfo fail:",arguments);var t=$.Deferred();return t.reject(e)}console.log("getFaceInfoByZoloz:",arguments);var n=this.prepareParamsForGetFaceInfo(t);QunarAPI.train.getFaceInfo(n.params);return n.defer.then(r.bind(this),i.bind(this))}},{key:"getMetaInfo",value:function(){function r(e){console.log("plugin getMetaInfo success:",arguments);console.log("plugin getMetaInfo success:",JSON.stringify(e));var t=$.Deferred();var n=e&&e.data||{};if(typeof n==="string"){n=JSON.parse(n)}if(QApp.sniff.iphone){n.appName="cn.12306.rails12306";n.appVersion="8"}else{n.appName="com.MobileTicket";n.appVersion="4.1.9";n.apdidToken=""}console.log("obj:",n);return t.resolve(n)}function i(e){console.log("plugin getMetaInfo fail:",arguments);var t=$.Deferred();return t.reject(e)}var t=$.Deferred();var n={success:t.resolve.bind(t),fail:t.reject.bind(t)};QunarAPI.train.getMetaInfo(n);return t.then(r.bind(this),i.bind(this))}},{key:"getMetaInfoLocal",value:function(){var t={apdidToken:"",appName:"com.MobileTicket",appVersion:"4.1.9",bioMetaInfo:"3.3.0:98304,0",deviceModel:"Pixel 2 XL",deviceType:"android",osVersion:"9",zimVer:"1.0.0"};var n={zimVer:"3.0.0",appVersion:"8",bioMetaInfo:"3.3.0                                                      : 98304,4",appName:"cn.12306.rails12306",deviceType:"ios",osVersion:"iOS 12.0.1",apdidToken:"VGsdIaYCPR3yAAZbAdIbLttWD+Ii7sjbagnAUzfgIv2kxlHUZwEAAA==",deviceModel:"iPhone11,6"};if(QApp.sniff.iphone)t=n;return $.Deferred().resolve(t)}},{key:"enhanceMetaInfo",value:function(t){var n=t;var i={bioId:"ZOLOZ",bioType:"1",featureVersion:"V1.0.0"};r(n,i);return n}},{key:"displayImg",value:function(t){function u(e){console.log(r+e);var t=document.createElement("img");var n=2/10;t.className=i;var s=document.getElementsByClassName("yo-list")[0];(s||document.body).appendChild(t);t.src=r+e;t.width=parseInt(480*n);t.height=parseInt(640*n)}var n=JSON.parse(t.content);var r=this.base64Prefix;var i="img_test";var s=document.getElementsByClassName(i);for(var o=s.length-1;o>=0;o--){s[o].parentNode.removeChild(s[o])}u(n.blob.blobElem[0].content);u(n.blob.blobElem[1].content);return t}},{key:"scaleImg",value:function(t){function a(e,n){s.blob.blobElem[0].content=f(e);s.blob.blobElem[1].content=f(n);t.content=JSON.stringify(s);delete t.imageData;return t}function f(e){var t=(e||"").indexOf(",");var n=e;if(t>=0){n=e.substr(t+1)}return n}console.log("scaleImg:",t);if(t.data)t=t.data;try{if(typeof t==="string")t=JSON.parse(t)}catch(n){console.log("parse signPicture params fail:",t)}var r=null,i=null;var s=t.content,o=.8;var u=this.base64Prefix;if(t.imageData){if(typeof t.content==="string"){s=JSON.parse(s)}r=Common.scaleImg(u+t.imageData[0],1,o);i=Common.scaleImg(u+t.imageData[1],1,o);return $.when(r,i).then(a)}return $.Deferred().resolve(t)}},{key:"signPictureSuccess",value:function(t){console.log("signPictureSuccess success:",arguments);var n=$.Deferred();var r=t&&t.signResult||"";r=Common.base64Decode(r);console.log("signResult:",r);if(r)n.resolve(r);else n.reject("signPictureFail");return n}},{key:"signPictureForFacePlusSDK",value:function(t){function i(e){console.log("signPictureForFacePlusSDK fail:",arguments);var t=$.Deferred();return t.reject.apply(t,arguments)}var n={pubKey:"",protocol:t.protocol,faceData:JSON.stringify(t.faceData),clientInfo:JSON.stringify(t.clientInfo)};var r="t_tTrainSignPictureForFacePlusSDK";console.log(r,n);return Common.postRequest(r,n).then(this.signPictureSuccess.bind(this),i.bind(this))}},{key:"signPictureByServer",value:function(t){function r(e){console.log("signPictureByServer fail:",arguments);var t=$.Deferred();return t.reject.apply(t,arguments)}var n={pubKey:"",zimId:this.initResult.zimId,bisToken:t.bisToken,content:t.content,behavLog:t.behavLog||t.behaveLog};console.log("signPictureByServer:",n);return Common.postRequest("t_tTrainSignPicture",n).then(this.signPictureSuccess.bind(this),r.bind(this))}},{key:"signPicture",value:function(t){return this.scaleImg(t).then(this.signPictureByServer.bind(this))}},{key:"signPictureByAndroid",value:function(t){function u(e){console.log("signPicture success:",arguments);var t=$.Deferred();return t.resolve(decodeURIComponent(e&&e.data||""))}function a(e){console.log("signPicture fail:",arguments);var t=$.Deferred();return t.reject(e||"signPictureFail")}console.log("signPicture:",arguments);var n="http://172.20.10.2:8090/test?procedure=signPicture";var r="-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAybK3rVKEe8tVjPhBlibKpb2w/vCINAzq01lBhoUJYhSgK7JfZ5E6MwtHTpQuVHHgXkVDQsYqXRJVv+Cu5DnsfTGFT4HqKlZDnxzfw5MefZUHuMVQbm4bsnT5nWDJ2V2tARmWx7JLtNOqPazntHB4U1UQfb2Qa/G1Oodns1fWgPynTwS+2NBX9UBytdXgjSATxgR0sVlh2aHuULAEhggCNObBb14pw5Bwl2gSxnlS8HADF+lvfOlphNSKlwlAS0W4Z1ztQ2L8BPfTZy21p1sEhYz0btUh3+J86vYrBWrF2R8oUcQJ+95JDrjFAx1bFy3pE6cSnHJ5ytpPvMkTp7IWBQIDAQAB\n-----END PUBLIC KEY-----";var i={pubKey:r,zimId:this.initResult.zimId,bisToken:t.bisToken,content:t.content,behavLog:t.behavLog||t.behaveLog};console.log("signPicture data:",i,JSON.stringify(i));var s={type:"POST",data:{data:encodeURIComponent(JSON.stringify(i)),type:"3"}};return o(n,s).then(u,a)}},{key:"authenticate",value:function(t){console.log("authenticate:",arguments);var n=wireless12306;var r={zimId:this.initResult.zimId,bizId:this.initResult.bizId,biz:{liveImage:t}};var i={zimId:this.initResult.zimId,bizId:this.initResult.bizId};switch(this.sceneId){case"1":return n.activateMemberByFaceDetection(r);case"5":return n.faceDetectionAuthenticate(r);case"7":return n.closeUserAccount(r,{}).then(n.identityVerificationQueryProgress.bind(n,r,"7"));case"9":return n.faceDetectionAuthenticateAsync(r).then(n.identityVerificationQueryProgress.bind(n,i,"9"));default:return $.Deferred().reject("sceneIdNotSupport")}}},{key:"ultraSuccess",value:function(t){console.log("FaceVerification ultraSuccess:",arguments);this.watch("ultra_result",true);var n=$.Deferred();Common.setUserInfo({faceIdentified:true});return n.resolve.apply(n,arguments)}},{key:"ultraFail",value:function(t){console.log("FaceVerification ultraFail:",arguments);this.watch("ultra_result",false);var n=$.Deferred();var r=t;var i=["Unexpected token < in JSON at position","JSON Parse error: Unrecognized token"];var s=typeof t==="string"&&i.some(function(e,n){if(t.indexOf(e)>=0)return true;return false});if(s){console.log("it seems that this error represents notLogin, thus perform login automatically");r="è¯·æ¨åç»å½"}var o=Common.lookUp(r);console.log("failReason:",o);return n.reject(o)}},{key:"watch",value:function(t,n){t="face_verification_"+t;var r={key:t,isSuccessful:n};window.sendWatchMessage(r)}},{key:"run",value:function(){var t=wireless12306;return this.getFaceInfoVender().then(this.getMetaInfo.bind(this)).then(undefined,this.getMetaInfoLocal.bind(this)).then(this.enhanceMetaInfo.bind(this)).then(t.faceDetectionInit.bind(t,this.sceneId)).then(this.getFaceInfo.bind(this)).then(this.authenticate.bind(this)).then(this.ultraSuccess.bind(this),this.ultraFail.bind(this))}}]);return e}();e.exports=u},function(e,t){"use strict";var n=true;var r={d:function(){if(n){console.log.apply(console,arguments)}},e:function(){if(n){console.log.apply(console,arguments)}},i:function(){if(n){}},w:function(){if(n){}}};window.logger=r;e.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var u=n(430);var a=n(384);var f=n(517);var l=n(365)("engine:secKill");var c=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};o(this,e);this.orderData=t;this._options=n;this.timePoints={start:Date.now(),querySuccess:null,queryStart:null};this.totalQueryTimeCost=0;this.failReasons=[];this.providerId="3w";this.showSelfGrab=false;this.config={preNotifyMinute:5}}s(e,[{key:"initOptions",value:function(){function r(){var e=t.orderData,r=e.orderNo,s=e.contactPhone,o=e.order12306Account,u=e.lastPayTime,a=e.trainFrom,f=e.trainTo,l=e.appSeckill,c=e.passengerInfos;t.options=i({},t._options,{trainFrom:a,trainTo:f,orderLine:t.getOrderLine(),appSeckill:!!l,showSelfGrab:!!t.showSelfGrab||t._options.showSelfGrab,orderNo:r,contactPhone:s,order12306Account:o,lastPayTime:u,passengers:c.map(t.convertPassenger.bind(t))});return n.resolve()}var t=this,n=$.Deferred();if(this.options){return n.resolve()}return this.getSelfGrabConfig().then(r)}},{key:"run",value:function(){this.dfd=$.Deferred();this.initOptions().then(this.runSecKill.bind(this)).then(this.occupySuccess.bind(this),this.occupyFail.bind(this));return this.dfd}},{key:"runSecKill",value:function(){var t=this;if(!this.getQueryLine){this.getQueryLine=new f(this.options)}l("triggerEvent","run");QunarAPI.train.triggerEvent({event:"secKill",data:{type:"run",args:{options:this.options}}});var n=$.Deferred();if(window.util){util.addTrainEvent({event:"secKillWorker",handler:function(r){l("onEvent secKillWorker",r);var i=r.orderNo,s=r.isSuccessful,o=r.payload;if(i===t.orderData.orderNo){if(s){n.resolve(o)}else{n.reject(o)}}}})}return n}},{key:"getOrderLine",value:function(){var t=this,n=[],r={},i=this.orderData.robTrainInfos;i.forEach(function(e){var t=pc12306.getStationCode(e.from),n=pc12306.getStationCode(e.to),i=e.depDateForShow+"_"+t+"_"+n;if(i in r){r[i].push(e)}else{r[i]=[];r[i].push(e)}});var s=function(i){var s=[],o={line:{dptCode:pc12306.getStationCode(r[i][0].from),arrCode:pc12306.getStationCode(r[i][0].to),date:i.slice(0,4)+i.slice(5,7)+i.slice(8,10),startSaleTime:r[i][0].startSaleTime,requestType:"ADULT"},weight:9999};r[i].forEach(function(e){var n={train:{dptTime:e.departureTime?e.departureTime.slice(8):null,trainNo:e.no,dptCode:pc12306.getStationCode(e.from),arrCode:pc12306.getStationCode(e.to)},seatList:t.getFocusSeats(e),trainInfo:e};s.push(n)});o.line.focusTrainList=s;n.push(o)};for(var o in r){s(o)}return n}},{key:"getFocusSeats",value:function(t){var n=[t.seat].concat(t.candidateSeats);var r=[];n.forEach(function(e){var t=e==="æ åº§"?"-":a.convertor.seatTypeCharacterToCode(e);r.push(t)});return r}},{key:"getSelfGrabConfig",value:function(){function s(e){if(e.status==0&&e.data){t.showSelfGrab=r==1?false:e.data.selfGrabOpen;n.resolve()}else{t.showSelfGrab=false;n.resolve()}}function o(){t.showSelfGrab=false;n.resolve()}var t=this,n=$.Deferred();if(this._options.showSelfGrab){this.showSelfGrab=this._options.showSelfGrab;return n.resolve()}var r=t.orderData.robInfoHeader.headerType;var i=Common.touchDomainHelper.getTouchUrl("https://touch.train.qunar.com/api/json/cooperationGrab/getConfig");Common.ajax(i,{data:{orderNo:t.orderData.orderNo},type:"GET",beforeSend:t.setRequestHeader.bind(t)}).then(s.bind(t),o.bind(t));return n.promise()}},{key:"setRequestHeader",value:function(t){t.setRequestHeader("Content-type","application/json")}},{key:"occupySuccess",value:function(t){return this.dfd.resolve(t)}},{key:"occupyFail",value:function(t){var n=void 0;if(["qunarNotifyServerFail","noSeatDilemma","qunarOrderAccountNotMatched"].includes(t)){n=t}else{var r=Common.lookUp(t);n=r.id}switch(n){case"passwordNotCorrect":case"usernameOrPasswordNotProvided":case"qunarOrderAccountNotMatched":this.gotoLogin(n);break;case"courtRestrict":case"credentialNumberNotInCorrectPattern":case"scheduleCanceled":case"idTypeNotAvailable":case"userLocked":case"cancelTooManyTimes":this.dfd.reject(n);break;case"transferTimeTooShort":case"conflictTrip":case"idUnauthorized":case"phoneUnautorized":case"imposture":case"existsUnpayOrder":case"noUnpayOrder":this.dfd.reject(n);break;case"loadOrderDetailFail":case"cancelOrderFail":case"addPassengerFail":case"noResultPerformServerBackup":case"aborted":case"orderStateChange":case"unpayOrderNotMatchTurnToOrderDetail":default:this.dfd.reject(n);break}}},{key:"remindUser",value:function(t,n){var i="ç³»ç»ç¹å¿ï¼è¯·ç¨ååè¯";if(n==="getPasscodeNewFail")n="è®¢ç¥¨å¤±è´¥";if(n==="errors.order.change")n="å çº¿è·¯è°æ´,æä¸æ¯æè¯¥è½¦æ¬¡è´­ç¥¨";if(typeof n==="string"){if(/^[\w,.;!ï¼ï¼ ]*$/.test(n))n="è®¢ç¥¨å¤±è´¥";if(n.indexOf("system error")>=0)n=i;if(n.indexOf("ä¸è½ä¸ºç©º")>=0)n="æä¸æ¯æè¯¥è½¦æ¬¡è´­ç¥¨"}n=n||i;if((typeof n==="undefined"?"undefined":r(n))==="object")n=i;if(!navigator.onLine)n="è¿æ¥å¤±è´¥ï¼è¯·æ£æ¥æ¨çç½ç»";this.dfd.reject(t);Alert(n)}},{key:"isInWorker",value:function(){return location.hash.startsWith("#workerMobile")}},{key:"gotoLogin",value:function(t){var n=this;this.dfd.reject("gotoLogin");var r={qunarOrderAccountNotMatched:"è¯·ç»å½12306è´¦æ·",passwordNotCorrect:"æ¨ç12306å¯ç éè¯¯ï¼éè¦éæ°ç»å½"}[t]||"æ¨è¿æ²¡æç»å½12306è´¦æ·";Common.delay(500).then(function(){if(n.isInWorker()){return}Confirm({content:r,okText:"å»ç»å½",cancelText:"åæ¶"}).then(function(){if(t==="qunarOrderAccountNotMatched"){Common.deleteUserInfo(true)}var e=n.getCachedUserMobile();hysdk.train.openView({viewName:"login12306",params:{username:e}})})})}},{key:"getCachedUserMobile",value:function(){var t=this.orderData.order12306Account;var n=Common.getUserInfo(t)||{};if(!/^\d+$/.test(t)&&!/@/.test(t)){t=""}return n.mobile||n.mobileNo||t}},{key:"abort",value:function(t){this.dfd&&this.dfd.reject(t);l("triggerEvent","abort");QunarAPI.train.triggerEvent({event:"secKill",data:{type:"abort",args:{orderNo:this.orderData.orderNo}}})}},{key:"giveUp",value:function(){l("triggerEvent","giveUp");QunarAPI.train.triggerEvent({event:"secKill",data:{type:"giveUp",args:{orderNo:this.orderData.orderNo}}})}},{key:"getOrderDetailScheme",value:function(t){var n=util.getQunarProtocol();var r=$.param({orderNo:this.orderData.orderNo,origin:t,contactPhone:this.orderData.contactPhone||""});var i=n+"//railway/orderDetail?"+r;return i}},{key:"watch",value:function(t,n,r){return util.watch("secKill_"+t,n,r)}},{key:"getLocalNotifyInfo",value:function(){var t=this.orderData.orderNo;var n=Common.getStoredInfo("secKillNotify")||{};return n[t]||{}}},{key:"setLocalNotifyInfo",value:function(t){var n=this.orderData.orderNo;var r=Common.getStoredInfo("secKillNotify")||{};r[n]=t;Common.storeInfo("secKillNotify",r,true)}},{key:"removeLocalNotifyInfo",value:function(){var t=this.orderData.orderNo;var n=Common.getStoredInfo("secKillNotify")||{};if(!n[t]){return}delete n[t];Common.storeInfo("secKillNotify",n,true)}},{key:"clearOutdateNotifyInfo",value:function(){}},{key:"getTrainNos",value:function(t){var n=[];t.forEach(function(e){n.push(e.train.trainNo)});return n.join(",")}},{key:"addNotify",value:function(){var t=this;var n=this.analyzeNotify(this.analyzeResult);var r=n.schedule,i=n.notification,s=n.from,o=n.to;var u=r.map(function(e){var n=+Common.parseDateTime(e.line.startSaleTime+"");var r=Math.floor(n/1e3);var i=r+10*60;var u=t.config.preNotifyMinute;var a=hysdk.sniff.ios?"å¼å®æ¶å°è¯¦æé¡µåä¸ç§æï¼å¯å¤§å¹æåæ¢ç¥¨æåçï¼å»ºè®®åè®¸æ¥ç¨æé":"";var f=e.line.date.slice(0,4)+"-"+e.line.date.slice(4,6)+"-"+e.line.date.slice(6);var l=t.getTrainNos(e.line.focusTrainList);return{title:"æå¼å»åªå¿ï¼å¼å§æ¢ç¥¨",desc:s+"-"+o+" "+f+" "+l,authTip:a,startTime:r,endTime:i,alarms:[u]}});var a=i.map(function(e){var n=+Common.parseDateTime(e.line.startSaleTime+"");var r=e.line.date.slice(0,4)+"-"+e.line.date.slice(4,6)+"-"+e.line.date.slice(6);var i=t.getTrainNos(e.line.focusTrainList);var u=Math.floor((n-t.config.preNotifyMinute*6e4)/1e3);return{content:"æå¼å»åªå¿ï¼å¼å§æ¢ç¥¨ "+s+"-"+o+" "+r+" "+i,notificationId:t.orderData.orderNo+e.line.startSaleTime,authTip:"å¼å®æ¶å°è¯¦æé¡µåä¸ç§æï¼å¯å¤§å¹æåæ¢ç¥¨æåçï¼å»ºè®®åè®¸éç¥",pushTime:u,scheme:t.getOrderDetailScheme("localnotification")}});var f=function(n){n.forEach(function(e,t){e.startSaleTime=r[t].line.startSaleTime});var i=t.getLocalNotifyInfo();if(!i.schedule){i.schedule=[]}i.schedule=i.schedule.concat(n);t.setLocalNotifyInfo(i)};var l=function(n){var r=[];n.forEach(function(e,t){r.push({startSaleTime:i[t].line.startSaleTime})});var s=t.getLocalNotifyInfo();if(!s.notification){s.notification=[]}s.notification=s.notification.concat(r);t.setLocalNotifyInfo(s)};var c=function(n){t.watch("addSchedule",true);f(n);return};var h=function(n){var r=n.resultArray,i=n.error;t.watch("addSchedule",false);f(r);return i};var p=function(n){if(hysdk.sniff.ios){return util.queueTrainPlugin("addLocalNotification",a).then(function(e){l(e);t.watch("addLocalNotification",true);if(n){return Promise.reject({scheduleErr:n})}},function(e){var r=e.resultArray,i=e.error;l(r);t.watch("addLocalNotification",false);return Promise.reject({notificationErr:i,scheduleErr:n})})}return util.trainPlugin("grantNotification",{authTip:"å¼å®æ¶å°è¯¦æé¡µåä¸ç§æï¼å¯å¤§å¹æåæ¢ç¥¨æåçï¼å»ºè®®åè®¸éç¥"}).then(function(){t.watch("grantNotification",true);if(n){return Promise.reject({scheduleErr:n})}},function(e){t.watch("grantNotification",false);return Promise.reject({notificationErr:e,scheduleErr:n})})};return util.queueTrainPlugin("addSchedule",u).then(c,h).then(p)}},{key:"removeNotify",value:function(){var t=this;var n=this.getLocalNotifyInfo();var r=function(){if(n.schedule&&n.schedule.length){var t=n.schedule.map(function(e){var t=e.calendarId;return{calendarId:t,authTip:"ç§»é¤æ¥ç¨å¤±è´¥ï¼è¯·å¼å¯æ¥ç¨æé"}});return util.queueTrainPlugin("cancelSchedule",t)}return Promise.resolve()};var i=function(){if(hysdk.sniff.ios&&n.notification&&n.notification.length){var r=n.notification.map(function(e){var n=e.startSaleTime;return{notificationId:t.orderData.orderNo+n,authTip:"ç§»é¤éç¥å¤±è´¥ï¼è¯·å¼å¯éç¥æé"}});return util.queueTrainPlugin("removeLocalNotification",r)}return Promise.resolve()};r().then(i,i);this.removeLocalNotifyInfo()}},{key:"getServerTime",value:function(){var t=this;if(this.timeDiff){var n=new Date(Date.now()-this.timeDiff);return $.Deferred().resolve(n)}return Common.getServerTimeFromBaidu().done(function(e){t.timeDiff=Date.now()- +e})}},{key:"analyzeLines",value:function(){function n(){if(!t.getQueryLine){t.getQueryLine=new f(t.options)}return t.getQueryLine.analyzeLines()}function r(e){console.log("analyzeSucc:",t.options,arguments);t.analyzeResult=e;return e}var t=this;return t.initOptions().then(n).then(r)}},{key:"analyzeNotify",value:function(t){var n=t.futureLines;var r=this.getLocalNotifyInfo();var i=this.orderData,s=i.trainFrom,o=i.trainTo;var u={schedule:[],notification:[],from:s,to:o};if(!r.schedule){r.schedule=[]}if(!r.notification){r.notification=[]}n.forEach(function(e){if(!r.schedule.some(function(t){return t.startSaleTime===e.line.startSaleTime})){u.schedule.push(e)}if(hysdk.sniff.ios&&!r.notification.some(function(t){return t.startSaleTime===e.line.startSaleTime})){u.notification.push(e)}});return u}},{key:"convertPassenger",value:function(t){var n={"æ¤ç§":"PP","å°æ¹¾éè¡è¯":"TW","æ¸¯æ¾³éè¡è¯":"GA","èº«ä»½è¯":"NI"};var r={name:t.certType,code:n[t.certType]};return i({},t,{certType:r,name:t.passengerName})}}]);return e}();t.default=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){"use strict";function n(e,t){this.duration=e;this.remain=e;this.step=t;this.handler=-1;this.resultDefer=$.Deferred();this.resultFormater=null}n.prototype={constructor:n,stanza:function(){this.remain=this.remain-this.step;if(this.remain<=0){this.remain=0;this.complete();return}this.notify()},start:function(){clearInterval(this.handler);this.notify();this.handler=setInterval(this.stanza.bind(this),this.step*1e3);return this.resultDefer},notify:function(t){t=t||"processing";this.resultDefer.notify(this.getResult(t))},stop:function(){clearInterval(this.handler);this.resultDefer.reject(this.getResult("stop"));return this.resultDefer},complete:function(){if(this.remain>0){return this.stop()}this.remain=0;clearInterval(this.handler);this.notify("complete");this.resultDefer.resolve(this.getResult("complete"));return this.resultDefer},restart:function(){this.remain=this.duration;return this.goOn()},goOn:function(){clearInterval(this.handler);this.resultDefer=$.Deferred();return this.start()},getResult:function(t){this.resultFormater=this.resultFormater||this.defaultResultFormater;var n={procedure:t,result:this.resultFormater(this.remain)};return n},replaceResultFormater:function(t,n){this.resultFormater=t.bind(n||this);return this},defaultResultFormater:function(t){var n=Math.floor(t/(60*60));var r=Math.floor((t-n*60*60)/60);var i=Math.floor(t%60);var s="";if(n>0)s=this.toTwoDigitStr(n)+":";s+=this.toTwoDigitStr(r)+":";s+=this.toTwoDigitStr(i);return s},toTwoDigitStr:function(t){var n=(t||"").toString();if(n.length<2)n=("00"+n).substr(-2);return n}};e.exports=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){"use strict";var n=function(t,n,r){var i=parseInt(t.css("padding-top"))+parseInt(t.css("padding-bottom"));var s=parseInt(t.css("line-height"));var o=s*n;t.height(o);var u=t[0].scrollHeight;if(u-i>=s*r){u=o+s*(r-n)+i}t.height(u-i)};var r=function(t,r,i,s,o){t=$(t);if(!o){t.bind("input propertychange keyup paste focus",function(e){n($(this),r,i);if(s)s(e)})}n(t,r,i)};e.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";if({buildType:"prd",deployType:"prod"}.buildType!=="prd"){n(744)}},function(e,t,n){"use strict";function f(e){return e&&e.__esModule?e:{"default":e}}var r=n(414);var i=f(r);var s=n(745);var o=f(s);var u=n(746);var a=f(u);var l=n(324);var c=n(382);var h=n(430);var p=n(747);var d=n(432);var v=n(364);var m=n(748);var g=n(407);var y=n(749);var b=n(750);var w=n(313);var E=n(752);var S=n(753);var x=n(754);var T=n(636);var N=n(755);var C=n(758);var k=n(412);var L=n(759);var A=n(760);var O=n(314);var M=n(759);var _=n(761);var D=n(756);var P=n(762);var H=n(763);var B=n(449);var j=n(764);var F=n(766);var I=n(371);var q=n(372);var R=n(316);var U=n(767);var z=n(772);var W=n(773);var X=n(360);var V=n(774);var J=n(775);var K=n(497);var Q=n(777);var G=n(778);var Y=n(779);var Z=n(780);var et=n(781);n(782);var tt=n(398);var nt={async:w,base64:c,orderComposer:p,cancelTooManyTimesCache:d,cipherOld:m,cipher:g,login:y,vDNS:E,occupation:b,stations:h,stationsDiff:S,watcher:new v,occupationConfig:x,Countdown:T,spider:N,md5:k,login3W:new O,massivelyLogin:new L,massivelyInjectDFP:new o.default,massivelyLogin3W:A,deferredDemystify:C,cipherStatistics:_,favoriteStation:D,promiseTest:P,deferredTest:H,massivelyOccupySeat3W:j,occupation3W:B,hy:F,crypto:l,FailureDictionary:I,log12306:q,log12306Test:U,pc12306Test:z,getProvider:new i.default,injectDFP:new tt,retryableTest:W,injectDFPTest:V,trainAjax:X,queryLeftTicketTest:J,cdnManagerTest:Y,debugTest:Z,cookie:Q,cdnEvaluate:G,sameCityCodeDiff:et,scanQrCodeLogin:function(t,n){(new a.default(t,n)).run()},loginWireless:function(t,n){return(new R(t,n)).run()},printOccupation:function(){var t=window.occupySeatMobile||window.occupySeatPremeditatedMobile;if(!t)return;console.log("ultraOccupationResult:",t.ultraOccupationResult);console.log("occupationProcessRecord:",t.occupationProcessRecord);console.log("runtimeError:",Common.runtimeErrorCollector.errors);console.log("occupationProcess:",t.assist.occupation.occupationProcess);console.log("retryCountBundle:",t.assist.occupation.retryCountBundle)},getWorkerDescription:function(){var t=null;var n=window.workerMobile||window.worker3W||null;if(n){t={environment:this.environment(n.root.baseURI),viewName:n.name,param:n.param}}return t},describe:function(){var t=this.getCurView();var n=t.name;var r=this.environment();var i="";window[n]=t;console.log("environment:",r);console.log("viewName:",n);console.log("param:",t.param);var s={environment:r,viewName:n,param:t.param};i+=n+" : "+r;var o=this.getWorkerDescription();if(o&&(o.environment!==s.environment||this.isMobileOr3W(s.viewName)!==this.isMobileOr3W(o.viewName))){console.log("not in accordance with "+o.name+":",o);s["worker"]=o;i+=", "+o.viewName+" : "+o.environment}window[n].tip&&window[n].tip(i);return s},isMobileOr3W:function(t){var n=/^\w+(3W|Mobile)/;return t.replace(n,"$1")},success:function(t){var n=$.Deferred();console.log("universal success arguments:",arguments);return n.resolve.apply(n,arguments)},fail:function(t){var n=$.Deferred();console.log("universal fail arguments:",arguments);return n.reject.apply(n,arguments)},progress:function(t){console.log("universal progress arguments:",arguments)},displayCurViewName:function(){setTimeout(this.describe.bind(this),1e3)},getCurView:function(){return QApp.getViewSync(QApp.router.getCurViewName())},getAppConfig:function(){var t=["switch.appServerOccupyTimeout","switch.appClientOccupyPay","switch.appClientOccupy","progressBarTimeout.appClientOccupy","switch.nightsOpenOrder","switch.showPaperTicket"];return Common.getAppConfig(t).then(this.success.bind(this))},invokeNativePlugin:function(t,n){console.log("QunarAPI.train",QunarAPI.train);if(arguments.length===0)return;if(n)QunarAPI.train[t](n);else QunarAPI.train[t]()},viewCapture:function(t){t=t||"http://touch.train.qunar.com/?from=touchindex";var n=Common.getPhoneSchema()+"railway/viewCapture?passUrl="+encodeURIComponent(t);console.log("about to capture view:",n);Common.sendSchema(n)},_replaceOriginAndPathname:function(t,n){t=t||location.href;var r=t.replace(/^http.*html/,n);return r},online:function(t){var n="http://hy.train.qunar.com/app/1.0/index.html";var r=this._replaceOriginAndPathname(t,n);console.log("online:",r);return r},dev:function(t){var n="http://hytrain.beta.qunar.com/hy/app/1.0/index.html";var r=this._replaceOriginAndPathname(t,n);console.log("dev:",r);return r},beta:function(t,n){t=t||"";n=n||"";var r="a",i=location.href;var s="http://fetrainb.beta.qunar.com/hy/app/1.0/index.html";if(t.length===1)r=t;else if(t.length>1)i=t;if(n.length===1)r=n;else if(n.length>1)i=n;s=s.replace("trainb","train"+r.toLowerCase());var o=this._replaceOriginAndPathname(i,s);console.log("beta "+r.toUpperCase()+":",o);return o},allUrl:function(t){var n=this.online(t);var r=this.dev(t);var i=this.beta(t,"a");var s=this.beta(t,"b");var o=this.beta(t,"c");var u=this.beta(t,"d");var a="";a+="online:    "+n+"\n\n";a+="dev:       "+r+"\n\n";a+="beta A:    "+i+"\n\n";a+="beta B:    "+s+"\n\n";a+="beta C:    "+o+"\n\n";a+="beta D:    "+u;console.log(a)},urlExample:function(){var t="http://host/path/index.html?hybridid=flight_train_app1#viewName?search=howToOrganizeHyUrl&author=lishiyun";console.log("pattern:    ",t);this.allUrl(t)},turnTo:{online:function(t){location.href=nt.online(t)},dev:function(t){location.href=nt.dev(t)},beta:function(t,n){location.href=nt.beta(t,n)}},environment:function(t){var n=/^https?:\/\/([^\/]+)\/.*$/;var r=/^(hytrain|gemini|leo|aries).beta.qunar.com$/;var i=t&&t.replace(n,"$1")||"";var s=i.toLowerCase()||location.host.toLowerCase();var o="unrecognized";var u=/^fetrain([a-z])\.beta/;if(s==="hy.train.qunar.com")o="online";else if(r.test(s))o="dev "+s.match(r)[1];else if(u.test(s))o="beta "+s.match(u)[1].toUpperCase();return o},queryOrderNotCompleted:function(){return wireless12306.queryOrder(1).then(nt.success,nt.fail)},showClientOccupationResult:function(){var t=window.occupySeatMobile;if(!t){console.log("this method is used exclusively within view occupaySetaMobile");return}this.describe();console.log("ultraOccupationResult:",t.ultraOccupationResult);console.log("occupationConfiguration:",t.assist.occupationConfiguration)},pluginNotExists:function(){var t=$.Deferred();var n={success:t.resolve.bind(t),fail:t.reject.bind(t)};QunarAPI.train.pluginNotExists(n);return t.then(this.success.bind(this),this.fail.bind(this))},wechatCookies:function(){var t=["qunariphone://","qunariphonetrain://","qunaraphone://","qunaraphonetrain://"];var n=t.map(K.getCookieForWebpay.bind(K));console.log("wechatCookies:",n)}};nt.displayCurViewName();QunarAPI.ready(function(){QunarAPI.hy.setWebViewAttr({scrollEnabled:false})});window.universal=nt},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=n(398);var o=n(408);var u=n(410);var a=n(409);var f=n(411);var l=function(){function e(t){i(this,e);this.times=t;this.runnerMap={"3w":new s,android:new o,ios:new u};this.configMap={android:a,ios:f}}r(e,[{key:"fillConfigWithExamples",value:function(t,n){var r=this.configMap[t];r.forEach(function(e){var t={};var r=false;var i=true;var s=e.fill;if(s==="no"){return}e.fields.forEach(function(e){var o=n[e.name];if(o){r=true;if(s==="empty"){t[e.name]="";return}if(e.name==="simSerialNumber"&&/\D/.test(o)){i=false}if(e.fake&&(e.fake.mask||e.fake.maskScale)){var u=e.fake.mask||[0];if(e.fake.maskScale){u=e.fake.maskScale.map(function(e){return Math.round(e*o.length)})}var a=u[0];var f=u[1]||o.length;if(a>f){a=f}o=o.split("");for(;a<f;a++){o[a]=o[a].replace(/[\da-zA-Z]/,"*")}o=o.join("")}t[e.name]=o;if(e.examples.length<2&&!e.examples.includes(o)){e.examples.push(o)}}});if(r&&i){e.examples.push(t)}});var i=JSON.stringify(r,null,4);console.log(i)}},{key:"resetResultsAndStartTimeStamp",value:function(){this.results={injectDFP:[]};this.startTimeStamp=Date.now()}},{key:"logResult",value:function(t,n,r){var i=this.results[n];var s=0,o=i.length,u=Date.now();if(o===0){s=u-this.startTimeStamp}else{s=u-i[o-1].timeStamp}s=(s/1e3).toFixed(2);var a={type:n,isSuccessful:t,failReason:r||"",timeStamp:u,timeCost:s};i.push(a);return a}},{key:"_analyzeResults",value:function(t){var n=this.results[t];var r=n.length;var i=0,s=0;n.forEach(function(e){if(e.isSuccessful){i++}});if(r>0){s=((n[r-1].timeStamp-this.startTimeStamp)/1e3/r).toFixed(2)}var o={type:t,tasks:r,success:i,fail:r-i,ratio:(i/r*100).toFixed(2)+"%",avgTimeConsuming:s};return o}},{key:"analyzeResults",value:function(){var t=this._analyzeResults("injectDFP");var n=this.results["injectDFP"].length;var r=Date.now();var i=((r-this.startTimeStamp)/1e3/n).toFixed(2);var s={injectDFPReport:t,avgTimeConsuming:i};console.log("report:",s);return s}},{key:"injectDFP",value:function(){function n(){t.logResult(true,"injectDFP")}function r(e){t.logResult(false,"injectDFP",e)}var t=this;return this.runner.injectDFP().done(n).fail(r)}},{key:"run3W",value:function(t,n){return this.run("3w",t,n)}},{key:"runAndroid",value:function(t,n){return this.run("android",t,n)}},{key:"runIOS",value:function(t,n){return this.run("ios",t,n)}},{key:"run",value:function(t,n,r){function s(){if(n--<=0){console.log("ä»»å¡æ§è¡å®æï¼");return i.analyzeResults()}if(r){i.runner.clearCookie()}i.injectDFP().always(s)}var i=this;this.runner=this.runnerMap[t]||this.runnerMap["3w"];this.resetResultsAndStartTimeStamp();n=n||this.times||0;console.log("ä»»å¡æ§è¡ä¸­...");s()}}]);return e}();t.default=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=n(316);var o=function(){function e(t,n){i(this,e);this.username=t;this.password=n;this.pc12306=pc12306.create();this.checkQrTimer=null;this.isStopCheckQr=false;this.retryCount=3;this.isUseStoredTK=true}r(e,[{key:"run",value:function(){function r(){return n._run().then(i,s)}function i(){console.log("ScanQrCodeLogin_run_succ",arguments);n.stopCheckQr();n.isUseStoredTK=true;return t.resolve.apply(t,arguments)}function s(e){console.log("ScanQrCodeLogin_run_fail",arguments);n.stopCheckQr();n.isUseStoredTK=false;return n.handleFailReason(e)}var t=$.Deferred(),n=this;return r()}},{key:"runFast",value:function(){return this.run()}},{key:"_run",value:function(){function r(e){console.log("getLoginConfSucc:",arguments);if(e.data&&e.data.name&&e.data.is_login=="Y"){return n.resolve.apply(n,arguments)}else{return t.continuePcScanQr()}}function i(){console.log("getLoginConfFail:",arguments);return t.continuePcScanQr()}var t=this,n=$.Deferred();t.isStopCheckQr=false;return this.pc12306.loginConf().then(r,i)}},{key:"handleFailReason",value:function(t){var n=Common.getError3W(t),r=Common.lookUp(n),i=$.Deferred();if(r.id=="notLogin"&&this.retryCount>0){this.retryCount--;return Common.delay(1e3).then(this.run.bind(this))}return i.reject.apply(i,arguments)}},{key:"continuePcScanQr",value:function(){return this.pc12306.uaMtkStatic().then(this.createQr64.bind(this)).then(this.pcScanQr.bind(this)).then(this.qrCallBack.bind(this)).then(this.passportUAM.bind(this))}},{key:"passportUAM",value:function(){return Common.delay(1e3).then(this.pc12306.passportUAMToken.bind(this.pc12306)).then(this.pc12306.otnUAMAuthClient.bind(this.pc12306)).then(this.pc12306.loginConf.bind(this.pc12306)).then(this.loginConfSucc.bind(this))}},{key:"loginConfSucc",value:function(t){var n=$.Deferred();if(t.data&&t.data.name&&t.data.is_login=="Y"){return n.resolve.apply(n,arguments)}else{return n.reject.apply(n,arguments)}}},{key:"stopCheckQr",value:function(){this.isStopCheckQr=true}},{key:"createQr64",value:function(){function r(e){console.log("createQr64Succ:",arguments);if(e.result_code&&e.image&&e.uuid){t.checkQrTimer=setTimeout(t.checkQr.bind(t,e.uuid),1e3);return n.resolve(e.uuid)}}var t=this,n=$.Deferred();clearTimeout(t.checkQrTimer);return this.pc12306.createQr64().then(r)}},{key:"checkQr",value:function(t){function r(){if(!n.isStopCheckQr){setTimeout(n.checkQr.bind(n,t),1e3)}}var n=this;clearTimeout(n.checkQrTimer);this.pc12306.checkQr(t).then(r)}},{key:"pcScanQr",value:function(t){console.log("pcScanQr:",arguments);return Common.delay(0).then(this.getQrStr.bind(this,t)).then(this._pcScanQr.bind(this))}},{key:"_pcScanQr",value:function(t){console.log("_pcScanQr:",arguments);return Common.delay(0).then(wireless12306.pcScanQr.bind(wireless12306,t))}},{key:"qrCallBack",value:function(t){console.log("qrCallBack:",arguments);if(t.succ_flag==1){return Common.delay(0).then(wireless12306.qrCallBack.bind(wireless12306))}}},{key:"getTokenKey",value:function(t){var n=t.length;if(n>=7){var r=t.charAt(n-7).toString();console.log("seven:",r);var i="0123456789=-_".indexOf(r);if(i<0){i="ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(r.toUpperCase())}if(i>=0){if(n>=i+16){var s=t.substring(i,i+16);return s}}}return""}},{key:"_getQrStr",value:function(t,n){var r=$.Deferred();var i=this.getBytes(t);var s=this.getTokenKey(n.tk||"");var o=this.RC4Base(i,s);var u=this.arrToBase64(o);console.log("ultraResult:",u);return r.resolve(u)}},{key:"RC4Base",value:function(t,n){var r=0;var i=0;var s=this.initKey(n);var o=[];for(var u=0;u<t.length;u++){r=r+1&255;i=(s[r]&255)+i&255;var a=s[r];s[r]=s[i];s[i]=a;o[u]=t[u]^s[(s[r]&255)+(s[i]&255)&255]}return o}},{key:"initKey",value:function(t){var n=void 0;var r=this.getBytes(t);var i=[];for(n=0;n<256;n++){i[n]=n}var s=0;var o=0;if(!r||r&&r.length==0){return null}for(n=0;n<256;n++){o=(r[s]&255)+(i[n]&255)+o&255;var u=i[n];i[n]=i[o];i[o]=u;s=(s+1)%r.length}return i}},{key:"getBytes",value:function(t){var n=[];for(var r=0;r<t.length;r++){n.push(t[r].charCodeAt())}return n}},{key:"arrToBase64",value:function(t){var n=new Uint8Array(t.length);t.forEach(function(e,t){n[t]=e});var r="";for(var i=n.byteLength,s=0;s<i;s++){r+=String.fromCharCode(n[s])}console.log("binary:",r);var o=window.btoa(r);console.log("result:",o);return o}},{key:"getQrStr",value:function(t){var n=Common.getUserInfo()||{};var r=this.username||n.user_name;var i=this.password||n.pwd;console.log("getQrStr,username,password:",arguments,r,i);if(!r||!i){this.stopCheckQr();QunarAPI.train.openView({viewName:"login12306"});return}if(n.tk&&this.isUseStoredTK){return this._getQrStr(t,{tk:n.tk})}var o=new s(r,i);return o.run().then(this._getQrStr.bind(this,t))}}]);return e}();e.exports=o},function(e,t,n){"use strict";var r=n(455);var i={source:"3",is12306accountLogin:true,bizMode:"6",extra:{bizMode:"6"},product:{productInfo:[{faqType:107,phone:"15215477455",isExpand:false,productList:[{pPrice:"2.85",pCheck:1,pExplain:"ä¸äº«95æï¼å¨å½éç¨",id:87,type:2,pDesc:"10Mæµéå",num:0,index:0},{pPrice:"4.75",pCheck:0,pExplain:"ä¸äº«95æï¼å¨å½éç¨",id:72,type:2,pDesc:"30Mæµéå",num:0,index:0},{pPrice:"9.50",pCheck:0,pExplain:"ä¸äº«95æï¼å¨å½éç¨",id:42,type:2,pDesc:"70Mæµéå",num:0,index:0},{pPrice:"19.00",pCheck:0,pExplain:"ä¸äº«95æï¼å¨å½éç¨",id:63,type:2,pDesc:"150Mæµéå",num:0,index:0},{pPrice:"28.50",pCheck:0,pExplain:"ä¸äº«95æï¼å¨å½éç¨",id:66,type:2,pDesc:"500Mæµéå",num:0,index:0},{pPrice:"47.50",pCheck:0,pExplain:"ä¸äº«95æï¼å¨å½éç¨",id:69,type:2,pDesc:"1Gæµéå",num:0,index:0},{pPrice:"66.50",pCheck:0,pExplain:"ä¸äº«95æï¼å¨å½éç¨",id:90,type:2,pDesc:"2Gæµéå",num:0,index:0},{pPrice:"95.00",pCheck:0,pExplain:"ä¸äº«95æï¼å¨å½éç¨",id:93,type:2,pDesc:"3Gæµéå",num:0,index:0},{pPrice:"0",pCheck:0,pExplain:"ä¸è´­ä¹°",id:-1,type:0,pDesc:"ä¸è´­ä¹°",num:0,index:0}],productDesc:"æµéå",isJustOne:1}]},orderInfo:{user12306Info:{account:"lishiyun_12306",password:"lsy11261990"},insuranceCorp:"GH",trainInfo:{departureTime:"201606151505",depDateForShow:"2016-06-15",dayDeltaForShow:"",ticketId:"0",from:"åäº¬è¥¿",seat:"ç¡¬åº§",depTimeForShow:"15:05",arrTimeForShow:"22:29",arrivalTime:"201606152229",no:"T9",duration:"444",distance:"444",durationForShow:"444",to:"éå·",candidateSeats:["äºç­åº§"]},insurancePrice:"20",contact:{name:"shiyunli",phone:"15215477455"},passengers:[{gender:1,certNo:"412725198902136987",certType:{name:"èº«ä»½è¯",code:"NI"},guardian:{gender:1,certNo:"513433199011261613",passengerId:"",certType:{name:"èº«ä»½è¯",code:"NI"},birthday:"1990-11-26",ticketType:"0",name:"æä¸é²"},passengerId:"",insuranceCount:"1",birthday:"1989-02-13",ticketType:"1",name:"é­æ²æ²"},{gender:1,certNo:"513433199011261613",passengerId:"",certType:{name:"èº«ä»½è¯",code:"NI"},insuranceCount:"1",birthday:"1990-11-26",ticketType:"0",name:"æä¸é²"}],ticketPrice:93,insuranceProductCode:"GH0003",hiTicketPrice:"93",couponList:[],agent:{agentId:359,agentName:"é¸è¾¾ç¥¨å¡",servicePhone:""}},minPaperTicketNum:0,innerCat:"homepage_search_seat12306_0_0_0_0_0_0_0"};var s={succ_flag:"1",error_msg:"",orderList:[{queue_cancel_flag:null,check608Code:null,if_deliver:"N",pay_flag:"Y",tourFlag:null,pay_resign_flag:"N",check608Msg:null,confirm_flag:"N",print_eticket_flag:"N",cancel_flag:"Y",ticket_totalnum:"2",myTicketList:[{passenger_id_no:"513433199011261613",ticket_status_name:"å¾æ¯ä»",train_date:"20160615",seat_name:"æ åº§",to_station_telecode:"ZZF",coach_no:"08",pay_limit_time:"20160615123635",start_time:"1505",confirm_flag:"N",print_eticket_flag:"N",passenger_name:"æä¸é²",coach_name:"08",cancel_flag:"Y",passenger_id_type_name:"äºä»£èº«ä»½è¯",limit_time:"20160615120635",ticket_price:"93.00",seat_type_code:"1",return_flag:"N",resign_flag:"4",ticket_type_code:"1",pay_limit_time_rel:"1774006",batch_no:"1",seat_flag:"1",ticket_status_code:"i",station_train_code:"T9",reserve_time:"20160615120635",pay_mode_code:"Y",passenger_id_type_code:"1",distance:"689",arrive_time:"2229",from_station_telecode:"BXP",eticket_flag:"N",flat_msg:"",seat_no:"3055",sequence_no:"E881788652"},{passenger_id_no:"513433199011261613",ticket_status_name:"å¾æ¯ä»",train_date:"20160615",seat_name:"æ åº§",to_station_telecode:"ZZF",coach_no:"08",pay_limit_time:"20160615123635",start_time:"1505",confirm_flag:"N",print_eticket_flag:"N",passenger_name:"æä¸é²",coach_name:"08",cancel_flag:"Y",passenger_id_type_name:"äºä»£èº«ä»½è¯",limit_time:"20160615120635",ticket_price:"46.50",seat_type_code:"1",return_flag:"N",resign_flag:"4",ticket_type_code:"2",pay_limit_time_rel:"1773997",batch_no:"1",seat_flag:"1",ticket_status_code:"i",station_train_code:"T9",reserve_time:"20160615120635",pay_mode_code:"Y",passenger_id_type_code:"1",distance:"689",arrive_time:"2229",from_station_telecode:"BXP",eticket_flag:"N",flat_msg:"",seat_no:"3058",sequence_no:"E881788652"}],ticket_price_all:"139.50",queue_message:null,ticketInfo:null,resign_flag:"4",return_flag:"N",order_flag:"2",insure_query_no:"",sequence_no:"E881788652",order_date:"20160615120635"}],statusCode:200,statusReason:"OK",responseHeaders:{Server:"Apache-Coyote/1.1",Expires:"Thu, 01 Jan 1970 00:00:00 GMT","Transfer-Encoding":"chunked","X-Powered-By":"Servlet 2.5; JBoss-5.0/JBossWeb-2.1",Pragma:"no-cache",Date:"Wed, 15 Jun 2016 04:07:00 GMT","Content-Type":"text/plain;charset=UTF-8"},responseTime:132,totalTime:132,isSuccessful:true};e.exports=new r(i,s)},function(e,t,n){"use strict";var r=n(363);var i={_parseResult:function(t){try{var n=JSON.parse(t.result)}catch(r){console.log("TEST ONLY: parse JSON fail");return null}console.log("TEST ONLY: parsed result:",n);return n},encrypt:function(t,n){function o(e){console.log("TEST ONLY: encrypt success:",e);return this._parseResult(e)}function u(e){console.log("TEST ONLY: encrypt fail:",e);return e}var i=n==="android";var s="fakeSessionId"+Math.floor(Math.random()*Math.pow(10,12));console.log("encryption device:",i?"android":"ios");return r.encrypt(t,s,"",i).then(o.bind(this),u)},decrypt:function(t,n){function o(e){console.log("TEST ONLY: decrypt success:",e);return this._parseResult(e)}function u(e){console.log("TEST ONLY: decrypt fail:",e);return e}var i=n==="android";var s="fakeSessionId"+Math.floor(Math.random()*Math.pow(10,12));console.log("decryption device:",i?"android":"ios");return r.decrypt(t,s,"",i).then(o.bind(this),u)},getSession:function(t){function s(e){console.log("TEST ONLY: get session success:",e);var t=this._parseResult(e);console.log(++i+"",t.isAndroid?"android":"ios");if(t.isAndroid===n||i>=100)return t;return r.getSession().then(s.bind(this))}function o(e){console.log("TEST ONLY: get session fail:",e);return e}var n=t==="android";var i=0;return r.getSession().then(s.bind(this),o)}};e.exports=i},function(e,t,n){"use strict";function i(){}var r=n(316);i.prototype={constructor:i,login:function(t,n){return(new r(t,n)).run().then(universal.success,universal.fail)},checkLogin:function(){return wireless12306.initUser().then(universal.success,universal.fail)},silentLogin:function(){return this.login()},silentLoginNextTick:function(){this.clearTimeStamp();return this.silentLogin()},clearTimeStamp:function(){localStorage.removeItem("mobileAgentBuy_silentLoginTime")},clearCache:function(){Common.clearCache()},clear:function(){this.clearTimeStamp();this.clearCache()},_alterLoginUser:function(t,n){Common._alterLoginUser(t,n)},alterPassword:function(t){Common.alterPassword(t)},loginFromCache:function(){var t=Common.getUserInfo()||{};return this.login(t.user_name,t.pwd)},getQunarUserInfo:function(){return Common.getQunarUserInfo().then(universal.success,universal.fail)},pull12306UserData:function(){return Common.pull12306UserData().then(universal.success,universal.fail)},logout:function(){return mobile12306.logout().then(universal.success,universal.fail)},logoutPurely:function(){return mobile12306.logoutPurely().then(universal.success,universal.fail)},removeUserInfo:function(){localStorage.removeItem("mobileAgentBuy_loginUser")}};window.loginTest=new i;e.exports=window.loginTest},function(e,t,n){"use strict";function s(){var e=null;return function(){if(e!==null)return e;var t=QApp.getViewSync("occupySeatMobile");return new r(t,t.params)}}function o(){var e=s();return e.getAllControllElements().then(universal.success,universal.fail)}function u(){var e=s();var t=[{name:"åæ-æå",target:"1A,1B,1C",result:["03|002A","03|002B","03|002C"],testTarget:{success:3,fail:0,ratio:1}},{name:"åæ-é¨åå¹é",target:"1A,1B,1C",result:["03|002A","03|002B","03|002E"],testTarget:{success:2,fail:1,ratio:.67}},{name:"åæ-é¨åå¹é-ä¸å¨ä¸æ",target:"1A,1B,1C",result:["03|002A","03|002B","03|003C"],testTarget:{success:2,fail:1,ratio:.67}},{name:"åæ-å¤±è´¥",target:"1A,1B,1C",result:["03|002E","03|003F","03|004E"],testTarget:{success:0,fail:3,ratio:0}},{name:"åæ-æå",target:"1A,1B,1C,2A,2E",result:["03|002A","03|002B","03|002C","03|003A","03|003E"],testTarget:{success:5,fail:0,ratio:1}},{name:"åæ-æå-åå",target:"1A,1B,1C,2A,2E",result:["03|004A","03|004B","03|004C","03|003A","03|003E"],testTarget:{success:5,fail:0,ratio:1}},{name:"åæ-é¨åå¹é",target:"1A,1B,1C,2A,2E",result:["03|002A","03|002B","03|002C","03|003B","03|003E"],testTarget:{success:4,fail:1,ratio:.8}},{name:"åæ-é¨åå¹é-ä¸ç¸é»çæ",target:"1A,1B,1C,2A,2E",result:["03|004A","03|004B","03|004C","03|001A","03|001E"],testTarget:{success:3,fail:2,ratio:.6}},{name:"åæ-é¨åæå-ä¸åè½¦å¢",target:"1A,1B,1C,2A,2E",result:["03|002A","04|002B","03|002C","03|003B","03|003E"],testTarget:{success:3,fail:2,ratio:.6}},{name:"åæ-é¨åæå-éæ°å­è½¦å¢",target:"1A,1B,1C,2A,2E",result:["A3|002A","A4|002B","A3|002C","A3|003B","A3|003E"],testTarget:{success:3,fail:2,ratio:.6}},{name:"åæ-é¨åæå-æ åº§",target:"1A,1B,1C,2A,2E",result:["A3|002A","A4|002B","A3|002C","A3|æ åº§","A3|003E"],testTarget:{success:3,fail:2,ratio:.6}},{name:"åæ-å¤±è´¥",target:"1A,2B,2A,2B",result:["03|002E","04|002F","03|002E","03|005E"],testTarget:{success:0,fail:4,ratio:0}}];t.forEach(function(t){var n=t.result.map(function(e){e=e.split("|");return{coach_name:e[0],seat_no:e[1]}});i(t.name,i.deepEqual(e.getSeatsMatchingDegree(t.target,n),t.testTarget))})}function a(){var e=s();e.view.form={onlinePickingInfo:"1A,2B"};e.view.watcher=i.proxy(e.view.watcher);e.seatsMatchingWatcher([{coach_name:"03",seat_no:"001A"},{coach_name:"03",seat_no:"002B"}]);i("watcher called once",e.view.watcher.calledOnce)}var r=n(429);var i=n(751);s=s();var f={getAllControllElements:o,seatsMatchingTest:u,seatsMatchingWatcherTest:a};e.exports=f},function(e,t){"use strict";function n(e,t){if($.type(e)==="function"){return e()}var n=$.type(t);var r=void 0;if(n==="function"){r=t()}else{r=t}if(r){console.log("%câ "+e,"color: green")}else{console.log("%câ "+e,"color: red")}}n.h=function(e,t){console.log("%c"+t,"font-weight: "+(e<5?"bold":"normal")+"; font-size: "+((7-e)*4+10)+"px")};for(var r=1;r<=6;r++){n["h"+r]=n.h.bind(n,r)}n.equal=function(e,t){var n=e===t;if(!n){console.error({value:e,expected:t})}return n};n.deepEqual=function(e,t,r){if(e===t){return true}var i=$.type(e);var s=$.type(t);if(i!==s){r||console.error({value:e,expected:t});return false}var o=true;if(i==="object"||i==="array"){Object.keys(e).forEach(function(i){if(!o)return;if(!n.deepEqual(e[i],t[i],true)){r||console.error({value:e,expected:t});o=false}});return o}o=e===t;if(!o){r||console.error({value:e,expected:t})}return o};n.proxy=function(e){var t=function n(){n.called=true;n.calledTimes=n.calledTimes?n.calledTimes+1:1;n.calledOnce=n.calledTimes===1;n.lastArguments=[].slice.call(arguments);n.lastContext=this;return e.apply(this,arguments)};return t};n.frozonRandom=function(e,t){n.h6("While Math.random() returns "+e+", then:");var r=Math.random;Math.random=function(){return e};var i=function(){Math.random=r};var s=t();if(s&&s.always){return s.always(i)}i();return s};n.frozonDateNow=function(e,t){n.h6("While Date.now() returns "+e+", then:");var r=Date.now;Date.now=function(){return e};var i=function(){Date.now=r};var s=t();if(s&&s.always){return s.always(i)}i();return s};e.exports=n},function(e,t){"use strict";var n={origin:null,_fetch:function(){function n(e){e.content=e.content.replace(/\n/g,"");console.log("fetch vDNS success:",e.content);this.origin=e.content;return e.content}function r(e){console.log("fetch vDNS fail:",arguments);return e}if(this.origin)return $.Deferred().resolve(this.origin);var t={lastUpdateTime:0};return Common.postRequest("t_tTrainVDNSConfig",t).then(n.bind(this),r.bind(this))},online:function(){function t(e){console.log("online vDNS:",e);return e}return this._fetch().then(t.bind(this))},_replace:function(t,n){function r(e){var r=e.replace(/url=http[\w\%\.]+\.html/g,t);console.log(n+" vDNS:",r);return r}return this._fetch().then(r.bind(this))},dev:function(){var t="url=http%3A%2F%2Fhytrain.beta.qunar.com%2Fhy%2Fapp%2F1.0%2Findex.html";return this._replace(t,"dev")},beta:function(){var t="url=http%3A%2F%2Ffetrain${QABETA_ENV_PREFIX}.beta.qunar.com%2Fhy%2Fapp%2F1.0%2Findex.html";return this._replace(t,"beta")}};e.exports=n},function(e,t,n){"use strict";var r=n(397);var i=n(360);var s="~/Documents/workSpace";var o={updateCmd:function(t){var n=s+"/train_sino_hy/src/hy1/scripts/util/stationsName.js";var r='echo "// date : `date`" > '+n;r+=';echo "\n" >> '+n;r+=";curl --insecure "+t+" >> "+n;r+=';echo "\n" >> '+n;r+=';echo "module.exports = station_names;" >> '+n;console.log(r)},getNewVersion:function(){function n(e,t){var n=t.split("'")[1];return n}var t="https://kyfw.12306.cn/otn/resources/js/framework/station_name.js?station_version="+ +(new Date);this.updateCmd(t);return i(t,{}).then(n)},_diff:function(t,n){var r=n.split("@");var i=[];r.forEach(function(e,n){if(t.indexOf(e)<0)i.push(e)});return i},match:function(t,n){var r=this.toObj(t);var i=this.toObj(n);var s=Object.keys(r);var o=Object.keys(i);var u=s.concat(o);u=this.unique(u);var a=u.map(function(e,t){return{qunar:r[e]||"",12306:i[e]||""}});return a},nameChanged:function(t){var n=t.filter(function(e,t){if(!e["12306"]||!e["qunar"])return true;if(e["12306"].split("|")[1]!==e["qunar"].split("|")[1])return true;return false});return n},getStationArr:function(t){var n=t.split("@");if(n[0].trim()==="")n.shift();if(n[n.length-1].trim()=="")n.pop();return n},countStations:function(t){var n=this.getStationArr(t).length;return n},statistic:function(t,n,r){var i={qunar:this.countStations(n),12306:this.countStations(r),delta:t.length,ratio:""};i.ratio=i.delta/i.qunar*100;i.ratio=i.ratio.toFixed(2)+"%";i.added=i["12306"]-i.qunar;return i},unique:function(t){t.sort();var n=t.filter(function(e,n){if(n>=t.length||e!==t[n+1])return true;return false});return n},toObj:function(t){var n={},r=[];t.forEach(function(e,t){r=e.split("|");if(n[r[2]])console.log("Warning! Duplicate station:",e);else n[r[2]]=e});return n},diff:function(){function t(e){var t=this._diff(e,r);var n=this._diff(r,e);var i=this.match(t,n);var s=this.nameChanged(i);var o=this.statistic(i,r,e);var u=this.statistic(s,r,e);console.log("statistics of name changed stations:",u);console.log("name changed stations:",s);console.log("statistics of one of six fields changed stations:",o);console.log("one of six fields changed stations:",i)}this.getNewVersion().then(t.bind(this))}};e.exports=o},function(e,t){"use strict";var n={parseConfig:function(t){t=t.replace(/[ ]+/g,"");t=t.replace(/ï¼/g,",");var n=t.split("@");var r,i,s,o=[];n.forEach(function(e,t){s={};r=e.split(",|");if(r.length===1)r=e.split("|");s.payMethod=r[0];o.push(s);if(!r[1])return;i=r[1].split("-");s["start"]=i[0];s["end"]=i[1]});return o},getSwitch:function(){var t=["switch.appServerOccupyTimeout","switch.appClientOccupyPay","switch.appClientOccupy","progressBarTimeout.appClientOccupy"];return Common.getAppConfig(t)},_getTrainServerJudge:function(t){function o(e){if(e.judgeCode===0||e.judgeCode==="0"){r.resolve(JSON.parse(e.resultJson))}else{u()}}function u(e){console.log("getTrainServerJudge fail:",e);var t={hasProduct:{occupyMode:2,canServerBackUp:true,payMode:1},noProduct:{occupyMode:2,canServerBackUp:true,payMode:1}};r.resolve(t)}var n="please pass departureTime as parameter, for example: 201609231715";if(!/^20\d{10}$/.test(t)){return $.Deferred().reject(n)}var r=$.Deferred();var i={bizMode:"6",trainStartTime:t};var s={judgeType:1,judgeParam:JSON.stringify(i)};Common.postRequest("t_tTrainServerJudge",s).done(o).fail(u);return r},getTrainServerJudge:function(t){function n(e){console.log("occupationConfig:",e)}function r(e){console.log("get occupationConfig fail:",e)}return this._getTrainServerJudge(n.bind(this),r.bind(this))},configTranslator:function(t){var n={0:"å®¢æ·ç«¯å åº§ï¼å»åªå¿æ¯ä»ï¼ä¸åè®¸ååº",1:"æå¡ç«¯å åº§ï¼å»åªå¿æ¯ä»ï¼ä¸åè®¸ååº",2:"å®¢æ·ç«¯å åº§ï¼å»åªå¿æ¯ä»ï¼åè®¸ååº",3:"æå¡ç«¯å åº§ï¼å»åªå¿æ¯ä»ï¼ä¸åè®¸ååº",4:"å®¢æ·ç«¯å åº§ï¼å»åªå¿æ¯ä»ï¼åè®¸ååº",5:"å®¢æ·ç«¯å åº§ï¼12306æ¯ä»ï¼ä¸åè®¸ååº",6:"å®¢æ·ç«¯å åº§ï¼å»åªå¿æ¯ä»ï¼ä¸åè®¸ååº",7:"å®¢æ·ç«¯å åº§ï¼12306æ¯ä»ï¼ä¸åè®¸ååº",8:"å®¢æ·ç«¯å åº§ï¼12306æ¯ä»ï¼åè®¸ååº",9:"å®¢æ·ç«¯å åº§ï¼ç´ä»ä»£æ£ï¼ä¸åè®¸ååº"};var r="",i="",s=this;var o=[],u={};t.forEach(function(e,t){i+=s.timeConvertor(e.start);i+=" - ";i+=s.timeConvertor(e.end);r="["+(t+1)+"]"+i;u[r]={};i="";o=e.payMethod.split(",");i+="ææå®:"+n[o[0]]||"æªç¥éç½®";u[r][o[0]]=i;i="";i+="æ æå®:"+n[o[1]]||"æªç¥éç½®";u[r][o[1]]=i;i=""});console.log("occupationConfig description:",JSON.stringify(u,null,4))},timeConvertor:function(t){var n={minutes:"åé",hours:"å°æ¶",days:"å¤©"};var r="";if(t<=60)r=t+n.minutes;else if(t<=1440)r=(t/60).toFixed(2)+n.hours;else r=(t/1440).toFixed(2)+n.days;return r},getAllControllElements:function(){function t(e){console.log("occupationConfig:",e);var t=this.parseConfig(e["switch.appClientOccupyPay"]);this.configTranslator(t)}return this.getSwitch().then(t.bind(this))}};e.exports=n},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function f(){this.limits={total:1e3,everytime:10,send:0};this.checi={length:0};this.route={success:[],fail:[]};this.mean=500;this.startTime=-1;this.stationArr=null;this.stationSource="all"}var i=n(753);var s=n(756);var o=n(757);var u=n(384);var a=n(430);f.prototype={constructor:f,getStationArr:function(){function t(e){this.stationArr=e}if(this.stationArr)return $.Deferred().resolve(this.stationArr);return this.getNewVersion().done(t.bind(this))},reloadStationSource:function(t){if(t===this.stationSource)return this;this.stationArr=null;this.stationSource=t==="all"?"all":"favorite";return this},getNewVersion:function(){if(this.stationSource=="favorite")return this.getNewVersionFavorite();return this.getNewVersionAll()},getNewVersionAll:function(){return i.getNewVersion().then(i.getStationArr.bind(i))},getNewVersionFavorite:function(){return s.getArr()},getRandomLine:function(t){function n(e){var n=this.getRandomIndex(e.length);var r=this.getRandomIndex(e.length);var i=e[n].split("|");var s=e[r].split("|");console.log(i[1]+" => "+s[1]);var o={from_station:i[2],to_station:s[2],train_date:t||this.getDefaultTrainDate()};console.log("line:",o);return o}return this.getStationArr().then(n.bind(this))},queryLeftTicketOfRandomLine:function(t){return this.getRandomLine(t).then(this.mobile12306QueryLeftTicket(this)).then(universal.success,universal.fail)},resetLimits:function(t){$.extend(true,this.limits,t)},getCheciOptimized:function(t){function n(e){function r(n){console.log("query:",n);var r=e[n].split("|");var i={train_start_date:t||this.getDefaultTrainDate(),train_station_code:r[2]};this.stationTrainQuery(i)}var n={total:e.length};this.resetLimits(n);this._queryRepeatedly().progress(r.bind(this))}this.startTime=Date.now();return this.getStationArr().then(n.bind(this))},generalSuccess:function(t,n){var r=this,i=$.Deferred();n.forEach(function(e,t){if(!r.checi[e.station_train_code])r.checi.length++;r.checi[e.station_train_code]=e});var s={isSuccessful:true,line:t};this.route.success.push(s);return i.resolve.apply(i,arguments)},generalFail:function(t){console.log("generalFail:",arguments);var n=$.Deferred();var r={isSuccessful:false,failReason:t};this.route.fail.push(r);return n.reject.apply(n,arguments)},stationTrainQueryRandomly:function(t){function n(e){var n=this.getRandomIndex(e.length);var r=e[n].split("|");var i={train_start_date:t||this.getDefaultTrainDate(),train_station_code:r[2]};console.log("station:",r);return this.stationTrainQuery(i)}return this.getStationArr().then(n.bind(this))},queryLeftTicketAfterStationTrainQuerySuccess:function(t,n){function i(e,t){function a(e){var t=this,n=0,r="",i="",s=[];e.forEach(function(e,n){r=e.station_name||e.start_station_name;i=e.end_station_name;if(t.stripDirection(r)!==t.stripDirection(i)){s.push(n)}});if(s.length>0)return s[this.getRandomIndex(s.length)];return n}if(t.length===0)return $.Deferred().reject("no train stops at the station");var n=a.call(this,t);var r=t[n];var i=r.station_name||r.start_station_name;var o=r.station_telecode||r.start_station_telecode;console.log(r.station_train_code+" ("+i+" => "+r.end_station_name+")",r);var u={train_date:r.station_train_date||this.getDefaultTrainDate(),from_station:o,to_station:r.end_station_telecode};return this.mobile12306QueryLeftTicket(u).then(s.bind(this),universal.fail)}function s(e){function h(e){var t;var n=e.map(function(e){return wireless12306.checkOrderInfo(e)});return(t=$).when.apply(t,r(n))}function p(){var r=[].concat(Array.prototype.slice.call(arguments));r.forEach(function(e,r){t=[];i="";o="";s=e.message||"";if(s)s+="("+e.sale_time+")";if(e.controlled_train_flag!="0"){i=e.controlled_train_message+"("+e.controlled_train_flag+")"}if(e.pc_types){c=true;console.warn("pc_types[N**2&N&2&default] exists:",e);a=e.pc_types.split("*");f=e.pc_types.substr(0,1).toUpperCase();if(f==="Y"){o=e.pc_types+d(a[1]);wireless12306.getPassCodeNew(e.location_code).then(console.log)}}if(i||s||o){t.push(i);t.push(s);t.push(o);t.push(e.from_station_name+" => "+e.to_station_name+"("+e.start_train_date+")");t.push(e);n[e.station_train_code]=t;n.length++}});console.log("weird train("+n.length+" of "+e.ticketResult.length+"):",n)}function d(e){var t=e.split(""),n=[],r="";t.forEach(function(e,t){r=u._seat_type[e.toString()];if(!r)return;n.push(e+r)});if(e.indexOf("none")>=0)n.push("noneæ åº§");return"("+n.join(",")+")"}var t=[],n={length:0};var i="",s="",o="",a=[],f;var l=$.Deferred();console.log("querySuccess:",e);var c=false;h(e.ticketResult).then(p);return l.resolve.apply(l,arguments)}return i.apply(this,arguments)},queryLeftTicketRandomly:function(t){return this.stationTrainQueryRandomly(t).then(this.queryLeftTicketAfterStationTrainQuerySuccess.bind(this))},queryLeftTicketByNameRandomly:function(t,n){return this.stationTrainQueryByName(t,n).then(this.queryLeftTicketAfterStationTrainQuerySuccess.bind(this))},stationTrainQuery:function(t){function n(e){console.log("amount of trains stop at the station:",e.cacheStopTimeDTO.length);return this.generalSuccess(e,e.cacheStopTimeDTO)}return wireless12306.stationTrainQuery(t).then(n.bind(this),this.generalFail.bind(this))},getRandomIndex:function(t){return Math.floor(t*Math.random())},getLines:function(){function t(e){var t=this;var n=[],r=[],i=[],s={};var o=[],u=[];e.forEach(function(a,f){e.forEach(function(e,l){if(f===l)return;r=a.split("|");i=e.split("|");o=t.stripDirection(r[1]);u=t.stripDirection(i[1]);if(o===u){return}s={from_station:r[2],from_station_name:r[1],to_station:i[2],to_station_name:i[1]};n.push(s)})});console.log("lines.length:",n.length);return n}return this.getStationArr().then(t.bind(this))},stripDirection:function(t){var n=t.split("");var r="ä¸è¥¿åå";if(r.indexOf(n.pop())>=0)t=n.join("");return t},mobile12306QueryLeftTicket:function(t){var n=t.train_date.substr(0,4);n+="-";n+=t.train_date.substr(4,2);n+="-";n+=t.train_date.substr(6,2);console.log("mobile12306QueryLeftTicket param",t);return wireless12306.queryLeftTicket(t)},queryLeftTicket:function(t){function r(e){return this.generalSuccess(e,e.ticketResult)}function i(e){return this.generalFail(e)}var n={train_date:t.train_date,from_station:t.from_station,to_station:t.to_station};return this.mobile12306QueryLeftTicket(n).then(r.bind(this),i.bind(this))},getTimeCost:function(){return((Date.now()-this.startTime)/1e3/60).toFixed(2)},getDefaultTrainDate:function(){return Common.formatDate(new Date(Date.now()+24*60*60*1e3),"YYYYMMdd")},_queryRepeatedly:function(){function n(){var e=this.limits.send;var r="";if(e>=this.limits.total){r="query "+this.limits.total+" times time cost(min): "+this.getTimeCost();console.log(r);t.resolve(r);return}this.limits.send+=this.limits.everytime;if(this.limits.send>this.limits.total){this.limits.send=this.limits.total}for(var i=e;i<this.limits.send;i++){t.notify(i)}console.log("i:",i);setTimeout(n.bind(this),this.getWaitTime())}var t=$.Deferred();setTimeout(n.bind(this),0);return t},getCheci:function(t){function n(e){function n(n){e[n].train_date=t;this.queryLeftTicket(e[n])}console.log("query stations time cost(min):",this.getTimeCost());this._queryRepeatedly().progress(n.bind(this))}this.startTime=Date.now();t=t||this.getDefaultTrainDate();this.getLines().then(n.bind(this))},getWaitTime:function(){if(this.route.success.length+this.route.fail.length<=this.limits.send-1.5*this.limits.everytime){this.mean+=500;console.log("this.mean:",this.mean)}else{this.mean-=500;if(this.mean<500){this.mean=500;console.log("this.mean:",this.mean)}}return this.mean},queryTrainInfo:function(t,n){var r={train_code:t,start_train_date:n||this.getDefaultTrainDate()};return wireless12306.queryTrainInfo(r).then(universal.success,universal.fail)},queryLeftTicketOfCachedCheci:function(t,n){if(!t||!this.checi[t]){console.log("spider hasn't cached the particular train");return}var r=this.checi[t];var i={station_train_code:t,train_date:n||r.start_train_date,from_station:r.start_station_telecode,to_station:r.end_station_telecode};return this.mobile12306QueryLeftTicket(i).then(universal.success,universal.fail)},stationTrainQueryByName:function(t,n){var r=universal.stations.getStationByChineseCharacter(t);if(r.length>1)console.log("multiple stations found:",r);var i={train_start_date:n||this.getDefaultTrainDate(),train_station_code:r[0][2]};return this.stationTrainQuery(i).then(universal.success,universal.fail)},startSellTicketTimeQuery:function(t){var n=a.getStationByChineseCharacter(t);if(n.length!==1)return $.Deferred().reject(t+"not properly matched:",n);var r=n[0][2];return wireless12306.startSellTicketTimeQuery(t,r)},startSellTicketTimeQueryRandomly:function(){function t(e){var t=this.getRandomIndex(e.length);var n=e[t].split("|");return this.startSellTicketTimeQuery(n[1])}return this.getStationArr().then(t.bind(this))},startSellStation:function(t){function s(){return this.startSellTicketTimeQueryRandomly().then(o.bind(this))}function o(e){var o=[];e.cacheQssDTO.forEach(function(e,t){if(e.time==n)o.push(e);if(!r[e.time])r[e.time]=[];r[e.time].push(e)});if(o.length===0&&i>0&&t){i--;return s.call(this)}console.log("start sell at "+n+":",o);return r}function u(){console.log("start sell:",r)}var n=t||"11:00";if(!/^[012]\d:[012345]\d$/.test(n))return $.Deferred().reject("start time not qualified:",n);var r={};var i=32;return s.call(this).always(u).fail(universal.fail)},startSellTrain:function(t,n){function r(e){var r="not found stations start sell at:"+t;if(!(e&&e[t]&&e[t][0])){console.log("particular time not found:",r);return $.Deferred().reject(r)}var i=e[t][0];var s=n||30;s--;var o=Common.aCertainTimeFrom(new Date,0,0,s);o=Common.formatDate(o,"YYYYMMdd");return this.queryLeftTicketByNameRandomly(i.station_name,o)}return this.startSellStation(t).then(r.bind(this),universal.fail)},getSellDateRandomly:function(t){var n=t||30;n--;var r=Common.aCertainTimeFrom(new Date,0,0,n);r=Common.formatDate(r,"YYYYMMdd");return r},selectTrainRandomly:function(t){var n=t.ticketResult.length;if(n<=0)return $.Deferred().reject("noTrainToChooseFrom",t);var r=this.getRandomIndex(n);return t.ticketResult[r]},queryLeftTicketRandomlyFor3wOccupation:function(){function t(e){var t={fromCity:e.from_station_name,toCity:e.to_station_name,trainNo:e.station_train_code,occupySeatType:n.call(this,e),date:Common.formatDate(e.start_train_date,"YYYY-MM-dd")};var r=mobile12306.parseYpInfo(e);return $.Deferred().resolve(t,r,e)}function n(e){var t=e.yp_info_cover.length;var n=this.getRandomIndex(t/10);var r=(n-1)*10;return e.yp_info_cover[r]}return this.queryLeftTicketRandomly(this.getSellDateRandomly()).then(this.selectTrainRandomly.bind(this)).then(t.bind(this))}};e.exports=new f},function(e,t,n){"use strict";function i(){this.stationArr=[]}var r=n(360);i.prototype={constructor:i,getArr:function(){if(this.stationArr.length>0)return $.Deferred().resolve(this.stationArr,"fromCache");return this.getFavoriteName().then(this._getArr.bind(this))},_getArr:function(t){var n=t.split("@");this.stationArr=n;return this.stationArr},getFavoriteName:function(){function n(e,t){return t.replace(/^.*'@([^']+)';/,"$1")}var t="https://kyfw.12306.cn/otn/resources/js/framework/favorite_name.js?version="+Date.now();return r(t,{}).then(n.bind(this))}};e.exports=new i},function(e,t){"use strict";var n=["0000","1095","1096","1133","1134","1136","1147","1148","1150","1152","1153","1154","1228","1230","1304","1456","1457","1458","1461","1462","1485","1486","1487","1488","1551","1552","1553","1801","1802","1817","1819","1820","2011","2012","2051","2052","2061","2062","2065","2066","2067","2068","2071","2072","2073","2074","2083","2084","2123","2124","2125","2126","2150","2152","2167","2168","2207","2209","2210","2255","2256","2257","2258","2462","2463","2464","2550","2560","2589","2590","2602","2604","2613","2614","2616","2621","2622","2623","2624","2635","2636","2667","2671","2672","2673","2674","2675","2676","2686","2687","2688","2701","2702","2727","2728","3106","3118","3157","3158","3216","3218","4031","4032","4043","4044","4045","4046","4060","4071","4072","4081","4082","4083","4084","4085","4086","4095","4096","4133","4134","4135","4136","4161","4162","4171","4172","4173","4174","4179","4180","4181","4182","4183","4184","4185","4186","4187","4188","4189","4190","4191","4192","4215","4216","4223","4224","4229","4230","4245","4246","4247","4251","4253","4255","4256","4289","4290","4301","4302","4305","4306","4310","4315","4316","4317","4318","4319","4320","4321","4322","4325","4326","4327","4328","4330","4343","4344","4345","4346","4347","4348","4355","4356","4357","4358","4367","4368","4369","4370","4371","4372","4373","4374","4375","4376","4377","4378","4415","4416","4461","4462","4463","4464","4465","4466","4471","4472","4473","4481","4482","4611","4612","4615","4616","4617","4627","4628","4629","4630","4635","4636","4641","4642","4643","4644","4651","4654","4705","4706","4707","4717","4718","4720","4731","4732","4733","4741","4742","4744","4746","4811","4812","5001","5002","5003","5004","5005","5006","5007","5008","5013","5014","5016","5018","5019","5021","5022","5024","5026","5027","5028","5035","5036","5037","5038","5040","5041","5042","5045","5046","5365","5366","5505","5506","5511","5512","5517","5518","5537","5538","5539","5540","5609","5610","5611","5612","5619","5620","5629","5630","5633","5634","5635","5636","5639","5640","5645","5646","5647","5648","5809","5810","5818","5819","5820","6003","6004","6021","6022","6025","6026","6029","6030","6031","6032","6033","6034","6035","6037","6038","6042","6043","6044","6045","6046","6055","6056","6061","6062","6063","6064","6065","6066","6071","6073","6074","6081","6082","6083","6084","6087","6088","6161","6162","6215","6216","6223","6224","6225","6226","6231","6232","6233","6234","6237","6238","6239","6240","6245","6246","6251","6252","6253","6254","6257","6258","6259","6260","6261","6262","6263","6264","6265","6266","6269","6270","6271","6272","6273","6274","6275","6276","6277","6278","6279","6280","6281","6282","6283","6285","6286","6287","6335","6336","6337","6338","6345","6346","6361","6362","6363","6364","6365","6366","6397","6398","6419","6420","6423","6424","6433","6434","6435","6436","6437","6438","6451","6452","6455","6456","6601","6602","6801","6802","6805","6806","6815","6816","6817","6818","6819","6820","6821","6822","6823","6826","6833","6836","6845","6849","6850","6851","6852","6853","6854","6855","6856","6857","6858","6903","6904","6905","6906","6907","6908","6917","6918","6919","6920","6953","6954","6956","6967","6968","7002","7003","7004","7005","7006","7007","7008","7053","7054","7265","7266","7267","7269","7270","7271","7272","7273","7274","7275","7451","7452","7453","7454","7501","7502","7503","7504","7505","7506","7507","7508","7509","7510","7511","7512","7513","7514","7515","7516","7519","7520","7523","7524","7525","7526","7529","7530","7531","7532","7533","7534","7535","7536","7537","7538","7556","7557","7558","7565","7566","7567","7568","7571","7572","8171","8172","8323","8324","8331","8332","8351","8352","8353","8354","8356","8357","8358","8361","8362","8375","8376","8381","8382","9999","C1001","C1002","C1003","C1004","C1005","C1006","C1007","C1008","C1009","C1010","C1011","C1012","C1013","C1014","C1015","C1016","C1017","C1018","C1019","C1020","C1021","C1022","C1023","C1024","C1025","C1026","C1027","C1028","C1029","C1030","C1031","C1032","C1034","C1037","C1041","C1042","C1043","C1044","C1201","C1202","C1203","C1204","C1205","C1206","C1207","C1208","C1209","C1210","C1211","C1212","C1213","C1214","C1215","C1216","C1217","C1218","C1219","C1220","C1221","C1222","C1223","C1224","C1225","C1226","C1227","C1228","C1229","C1230","C1231","C1232","C1233","C1234","C1235","C1236","C1238","C1241","C1242","C1243","C1244","C1245","C1246","C1247","C1248","C2001","C2002","C2003","C2004","C2005","C2006","C2007","C2008","C2009","C2010","C2011","C2012","C2013","C2014","C2015","C2016","C2017","C2018","C2019","C2020","C2021","C2022","C2023","C2024","C2025","C2026","C2027","C2028","C2029","C2030","C2031","C2032","C2033","C2034","C2035","C2036","C2037","C2038","C2039","C2040","C2041","C2042","C2043","C2044","C2045","C2046","C2047","C2048","C2049","C2050","C2051","C2052","C2053","C2054","C2055","C2056","C2057","C2058","C2059","C2060","C2061","C2062","C2063","C2064","C2065","C2066","C2067","C2068","C2069","C2070","C2071","C2072","C2073","C2074","C2075","C2076","C2077","C2078","C2079","C2080","C2081","C2082","C2083","C2084","C2085","C2086","C2087","C2088","C2089","C2090","C2091","C2092","C2093","C2094","C2095","C2096","C2097","C2098","C2099","C2100","C2101","C2102","C2103","C2105","C2106","C2107","C2108","C2202","C2203","C2204","C2205","C2206","C2207","C2208","C2209","C2210","C2211","C2212","C2213","C2214","C2215","C2216","C2217","C2218","C2219","C2220","C2221","C2222","C2223","C2224","C2225","C2226","C2227","C2228","C2229","C2230","C2231","C2232","C2233","C2234","C2235","C2236","C2237","C2238","C2239","C2240","C2241","C2242","C2243","C2244","C2245","C2246","C2301","C2302","C2303","C2304","C2305","C2306","C2307","C2308","C2309","C2581","C2582","C2583","C2584","C2585","C2586","C2587","C2588","C2589","C2590","C2591","C2592","C2593","C2594","C2596","C2613","C2614","C2801","C2802","C2803","C2804","C2805","C2806","C2807","C2808","C2809","C2881","C2882","C2883","C2884","C2885","C2886","C2887","C2888","C2889","C2890","C2891","C2892","C2893","C2894","C2895","C2896","C2900","C2901","C2902","C2903","C2904","C2905","C2906","C2907","C2908","C2909","C2910","C2911","C2912","C2913","C2914","C2915","C2921","C2922","C2923","C2924","C2925","C2926","C2927","C2928","C2930","C2951","C2952","C2961","C2962","C2963","C2964","C2965","C2966","C2967","C2968","C2969","C2970","C2971","C2972","C2973","C2974","C2975","C2976","C2991","C2992","C2994","C3002","C3004","C3006","C3008","C3010","C3012","C3014","C3016","C3018","C3020","C3022","C3024","C3026","C3028","C3030","C3032","C3034","C3602","C3604","C3606","C3608","C3610","C3612","C3614","C3616","C3618","C3620","C3622","C3624","C3626","C3628","C3630","C3632","C3634","C3636","C3638","C5001","C5002","C5005","C5006","C5007","C5008","C5011","C5012","C5013","C5014","C5017","C5018","C5019","C5020","C5501","C5502","C5503","C5504","C5505","C5506","C5507","C5508","C5509","C5510","C5521","C5522","C5523","C5524","C5601","C5602","C5603","C5604","C5605","C5606","C5607","C5608","C5609","C5610","C5621","C5622","C5623","C6101","C6102","C6103","C6104","C6105","C6106","C6107","C6108","C6109","C6110","C6111","C6112","C6113","C6114","C6115","C6116","C6117","C6118","C6119","C6120","C6121","C6122","C6123","C6124","C6127","C6128","C6129","C6130","C6131","C6132","C6133","C6134","C6135","C6136","C6137","C6138","C6139","C6140","C6141","C6142","C6143","C6144","C6145","C6146","C6151","C6152","C6153","C6154","C6155","C6156","C6157","C6158","C6160","C6181","C6182","C6183","C6184","C6185","C6186","C6202","C6209","C6211","C6213","C6214","C6215","C6216","C6217","C6218","C6219","C6220","C6221","C6222","C6224","C6251","C6252","C6253","C6254","C6255","C6256","C6257","C6258","C6259","C6260","C6261","C6264","C6265","C6266","C6267","C6268","C6269","C6270","C6271","C6272","C6281","C6282","C6283","C6284","C6285","C6286","C6287","C6288","C6289","C6290","C6291","C6292","C6293","C6294","C6301","C6302","C6303","C6304","C6305","C6306","C6307","C6308","C6309","C6310","C6311","C6312","C6313","C6314","C6315","C6316","C6361","C6362","C6363","C6364","C6365","C6366","C6367","C6368","C6801","C6802","C6803","C6804","C6805","C6806","C6807","C6808","C6809","C6810","C6811","C6812","C6813","C6814","C6815","C6816","C6817","C6818","C6819","C6820","C6821","C6822","C6823","C6824","C6851","C6852","C6853","C6854","C6855","C6856","C6857","C6858","C6859","C6860","C6861","C6862","C6863","C6864","C6865","C6866","C6867","C6868","C6869","C6870","C7001","C7002","C7003","C7004","C7005","C7006","C7007","C7008","C7009","C7010","C7011","C7012","C7013","C7014","C7017","C7018","C7019","C7020","C7021","C7022","C7023","C7024","C7025","C7026","C7027","C7028","C7029","C7030","C7031","C7032","C7033","C7034","C7035","C7036","C7037","C7038","C7039","C7040","C7041","C7042","C7043","C7044","C7045","C7046","C7047","C7048","C7049","C7050","C7051","C7052","C7055","C7056","C7057","C7058","C7059","C7060","C7061","C7062","C7063","C7064","C7065","C7066","C7067","C7068","C7071","C7072","C7073","C7074","C7075","C7076","C7077","C7078","C7079","C7080","C7082","C7083","C7084","C7085","C7086","C7087","C7088","C7089","C7090","C7091","C7092","C7093","C7094","C7095","C7096","C7097","C7099","C7100","C7101","C7102","C7103","C7104","C7105","C7106","C7107","C7109","C7110","C7111","C7112","C7113","C7114","C7115","C7116","C7117","C7118","C7119","C7120","C7121","C7122","C7123","C7124","C7125","C7126","C7127","C7128","C7129","C7130","C7131","C7132","C7133","C7134","C7135","C7136","C7137","C7138","C7140","C7141","C7142","C7143","C7144","C7145","C7146","C7147","C7148","C7149","C7152","C7153","C7154","C7155","C7156","C7157","C7158","C7159","C7160","C7601","C7602","C7603","C7605","C7606","C7608","C7609","C7610","C7611","C7612","C7615","C7616","C7617","C7618","C7619","C7621","C7622","C7624","C7625","C7626","C7627","C7628","C7630","C7631","C7633","C7634","C7635","C7637","C7638","C7639","C7640","C7642","C7643","C7644","C7646","C7647","C7649","C7650","C7651","C7653","C7654","C7655","C7656","C7658","C7659","C7660","C7662","C7663","C7665","C7666","C7667","C7669","C7670","C7671","C7672","C7674","C7675","C7676","C7678","C7679","C7681","C7682","C7683","C7686","C7687","C7688","C7701","C7702","C7704","C7705","C7707","C7708","C7709","C7710","C7712","C7713","C7715","C7716","C7717","C7718","C7720","C7721","C7723","C7724","C7725","C7726","C7728","C7729","C7731","C7732","C7733","C7734","C7736","C7737","C7739","C7740","C7741","C7742","C7744","C7745","C7747","C7748","C7749","C7750","C7752","C7901","C7902","C7903","C7906","C7907","C7908","C7909","C7910","C7911","C7914","C7915","C7916","C7917","C7918","C7919","C7922","C7923","C7924","C7925","C7926","C7927","C7930","C7931","C7932","C7933","C7934","C7935","C7938","C7939","C7940","C7941","C7942","C7943","C7946","C7947","C8501","C8502","C8503","C8504","C8505","C8506","C8507","C8508","C8509","C8510","C8511","C8512","C8513","C8514","C8515","C8516","C8517","C8518","C8519","C8520","C8521","C8522","C8523","C8524","C8525","C8526","C8527","C8528","C8529","C8530","C8531","C8532","C8533","C8534","C8601","C8602","C8603","C8604","C8605","C8606","C8607","C8608","C8609","C8610","D1","D2","D3","D4","D5","D6","D7","D8","D9","D10","D11","D12","D13","D14","D15","D16","D17","D18","D19","D20","D21","D22","D23","D24","D25","D26","D27","D28","D29","D30","D31","D32","D33","D34","D35","D36","D37","D38","D39","D40","D41","D42","D43","D44","D45","D46","D51","D52","D73","D74","D81","D82","D83","D84","D101","D102","D111","D112","D113","D114","D115","D116","D117","D118","D202","D204","D206","D208","D212","D295","D296","D306","D308","D314","D331","D332","D333","D334","D351","D352","D353","D354","D367","D368","D377","D378","D379","D380","D381","D382","D633","D634","D635","D636","D637","D638","D655","D656","D657","D658","D671","D672","D673","D674","D681","D682","D683","D684","D685","D686","D2001","D2002","D2003","D2004","D2005","D2006","D2007","D2008","D2021","D2022","D2201","D2202","D2205","D2206","D2207","D2208","D2211","D2212","D2213","D2214","D2215","D2216","D2217","D2218","D2221","D2222","D2223","D2224","D2225","D2226","D2227","D2228","D2231","D2232","D2233","D2234","D2235","D2236","D2237","D2238","D2241","D2242","D2243","D2244","D2245","D2246","D2247","D2248","D2251","D2252","D2255","D2256","D2259","D2260","D2261","D2262","D2263","D2264","D2265","D2266","D2267","D2268","D2269","D2270","D2271","D2272","D2277","D2278","D2281","D2282","D2283","D2284","D2285","D2286","D2287","D2288","D2293","D2294","D2295","D2296","D2297","D2298","D2301","D2302","D2304","D2305","D2306","D2307","D2308","D2309","D2310","D2311","D2312","D2313","D2314","D2315","D2316","D2317","D2318","D2319","D2320","D2321","D2322","D2323","D2324","D2325","D2326","D2327","D2328","D2329","D2330","D2331","D2332","D2333","D2334","D2335","D2336","D2337","D2338","D2341","D2342","D2343","D2344","D2345","D2346","D2349","D2350","D2351","D2352","D2353","D2354","D2355","D2356","D2357","D2358","D2361","D2362","D2363","D2364","D2367","D2368","D2371","D2372","D2373","D2374","D2501","D2502","D2503","D2504","D2505","D2506","D2507","D2508","D2509","D2510","D2511","D2512","D2513","D2514","D2515","D2516","D2517","D2518","D2519","D2520","D2521","D2522","D2523","D2524","D2525","D2526","D2527","D2528","D2529","D2530","D2531","D2532","D2533","D2534","D2545","D2546","D2561","D2562","D2563","D2564","D2601","D2602","D2603","D2604","D2605","D2606","D2607","D2608","D2701","D2703","D2704","D2705","D2706","D2707","D2708","D2711","D2712","D2714","D2719","D2721","D2722","D2723","D2724","D2725","D2731","D2732","D2733","D2734","D2735","D2736","D2741","D2742","D2743","D2744","D2745","D2746","D2747","D2748","D2749","D2750","D2751","D2752","D2753","D2754","D2755","D2756","D2757","D2758","D2781","D2782","D2803","D2804","D2806","D2807","D2808","D2809","D2810","D2811","D2812","D2813","D2814","D2815","D2816","D2817","D2818","D2819","D2820","D2821","D2822","D2823","D2825","D2827","D2828","D2829","D2830","D2831","D2832","D2833","D2834","D2835","D2836","D2837","D2838","D2840","D2841","D2842","D2843","D2844","D2879","D2880","D2959","D2962","D2963","D2964","D2965","D2967","D2968","D2970","D2971","D2972","D2973","D2974","D2975","D2976","D2977","D2979","D2980","D2982","D2991","D2992","D2993","D2994","D2997","D2998","D3001","D3002","D3003","D3004","D3005","D3006","D3007","D3008","D3009","D3010","D3011","D3012","D3013","D3014","D3015","D3016","D3021","D3022","D3023","D3024","D3025","D3026","D3027","D3028","D3031","D3032","D3033","D3034","D3041","D3042","D3043","D3044","D3045","D3046","D3047","D3048","D3051","D3052","D3053","D3054","D3055","D3056","D3057","D3058","D3063","D3064","D3065","D3066","D3067","D3068","D3069","D3070","D3071","D3072","D3073","D3074","D3077","D3078","D3081","D3082","D3083","D3084","D3085","D3086","D3087","D3088","D3089","D3090","D3091","D3092","D3093","D3094","D3095","D3096","D3101","D3102","D3103","D3104","D3107","D3108","D3109","D3110","D3111","D3112","D3125","D3126","D3131","D3132","D3133","D3134","D3135","D3136","D3137","D3138","D3141","D3142","D3143","D3144","D3145","D3146","D3147","D3148","D3151","D3152","D3153","D3154","D3155","D3156","D3157","D3158","D3201","D3202","D3205","D3206","D3207","D3208","D3211","D3212","D3215","D3216","D3217","D3218","D3219","D3220","D3222","D3223","D3226","D3227","D3231","D3232","D3241","D3242","D3245","D3246","D3255","D3256","D3257","D3258","D3263","D3264","D3273","D3274","D3277","D3278","D3291","D3292","D3293","D3294","D3295","D3296","D3297","D3298","D3301","D3302","D3303","D3304","D3305","D3306","D3321","D3322","D3323","D3324","D3325","D3561","D3563","D3564","D3566","D3567","D3568","D3569","D3570","D3601","D3602","D3603","D3604","D3605","D3607","D3608","D3609","D3610","D3611","D3612","D3614","D3615","D3616","D3617","D3618","D3619","D3621","D3622","D3624","D3625","D3626","D3627","D3628","D3630","D3631","D3632","D3633","D3634","D3635","D3637","D3638","D3639","D3640","D3641","D3643","D3646","D3647","D3648","D3650","D3679","D3680","D3681","D3682","D3683","D3685","D3686","D3687","D3689","D3705","D3706","D3707","D3708","D3709","D3710","D3711","D3712","D3713","D3714","D3715","D3716","D3718","D3719","D3721","D3722","D3723","D3724","D3725","D3726","D3727","D3728","D3751","D3752","D3753","D3754","D3755","D3756","D3757","D3760","D3761","D3762","D3781","D3782","D3783","D3784","D3786","D3787","D3789","D3792","D3901","D3902","D4179","D4180","D4615","D4616","D5082","D5083","D5086","D5087","D5088","D5089","D5102","D5105","D5111","D5112","D5113","D5114","D5115","D5121","D5122","D5123","D5124","D5125","D5126","D5127","D5128","D5131","D5132","D5133","D5134","D5137","D5138","D5139","D5140","D5141","D5142","D5143","D5144","D5145","D5146","D5147","D5148","D5151","D5152","D5153","D5154","D5156","D5159","D5160","D5161","D5162","D5163","D5164","D5171","D5172","D5173","D5174","D5175","D5176","D5177","D5178","D5179","D5180","D5181","D5182","D5184","D5185","D5186","D5187","D5188","D5189","D5190","D5191","D5192","D5193","D5194","D5195","D5196","D5197","D5203","D5204","D5207","D5208","D5211","D5212","D5213","D5214","D5217","D5218","D5220","D5221","D5222","D5225","D5226","D5228","D5229","D5233","D5234","D5235","D5236","D5237","D5238","D5239","D5240","D5243","D5244","D5245","D5246","D5247","D5248","D5249","D5250","D5301","D5302","D5303","D5304","D5305","D5306","D5307","D5308","D5309","D5310","D5311","D5312","D5313","D5314","D5315","D5316","D5318","D5319","D5333","D5334","D5341","D5342","D5495","D5497","D5499","D5503","D5504","D5507","D5508","D5513","D5514","D5517","D5518","D5523","D5524","D5527","D5528","D5533","D5534","D5537","D5538","D5543","D5544","D5547","D5548","D5562","D5571","D5572","D5585","D5586","D5587","D5601","D5602","D5603","D5604","D5605","D5606","D5607","D5608","D5609","D5610","D5611","D5612","D5641","D5642","D5651","D5652","D5653","D5654","D5655","D5656","D5657","D5658","D5659","D5660","D5661","D5662","D5663","D5664","D5665","D5666","D5700","D5703","D5704","D5713","D5714","D5717","D5723","D5724","D5727","D5728","D5817","D5819","D5820","D5826","D5853","D5854","D5857","D5858","D5863","D5864","D5867","D5868","D5877","D5878","D5896","D5907","D5911","D5912","D5913","D5914","D5921","D5922","D5923","D5924","D5927","D5928","D5931","D5932","D5937","D5951","D5952","D5953","D5954","D5955","D5956","D5989","D5990","D5993","D5994","D5997","D5998","D6001","D6002","D6003","D6005","D6009","D6012","D6014","D6016","D6051","D6052","D6053","D6054","D6056","D6057","D6071","D6072","D6074","D6075","D6076","D6077","D6078","D6079","D6082","D6083","D6089","D6090","D6091","D6094","D6099","D6195","D6201","D6202","D6203","D6204","D6205","D6206","D6207","D6208","D6210","D6212","D6213","D6214","D6215","D6216","D6217","D6218","D6219","D6220","D6221","D6223","D6224","D6225","D6226","D6227","D6228","D6229","D6230","D6231","D6232","D6233","D6234","D6235","D6237","D6238","D6331","D6332","D6333","D6334","D6335","D6336","D6337","D6338","D6341","D6342","D6343","D6344","D6345","D6348","D6349","D6350","D6351","D6352","D6353","D6354","D6355","D6356","D6357","D6358","D6359","D6360","D6371","D6372","D6374","D6375","D6376","D6381","D6382","D6384","D6391","D6392","D6403","D6405","D6406","D6407","D6408","D6409","D6410","D6412","D6415","D6417","D6418","D6419","D6420","D6422","D6434","D6435","D6436","D6437","D6438","D6439","D6440","D6441","D6442","D6443","D6444","D6445","D6448","D6471","D6472","D6473","D6474","D6475","D6476","D6477","D6478","D6501","D6502","D6503","D6504","D6505","D6506","D6507","D6508","D6509","D6510","D6511","D6512","D6513","D6514","D6515","D6516","D6521","D6522","D6523","D6524","D6525","D6526","D6527","D6528","D6529","D6530","D6531","D6532","D6533","D6534","D6541","D6542","D6548","D6571","D6572","D6573","D6574","D6575","D6576","D6577","D6578","D6581","D6582","D6583","D6584","D6611","D6612","D6614","D6616","D6618","D6619","D6620","D6675","D6676","D6677","D6678","D6721","D6724","D6725","D6731","D6732","D6733","D6734","D6735","D6736","D6737","D6738","D6751","D6752","D6753","D6754","D6755","D6756","D6757","D6758","D6759","D6760","D6761","D6762","D6763","D6764","D6765","D6766","D6767","D6768","D6769","D6770","D6771","D6772","D6773","D6774","D6801","D6804","D6805","D6806","D6807","D6808","D6809","D6810","D6811","D6812","D6813","D6815","D6816","D6817","D6818","D6819","D6820","D6821","D6822","D6823","D6824","D6825","D6826","D6827","D6828","D6830","D6839","D6840","D6872","D6873","D6874","D6875","D6876","D6901","D6902","D6903","D6904","D6905","D6906","D6907","D6908","D6909","D6910","D6911","D6912","D6913","D6914","D6915","D6916","D6917","D6918","D6919","D7101","D7102","D7103","D7104","D7105","D7106","D7107","D7108","D7109","D7110","D7111","D7112","D7113","D7114","D7115","D7116","D7151","D7152","D7153","D7154","D7155","D7156","D7157","D7158","D7161","D7162","D7165","D7166","D7167","D7168","D7201","D7202","D7203","D7204","D7205","D7206","D7207","D7208","D7209","D7210","D7211","D7212","D7301","D7302","D7303","D7306","D7307","D7308","D7309","D7310","D7312","D7313","D7315","D7316","D7317","D7319","D7320","D7321","D7322","D7323","D7324","D7326","D7327","D7328","D7329","D7330","D7331","D7332","D7333","D7335","D7336","D7338","D7339","D7340","D7341","D7342","D7343","D7344","D7345","D7346","D7347","D7348","D7349","D7350","D7351","D7352","D7353","D7354","D7355","D7356","D7401","D7402","D7403","D7404","D7405","D7406","D7407","D7408","D7409","D7410","D7411","D7412","D7413","D7414","D7415","D7416","D7417","D7418","D7419","D7420","D7501","D7502","D7503","D7504","D7505","D7506","D7507","D7508","D7509","D7510","D7511","D7512","D7513","D7514","D7515","D7516","D7517","D7518","D7519","D7520","D7521","D7522","D7523","D7524","D7525","D7526","D7527","D7528","D7529","D7530","D7531","D7532","D7601","D7602","D7603","D7604","D7606","D7607","D7609","D7610","D7611","D7612","D7613","D7614","D7615","D7616","D7619","D7620","D7621","D7622","D7623","D7624","D7625","D7626","D7629","D7630","D7631","D7632","D7633","D7634","D7635","D7636","D7638","D7639","D7640","D7641","D7651","D7652","D7653","D7654","D7671","D7672","D7675","D7676","D7677","D7678","D7701","D7702","D7703","D7704","D7705","D7706","D7707","D7708","D7709","D7710","D7721","D7722","D7723","D7724","D7731","D7732","D7733","D7734","D7735","D7736","D7737","D7738","D7739","D7740","D7741","D7742","D7743","D7744","D7745","D7746","D7747","D7748","D7749","D7750","D7751","D7752","D7753","D7754","D7755","D7756","D7757","D7758","D7811","D7812","D7821","D7822","D7823","D7824","D7825","D7826","D7827","D7828","D7829","D7830","D7831","D7832","D7880","D7881","D7882","D7901","D7902","D7903","D7904","D7905","D7907","D7908","D7909","D7910","D7911","D7912","D7913","D7914","D7915","D7916","D7917","D7918","D7919","D7920","D7921","D7922","D7923","D7924","D7925","D7926","D7927","D7928","D7929","D7930","D7932","D7933","D7934","D7935","D7936","D7938","D7981","D7982","D7983","D7984","D7991","D7992","D8073","D8074","D8075","D8076","D8089","D8090","D8091","D8095","D8096","D8097","D8098","D8131","D8132","D8133","D8134","D8135","D8136","D8137","D8138","D8139","D8140","D8141","D8142","D8201","D8203","D8204","D8205","D8206","D8207","D8208","D8209","D8210","D8211","D8212","D8231","D8232","D8233","D8234","D8235","D8237","D8238","D8239","D8240","D8241","D8242","D8251","D8252","D8261","D8262","D8264","D8265","D8266","D8267","D8268","D8291","D8293","D8294","D8295","D8296","D8305","D8307","D8308","D8309","D8312","D8317","D8332","D8333","D8334","D8335","D8336","D8341","D8342","D8347","D8348","D8349","D8351","D8352","D8353","D8354","D8501","D8502","D8503","D8504","D8505","D8506","D8511","D8512","D8513","D8514","D8515","D8516","D8525","D8526","D8531","D8532","D8533","D8534","D8801","D8802","D8803","D8804","D8805","D8806","D8807","D8808","D8809","D8861","D8862","D8863","D8864","D8865","D8866","D8867","D8868","D8869","D8870","D8871","D8872","D8873","D8874","D8875","D8876","D8909","D8910","D8923","D8924","D8927","D8928","D8931","D8932","D8935","D8936","D8969","D8970","D8971","D8972","D9215","D9216","D9217","D9218","D9609","D9610","D9613","D9614","D9629","D9630","D9661","D9662","D9663","D9664","D9666","D9667","D9668","D9951","D9952","D9981","D9982","G1","G2","G3","G4","G5","G6","G7","G8","G11","G12","G13","G14","G15","G16","G17","G18","G19","G20","G21","G22","G25","G26","G27","G28","G29","G30","G31","G32","G33","G34","G35","G36","G37","G38","G39","G40","G41","G42","G43","G44","G45","G46","G47","G48","G49","G50","G51","G52","G53","G54","G55","G56","G57","G58","G59","G60","G61","G62","G63","G64","G65","G66","G67","G68","G69","G70","G71","G72","G73","G74","G75","G76","G77","G78","G79","G80","G81","G82","G83","G84","G85","G86","G87","G88","G89","G90","G91","G92","G93","G94","G95","G96","G97","G101","G102","G104","G105","G106","G107","G108","G110","G111","G112","G113","G114","G115","G116","G117","G118","G119","G121","G122","G125","G126","G129","G130","G131","G132","G133","G134","G135","G137","G138","G139","G140","G141","G142","G143","G145","G146","G147","G148","G149","G150","G152","G153","G154","G157","G158","G161","G162","G163","G164","G165","G166","G167","G168","G171","G172","G173","G174","G175","G176","G177","G178","G179","G180","G181","G182","G183","G184","G185","G186","G187","G188","G189","G190","G191","G192","G193","G194","G195","G196","G197","G198","G199","G200","G201","G202","G203","G204","G205","G206","G207","G208","G211","G212","G213","G214","G215","G216","G217","G218","G219","G220","G221","G222","G223","G224","G225","G226","G227","G228","G229","G230","G231","G232","G233","G234","G235","G236","G237","G238","G239","G240","G241","G242","G243","G244","G245","G246","G247","G248","G253","G254","G255","G256","G257","G258","G259","G260","G261","G262","G263","G264","G265","G266","G267","G269","G270","G272","G275","G276","G277","G278","G279","G280","G281","G282","G283","G284","G285","G286","G287","G288","G289","G290","G291","G293","G294","G297","G298","G301","G302","G303","G304","G307","G308","G309","G310","G311","G312","G313","G314","G315","G316","G317","G318","G322","G323","G324","G325","G329","G330","G331","G332","G333","G334","G335","G336","G337","G338","G345","G348","G351","G352","G355","G356","G359","G361","G362","G363","G364","G365","G366","G367","G369","G370","G373","G374","G381","G382","G383","G384","G386","G387","G388","G389","G390","G391","G392","G393","G394","G395","G396","G397","G398","G399","G400","G401","G402","G403","G404","G411","G412","G421","G422","G423","G424","G425","G426","G429","G430","G431","G432","G433","G434","G451","G452","G453","G454","G455","G456","G457","G458","G459","G460","G461","G462","G471","G472","G473","G474","G475","G476","G487","G488","G489","G490","G491","G492","G493","G494","G501","G502","G503","G504","G505","G506","G507","G508","G509","G510","G511","G512","G514","G516","G518","G519","G520","G521","G523","G524","G525","G527","G529","G530","G531","G532","G535","G536","G537","G538","G541","G542","G544","G545","G546","G547","G548","G549","G550","G551","G552","G553","G554","G555","G556","G557","G558","G561","G562","G563","G564","G565","G566","G567","G568","G569","G570","G572","G573","G575","G576","G577","G578","G579","G580","G581","G582","G583","G584","G587","G588","G589","G590","G591","G592","G593","G594","G595","G596","G597","G599","G600","G601","G602","G603","G604","G605","G606","G607","G608","G609","G610","G611","G612","G613","G614","G615","G616","G617","G618","G619","G620","G621","G622","G623","G624","G625","G626","G631","G632","G633","G634","G635","G636","G637","G638","G639","G640","G641","G642","G651","G652","G653","G655","G656","G658","G659","G660","G661","G662","G663","G664","G665","G666","G669","G670","G671","G672","G673","G674","G675","G676","G677","G678","G685","G686","G687","G688","G691","G692","G693","G694","G701","G702","G703","G704","G705","G706","G707","G708","G709","G710","G711","G712","G713","G714","G715","G716","G717","G718","G719","G720","G721","G722","G723","G724","G725","G726","G727","G728","G729","G730","G731","G732","G751","G754","G755","G758","G763","G764","G781","G782","G783","G784","G785","G786","G787","G788","G817","G818","G819","G820","G821","G822","G823","G824","G825","G826","G827","G828","G831","G832","G833","G834","G835","G836","G837","G838","G839","G840","G841","G842","G847","G850","G855","G856","G857","G858","G881","G882","G883","G884","G885","G886","G887","G891","G892","G893","G895","G896","G897","G898","G1001","G1002","G1003","G1004","G1005","G1006","G1007","G1008","G1009","G1010","G1011","G1012","G1013","G1014","G1015","G1016","G1017","G1018","G1019","G1020","G1021","G1022","G1031","G1032","G1033","G1034","G1102","G1103","G1104","G1105","G1106","G1108","G1109","G1110","G1112","G1113","G1114","G1117","G1120","G1121","G1122","G1123","G1125","G1127","G1128","G1129","G1130","G1133","G1134","G1135","G1136","G1138","G1139","G1140","G1141","G1143","G1144","G1145","G1148","G1151","G1152","G1161","G1162","G1201","G1202","G1203","G1204","G1205","G1206","G1207","G1208","G1211","G1212","G1213","G1214","G1221","G1222","G1223","G1224","G1225","G1226","G1227","G1228","G1229","G1230","G1231","G1232","G1233","G1234","G1235","G1236","G1241","G1242","G1243","G1244","G1245","G1246","G1247","G1248","G1251","G1252","G1253","G1254","G1255","G1256","G1257","G1258","G1261","G1262","G1263","G1264","G1265","G1266","G1267","G1268","G1271","G1272","G1273","G1274","G1275","G1276","G1277","G1278","G1281","G1282","G1283","G1284","G1285","G1286","G1287","G1288","G1289","G1290","G1291","G1292","G1293","G1294","G1295","G1296","G1297","G1298","G1299","G1300","G1301","G1302","G1303","G1304","G1305","G1306","G1311","G1312","G1313","G1314","G1315","G1316","G1317","G1318","G1321","G1322","G1323","G1324","G1325","G1326","G1327","G1328","G1329","G1330","G1331","G1332","G1341","G1342","G1343","G1344","G1346","G1347","G1348","G1349","G1350","G1352","G1353","G1354","G1355","G1356","G1357","G1358","G1359","G1361","G1362","G1363","G1364","G1365","G1371","G1373","G1374","G1376","G1382","G1383","G1384","G1386","G1387","G1388","G1389","G1390","G1391","G1393","G1394","G1395","G1401","G1402","G1403","G1404","G1405","G1406","G1415","G1416","G1417","G1418","G1421","G1422","G1431","G1432","G1433","G1434","G1451","G1452","G1455","G1456","G1481","G1482","G1483","G1484","G1492","G1493","G1501","G1502","G1503","G1504","G1505","G1506","G1507","G1508","G1509","G1510","G1521","G1522","G1523","G1524","G1531","G1532","G1533","G1534","G1546","G1547","G1559","G1560","G1561","G1562","G1563","G1564","G1565","G1566","G1569","G1570","G1571","G1572","G1601","G1602","G1611","G1612","G1619","G1620","G1621","G1624","G1631","G1632","G1633","G1634","G1635","G1636","G1637","G1638","G1639","G1640","G1641","G1642","G1651","G1652","G1653","G1654","G1655","G1656","G1657","G1658","G1659","G1660","G1661","G1662","G1664","G1671","G1672","G1673","G1674","G1675","G1676","G1677","G1678","G1679","G1680","G1685","G1686","G1687","G1688","G1691","G1692","G1693","G1694","G1701","G1702","G1703","G1704","G1705","G1706","G1707","G1708","G1709","G1710","G1711","G1712","G1731","G1732","G1735","G1736","G1737","G1738","G1741","G1742","G1743","G1744","G1745","G1746","G1801","G1802","G1803","G1804","G1805","G1806","G1807","G1808","G1809","G1810","G1811","G1812","G1813","G1814","G1815","G1816","G1817","G1818","G1819","G1820","G1821","G1822","G1823","G1824","G1825","G1826","G1827","G1828","G1831","G1832","G1833","G1834","G1835","G1836","G1837","G1838","G1847","G1848","G1849","G1850","G1851","G1852","G1853","G1854","G1855","G1856","G1857","G1858","G1861","G1862","G1863","G1864","G1865","G1866","G1867","G1868","G1869","G1870","G1871","G1872","G1873","G1874","G1875","G1876","G1877","G1878","G1879","G1880","G1881","G1882","G1883","G1884","G1885","G1886","G1887","G1888","G1889","G1890","G1891","G1892","G1893","G1894","G1895","G1896","G1897","G1898","G1899","G1900","G1901","G1902","G1903","G1904","G1905","G1906","G1907","G1908","G1911","G1912","G1913","G1914","G1915","G1916","G1917","G1918","G1919","G1920","G1921","G1922","G1923","G1924","G1925","G1926","G1927","G1928","G1929","G1930","G1931","G1932","G1933","G1934","G1935","G1936","G1937","G1938","G1939","G1940","G1941","G1942","G1951","G1952","G1953","G1954","G1955","G1956","G1957","G1958","G1961","G1962","G1963","G1964","G1965","G1966","G1967","G1968","G1981","G1986","G2001","G2002","G2003","G2008","G2009","G2014","G2101","G2102","G2103","G2104","G2105","G2106","G2107","G2108","G2301","G2302","G2303","G2304","G2305","G2306","G2307","G2308","G2311","G2312","G2313","G2314","G2315","G2316","G2317","G2318","G2321","G2322","G2323","G2324","G2325","G2326","G2327","G2328","G2331","G2332","G2333","G2334","G2335","G2336","G2341","G2342","G2343","G2344","G2351","G2352","G2353","G2354","G2355","G2356","G2357","G2358","G2361","G2362","G2363","G2364","G2365","G2366","G2601","G2602","G2603","G2604","G2605","G2606","G2607","G2608","G2811","G2812","G2813","G2814","G2901","G2902","G2903","G2904","G2905","G2906","G2911","G2912","G2913","G2914","G2915","G2916","G2917","G2918","G4531","G4534","G5003","G5004","G5105","G5106","G5251","G5252","G5253","G5254","G5301","G5302","G5303","G5304","G5357","G5358","G5367","G5368","G5369","G5370","G6001","G6002","G6011","G6012","G6013","G6014","G6015","G6016","G6017","G6018","G6019","G6020","G6021","G6022","G6023","G6024","G6025","G6026","G6027","G6028","G6029","G6030","G6031","G6032","G6033","G6034","G6071","G6072","G6073","G6074","G6101","G6102","G6103","G6105","G6110","G6111","G6112","G6116","G6117","G6118","G6119","G6120","G6121","G6122","G6131","G6132","G6141","G6142","G6143","G6144","G6145","G6146","G6147","G6148","G6151","G6152","G6153","G6154","G6159","G6160","G6161","G6162","G6163","G6164","G6165","G6166","G6201","G6202","G6203","G6205","G6207","G6208","G6211","G6212","G6213","G6214","G6215","G6216","G6221","G6222","G6223","G6224","G6225","G6227","G6229","G6230","G6231","G6234","G6236","G6240","G6241","G6242","G6244","G6246","G6250","G6251","G6252","G6253","G6254","G6255","G6258","G6260","G6266","G6270","G6271","G6272","G6273","G6274","G6275","G6276","G6284","G6285","G6286","G6287","G6288","G6289","G6290","G6291","G6292","G6293","G6301","G6302","G6303","G6304","G6306","G6307","G6308","G6309","G6310","G6311","G6312","G6313","G6314","G6315","G6316","G6318","G6319","G6320","G6321","G6322","G6323","G6324","G6325","G6326","G6327","G6328","G6329","G6330","G6331","G6332","G6402","G6403","G6404","G6405","G6406","G6407","G6408","G6409","G6410","G6411","G6412","G6413","G6414","G6415","G6416","G6417","G6418","G6419","G6451","G6452","G6453","G6454","G6455","G6456","G6457","G6458","G6481","G6482","G6483","G6484","G6485","G6486","G6487","G6488","G6501","G6502","G6503","G6504","G6506","G6507","G6508","G6510","G6511","G6512","G6513","G6514","G6515","G6516","G6517","G6518","G6519","G6520","G6521","G6522","G6523","G6524","G6525","G6526","G6527","G6528","G6529","G6530","G6531","G6532","G6533","G6534","G6535","G6536","G6537","G6538","G6539","G6540","G6541","G6542","G6543","G6544","G6545","G6546","G6547","G6549","G6602","G6603","G6605","G6606","G6607","G6611","G6612","G6701","G6703","G6704","G6705","G6706","G6707","G6709","G6710","G6711","G6712","G6713","G6714","G6718","G6731","G6732","G6733","G6734","G6735","G6736","G6741","G6742","G6743","G6744","G6745","G6746","G6751","G6752","G6753","G6755","G6985","G6986","G6987","G6988","G7001","G7002","G7003","G7004","G7005","G7006","G7007","G7008","G7009","G7010","G7011","G7012","G7013","G7014","G7015","G7016","G7017","G7018","G7019","G7020","G7021","G7022","G7023","G7024","G7025","G7026","G7027","G7028","G7029","G7030","G7031","G7032","G7033","G7034","G7035","G7036","G7037","G7038","G7039","G7040","G7041","G7042","G7043","G7044","G7045","G7046","G7047","G7048","G7049","G7050","G7051","G7052","G7053","G7054","G7055","G7056","G7057","G7058","G7059","G7060","G7061","G7062","G7063","G7064","G7065","G7066","G7067","G7068","G7069","G7070","G7071","G7072","G7073","G7074","G7075","G7076","G7077","G7078","G7079","G7080","G7081","G7082","G7083","G7084","G7085","G7086","G7087","G7088","G7089","G7090","G7091","G7092","G7093","G7094","G7101","G7102","G7103","G7104","G7105","G7106","G7107","G7108","G7109","G7110","G7111","G7112","G7113","G7114","G7115","G7116","G7117","G7118","G7119","G7120","G7121","G7122","G7123","G7124","G7125","G7126","G7128","G7131","G7132","G7133","G7134","G7135","G7136","G7137","G7138","G7139","G7140","G7141","G7142","G7143","G7144","G7145","G7146","G7155","G7156","G7157","G7158","G7167","G7168","G7169","G7170","G7171","G7174","G7177","G7178","G7201","G7202","G7205","G7206","G7207","G7208","G7209","G7210","G7211","G7212","G7221","G7224","G7225","G7231","G7232","G7233","G7234","G7235","G7236","G7237","G7238","G7239","G7240","G7241","G7242","G7243","G7244","G7245","G7247","G7248","G7249","G7251","G7253","G7255","G7256","G7257","G7258","G7260","G7261","G7263","G7264","G7265","G7267","G7268","G7269","G7270","G7272","G7273","G7275","G7276","G7278","G7281","G7282","G7283","G7284","G7285","G7286","G7287","G7288","G7291","G7294","G7295","G7296","G7297","G7298","G7301","G7302","G7303","G7304","G7305","G7306","G7307","G7308","G7309","G7310","G7311","G7312","G7314","G7315","G7317","G7323","G7324","G7330","G7331","G7332","G7333","G7334","G7335","G7336","G7337","G7338","G7339","G7340","G7341","G7342","G7343","G7344","G7349","G7350","G7351","G7352","G7353","G7354","G7355","G7356","G7357","G7358","G7359","G7360","G7361","G7364","G7365","G7366","G7369","G7371","G7372","G7373","G7374","G7375","G7376","G7377","G7378","G7379","G7380","G7381","G7382","G7383","G7384","G7385","G7386","G7387","G7388","G7391","G7392","G7393","G7394","G7395","G7396","G7397","G7398","G7401","G7402","G7403","G7405","G7406","G7408","G7413","G7414","G7416","G7417","G7418","G7419","G7420","G7421","G7433","G7434","G7435","G7501","G7502","G7503","G7504","G7505","G7506","G7507","G7508","G7509","G7510","G7511","G7512","G7514","G7515","G7516","G7517","G7518","G7519","G7520","G7521","G7522","G7524","G7525","G7527","G7528","G7529","G7530","G7532","G7533","G7534","G7535","G7536","G7537","G7538","G7539","G7540","G7541","G7542","G7543","G7545","G7546","G7549","G7550","G7555","G7556","G7557","G7558","G7561","G7563","G7564","G7565","G7567","G7568","G7571","G7572","G7573","G7574","G7575","G7576","G7577","G7578","G7581","G7582","G7583","G7584","G7585","G7586","G7587","G7588","G7589","G7590","G7591","G7592","G7593","G7594","G7595","G7596","G7597","G7598","G7599","G7600","G7601","G7602","G7603","G7607","G7608","G7609","G7610","G7611","G7612","G7613","G7615","G7616","G7617","G7619","G7620","G7621","G7622","G7623","G7624","G7625","G7626","G7627","G7628","G7629","G7630","G7631","G7632","G7633","G7639","G7640","G7645","G7646","G7647","G7648","G7652","G7653","G7655","G7656","G7657","G7659","G7660","G7661","G7662","G7663","G7664","G7665","G7666","G7669","G7670","G7671","G7672","G7673","G7674","G7675","G7676","G7677","G7678","G7679","G7681","G7682","G7683","G7684","G7685","G7686","G7687","G7688","G7689","G7690","G7691","G7692","G7693","G7694","G7697","G7698","G8001","G8002","G8003","G8004","G8005","G8006","G8007","G8008","G8009","G8010","G8011","G8012","G8013","G8014","G8015","G8016","G8017","G8018","G8019","G8020","G8021","G8022","G8023","G8024","G8031","G8032","G8033","G8034","G8041","G8042","G8043","G8044","G8045","G8046","G8047","G8048","G8049","G8050","G8051","G8052","G8053","G8054","G8055","G8056","G8057","G8058","G8059","G8060","G8061","G8062","G8063","G8064","G8069","G8070","G8081","G8082","G8086","G8087","G8088","G8091","G8092","G8094","G8095","G8096","G8098","G8101","G8102","G8103","G8104","G8105","G8106","G8107","G8108","G8115","G8116","G8125","G8126","G8127","G8128","G8501","G8503","G8504","G8505","G8506","G8508","G8509","G8510","G8511","G8512","G8513","G8514","G8515","G8516","G8517","G8518","G8519","G8520","G8521","G8522","G8523","G8524","G8525","G8526","G8527","G8528","G8529","G8530","G8531","G8532","G8533","G8534","G8535","G8536","G8537","G8538","G8539","G8540","G8541","G8542","G8543","G8544","G8545","G8546","G8547","G8549","G8550","G8551","G8552","G8553","G8554","G8555","G8556","G8602","G8604","G8605","G8606","G8607","G8608","G8609","G8610","G8681","G8682","G8683","G8684","G8827","G8828","G8891","G8892","G8897","G8898","G8901","G8902","G8903","G8904","G8905","G8906","G8907","G8908","G8909","G8910","G8911","G8912","G8917","G8918","G8919","G8920","G8923","G8924","G8931","G8932","G8933","G8934","G8935","G8936","G8937","G8938","G8953","G8954","G8997","G8998","G9001","G9002","G9003","G9004","G9185","G9186","G9641","G9642","G9643","G9644","G9645","G9646","G9647","G9648","G9816","G9817","K5","K6","K15","K16","K21","K22","K27","K28","K29","K30","K32","K33","K36","K40","K41","K42","K43","K45","K46","K48","K50","K52","K55","K56","K58","K60","K62","K66","K67","K68","K70","K71","K72","K73","K75","K76","K78","K79","K80","K81","K82","K84","K87","K88","K90","K91","K92","K94","K96","K102","K106","K109","K111","K112","K113","K114","K115","K116","K117","K118","K121","K122","K123","K124","K126","K128","K132","K134","K141","K142","K143","K144","K145","K146","K147","K148","K149","K150","K152","K154","K155","K156","K157","K158","K159","K160","K165","K166","K167","K168","K169","K170","K171","K172","K174","K175","K176","K177","K178","K180","K182","K183","K184","K187","K188","K190","K191","K192","K193","K194","K195","K196","K201","K202","K203","K204","K205","K206","K208","K209","K210","K212","K213","K214","K215","K216","K218","K220","K226","K228","K230","K231","K232","K233","K234","K235","K236","K237","K238","K244","K245","K246","K248","K251","K253","K254","K256","K257","K258","K261","K262","K263","K264","K265","K266","K267","K268","K269","K270","K271","K272","K274","K276","K279","K280","K282","K283","K284","K285","K286","K287","K288","K290","K291","K292","K294","K296","K298","K299","K300","K301","K302","K304","K306","K311","K312","K316","K318","K321","K322","K325","K326","K328","K329","K330","K334","K335","K336","K337","K338","K339","K340","K341","K342","K344","K346","K348","K351","K356","K359","K360","K361","K362","K363","K364","K365","K366","K367","K368","K369","K371","K372","K374","K376","K377","K378","K382","K386","K388","K389","K390","K392","K401","K402","K412","K418","K419","K420","K422","K423","K424","K425","K426","K428","K429","K430","K435","K437","K441","K442","K446","K452","K454","K457","K458","K461","K462","K463","K464","K466","K467","K468","K469","K470","K471","K473","K475","K476","K478","K479","K480","K485","K486","K488","K489","K490","K491","K492","K495","K496","K497","K498","K502","K503","K504","K505","K506","K507","K511","K516","K518","K519","K520","K522","K525","K526","K527","K528","K529","K532","K535","K536","K542","K544","K546","K548","K549","K550","K552","K554","K557","K558","K559","K560","K563","K564","K565","K566","K568","K570","K571","K572","K573","K574","K575","K576","K577","K578","K579","K580","K581","K582","K584","K585","K586","K587","K588","K589","K594","K595","K596","K598","K600","K602","K603","K604","K605","K606","K608","K610","K611","K612","K614","K615","K616","K617","K618","K621","K622","K624","K625","K626","K627","K628","K629","K630","K631","K632","K633","K634","K636","K638","K642","K644","K646","K648","K651","K652","K653","K654","K655","K656","K657","K658","K661","K662","K664","K666","K667","K668","K671","K677","K678","K679","K680","K681","K683","K685","K686","K687","K688","K689","K690","K691","K692","K702","K704","K706","K709","K710","K712","K715","K716","K718","K722","K723","K724","K726","K730","K731","K732","K735","K736","K738","K739","K742","K743","K744","K748","K750","K751","K752","K753","K754","K755","K756","K758","K759","K760","K762","K767","K768","K770","K771","K772","K775","K776","K777","K782","K783","K784","K786","K787","K788","K793","K794","K797","K799","K800","K807","K808","K809","K811","K813","K814","K817","K818","K819","K820","K822","K823","K824","K827","K829","K833","K835","K836","K837","K841","K842","K843","K844","K845","K846","K848","K849","K850","K852","K853","K854","K855","K856","K858","K862","K865","K866","K869","K870","K871","K872","K873","K876","K878","K879","K880","K882","K884","K885","K886","K888","K889","K890","K891","K892","K894","K896","K897","K898","K903","K904","K905","K906","K908","K911","K912","K914","K915","K916","K917","K919","K920","K923","K924","K926","K928","K929","K930","K931","K932","K935","K936","K938","K939","K940","K941","K942","K944","K950","K952","K956","K958","K960","K962","K965","K967","K968","K970","K971","K972","K974","K976","K978","K979","K980","K982","K983","K984","K987","K988","K990","K996","K997","K998","K1001","K1003","K1004","K1007","K1008","K1009","K1010","K1011","K1012","K1014","K1015","K1016","K1019","K1020","K1021","K1022","K1023","K1024","K1026","K1027","K1029","K1030","K1033","K1034","K1040","K1041","K1042","K1046","K1047","K1048","K1049","K1050","K1052","K1054","K1056","K1057","K1058","K1060","K1062","K1065","K1066","K1067","K1068","K1071","K1072","K1073","K1074","K1075","K1078","K1079","K1080","K1082","K1084","K1085","K1086","K1087","K1089","K1090","K1092","K1094","K1096","K1098","K1101","K1102","K1103","K1104","K1106","K1107","K1108","K1109","K1110","K1115","K1117","K1118","K1122","K1123","K1127","K1130","K1131","K1132","K1136","K1137","K1138","K1139","K1140","K1141","K1142","K1143","K1144","K1149","K1150","K1152","K1153","K1154","K1156","K1157","K1158","K1159","K1160","K1162","K1163","K1164","K1165","K1166","K1170","K1171","K1172","K1173","K1174","K1177","K1178","K1181","K1182","K1184","K1185","K1186","K1187","K1188","K1189","K1190","K1191","K1192","K1195","K1196","K1198","K1201","K1202","K1204","K1205","K1206","K1209","K1210","K1211","K1212","K1215","K1216","K1217","K1218","K1220","K1221","K1223","K1224","K1227","K1228","K1229","K1230","K1235","K1236","K1237","K1238","K1240","K1241","K1242","K1243","K1244","K1249","K1251","K1256","K1258","K1259","K1260","K1263","K1264","K1268","K1270","K1271","K1273","K1275","K1276","K1278","K1281","K1282","K1286","K1287","K1288","K1292","K1293","K1294","K1295","K1296","K1301","K1302","K1305","K1306","K1307","K1308","K1310","K1312","K1316","K1322","K1323","K1325","K1326","K1328","K1329","K1330","K1332","K1334","K1336","K1337","K1338","K1347","K1348","K1350","K1359","K1360","K1362","K1363","K1364","K1365","K1366","K1367","K1368","K1379","K1380","K1381","K1382","K1383","K1384","K1387","K1388","K1392","K1393","K1394","K1396","K1398","K1450","K1452","K1453","K1454","K1473","K1474","K1476","K1478","K1502","K1504","K1505","K1510","K1511","K1512","K1517","K1518","K1520","K1526","K1527","K1528","K1532","K1534","K1535","K1536","K1537","K1538","K1540","K1546","K1548","K1556","K1557","K1558","K1561","K1562","K1563","K1565","K1566","K1567","K1572","K1574","K1582","K1584","K1585","K1586","K1587","K1588","K1590","K1591","K1592","K1595","K1596","K1603","K1604","K1609","K1610","K1611","K1612","K1613","K1614","K1618","K1620","K1627","K1628","K1629","K1630","K1634","K1635","K1636","K1655","K1656","K1658","K1661","K1662","K1665","K1666","K1669","K1670","K1671","K1672","K1673","K1674","K1677","K1685","K1686","K1688","K1785","K1786","K1803","K1804","K1806","K1808","K1885","K1886","K1888","K1902","K1903","K2011","K2012","K2013","K2036","K2038","K2045","K2046","K2048","K2058","K2060","K2121","K2186","K2187","K2188","K2276","K2278","K2286","K2288","K2388","K2502","K2503","K2629","K2630","K2665","K2666","K2667","K2668","K2906","K2908","K4696","K4730","K5101","K5102","K5103","K5104","K5105","K5106","K5109","K5110","K5115","K5116","K5117","K5118","K5119","K5120","K5125","K5126","K5127","K5128","K5141","K5142","K5145","K5146","K5147","K5148","K5161","K5162","K5163","K5164","K5188","K5189","K5190","K5193","K5194","K5215","K5216","K5391","K5392","K5863","K5864","K7001","K7002","K7006","K7007","K7015","K7016","K7018","K7020","K7021","K7022","K7024","K7025","K7026","K7028","K7029","K7030","K7032","K7033","K7034","K7035","K7036","K7037","K7038","K7039","K7040","K7041","K7047","K7048","K7053","K7054","K7057","K7058","K7061","K7062","K7063","K7064","K7065","K7066","K7069","K7070","K7071","K7072","K7074","K7075","K7076","K7077","K7078","K7081","K7082","K7083","K7084","K7085","K7086","K7087","K7088","K7089","K7090","K7091","K7092","K7093","K7094","K7095","K7101","K7102","K7103","K7104","K7105","K7106","K7107","K7108","K7109","K7110","K7111","K7112","K7113","K7114","K7115","K7116","K7117","K7118","K7119","K7120","K7123","K7124","K7125","K7126","K7127","K7128","K7131","K7132","K7146","K7147","K7148","K7149","K7150","K7154","K7155","K7156","K7165","K7166","K7171","K7172","K7173","K7174","K7177","K7178","K7187","K7188","K7192","K7193","K7194","K7195","K7196","K7201","K7202","K7203","K7204","K7205","K7206","K7211","K7212","K7213","K7214","K7215","K7216","K7217","K7218","K7221","K7222","K7223","K7224","K7225","K7226","K7227","K7228","K7231","K7232","K7233","K7234","K7235","K7236","K7237","K7238","K7244","K7251","K7252","K7265","K7266","K7273","K7274","K7275","K7276","K7277","K7278","K7283","K7284","K7285","K7286","K7287","K7288","K7289","K7290","K7291","K7292","K7301","K7302","K7303","K7304","K7305","K7306","K7309","K7310","K7311","K7312","K7323","K7324","K7325","K7326","K7327","K7328","K7329","K7330","K7333","K7334","K7345","K7346","K7347","K7348","K7349","K7350","K7351","K7352","K7354","K7357","K7358","K7362","K7363","K7364","K7369","K7370","K7375","K7376","K7378","K7379","K7380","K7381","K7382","K7383","K7384","K7385","K7386","K7387","K7388","K7389","K7390","K7392","K7393","K7394","K7395","K7396","K7397","K7398","K7425","K7426","K7459","K7460","K7461","K7462","K7501","K7502","K7505","K7511","K7512","K7517","K7518","K7519","K7525","K7527","K7528","K7541","K7542","K7561","K7562","K7563","K7564","K7565","K7566","K7591","K7592","K7597","K7598","K7701","K7702","K7707","K7708","K7709","K7710","K7711","K7712","K7713","K7714","K7715","K7716","K7721","K7722","K7723","K7724","K7726","K7728","K7731","K7732","K7734","K7738","K7739","K7740","K7745","K7746","K7747","K7748","K7752","K7754","K7755","K7756","K7758","K7759","K7760","K7762","K7763","K7764","K7765","K7766","K7767","K7768","K7771","K7772","K7773","K7774","K7782","K7783","K7784","K7787","K7788","K7801","K7802","K7803","K7804","K7805","K7806","K7807","K7808","K7811","K7812","K7813","K7814","K7831","K7832","K7833","K7834","K7835","K7836","K7837","K7838","K7901","K7902","K7903","K7904","K7907","K7908","K7909","K7910","K7911","K7913","K7914","K7916","K7917","K7919","K7921","K7922","K7927","K7928","K7956","K7958","K7959","K7960","K7961","K7962","K7964","K7965","K7967","K7968","K7971","K7972","K7975","K7976","K7977","K7978","K7993","K8002","K8068","K8069","K8084","K8089","K8090","K8103","K8115","K8116","K8123","K8124","K8155","K8156","K8159","K8160","K8161","K8162","K8163","K8164","K8168","K8169","K8175","K8177","K8178","K8189","K8190","K8199","K8200","K8203","K8204","K8229","K8230","K8231","K8232","K8239","K8240","K8241","K8242","K8243","K8244","K8251","K8252","K8253","K8254","K8261","K8262","K8276","K8277","K8278","K8281","K8282","K8285","K8286","K8287","K8288","K8321","K8322","K8323","K8355","K8356","K8358","K8359","K8360","K8361","K8364","K8365","K8371","K8372","K8373","K8379","K8380","K8381","K8382","K8385","K8386","K8399","K8401","K8402","K8409","K8410","K8411","K8412","K8413","K8414","K8415","K8416","K8418","K8420","K8421","K8422","K8424","K8431","K8432","K8433","K8434","K8435","K8436","K8438","K8439","K8440","K8481","K8482","K8484","K8499","K8500","K8553","K8554","K8563","K8564","K8585","K8586","K8597","K8598","K8599","K8600","K8703","K8704","K8713","K8714","K8715","K8716","K8717","K8718","K8720","K8721","K8722","K8723","K8724","K8727","K8728","K8729","K8730","K8731","K8732","K9003","K9004","K9015","K9016","K9017","K9018","K9031","K9032","K9033","K9049","K9050","K9051","K9052","K9054","K9059","K9060","K9062","K9063","K9064","K9066","K9075","K9076","K9077","K9083","K9084","K9086","K9091","K9092","K9093","K9094","K9121","K9122","K9125","K9128","K9189","K9190","K9303","K9304","K9305","K9306","K9307","K9308","K9311","K9312","K9313","K9314","K9321","K9322","K9323","K9324","K9325","K9327","K9328","K9357","K9358","K9359","K9360","K9361","K9363","K9364","K9365","K9367","K9368","K9369","K9379","K9380","K9385","K9386","K9405","K9406","K9411","K9412","K9413","K9415","K9416","K9417","K9424","K9425","K9426","K9431","K9432","K9433","K9434","K9435","K9436","K9445","K9446","K9449","K9450","K9461","K9462","K9463","K9465","K9466","K9470","K9471","K9472","K9483","K9484","K9486","K9511","K9512","K9513","K9517","K9571","K9572","K9574","K9575","K9576","K9578","K9581","K9582","K9584","K9585","K9586","K9588","K9589","K9590","K9605","K9608","K9609","K9610","K9612","K9613","K9614","K9617","K9618","K9619","K9620","K9629","K9630","K9631","K9634","K9642","K9643","K9651","K9653","K9654","K9656","K9658","K9659","K9660","K9662","K9663","K9664","K9665","K9666","K9667","K9668","K9669","K9671","K9672","K9673","K9674","K9676","K9678","K9679","K9680","K9683","K9684","K9685","K9688","K9694","K9698","K9699","K9761","K9762","K9763","K9764","K9765","K9766","K9773","K9774","K9777","K9778","K9786","K9787","K9788","K9789","K9791","K9792","K9794","K9803","K9804","K9805","K9813","K9814","K9818","K9823","K9827","K9828","K9833","K9852","K9854","K9856","K9858","S201","S202","S203","S204","S205","S206","S207","S208","S209","S210","S211","S212","S213","S214","S215","S216","S217","S218","S219","S220","S221","S222","S223","S224","S225","S226","S227","S228","S229","S230","S231","S232","S287","S902","S903","S905","S910","S911","S912","S913","S916","S917","S918","T7","T8","T9","T10","T17","T18","T25","T26","T31","T32","T39","T40","T41","T42","T47","T48","T49","T50","T55","T56","T63","T64","T77","T78","T79","T81","T82","T92","T95","T96","T101","T102","T109","T110","T112","T113","T114","T116","T117","T118","T122","T124","T128","T129","T130","T131","T132","T134","T135","T136","T145","T146","T147","T151","T152","T154","T167","T168","T169","T170","T171","T172","T175","T176","T179","T180","T181","T182","T184","T192","T193","T194","T197","T198","T204","T205","T206","T211","T212","T215","T216","T231","T232","T236","T237","T238","T242","T244","T247","T248","T253","T254","T257","T258","T261","T262","T263","T264","T265","T266","T284","T287","T289","T290","T295","T296","T297","T298","T302","T303","T304","T306","T308","T309","T310","T311","T312","T325","T326","T328","T335","T336","T337","T338","T368","T369","T370","T381","T382","T389","T390","T396","T397","T398","T3101","T3102","T4201","T4202","T4204","T4601","T4602","T4603","T4604","T5001","T5002","T5003","T5004","T5005","T5006","T5007","T5008","T5009","T5010","T5011","T5012","T5013","T5014","T5101","T5687","T5688","T6307","T6308","T6602","T6603","T6604","T6605","T6606","T6613","T6614","T6701","T6702","T6705","T6706","T7015","T7016","T7565","T7566","T7567","T7568","T7771","T7772","T7773","T7774","T7776","T7777","T7781","T7782","T7784","T7785","T7786","T8001","T8002","T8301","T8302","T8309","T8315","T8316","T8318","T8325","T8326","T8327","T8328","T8331","T8332","T8333","T8334","T8335","T8336","T8337","T8340","T8345","T8346","T8347","T8349","T8350","T8351","T8354","T8361","T8362","T8363","T8364","T8368","T8369","T8370","T8381","T8382","T8701","T8702","T8711","T8712","T8713","T8715","T8716","T8717","T8719","T8720","T8721","T8870","T8898","T9021","T9023","T9024","T9028","T9501","T9509","T9516","T9517","T9518","T9581","T9582","T9583","T9584","T9585","T9586","Y501","Y502","Y503","Y504","Y509","Y510","Y511","Y512","Y513","Y514","Y515","Y516","Y517","Y518","Y521","Y522","Y525","Y526","Y527","Y528","Y529","Y530","Y667","Y671","Y672","Y673","Z1","Z2","Z3","Z4","Z5","Z6","Z7","Z8","Z9","Z10","Z12","Z13","Z14","Z21","Z22","Z25","Z27","Z31","Z32","Z33","Z35","Z36","Z40","Z42","Z43","Z44","Z45","Z47","Z49","Z50","Z52","Z53","Z54","Z55","Z57","Z59","Z60","Z63","Z64","Z65","Z66","Z68","Z69","Z70","Z71","Z72","Z75","Z76","Z77","Z78","Z79","Z81","Z86","Z88","Z89","Z90","Z92","Z94","Z95","Z96","Z97","Z99","Z102","Z104","Z105","Z106","Z107","Z108","Z112","Z114","Z118","Z124","Z126","Z127","Z128","Z133","Z134","Z136","Z138","Z139","Z140","Z146","Z147","Z148","Z149","Z150","Z151","Z152","Z155","Z156","Z158","Z161","Z162","Z164","Z166","Z167","Z170","Z172","Z174","Z176","Z178","Z179","Z180","Z182","Z184","Z186","Z188","Z189","Z190","Z192","Z194","Z196","Z198","Z201","Z202","Z203","Z204","Z206","Z207","Z208","Z216","Z218","Z224","Z226","Z227","Z230","Z232","Z236","Z247","Z248","Z252","Z253","Z254","Z257","Z258","Z264","Z266","Z267","Z268","Z270","Z272","Z273","Z277","Z278","Z281","Z282","Z284","Z285","Z286","Z288","Z290","Z295","Z296","Z298","Z307","Z308","Z315","Z316","Z318","Z319","Z320","Z322","Z335","Z336","Z338","Z384","Z386","Z601","Z602","Z621","Z722","Z918","Z4516","Z4518","Z6201","Z6202","Z6203","Z6204","Z6205","Z6206","Z6207","Z6208","Z6501","Z6502","Z6503","Z6504","Z6505","Z6506","Z6507","Z6508","Z6509","Z6510","Z6511","Z6512","Z6519","Z6520","Z6707","Z6708","Z6801","Z8304","Z8306","Z8308","Z8310","Z8312","Z8314","Z8316","Z8502","Z8511","Z8512","Z8513","Z8514","Z8601","Z8602","Z8603","Z8605","Z8606","Z8607","Z8611","Z8612","Z8613","Z8801","Z8802","Z8803","Z8804"];e.exports=n},function(e,t){"use strict";var n={resolveBeforeThen:function(){var t=$.Deferred();t.notify("notify the first time");t.notify("notify the second time");t.notify("notify the third time");t.resolve("resolved before then the first time");t.resolve("resolved before then the second time");t.then(this.success,this.fail,this.progress);console.log("executed right after then, before which notified 3 times and resolved 2 times in sequence")},resolveAfterThen:function(){var t=$.Deferred();t.then(this.success,this.fail,this.progress);t.notify("notify the first time");t.notify("notify the second time");t.notify("notify the third time");t.resolve("resolved after then the first time");t.resolve("resolved after then the second time");console.log("executed right after notified 3 times and resolved 2 times in sequence")},notifyManyTimes:function(){var t=$.Deferred();t.notify("notify the first time");t.notify("notify the second time");t.notify("notify the third time");t.then(this.success,this.fail,this.progress);console.log("executed right after notifed 3 times")},notifyManyTimesAsyncronously:function(){function n(e){t.notify("notify the "+e+" batch of 1 of 3 notifications");t.notify("notify the "+e+" batch of 2 of 3 notifications");t.notify("notify the "+e+" batch of 3 of 3 notifications")}function r(){t.reject("rejected")}var t=$.Deferred();t.then(this.success,this.fail,this.progress);Common.delay(0,n,null,["first"]);Common.delay(0,n,null,["second"]);Common.delay(0,r);Common.delay(0,n,null,["third"]);console.log("executed right after notifed batchs of notifications 3 times asyncronously")},run:function(){this.resolveBeforeThen();this.resolveAfterThen();this.notifyManyTimes();this.notifyManyTimesAsyncronously()},success:function(){console.log("success:",arguments)},fail:function(){console.log("fail:",arguments)},progress:function(){console.log("progress:",arguments)}};e.exports=n},function(e,t){"use strict";function n(e){this.accounts=e||[];this.results=[];this.startTimeStamp=-1}n.prototype={constructor:n,genuineLogin:function(t,n,r){if(r){universal.login.clear();Common.clearIDFV();Common.clearDeviceInfoResponse()}return universal.login.login(t,n)},loadAccounts:function(t){if(!$.isArray(t))return;this.accounts=this.accounts.concat(t);this.uniqAccounts()},uniqAccounts:function(){},logResult:function(t,n){var r={};if(t)r=Common.getUserInfo()||{};var i=0;var s=this.results.length;var o=Date.now();if(s===0)i=o-this.startTimeStamp;else i=o-this.results[s-1].timeStamp;i=(i/1e3).toFixed(2);var u={isSuccessful:t,nickname:r.nickname||"",failReason:n||"",timeStamp:o,timeCost:i};this.results.push(u);return u},resetResultsAndStartTimeStamp:function(){this.results=[];this.startTimeStamp=Date.now()},analyzeResults:function(){var t=this.results.length;var n=0,r=0;this.results.forEach(function(e,t){if(e.isSuccessful)n++});if(t>0){r=((this.results[t-1].timeStamp-this.startTimeStamp)/1e3/t).toFixed(2)}var i={tasks:t,success:n,fail:t-n,ratio:(n/t*100).toFixed(2)+"%",avgTimeConsuming:r};console.log("report:",i);return i},run:function(t,n){function u(){i++;if(i>=r){o.analyzeResults();return}s=o.accounts[i];console.log(i.toString(),s);o.genuineLogin(s.username,s.password,n).done(a).fail(f).always(u)}function a(){var e=o.logResult(true);console.log("nickname:",e.nickname);console.log("success timeCost:",e.timeCost)}function f(e){var t=o.logResult(false,e);console.log("fail timeCost:",t.timeCost)}if(n!==false)n=true;this.resetResultsAndStartTimeStamp();this.loadAccounts(t);var r=this.accounts.length;if(r===0)return;var i=-1,s=null,o=this;u()}};e.exports=n},function(e,t,n){"use strict";function s(e){i.call(this,e)}var r=[];var i=n(759);s.prototype=$.extend(true,new i,{constructor:s,genuineLogin:function(t,n){return universal.login3W.loginAndSaveUserInfo(t,n)}});e.exports=new s(r)},function(e,t){"use strict";function i(e,t,r,i){var s={type:e,timeCost:((Date.now()-t)/1e3).toFixed(2),isSuccessful:r,failReason:i||""};if(!n[e])n[e]=[];n[e].push(s)}function s(e){function r(){return Common.postRequest("t_tTrainPhoneEnDecrypt",e).then(o,s)}function s(){var e=$.Deferred();if(n<=0)return e.reject.apply(e,arguments);else{n--;return r()}}function o(e){if(e&&typeof e.reqResult==="string"&&e.reqResult.length>2||n<=0){return e}else{return s.apply(null,arguments)}}function u(n){if(n&&typeof n.reqResult==="string"&&n.reqResult.length>2){i(e.phoneEnDecryptType,t,true);return}console.log("cipher-related result may not correct:",arguments,e);i(e.phoneEnDecryptType,t,false,n.reqResult)}function a(n){console.log("cipher-related result fail",arguments,e);i(e.phoneEnDecryptType,t,true,n)}var t=Date.now();var n=1;return r().done(u).fail(a)}function o(){var e=0;var t=[];var i=0;var s=-1;var o={};for(var u in n){s=n[u].length;e=0;t=[];i=0;n[u].forEach(function(n,r){if(n.isSuccessful)i++;else t.push(n.failReason+"("+n.timeCost+")");e+=+n.timeCost});o[r[u]||u]={tasks:s,success:i,ratio:(i/s*100).toFixed(2)+"%",avgTimeCost:(e/s).toFixed(2)+"s",failReasonAndTimeCost:t}}console.log("cipher-related statistics:",o)}var n={};var r={1:"challenge",3:"encrypt",4:"decrypt",5:"session"};var u={requestDecipher:s,analyze:o,result:n};e.exports=u},function(e,t){"use strict";function n(){console.log(arguments)}function r(){n("function _f ",arguments)}function i(){n("fullfilled:",arguments)}function s(){n("rejected:",arguments)}function o(){n("throw an error");throw new Error("e")}var u={promiseFullfilled:function(){var t=new Promise(function(e,t){e("resolved by self")});return t.then(i,s)},promiseRejected:function(){var t=new Promise(function(e,t){t("rejected by self")});return t.then(i,s)},execTime:function(){var t=new Promise(function(e,t){n("promise is done");e("rejected by self");n("promise over")});n("before promise then");t.then(i,s);n("after promise then");return Promise.resolve()},execTimeAsync:function(){var t=new Promise(function(e,t){n("promise is done");setTimeout(function(){n("promise rejected async");e("rejected by self")},0);n("promise over")});n("before promise then");return t.then(i,s)},resolveManyTimes:function(){var t=new Promise(function(e,t){e("resolved by one");e("resolved by two");e("resolved by three")});return t.then(i,s)},resolveAndReject:function(){var t=new Promise(function(e,t){e("resolved by one");t("rejected by two")});return t.then(i,s)},thenManyTimes:function(){var t=new Promise(function(e,t){e("resolved by one")});t.then(i,s);t.then(i,s);t.then(i,s);return Promise.resolve()},resolveAndthenManyTimes:function(){var t=new Promise(function(e,t){e("resolved by one");e("resolved by two");e("resolved by three")});t.then(i,s);t.then(i,s);t.then(i,s);return Promise.resolve()},promiseManyTimes:function(){(new Promise(function(e,t){e("promise resolved by one")})).then(i,s);(new Promise(function(e,t){e("promise resolved by two")})).then(i,s);return Promise.resolve()},resolveThenAndThen:function(){var t=new Promise(function(e,t){e("resolved by one")});var r=t.then(i,s);var o=r.then(i,s);n("the thenOne is ",r);n("the thenOther is ",o);return Promise.resolve()},rejectThenAndThen:function(){var t=new Promise(function(e,t){t("rejected by one")});var r=t.then(i,s);var o=r.then(i,s);n("the thenOne is ",r);n("the thenOther is ",o);return Promise.resolve()},pendingThenAndThen:function(){var t=new Promise(function(e,t){});var r=t.then(i,s);var o=r.then(i,s);n("the thenOne is ",r);n("the thenOther is ",o);return Promise.resolve()},thenWithExceptionAndThen:function(){var t=new Promise(function(e,t){e("resolved by one")});var r=t.then(o,s);var u=r.then(i,s);n("the thenOne is ",r);n("the thenOther is ",u);return Promise.resolve()},thenWithNoFullfilledAndThen:function(){var t=new Promise(function(e,t){e("resolved by one")});var r=t.then(null,s);var o=r.then(i,s);n("the thenOne is ",r);n("the thenOther is ",o);return Promise.resolve()},thenWithNoRejectedAndThen:function(){var t=new Promise(function(e,t){t("rejected by one")});var r=t.then(i,null);var o=r.then(i,s);n("the thenOne is ",r);n("the thenOther is ",o);return Promise.resolve()},fullfilledWithReturnFunction:function(){function o(){n("fullfilledReturnFunction:",arguments);return r}var t=new Promise(function(e,t){e("resolved by one")});var u=t.then(o,s);var a=u.then(i,s);n("the thenOne is ",u);n("the thenOther is ",a);return Promise.resolve()},rejectedWithReturnFunction:function(){function o(){n("rejectedReturnFunction:",arguments);return r}var t=new Promise(function(e,t){t("rejected by one")});var u=t.then(i,o);var a=u.then(i,s);n("the thenOne is ",u);n("the thenOther is ",a);return Promise.resolve()},fullfilledWithReturnPromiseResolve:function(){function r(){n("return promise:",arguments);var e=new Promise(function(e,t){e("new promise resolved by two")});return e}var t=new Promise(function(e,t){e("resolved by one")});var o=t.then(r,s);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},rejectedWithReturnPromiseResolve:function(){function r(){n("return promise:",arguments);var e=new Promise(function(e,t){e("new promise resolved by two")});return e}var t=new Promise(function(e,t){t("rejected by one")});var o=t.then(i,r);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},fullfilledWithReturnPromiseReject:function(){function r(){n("return promise:",arguments);var e=new Promise(function(e,t){t("new promise rejected by two")});return e}var t=new Promise(function(e,t){e("resolved by one")});var o=t.then(r,s);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},rejectedWithReturnPromiseReject:function(){function r(){n("return promise:",arguments);var e=new Promise(function(e,t){t("new promise rejected by two")});return e}var t=new Promise(function(e,t){t("rejected by one")});var o=t.then(i,r);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},fullfilledWithReturnNum:function(){function r(){n("return num:",arguments);return 0}var t=new Promise(function(e,t){e("resolved by one")});var o=t.then(r,s);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},rejectedWithReturnNum:function(){function r(){n("return num:",arguments);return 0}var t=new Promise(function(e,t){t("rejected by one")});var o=t.then(i,r);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},fullfilledWithReturnNull:function(){function r(){n("return null:",arguments);return null}var t=new Promise(function(e,t){e("resolved by one")});var o=t.then(r,s);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},rejectedWithReturnNull:function(){function r(){n("return null:",arguments);return null}var t=new Promise(function(e,t){t("rejected by one")});var o=t.then(i,r);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},fullfilledWithReturnUndefined:function(){function r(){n("return undefined:",arguments);return undefined}var t=new Promise(function(e,t){e("resolved by one")});var o=t.then(r,s);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},rejectedWithReturnUndefined:function(){function r(){n("return undefined:",arguments);return undefined}var t=new Promise(function(e,t){t("rejected by one")});var o=t.then(i,r);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},fullfilledWithReturnThenableFunction:function(){function r(){n("return thenableFunction:",arguments);var e={then:function(){}};return e}var t=new Promise(function(e,t){e("resolved by one")});var o=t.then(r,s);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},rejectedWithReturnThenableFunction:function(){function r(){n("return thenableFunction:",arguments);var e={then:function(){}};return e}var t=new Promise(function(e,t){t("rejected by one")});var o=t.then(i,r);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},fullfilledWithReturnThenableNum:function(){function r(){n("return thenableFunction:",arguments);var e={then:1};return e}var t=new Promise(function(e,t){e("resolved by one")});var o=t.then(r,s);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},rejectedWithReturnThenableNum:function(){function r(){n("return thenableFunction:",arguments);var e={then:1};return e}var t=new Promise(function(e,t){t("rejected by one")});var o=t.then(i,r);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},fullfilledWithReturnThenableFunctionResolved:function(){function r(){n("return thenableFunction:",arguments);var e={then:function(t,r){n("resolvePromise ",arguments);t("resolvePromise")}};return e}var t=new Promise(function(e,t){e("resolved by one")});var o=t.then(r,s);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},rejectedWithReturnThenableFunctionResolved:function(){function r(){n("return thenableFunction:",arguments);var e={then:function(t,r){n("resolvePromise ",arguments);t("resolvePromise")}};return e}var t=new Promise(function(e,t){t("rejected by one")});var o=t.then(i,r);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},fullfilledWithReturnThenableFunctionRejected:function(){function r(){n("return thenableFunction:",arguments);var e={then:function(t,r){n("rejectPromise ",arguments);r("rejectPromise")}};return e}var t=new Promise(function(e,t){e("resolved by one")});var o=t.then(r,s);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()},rejectedWithReturnThenableFunctionRejected:function(){function r(){n("return thenableFunction:",arguments);var e={then:function(t,r){n("rejectPromise ",arguments);r("rejectPromise")}};return e}var t=new Promise(function(e,t){t("rejected by one")});var o=t.then(i,r);var u=o.then(i,s);n("the thenOne is ",o);n("the thenOther is ",u);return Promise.resolve()}};var a={promiseTest:u,runAllProps:function(t){var r="";var i=Promise.resolve();for(var s in t){if(typeof t[s]=="function"){(function(e){i=i.then(function(){console.log("\n");n("props name is: ",e.name);return e.call()})})(t[s])}else{r+=s+" = "+t[s]+" /t "}}},run:function(){this.runAllProps(this.promiseTest)}};e.exports=a},function(e,t){"use strict";function n(){console.log(arguments)}function r(){n("function _f ",arguments)}function i(){n("success ",arguments)}function s(){n("fail ",arguments)}function o(){n("progress ",arguments)}function u(){var e=$.Deferred();setTimeout(function(){e.resolve()},0);return e}function a(){var e=$.Deferred();setTimeout(function(){e.reject()},0);return e}var f={resolved:function(){var t=$.Deferred();t.resolve();return t},rejected:function(){var t=$.Deferred();t.reject();return t},execTime:function(){function t(){var e=$.Deferred();n("new defer is done");n("defer reject");e.reject();n("return defer");return e}n("before defer then");return t().then(i,s,o)},execTimeAsync:function(){function t(){var e=$.Deferred();n("new defer is done");setTimeout(function(){n("defer reject");e.reject()},0);n("return defer");return e}n("before defer then");return t().then(i,s,o)},resolvedAndThen:function(){return u().then(i,s,o)},rejectedAndThen:function(){return a().then(i,s,o)},resolvedAndThenTwice:function(){return u().then(i,s,o).then(i,s,o)},rejectedAndThenTwice:function(){return a().then(i,s,o).then(i,s,o)},resolvedAndReturnResolved:function(){function t(){i.call();return u()}return u().then(t,s).then(i,s)},rejectedAndReturnResolved:function(){function t(){s.call();return u()}return a().then(i,t).then(i,s)},resolvedAndReturnRejected:function(){function t(){i.call();return a()}return u().then(t,s).then(i,s)},rejectedAndReturnRejected:function(){function t(){s.call();return a()}return a().then(i,t).then(i,s)},returnDeferResolved:function(){function t(){var e=$.Deferred();setTimeout(function(){u().then(function(){e.resolve()})},1e3);return e}t().then(i,s)},rejectedAndNullAndThen:function(){return a().then(i).then(i,s)}};var l={deferredTest:f,runAllProps:function(t){var r="";var i=Promise.resolve();for(var s in t){if(typeof t[s]=="function"){(function(e){i=i.then(function(){console.log("\n");n("props name is: ",e.name);return e.call()})})(t[s])}else{r+=s+" = "+t[s]+" /t "}}},run:function(){this.runAllProps(this.deferredTest)}};e.exports=l},function(e,t,n){"use strict";function s(){this.occupyUser=[{username:"hhymuh8lv28tj4f4",password:"fu89_013"},{username:"umbvfp2n6tf2d848",password:"fu89_013"}];this.occupyData={fromCity:"åäº¬",toCity:"å¤©æ´¥",trainNo:"2601",occupySeatType:"1",date:Common.formatDate(Common.aCertainTimeFrom(new Date,0,0,1))};this.occupyEdNum=0;this.occupyResult=[];this.occupySuccessResultTimeConsume=[];this.occupyFailResultTimeConsume=[];this.resultDefer=$.Deferred()}var r=n(313);var i=n(765);s.prototype={constructor:s,updateOccupyData:function(t){this.occupyData=$.extend(this.occupyData,t);console.log("updateOccupyData ",this.occupyData)},resetResult:function(){this.occupyEdNum=0;this.occupyResult=[];this.occupySuccessResultTimeConsume=[];this.occupyFailResultTimeConsume=[]},occupy:function(){return universal.spider.queryLeftTicketRandomlyFor3wOccupation().done(this.updateOccupyData.bind(this)).then(this._occupy.bind(this),this._occupy.bind(this))},_occupy:function(){function f(e){console.log("occupy success, "+r,e);s={isSuccessful:true,username:r,failReason:"",occupyResult:e,timeConsume:((new Date-a)/1e3).toFixed(2)};t.occupyResult.push(s);t.occupySuccessResultTimeConsume.push(new Date-a);u.resolve()}function l(e){console.log("occupy fail:",arguments);s={isSuccessful:false,username:r,failReason:e&&e.messages||[],occupyErrorReason:arguments,timeConsume:((new Date-a)/1e3).toFixed(2)};t.occupyResult.push(s);t.occupyFailResultTimeConsume.push(new Date-a);u.reject.apply(u,arguments)}var t=this;var n={userObj:t.occupyUser[t.occupyEdNum],occupyData:t.occupyData};var r=n.userObj.username,s={};var o=new i(n);var u=$.Deferred(),a=new Date;o.runAnother().then(f,l);return u.promise()},outputResult:function(){var t=0,n=0;var r=0;this.occupySuccessResultTimeConsume.map(function(e){r=r+e});t=this.occupySuccessResultTimeConsume.length?r/this.occupySuccessResultTimeConsume.length:0;r=0;this.occupyFailResultTimeConsume.map(function(e){r=r+e});n=this.occupyFailResultTimeConsume.length?r/this.occupyFailResultTimeConsume.length:0;var i={total:this.occupyEdNum,success:this.occupySuccessResultTimeConsume.length,fail:this.occupyFailResultTimeConsume.length,avgTimeSucess:(t/1e3).toFixed(2),avgTimeFail:(n/1e3).toFixed(2)};i.ratio=i.success/this.occupyEdNum*100;i.ratio=i.ratio.toFixed(2)+"%";console.log("occupation result:",this.occupyResult);console.log("occupation report:",i)},run:function(){function r(){t.apply(n).always(i)}function i(){n.occupyEdNum++;if(n.occupyEdNum>n.occupyUser.length-1){n.outputResult();n.resetResult();n.resultDefer.resolve()}else{setTimeout(r,4e3)}}var t=this.occupy;var n=this;n.resetResult();r.apply(this);return n.resultDefer.promise()}};e.exports=new s},function(e,t,n){"use strict";function u(e){console.log(e+" timeConsume is ",(((new Date).getTime()-o)/1e3).toFixed(2),"s");o=(new Date).getTime()}function a(e){var t=e.occupyData;this.occupyData=t;this.user=e.userObj;this.occuptSeat3W=new s;this.currentLoginedUser="";this.occupyPassengers=[];this.occupySeatType=t.occupySeatType}var r=n(313);var i=n(318);var s=n(402);var o=0;a.prototype={constructor:a,login:function(t,n){function i(){return universal.login3W.loginAndSaveUserInfo(t,n)}function s(){console.log("login success:",arguments);var e=$.Deferred();r.currentLoginedUser=t;return e.resolve.apply(e,arguments)}console.log("login:",arguments);var r=this;return i().then(s)},getPassengers:function(){function s(){if(Common.getStoredInfo(n.currentLoginedUser+"_passengers")){i=n.autoSelectPassengers();i=n.adapterPassengers(i);return t.resolve(i)}else{if(r--){setTimeout(s,1e3)}else{console.log("noPassengers");t.reject("noPassengers")}}}var t=$.Deferred(),n=this,r=3,i=[];s();return t.promise()},queryLeftTicket:function(){return this.occuptSeat3W.queryLeftTicket(this.occupyData)},autoSelectSeatType:function(t){return this.occupySeatType},autoSelectPassengers:function(){var t=Common.getStoredInfo(this.currentLoginedUser+"_passengers");var n=1+parseInt(Math.random()*5,10);this.occupyPassengers=t.passengers.slice(0,n);return this.occupyPassengers},adapterPassengers:function(t){var n=new i;var r=[];t.map(function(e){r.push({passenger_name:e.name,passenger_id_type_code:n.idTypeTo12306(e.certType.code),passenger_id_no:e.certNo,passenger_type:n.passengerTypeTo12306(e.ticketType),ticket_type:1})});return r},occupy:function(t,n){function s(){return r.occuptSeat3W.submitOrder(n,r.occupyData.trainNo)}function o(e){u("_submitOrder");return r.occuptSeat3W.occupy(t,i,e).then(a)}function a(){u("_occupy");var e=$.Deferred();return e.resolve.apply(e,arguments)}var r=this;t=t||r.occupyPassengers;var i=r.autoSelectSeatType(n);u("loginAndGetPassenger and queryLeftTicket");return s().then(o)},run:function(){function i(){u("login");return Common.delay(2e3).then(t.getPassengers.bind(t))}var t=this;o=(new Date).getTime();var n=t.login(t.user.username,t.user.password).then(i),r=t.queryLeftTicket();return $.when(n,r).then(t.occupy.bind(t))},getPassengerForOccupy:function(){var t=this;return t.login(t.user.username,t.user.password).then(Common.delay(2e3)).then(t.getPassengers.bind(t))},runAnother:function(){function n(e){return t.occuptSeat3W.run(e,t.occupyData)}var t=this;console.log("runAnother");return t.getPassengerForOccupy().then(n)}};e.exports=a},function(e,t){"use strict";function n(){}n.prototype={constructor:n,storeViewAsGlobalViarable:function(){var t=QApp.router.getCurViewName();window[t]=QApp.getViewSync(t);console.log("curView:",t);return window[t]},inputAccount:function(t){var n=t;if(typeof n==="string"){n=t.trim().split(/\s*[,ï¼ ]\s*/)}else if($.isPlainObject(n)){n=[n.username,n.password]}$("#username").val(n[0]).focus();$("#password").val(n[1]).focus().blur();console.log(n);return n},random:function(t){return Math.floor(Math.random()*t)},loginAnAccount:function(t){t=t||0;if(!window.accounts||!$.isArray(accounts)){console.log("global variable accounts not available as an Array");return}var n=accounts.length;if(t>=n){console.log("the "+t+" is not available in accounts of "+n+" items, thus the last is put into use");t=n-1}var r=accounts[t];console.log("("+t+" + 1)/"+n+":",r);if(window.universal){universal.login.login(r.username,r.password)}else{this.inputAccount(r)}}};e.exports=new n},function(e,t,n){"use strict";var r=n(768);var i=n(770);var s=n(771);e.exports=function(){r();i();s()}},function(e,t,n){"use strict";var r=n(375);var i=n(769);var s=n(751);var o=new r;e.exports=function(){console.log("Converter");s("encodeLog",function(){return s.deepEqual(o.encodeLog(i[0]),["module",true,"","login","mobile",.86,1506678349957])});s("decodeLog",function(){return s.deepEqual(o.decodeLog(["module",true,"","login","mobile",.86,1506678349957]),i[0])})}},function(e,t){"use strict";e.exports=[{type:"module",isSuccessful:true,failReason:"",id:"login",provider:"mobile",duration:.86,timeStamp:1506678349957},{type:"ajax",isSuccessful:true,failReason:"",id:"initUser",provider:"mobile",duration:.28,timeStamp:1506678350349},{type:"ajax",isSuccessful:true,failReason:"",id:"login",provider:"mobile",duration:.32,timeStamp:1506678350022},{type:"module",isSuccessful:false,failReason:"åå§åéè¯¯",id:"login",provider:"3w",duration:4.52,timeStamp:1506678320735},{type:"ajax",isSuccessful:false,failReason:"",id:"otn/login/init",provider:"3w",duration:1.68,timeStamp:1506678323554},{type:"ajax",isSuccessful:false,failReason:"",id:"otn/login/init",provider:"3w",duration:1.44,timeStamp:1506678322112},{type:"ajax",isSuccessful:false,failReason:"",id:"otn/login/init",provider:"3w",duration:1.37,timeStamp:1506678320738},{type:"module",isSuccessful:false,failReason:"ç»å½åä¸å­å¨ã",id:"login",provider:"mobile",duration:1.35,timeStamp:1506678319366},{type:"ajax",isSuccessful:false,failReason:"ç»å½åä¸å­å¨ã",id:"login",provider:"mobile",duration:1.22,timeStamp:1506678319480}]},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var s=n(374);var o=n(769);var u=n(751);e.exports=function(){function e(){var e=new s;e.storageKey="collectorTest";e.saveStorage({logs:[]});return e}function t(e){var t=1;var n=[];while(n.length<e){n.unshift(r({},o[0],{timeStamp:t++}))}return n}console.log("Collector");u("addLog",function(){var t=e();t.addLog(o[0]);return u.deepEqual(t.getStorage().logs[0],o[0])});u("stripSensitiveInfo",function(){var t=e();var n=[{},{failReason:""},{failReason:"pwd:12344"},{failReason:"pwd22:12344"},{failReason:"å¼ äº(äºä»£èº«ä»½è¯-34222519990503202X)å­å¨ä¸æ¬æ¬¡è´­ç¥¨è¡ç¨å²çªçè½¦ç¥¨!!"},{failReason:"å¼ äº(äºä»£èº«ä»½è¯-342225199905032024)å­å¨ä¸æ¬æ¬¡è´­ç¥¨è¡ç¨å²çªçè½¦ç¥¨!!"},{failReason:"å¼ ä¸(ä¸ä»£èº«ä»½è¯-342225199905032)å­å¨ä¸æ¬æ¬¡è´­ç¥¨è¡ç¨å²çªçè½¦ç¥¨!!"},{failReason:"è¿éæ²¡æèº«ä»½è¯~~~~"},{failReason:"è¿éå·ç ä¸æ¯çä»½è¯ 1234567"}];var r=[{},{failReason:""},{failReason:"__SENSITIVE_INFO__"},{failReason:"pwd22:12344"},{failReason:"å¼ äº(äºä»£èº«ä»½è¯-__ID_NO__)å­å¨ä¸æ¬æ¬¡è´­ç¥¨è¡ç¨å²çªçè½¦ç¥¨!!"},{failReason:"å¼ äº(äºä»£èº«ä»½è¯-__ID_NO__)å­å¨ä¸æ¬æ¬¡è´­ç¥¨è¡ç¨å²çªçè½¦ç¥¨!!"},{failReason:"å¼ ä¸(ä¸ä»£èº«ä»½è¯-__ID_NO__)å­å¨ä¸æ¬æ¬¡è´­ç¥¨è¡ç¨å²çªçè½¦ç¥¨!!"},{failReason:"è¿éæ²¡æèº«ä»½è¯~~~~"},{failReason:"è¿éå·ç ä¸æ¯çä»½è¯ 1234567"}];return u.deepEqual(t.stripSensitiveInfo(n),r)});u("getStorage",function(){var t=e();t.addLog(o[0]);t.addLog(o[1]);return u.deepEqual(t.getStorage().logs,[o[1],o[0]])});u("parseFailReason-success",function(){var t=e();var n=[].concat(i(o[0]));n.isSuccessful=true;n.failReason="a";return u.equal(t.parseFailReason(n),"")});u("parseFailReason-null",function(){var t=e();return u.equal(t.parseFailReason(null),"")});u("parseFailReason-string",function(){var t=e();var n=[].concat(i(o[0]));n.isSuccessful=false;n.failReason="aaaa";return u.equal(t.parseFailReason(n),"aaaa")});u("parseFailReason-object",function(){var t=e();var n=[].concat(i(o[0]));n.isSuccessful=false;n.failReason={data:"abcd"};return u.equal(t.parseFailReason(n),"abcd")});u("parseFailReason-object-failureDict",function(){var t=e();var n=[].concat(i(o[0]));n.isSuccessful=false;n.failReason={id:"testid",keyWord:[],origin:"testError"};return u.equal(t.parseFailReason(n),"[testid]testError")});u("parseFailReason-object-unkown",function(){var t=e();var n=[].concat(i(o[0]));n.isSuccessful=false;n.failReason={foo:"bar"};return u.equal(t.parseFailReason(n),'{"foo":"bar"}')});u("logsLimit",function(){var n=e();var r=t(420);n.saveStorage({logs:r});return u.equal(n.getStorage().logs.length,n.logsLimit)});u("reportTime updated",function(){var n=e();n.reportChunck=u.proxy(n.reportChunck);n.saveStorage({logs:t(n.reportChunkSizeLimit-1)});var i=1e5;var s=r({},o[0],{timeStamp:i});n.addLog(s);u("reportChunck called once",n.reportChunck.calledOnce);u("getUnreportedLogs",u.deepEqual(n.getUnreportedLogs(n.getStorage()),[]));return u.equal(n.getStorage().reportTime,i)});u("report",function(){var n=e();var r=t(60);n.reportChunck=u.proxy(n.reportChunck);n.saveStorage({logs:r,reportTime:r[22].timeStamp});n.report();u("reportChunck called twice",n.reportChunck.calledTimes===2);u("getUnreportedLogs length shouled be 2",u.deepEqual(n.getUnreportedLogs(n.getStorage()).length,2));return u.equal(n.getStorage().reportTime,r[2].timeStamp)});u("multiple instants",function(){var t=e();var n=new s;n.storageKey="collectorTest";var i=r({},o[0]);t.addLog(i);return u.deepEqual(n.getStorage().logs[0],i)})}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=n(373);var s=n(769);var o=n(751);e.exports=function(){function e(){var e=new i;e.storageKey="analysisTest";e.saveStorage({logs:[]});return e}function t(e){var t=1;var n=[];while(n.length<e){n.unshift(r({},s[0],{timeStamp:t++}))}return n}function n(e,t){o(e+": result.data",o.deepEqual(t.data,s));o(e+": result.count",o.deepEqual(t.count,9));o(e+": result.filter",o.deepEqual(t.filter,{}));o(e+": result.durationAverage",o.deepEqual(t.durationAverage,1.45));o(e+": result.durationSampleVariance",o.deepEqual(t.durationSampleVariance,1.57));o(e+": result.durationMedian",o.deepEqual(t.durationMedian,1.35));o(e+": result.successRate",o.deepEqual(t.successRate,.33));o(e+": result.endTimeStamp",o.deepEqual(t.endTimeStamp,1506678350349));o(e+": result.startTimeStamp",o.deepEqual(t.startTimeStamp,1506678319366));o(e+": result.medianTimeStamp",o.deepEqual(t.medianTimeStamp,1506678319366))}function u(e,t){o(e+": result.length",o.deepEqual(t.length,2));o(e+": result[].filter",o.deepEqual(t[0].filter,{type:"ajax",provider:"mobile"})&&o.deepEqual(t[1].filter,{type:"ajax",provider:"3w"}));o(e+": result[].count",o.deepEqual(t[0].count,3)&&o.deepEqual(t[1].count,3))}function a(e,t){o(e+": result.length",o.deepEqual(t.length,2));o(e+": result[].filter",o.deepEqual(t[0].filter,{type:"module",provider:"mobile"})&&o.deepEqual(t[1].filter,{type:"module",provider:"3w"}));o(e+": result[].count",o.deepEqual(t[0].count,2)&&o.deepEqual(t[1].count,1))}console.log("Analysis");o(function(){var t=e();o("average",o.equal(t.average([1,2,3,4,5,0]),2.5));o("sum",o.equal(t.sum([1,2,3,4,5,0]),15));o("sampleVariance",o.equal(t.sampleVariance([1,2,3,4,5,0],2.5),3.5));o("toFixed",o.equal(t.toFixed(1/3),.33));o("toFixed(NaN)",isNaN(t.toFixed(0/0)))});o(function(){var n=e();n.saveStorage({logs:t(20)});o("filter with default limit",o.equal(n.filter({}).length,n.filteredLogsLimit));o("filter with $limit as 5",o.equal(n.filter({$limit:5}).length,5));o("filter with $limit as Infinity",o.equal(n.filter({$limit:Infinity}).length,20));o("filter > 10",o.equal(n.filter({timeStamp:{">":10},$limit:Infinity}).length,10));o("filter >= 10",o.equal(n.filter({timeStamp:{">=":10},$limit:Infinity}).length,11));o("filter === 10",o.equal(n.filter({timeStamp:10,$limit:Infinity}).length,1));o("filter <= 10",o.equal(n.filter({timeStamp:{"<=":10},$limit:Infinity}).length,10));o("filter < 10",o.equal(n.filter({timeStamp:{"<":10},$limit:Infinity}).length,9));o("filter < 10 && > 5",o.equal(n.filter({timeStamp:{"<":10,">":5},$limit:Infinity}).length,4));o("filter with function",o.equal(n.filter({timeStamp:function(t){return t<10}}).length,9));n.saveStorage({logs:s});o("filter with RegExp",o.equal(n.filter({provider:/^mob/}).length,5))});o(function(){var t=e();t.saveStorage({logs:s});n("querySync",t.querySync());t.query().then(function(e){n("query",e)});u("byAjaxSync",t.byAjaxSync());t.byAjax().then(function(e){u("byAjax",e)});a("byModuleSync",t.byModuleSync());t.byModule().then(function(e){a("byModule",e)})})}},function(e,t,n){"use strict";var r=n(751);var i=n(310);e.exports=function(){console.log("pc12306");r("parseYpInfo-ç¡¬åº§2-æ åº§æ",r.deepEqual(i.parseYpInfo({gg_num:"--",gr_num:"--",qt_num:"--",rw_num:"--",rz_num:"--",tz_num:"--",wz_num:"æ",yb_num:"--",yw_num:"--",yz_num:"2",ze_num:"--",zy_num:"--",swz_num:"--",srrb_num:"--",seat_types:"11"}),{1:{seatTypeCode:"1",ticket:2},noSeat:{seatTypeCode:"1",ticket:21}}));r("parseYpInfo-äºç­åº§5-æ åº§æ ",r.deepEqual(i.parseYpInfo({gg_num:"--",gr_num:"--",qt_num:"--",rw_num:"--",rz_num:"--",tz_num:"--",wz_num:"æ ",yb_num:"--",yw_num:"--",yz_num:"--",ze_num:"5",zy_num:"--",swz_num:"--",srrb_num:"--",seat_types:"OO"}),{O:{seatTypeCode:"O",ticket:5},noSeat:{seatTypeCode:"O",ticket:0}}));r("parseYpInfo-æ åº§æ(ç¡¬åº§ä»·æ ¼)",r.deepEqual(i.parseYpInfo({gg_num:"--",gr_num:"--",qt_num:"--",rw_num:"--",rz_num:"--",tz_num:"--",wz_num:"æ",yb_num:"--",yw_num:"--",yz_num:"--",ze_num:"--",zy_num:"--",swz_num:"--",srrb_num:"--",seat_types:"1"}),{noSeat:{seatTypeCode:"1",ticket:21}}));r("parseYpInfo-æ åº§æ(äºç­åº§ä»·æ ¼)",r.deepEqual(i.parseYpInfo({gg_num:"--",gr_num:"--",qt_num:"--",rw_num:"--",rz_num:"--",tz_num:"--",wz_num:"æ",yb_num:"--",yw_num:"--",yz_num:"--",ze_num:"--",zy_num:"--",swz_num:"--",srrb_num:"--",seat_types:"O"}),{noSeat:{seatTypeCode:"O",ticket:21}}));r("parseYpInfo-å¨å§æ -äºç­åº§æ-æ åº§æ",r.deepEqual(i.parseYpInfo({gg_num:"--",gr_num:"--",qt_num:"--",rw_num:"--",rz_num:"--",tz_num:"--",wz_num:"æ",yb_num:"--",yw_num:"--",yz_num:"--",ze_num:"æ",zy_num:"--",swz_num:"--",srrb_num:"æ ",seat_types:"FOO"}),{O:{seatTypeCode:"O",ticket:21},F:{seatTypeCode:"F",ticket:0},noSeat:{seatTypeCode:"O",ticket:21}}))}},function(e,t,n){"use strict";function s(){console.log("retryable");i(function(){return 1}).call().then(function(e){r("normal functions",r.equal(e,1))});i(function(){return $.Deferred().resolve(2)}).call().then(function(e){r("functions return deferrd",r.equal(e,2))});i(function(){return Common.delay(5e3)},{timeout:1}).call().then(function(){r("timeout",false)},function(e){r("timeout",r.equal(e.id,"retryTimeout"))});var e="404";var t=r.proxy(function(){return $.Deferred().reject(e)});i(t).call().then(undefined,function(n){var i=Common.lookUp(e).retryCount||0;r("retryable error reject",r.equal(n,e));r("retryable error retryCount",r.equal(t.calledTimes-1,i))});t=r.proxy(function(){return $.Deferred().reject(e)});i(t,{retryHook:function(n){r("retryHook options.canRetry",r.equal(n.canRetry,true));r("retryHook options.delay",r.equal(n.delay,0));r("retryHook options.resultArr",r.deepEqual(n.resultArr,[[e]]));r("retryHook options.totalRetryCount",r.equal(n.totalRetryCount,0));r("retryHook options.retryCountById",r.equal(n.retryCountById,0));r("retryHook options.error",r.deepEqual(n.error,Common.lookUp(e)));return{canRetry:false}}}).call().then(undefined,function(n){r("retryHook: retryable error reject",r.equal(n,e));r("retryHook: retryable error retryCount",r.equal(t.calledTimes-1,0))});var n="åè½¦åè¿äº";var s=r.proxy(function(){return $.Deferred().reject(n)});i(s).call().then(undefined,function(e){var t=Common.lookUp(n).retryCount||0;r("unable retry error reject",r.equal(e,n));r("unable retry error retryCount",r.equal(s.calledTimes-1,t))})}var r=n(751);var i=n(393);e.exports=s},function(e,t,n){"use strict";function a(){r.h4("injectDFP");f();r.frozonRandom(.32449247315,function(){l();h()})}function f(){r.h5("base methods");var e=365.242199174;r("parseTime 1year",r.equal(o.parseTime("1year"),1e3*60*60*24*e));r("parseTime 1second",r.equal(o.parseTime("1second"),1e3));r("parseTime -1hour",r.equal(o.parseTime("-1hour"),-1e3*60*60));r("parseTime 1.5second",r.equal(o.parseTime("1.5second"),1500));r("parseTime -1.5second",r.equal(o.parseTime("-1.5second"),-1500));r("parseTime 1minute30second",r.equal(o.parseTime("1minute30second"),1e3*90));r("parseTime -1minute30second",r.equal(o.parseTime("-1minute30second"),-1e3*90));r("parseTime number",r.equal(o.parseTime(1e3),1e3));r.frozonRandom(1,function(){r("chooseOne",r.equal(o.chooseOne([0,1,2,3]),3));r("moreOrLess weight 1",r.equal(o.moreOrLess(1,100,40,120),120));r("moreOrLess weight 0",r.equal(o.moreOrLess(0,100,40,120),100));r("moreOrLess weight 0.5",r.equal(o.moreOrLess(.5,100,40,120),110));r("changeOrNot weight 1",r.equal(o.changeOrNot(1,2,function(){return 3}),3));r("changeOrNot weight 0",r.equal(o.changeOrNot(0,2,function(){return 3}),2));r("changeOrNot weight 0.5",r.equal(o.changeOrNot(.5,2,function(){return 3}),2))});r.frozonRandom(0,function(){r("chooseOne",r.equal(o.chooseOne([0,1,2,3]),0));r("moreOrLess weight 1",r.equal(o.moreOrLess(1,100,40,120),40));r("moreOrLess weight 0",r.equal(o.moreOrLess(0,100,40,120),100));r("moreOrLess weight 0.5",r.equal(o.moreOrLess(.5,100,40,120),70));r("changeOrNot weight 1",r.equal(o.changeOrNot(1,2,function(){return 3}),3));r("changeOrNot weight 0",r.equal(o.changeOrNot(0,2,function(){return 3}),3));r("changeOrNot weight 0.5",r.equal(o.changeOrNot(.5,2,function(){return 3}),3))});r.frozonRandom(.333,function(){r("chooseOne",r.equal(o.chooseOne([0,1,2,3]),1));r("genHash radix 10",r.equal(o.genHash(6,10),"333333"));r("genHash radix 16",r.equal(o.genHash(6,16),"553f7c"));r("genHash radix 36",r.equal(o.genHash(6,36),"bzkg4l"));r("moreOrLess weight 1",r.equal(o.moreOrLess(1,100,40,120),67));r("moreOrLess weight 0",r.equal(o.moreOrLess(0,100,40,120),100));r("moreOrLess weight 0.5",r.equal(o.moreOrLess(.5,100,40,120),83));r("changeOrNot weight 1",r.equal(o.changeOrNot(1,2,function(){return 3}),3));r("changeOrNot weight 0",r.equal(o.changeOrNot(0,2,function(){return 3}),2));r("changeOrNot weight 0.5",r.equal(o.changeOrNot(.5,2,function(){return 3}),3))})}function l(){r.h5("fake types");c();r("mac mask [8]",r.equal(o._mac("00:00:00:00:00:00",{mask:[8]}),"00:00:00:53:53:53"));r("mac mask [0]",r.equal(o._mac("00:00:00:00:00:00",{mask:[0]}),"53:53:53:53:53:53"));r("mac mask [9,11]",r.equal(o._mac("00:00:00:00:00:00",{mask:[9,11]}),"00:00:00:53:00:00"));r("wifi",r.equal(o._wifi(),"[Tenda_bojiqz,53:53:53:53:53:53]"));r("_localIP",r.equal(o._localIP(),"192.168.83.83"));r("number",r.equal(o._number(1,200,{min:100,max:300}),"165"));r("number fixed:2",r.equal(o._number(1,200,{min:100,max:300,fixed:2}),"164.90"));r("number fixed: 2 postZeros: 4",r.equal(o._number(1,200,{min:100,max:300,fixed:2,postZeros:4}),"164.900000"));r("byte",r.equal(o._byte(1,1024*200,{min:100*1024,max:300*1024}),165*1024));r("byte scale",r.equal(o._byte(1,1024*200,{target:"test",minScale:.1,maxScale:.3},{test:1e3*1024+""}),165*1024));r("battery",r.equal(o._battery(1,"[3,20]",{min:10,max:30}),"[2,16]"));r.frozonDateNow(1e6,function(){r("unixTime",r.equal(o._unixTime(null,null,{}),1e3));r("unixTime offset 1000second",r.equal(o._unixTime(null,null,{offset:"1000second"}),2e3));r("unixTime offset -1000second",r.equal(o._unixTime(null,null,{offset:"-1000second"}),0))})}function c(){r("hash",r.equal(o._hash(),"5311f04ffa376c53"));r("hash with originalValue",r.equal(o._hash("ffffffffff"),"5311f04ffa"));r("hash mask [8]",r.equal(o._hash("ffffffffff",{mask:[8]}),"ffffffff53"));r("hash mask [0]",r.equal(o._hash("ffffffffff",{mask:[0]}),"5311f04ffa"));r("hash mask [4,6]",r.equal(o._hash("ffffffffff",{mask:[4,6]}),"ffff53ffff"));r("hash maskScale[0.3]",r.equal(o._hash("ffffffffff",{maskScale:[.3]}),"fff5311f04"));r("hash maskScale[0]",r.equal(o._hash("ffffffffff",{maskScale:[0]}),"5311f04ffa"));r("hash maskScale[0.3,0.5]",r.equal(o._hash("ffffffffff",{maskScale:[.3,.5]}),"fff53fffff"));r("digit with originalValue",r.equal(o._digit("0000000000"),"3244924731"));r("digit mask [8]",r.equal(o._digit("0000000000",{mask:[8]}),"0000000032"));r("digit mask [0]",r.equal(o._digit("0000000000",{mask:[0]}),"3244924731"));r("digit mask [4,6]",r.equal(o._digit("0000000000",{mask:[4,6]}),"0000320000"));r("digit maskScale[0.3]",r.equal(o._digit("0000000000",{maskScale:[.3]}),"0003244924"));r("digit maskScale[0]",r.equal(o._digit("0000000000",{maskScale:[0]}),"3244924731"));r("digit maskScale[0.3,0.5]",r.equal(o._digit("0000000000",{maskScale:[.3,.5]}),"0003200000"));r("digit maskScale[0.3,0.5] with luhn",r.equal(o._digit("0000000000",{maskScale:[.3,.5],alg:"luhn"}),"0003200003"))}function h(){r.h5("iOS type fakes");r("battery",r.equal(u._battery(1,"[3-0.200000]",{min:.1,max:.3,fixed:2,postZeros:4}),"[unplugged-0.160000]"));r("wifiList",r.equal(u._wifiList(),"[5311f04ffa376c53-53:53:53:53:53:53]"));r("IDFA",r.equal(u._IDFA(),"5311F04F-5311-5311-5311-5311F04FFA37"))}var r=n(751);var i=n(408);var s=n(410);var o=new i;var u=new s;e.exports=a},function(e,t,n){"use strict";var r=n(751);var i=n(516);var s=n(776);e.exports=function(){var e=function(){var t={candidateSeats:["ä¸ç­åº§","æ åº§"],from:"åå¤´",no:"1",seat:"äºç­åº§",to:"åå¤´ä¸"},n={candidateSeats:["ä¸ç­åº§","æ åº§"],from:"åå¤´",no:"1000",seat:"äºç­åº§",to:"åå¤´ä¸"};var o=[n,t];var u=new i({secKillTrains:o});var a=u.filterFocused(s).focused[0].queryLeftNewDTO.station_train_code;console.log("ç­éç»æ:",u.filterFocused(s).focused);r("å¸æè½¦æ¬¡å·ä¸º: "+t.no+" çè½¦è¢«éåº",r.deepEqual(a,t.no))};e();var t=function(){var t={candidateSeats:["ä¸ç­åº§","æ åº§"],from:"åå¤´",no:"1",seat:"äºç­åº§",to:"åå¤´ä¸"},n={candidateSeats:["äºç­åº§","æ åº§"],from:"åå¤´",no:"2",seat:"ä¸ç­åº§",to:"åå¤´ä¸"};var o=[n,t];var u=new i({secKillTrains:o});var a=u.filterFocused(s).focused[0].queryLeftNewDTO.station_train_code;console.log("ç­éç»æ:",u.filterFocused(s).focused);r("å¸æè½¦æ¬¡å·ä¸º: "+n.no+" çè½¦è¢«éåº",r.deepEqual(a,n.no))};t();var n=function(){var t={candidateSeats:["ä¸ç­åº§","æ åº§"],from:"åå¤´",no:"1",seat:"äºç­åº§",to:"åå¤´ä¸"},n={candidateSeats:["ç¡¬åº§"],from:"åå¤´",no:"3",seat:"ç¡¬å§",to:"åå¤´ä¸"};var o=[n,t];var u=new i({secKillTrains:o});var a=u.filterFocused(s).focused[0].queryLeftNewDTO.station_train_code;console.log("ç­éç»æ:",u.filterFocused(s).focused);r("å¸æè½¦æ¬¡å·ä¸º: "+t.no+" çè½¦è¢«éåº",r.deepEqual(a,t.no))};n();var o=function(){var t={candidateSeats:["ä¸ç­åº§","æ åº§"],from:"åå¤´",no:"1",seat:"äºç­åº§",to:"åå¤´ä¸"},n={candidateSeats:["ç¡¬åº§"],from:"åå¤´",no:"4",seat:"ç¡¬å§",to:"åå¤´ä¸"};var o=[n,t];var u=new i({secKillTrains:o});var a=u.filterFocused(s).focused[0].queryLeftNewDTO.station_train_code;console.log("ç­éç»æ:",u.filterFocused(s).focused);r("å¸æè½¦æ¬¡å·ä¸º: "+t.no+" çè½¦è¢«éåº",r.deepEqual(a,t.no))};o();var u=function(){var t={candidateSeats:["ç¡¬åº§"],from:"åå¤´",no:"4",seat:"ç¡¬å§",to:"åå¤´ä¸"};var n=[t];var o=new i({secKillTrains:n});var u=o.filterFocused(s).focused;var a=u.length==0?0:u[0].queryLeftNewDTO.station_train_code;console.log("ç­éç»æ:",o.filterFocused(s).focused);r("å¸ææ²¡æè½¦è¢«éåº",r.deepEqual(a,0))};u();var a=function(){var t={candidateSeats:["ä¸ç­åº§","æ åº§"],from:"åå¤´",no:"5",seat:"äºç­åº§",to:"åå¤´ä¸"},n={candidateSeats:["ä¸ç­åº§","æ åº§"],from:"åå¤´",no:"6",seat:"äºç­åº§",to:"åå¤´ä¸"};var o=[n,t];var u=new i({secKillTrains:o});var a=u.filterFocused(s).focused[0].queryLeftNewDTO.station_train_code;console.log("ç­éç»æ:",u.filterFocused(s).focused);r("å¸æè½¦æ¬¡å·ä¸º: "+t.no+" çè½¦è¢«éåº",r.deepEqual(a,t.no))};a();var f=function(){var t={candidateSeats:["ä¸ç­åº§","æ åº§"],from:"åå¤´",no:"5",seat:"äºç­åº§",to:"åå¤´ä¸"},n={candidateSeats:["ä¸ç­åº§","æ åº§"],from:"åå¤´",no:"6",seat:"äºç­åº§",to:"åå¤´ä¸"};var o=[n,t];var u=new i({secKillTrains:o});var a=u.filterFocused(s).focused[0].queryLeftNewDTO.station_train_code;console.log("ç­éç»æ:",u.filterFocused(s).focused);r("å¸æè½¦æ¬¡å·ä¸º: "+t.no+" çè½¦è¢«éåº",r.deepEqual(a,t.no))};f()}},function(e,t){"use strict";e.exports={data:[{queryLeftNewDTO:{station_train_code:"1",from_station_telecode:"BTC",to_station_telecode:"BDC",gg_num:"--",gr_num:"--",qt_num:"--",rw_num:"--",rz_num:"--",srrb_num:"--",swz_num:"--",tz_num:"--",wz_num:"æ",yb_num:"--",yw_num:"--",yz_num:"--",ze_num:"æ",zy_num:"10"}},{queryLeftNewDTO:{station_train_code:"2",from_station_telecode:"BTC",to_station_telecode:"BDC",gg_num:"--",gr_num:"--",qt_num:"--",rw_num:"--",rz_num:"--",srrb_num:"--",swz_num:"--",tz_num:"--",wz_num:"æ",yb_num:"--",yw_num:"--",yz_num:"--",ze_num:"æ",zy_num:"19"}},{queryLeftNewDTO:{station_train_code:"3",from_station_telecode:"BTC",to_station_telecode:"BDC",gg_num:"--",gr_num:"--",qt_num:"--",rw_num:"æ ",rz_num:"--",srrb_num:"--",swz_num:"--",tz_num:"--",wz_num:"æ",yb_num:"--",yw_num:"æ",yz_num:"18",ze_num:"--",zy_num:"--"}},{queryLeftNewDTO:{station_train_code:"4",from_station_telecode:"BTC",to_station_telecode:"BDC",gg_num:"--",gr_num:"--",qt_num:"--",rw_num:"*",rz_num:"--",srrb_num:"--",swz_num:"--",tz_num:"--",wz_num:"*",yb_num:"--",yw_num:"*",yz_num:"*",ze_num:"--",zy_num:"--"}},{queryLeftNewDTO:{station_train_code:"5",from_station_telecode:"BTC",to_station_telecode:"BDC",gg_num:"--",gr_num:"--",qt_num:"--",rw_num:"--",rz_num:"--",srrb_num:"--",swz_num:"--",tz_num:"--",wz_num:"æ",yb_num:"--",yw_num:"--",yz_num:"--",ze_num:"æ",zy_num:"10"}},{queryLeftNewDTO:{station_train_code:"6",from_station_telecode:"BTC",to_station_telecode:"BDC",gg_num:"--",gr_num:"--",qt_num:"--",rw_num:"--",rz_num:"--",srrb_num:"--",swz_num:"--",tz_num:"--",wz_num:"æ",yb_num:"--",yw_num:"--",yz_num:"--",ze_num:"æ",zy_num:"10"}}]}},function(e,t,n){"use strict";var r=n(751);var i=n(360);var s=n(361);var o=s.CookieAccessInfo;var u=s.CookieJar;var a=s.Cookie;e.exports=function(){var e=function(t){function r(){console.log("start query left ...");var e="https://"+t+"/otn/leftTicket/query?leftTicketDTO.train_date=2018-11-20&leftTicketDTO.from_station=CDW&leftTicketDTO.to_station=SHH&purpose_codes=ADULT";i(e,{jsCookie:true,timeout:12e3,httpTimeout:1e4,header:{Host:"kyfw.12306.cn",Connection:"close","User-Agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.67 Safari/537.36"}}).then(console.log(t,"query succ !"))}var n="https://"+t+"/otn/index/init";i(n,{jsCookie:true,timeout:12e3,httpTimeout:1e4,header:{Host:"kyfw.12306.cn",Connection:"close","User-Agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.67 Safari/537.36"}}).then(r)};var t=["202.114.91.126","117.157.20.99","60.18.86.61"];var n=true;var r=false;var s=undefined;try{for(var o=t[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){var a=u.value;console.log(a);e(a)}}catch(f){r=true;s=f}finally{try{if(!n&&o.return){o.return()}}finally{if(r){throw s}}}}},function(e,t,n){"use strict";var r=n(751);var i=n(389);e.exports=function(){var e=function(){Common.clearCache("3w");(new i).run()};e()}},function(e,t,n){"use strict";function s(){r.h4("CdnManager");var e=new i;e._updateIpListFromQunar().then(function(e){var t=e.data,n=e.ret;console.log(t,n);if(n===1&&t&&t.length===2){var r=t[0].cdnList.filter(function(e){return t[1].cdnList.includes(e)});var i={intersection:r};i[t[0].domain]=t[0].cdnList;i[t[1].domain]=t[1].cdnList;console.log("IP result",i)}})}var r=n(751);var i=n(390);e.exports=s},function(e,t,n){"use strict";var r=n(365);e.exports=function(){var e=r("test");e("default");e.log("log");e.error("error");e.warn("warn");e.info("info")}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,s){try{var o=t[i](s);var u=o.value}catch(a){n(a);return}if(o.done){e(u)}else{return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)})}}return r("next")})}}var i=n(381);var s=n(360);var o={};var u=[];var a="";var f={getNewVersion:function(){function n(e,t){var n=t.substring(t.indexOf("@"));var r=n.split("@");r.forEach(function(e,t){if(e){var n=e.split("|");o[n[1]]=n[2]}});return o}var t="https://kyfw.12306.cn/otn/resources/js/framework/station_name.js";return s(t,{}).then(n)},requestCityCode:function(t){return pc12306.queryQssj(t,"wx").then(null,pc12306.queryQssj.bind(pc12306,t,"wx")).then(null,pc12306.queryQssj.bind(pc12306,t,"wx")).then(null,pc12306.queryQssj.bind(pc12306,t,"wx"))},findCityCode:function(t){return this.requestCityCode(t).then(undefined,this.requestCityCode.bind(this,t)).then(undefined,this.requestCityCode.bind(this,t)).then(function(e){var n=[];e.data.forEach(function(e){var t=e.name;var r=o[t];n.push(r)});console.log({city:t,codeArr:n});return n})},exsitSameCityCode:function(t){if(u.length===0){return false}for(var n=0;n<u.length;n++){var r=u[n];if(r.length===t.length){for(var i=0;i<r.length;i++){var s=r[i];var o=t.indexOf(s);if(o>-1){return true}}}}return false},exsitCityCode:function(t){for(var n=0;n<u.length;n++){var r=u[n];if(r.indexOf(t)>-1){return true}}return false},fetchCityCodeSync:function(){function t(t){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function n(e){var t,r;return regeneratorRuntime.wrap(function(i){while(1){switch(i.prev=i.next){case 0:i.next=2;return this.findCityCode(e);case 2:t=i.sent;r=this.exsitSameCityCode(t);if(!r){u.push(t)};case 5:case"end":return i.stop()}}},n,this)}));return t}(),printDelay:function(){function t(t){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function n(e){return regeneratorRuntime.wrap(function(n){while(1){switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(t,n){setTimeout(function(){console.log("newSameCityCodeArr   ",e,JSON.stringify(u));t()},0)}));case 1:case"end":return n.stop()}}},n,this)}));return t}(),shrinkSize:function(){console.log("newSameCityCodeArr  shrinkSize  before",u.length,JSON.stringify(u));var t=[];u.forEach(function(e){if(e.length>1){t.push(e)}});u=t;var n=JSON.stringify(u);localStorage.sameCityCode=n;console.log("newSameCityCodeArr  shrinkSize  after",u,u.length,n)},_arrEquals:function(t,n){if(!t||!n){return false}if(t.length!=n.length){return false}for(var r=0;r<t.length;r++){if(n.indexOf(t[r])==-1){return false}}return true},_contains:function(t,n){for(var r=0;r<t.length;r++){var i=t[r];if(this._arrEquals(n,i)){return true}}return false},_diff:function(){for(var t=0;t<u.length;t++){var n=u[t];if(!this._contains(i,n)){a+="\n++++++ "+JSON.stringify(n)+"\n"}}for(var r=0;r<i.length;r++){var s=i[r];if(!this._contains(u,s)){a+="\n------ "+JSON.stringify(s)+"\n"}}console.warn(a)},refresh:function(){var t=function(){var e=r(regeneratorRuntime.mark(function t(e){var n=this;var r,i;return regeneratorRuntime.wrap(function(s){while(1){switch(s.prev=s.next){case 0:r=0;i=Object.entries(e);console.warn("getNewVersionSuccess -----------------",i.length);s.next=5;return i.reduce(function(e,t){return e.then(function(){r++;var e=t[1];if(n.exsitCityCode(e)){console.log("exsitCityCode",e,"return");return Promise.resolve()}return n.fetchCityCodeSync(t[0]).then(n.printDelay.bind(n,r))})},Promise.resolve()).catch(function(e){console.error({msg:e})});case 5:this.shrinkSize();this._diff();console.warn("------  all over !  ---------");case 8:case"end":return s.stop()}}},t,this)}));return function(n){return e.apply(this,arguments)}}();this.getNewVersion().then(t.bind(this))}};e.exports=f},function(e,t,n){"use strict";n(783);window.hysdk&&window.hysdk.ready(function(){if(hysdk.env!=="hy"){location.reload()}})},function(e,t){"use strict";$(function(){function e(){var e,t,n;t=document.getElementsByTagName("link");for(e=0;e<t.length;e++){n=t[e];if(n.rel.toLowerCase().indexOf("stylesheet")>=0&&n.href){var r=n.href.replace(/(@)[a-z0-9]+/,"@"+Date.now());n.href=r}}}$("<a>ð</a>").css({position:"fixed",bottom:5,right:5,zIndex:9999}).click(e).appendTo("body")})},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function f(e){function t(){var t=arguments[0];timerTool.add(t);console[e].apply(console,arguments)}function n(){}if(e in console){a[e]=o?t:n}}var r=n(785);var i=s(r);var o=false;if({buildType:"prd",deployType:"prod"}.buildType!=="prd"){o=true}if(o){window.timerTool=new i.default}var u=["debug","error","log","info","warn","clear","dir","dirxml","table","trace","assert","count","profile","profileEnd","time","timeEnd","timeStamp","takeHeapSnapshot","group","groupCollapsed"];var a={};u.forEach(f);window.Console=a},function(e,t){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=function(){function e(){r(this,e);this.timingData=[]}n(e,[{key:"add",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"unknownAction";var n=Date.now(),r=this.timingData[this.timingData.length-1],i=r?r.time:n;var s={key:t,time:n,duration:n-i};this.timingData.push(s)}},{key:"log",value:function(){this.timingData.length>0&&this._log()}},{key:"getDuration",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=arguments[1];var r=this._findDataWithKey(t);var i=this._findDataWithKey(n);var s=this._calDuration(r,i);if(arguments.length===0)return s;console.info("getDuration for "+t+" to "+n,s+"ms")}},{key:"getTotalDuration",value:function(){console.info("getTotalDuration",this.getDuration()+"ms")}},{key:"_findDataWithKey",value:function(t){if(typeof t==="number"){return this.timingData[t]}else if(t===undefined){return this.timingData[this.timingData.length-1]}else{return this.timingData.find(function(e){return e.key===t})}}},{key:"_log",value:function(){console.table(this.timingData)}},{key:"_calDuration",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return n.time-t.time}}]);return e}();t.default=i},function(e,t,n){"use strict";function v(e){return e&&e.__esModule?e:{"default":e}}function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function z(e,t,n,r){var i={title:{text:e,style:"text"},section:{right:".yo-header .affirm"}};if(t)i.type="none";if(n)i.right=n;if(r){i.section={left:"header .regret$",$buttonsDoNotSimulate:[]}}return i}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();n(2);n(47);n(48);n(72);n(73);n(74);n(75);n(76);n(77);n(78);n(79);n(80);n(89);n(90);n(94);n(95);n(96);n(99);n(100);n(101);n(102);n(103);n(104);n(105);n(106);n(108);n(109);n(110);n(111);n(118);n(123);n(125);n(126);n(127);n(128);n(129);n(130);n(131);n(132);n(133);n(134);n(135);n(137);n(138);n(139);n(140);n(141);n(143);n(145);n(149);n(150);n(151);n(153);n(159);n(160);n(161);n(162);n(164);n(165);n(166);n(167);n(168);n(63);n(169);n(170);n(172);n(173);n(174);n(175);n(176);n(177);n(179);n(180);n(181);n(183);n(184);n(185);n(187);n(189);n(190);n(191);n(192);n(193);n(194);n(195);n(196);n(197);n(198);n(199);n(201);n(202);n(203);n(205);n(206);n(207);n(208);n(209);n(787);n(791);n(813);n(827);var i=n(800);var s=v(i);var o=n(805);var u=v(o);var a=n(828);var f=n(829);var l=v(f);n(830);var c=n(831);var h=v(c);var p=n(965);var d=v(p);var b=function(t,r){n.e(2,function(){var e=n(966);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var w=function(t,r){n.e(3,function(){var e=n(969);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var E=function(t,r){n.e(4,function(){var e=n(970);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var S=function(t,r){n.e(5,function(){var e=n(973);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var x=function(t,r){n.e(6,function(){var e=n(974);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var T=function(t,r){n.e(7,function(){var e=n(975);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var N=function(t,r){n.e(8,function(){var e=n(977);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var C=function(t,r){!function(){var e=n(961);if(e.__esModule){r(null,e.default)}else{r(null,e)}}(n)};var k=function(t,r){n.e(9,function(){var e=n(979);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var L=function(t,r){n.e(10,function(){var e=n(980);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var A=function(t,r){n.e(11,function(){var e=n(981);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var O=function(t,r){n.e(12,function(){var e=n(982);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var M=function(t,r){n.e(13,function(){var e=n(987);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var _=function(t,r){n.e(14,function(){var e=n(992);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var D=function(t,r){n.e(15,function(){var e=n(995);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var P=function(t,r){n.e(16,function(){var e=n(999);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var H=function(t,r){n.e(17,function(){var e=n(1e3);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var B=function(t,r){n.e(18,function(){var e=n(1001);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var j=function(t,r){n.e(19,function(){var e=n(1002);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var F=function(t,r){n.e(20,function(){var e=n(1003);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var I=function(t,r){n.e(21,function(){var e=n(1004);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var q=function(t,r){n.e(22,function(){var e=n(1005);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var R=function(t,r){n.e(23,function(){var e=n(1007);if(e.__esModule){r(null,e.default)}else{r(null,e)}})};var U=void 0;if(!{buildType:"prd",deployType:"prod"}.deployType||{buildType:"prd",deployType:"prod"}.deployType&&{buildType:"prd",deployType:"prod"}.deployType=="beta"){U=function(t,r){n.e(24,function(){var e=n(1012);if(e.__esModule){r(null,e.default)}else{r(null,e)}})}}var W=function(e){function t(e){m(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.componentDidCatch=util.componentErrorHandle("Root");return n}y(t,e);r(t,[{key:"render",value:function(){return s.default.createElement(a.Router,{history:l.default},s.default.createElement(a.Route,{path:"/orderDetail"},s.default.createElement(a.IndexRoute,{component:h.default}),s.default.createElement(a.Route,{path:"/grabStrategy",getComponent:b,navigation:z("æ¢ç¥¨æ»ç¥")}),s.default.createElement(a.Route,{path:"/robGuide",component:d.default,navigation:z("æ¢ç¥¨æ»ç¥")}),s.default.createElement(a.Route,{path:"/cancelOrder",getComponent:w,navigation:z("åæ¶åå ")}),s.default.createElement(a.Route,{path:"/cancelGrabOrder",getComponent:E,navigation:z(" ",true)}),s.default.createElement(a.Route,{path:"/estimateGrabOrder",getComponent:E,navigation:z(" ",true)}),s.default.createElement(a.Route,{path:"/cancelOrderFinal",getComponent:S,navigation:z("æ¸©é¦¨æç¤º")}),s.default.createElement(a.Route,{path:"/fareAdjustment",getComponent:x,navigation:z("ä¸è½¦è¡¥ç¥¨")}),s.default.createElement(a.Route,{path:"/register",getComponent:T,navigation:z("æ³¨å12306è´¦å·")}),s.default.createElement(a.Route,{path:"/verifyMobile",getComponent:N,navigation:z("æ ¸éªææºå·")}),s.default.createElement(a.Route,{path:"/verificationGuide",getComponent:C,navigation:z("ç»¿è²è´­ç¥¨éé")}),s.default.createElement(a.Route,{path:"/rebookGrabDetail",getComponent:k,navigation:z("æ¹ç­¾æ¢è®¢åè¯¦æ",true)}),s.default.createElement(a.Route,{path:"/instruction",getComponent:L,navigation:z("è´­ç¥¨é¡»ç¥")}),s.default.createElement(a.Route,{path:"/cossackDownload",getComponent:O,navigation:z(" ",true)}),s.default.createElement(a.Route,{path:"/refundDetail/:orderNo/(:uuid)",getComponent:H,navigation:z("éæ¬¾æç»",true)}),s.default.createElement(a.Route,{path:"/refundAnswer/:orderNo/:id/(:uuid)",getComponent:B,navigation:z("éæ¬¾å¸¸è§é®é¢",true)}),U?s.default.createElement(a.Route,{path:"/",getComponent:U,navigation:z("HY Debug")}):null,s.default.createElement(a.Route,{path:"/travelService",getComponent:A,navigation:z(" ")}),s.default.createElement(a.Route,{path:"/tv",getComponent:M,navigation:z(" ",true)}),s.default.createElement(a.Route,{path:"/selfGrabDetail",getComponent:_,navigation:z(" ",true)}),s.default.createElement(a.Route,{path:"/selfGrabDetailTestB",getComponent:D,navigation:z(" ",true)}),s.default.createElement(a.Route,{path:"/secKillDetail",getComponent:P,navigation:z("ç§ææ¢ç¥¨",true)}),U?s.default.createElement(a.Route,{path:"/seckillDebug",getComponent:q,navigation:z("seckill Debug")}):null,U?s.default.createElement(a.Route,{path:"/touchDomainDebug",getComponent:R,navigation:z("touchDomain Debug")}):null,s.default.createElement(a.Route,{path:"/Standby",getComponent:j,navigation:z(" ",true)}),s.default.createElement(a.Route,{path:"/faceVerification",getComponent:F,navigation:z("äººè¸è®¤è¯",true)}),s.default.createElement(a.Route,{path:"/activeMember",getComponent:I,navigation:z("æ¿æ´»12306ä¼å",true)})))}}]);return t}(i.Component);hysdk.ready(function(){u.default.render(s.default.createElement(W,null),document.getElementById("root"));setTimeout(function(){hysdk.setWebViewAttr({scrollEnabled:false})},400)})},function(e,t,n){"use strict";n(788);n(790);hysdk.config({debug:false,bridgeReadyEvent:"WebViewJavascriptBridgeReady",bridgeReadyTimeout:600,hytiveReg:"",wechatSupport:false,wechatScriptUrl:"//res.wx.qq.com/open/js/jweixin-1.0.0.js",wechatSignatureUrl:"//ccweixin.qunar.com/chat/getJsConfig.do",ucAPIScriptUrl:"//common.qunarzz.com/ucapi/prd/scripts/1.0.3/api@d20c312aba29a7178996dd57abcca695.js"})},function(e,t,n){e.exports=n(789)(70699967)},function(e,t){e.exports=lib},function(e,t,n){e.exports=n(789)(74171404)},function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}var r=n(792);var i=u(r);var s=n(812);var o=u(s);window.Alert=i.default.AlertNative;window.Confirm=i.default.ConfirmNative;window.Toast=i.default.ToastNative;(0,o.default)("train_sino_hy/prd/")},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=i.default.compromiseParams(e);return new Promise(function(n,r){function s(){t.onOk&&t.onOk(arguments);n.apply(null,arguments)}function o(){return i.default.AlertHy(e).then(n)}hysdk.train.showAlert({title:t.title,content:t.content,buttons:[t.okText||"ç¡®å®"],success:s,fail:o})})}function u(e){var t=i.default.compromiseParams(e);return new Promise(function(n,r){function s(e){if(e.index==0){t.onOk&&t.onOk(arguments);n.apply(null,arguments)}else{t.onCancel&&t.onCancel(arguments);r.apply(null,arguments)}}function o(){return i.default.ConfirmHy(e).then(n,r)}hysdk.train.showAlert({title:t.title||"",content:t.content,buttons:[t.okText||"ç¡®å®",t.cancelText||"åæ¶"],success:s,fail:o})})}function a(e,t){var n=i.default.compromiseParams(e);return new Promise(function(r,s){function u(e){setTimeout(r,o,e)}function a(){return i.default.ToastHy(e).then(r)}var o=n.duration||t||2e3;hysdk.train.showToast({msg:n.content||n.msg,duration:o,durationAdr:n.durationAdr||0,success:u,fail:a})})}Object.defineProperty(t,"__esModule",{value:true});var r=n(793);var i=s(r);t.default={AlertNative:o,ConfirmNative:u,ToastNative:a}},function(e,t,n){"use strict";function h(e){return e&&e.__esModule?e:{"default":e}}function p(e){var t=e.trim().charCodeAt(0)>255;var n=!Number.isNaN(Number(e.trim()[0]));return t||n}function d(e){var t=["ä¸å¯å é¤","ä¸åè®¸å é¤"];return t.some(function(t){return e.includes(t)})}function v(e){return typeof e=="string"&&e.toUpperCase().includes("<!DOCTYPE")}function m(e,t){var n=false;var r=typeof e=="string"&&e.trim().length>0;if(r)n=d(e)||p(e);if(n)return e;else{util.watch("nonChineseAlert",false);if(v(e))e="html";return"æå¡å¨ç¹å¿ï¼è¯·ç¨ååè¯[FAIL: "+e+"]"}}function g(e){var t={title:"å°é©¼æ¸©é¦¨æç¤º",content:""};if(typeof e==="string"){t.content=e}else if((typeof e==="undefined"?"undefined":s(e))==="object"){switch(s(e.btnText)){case"string":e.okText=e.btnText;break;case"object":if(e.btnText instanceof Array){var n=i(e.btnText,2);var o=n[0];e.okText=o===undefined?"ç¡®å®":o;var u=n[1];e.cancelText=u===undefined?"åæ¶":u}break;default:}r(t,e)}t.title=p(t.title)?t.title:"å°é©¼æ¸©é¦¨æç¤º";t.content=m(t.content);return t}function y(e,t){return new Promise(function(n,r){function i(e){if(e)n.apply(null,arguments);else r.apply(null,arguments)}t(g(e)).then(i)})}function b(e){return y(e,u.default)}function w(e){return y(e,f.default)}function E(e,t){var n=g(e);return new Promise(function(e,r){var i=n.duration||t||2e3;c.default.show(n.content||n.msg,i);setTimeout(e,i)})}Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var i=function(){function e(e,t){var n=[];var r=true;var i=false;var s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=true;s=a}finally{try{if(!r&&o["return"])o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var s=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=n(794);var u=h(o);var a=n(807);var f=h(a);var l=n(809);var c=h(l);var S={compromiseParams:g,alertHy:b,confirmHy:w,toastHy:E};t.default=S},function(e,t,n){e.exports=n(795)},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:true});n(796);var r=n(797);var i=s(r);t.default=i.default},function(e,t,n){e.exports=n(789)(77688814)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:["ç¡®å®",""];var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"fade";var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"";if((typeof e==="undefined"?"undefined":r(e))==="object"){var u=e;e=u.content!=null?u.content:"";t=u.title!=null?u.title:"";n=u.btnText!=null?[u.btnText,""]:["ç¡®å®",""];i=u.animation||"fade";o=u.extraClass!=null?u.extraClass:""}return(0,s.default)(e,t,n,i,false,o)}Object.defineProperty(t,"__esModule",{value:true});var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=u;var i=n(798);var s=o(i)},function(e,t,n){"use strict";function h(e){return e&&e.__esModule?e:{"default":e}}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function b(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:["ç¡®å®","åæ¶"];var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"fade";var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:"";if((typeof e==="undefined"?"undefined":r(e))==="object"){var u=e;t=u.title!=null?u.title:"";e=u.content!=null?u.content:"";n=u.btnText!=null?u.btnText:["ç¡®å®","åæ¶"];i=u.animation!=null?u.animation:"fade";s=u.cancel!=null?!!u.cancel:true;o=u.extraClass!=null?u.extraClass:""}e=(0,c.isFunction)(e)?e():e;return new Promise(function(r){function a(){setTimeout(function(){r(true)},u);m.setState({show:false})}function f(){setTimeout(function(){r(false)},u);m.setState({show:false})}var u=i!=="none"?300:0;if(i!=null&&i.duration!=null){u=i.duration}m.setState({show:true,title:t,content:e,btnText:n,animation:i,onOk:a,onCancel:s?f:false,extraClass:o})})}Object.defineProperty(t,"__esModule",{value:true});var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();t.default=b;var s=n(799);var o=h(s);var u=n(800);var a=h(u);var f=n(805);var l=h(f);var c=n(806);var m=null;var g=document.createElement("div");var y=function(e){function t(e){p(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={show:false,title:"",content:"",animation:"none",btnText:["ç¡®å®","åæ¶"],onOk:function(){},onCancel:function(){},extraClass:""};m=n;return n}v(t,e);i(t,[{key:"render",value:function(){var t=this.state,n=t.show,r=t.title,i=t.content,s=t.animation,u=t.onOk,f=t.onCancel,l=t.btnText,c=t.extraClass;return a.default.createElement(o.default,{show:n,title:r,onOk:u.bind(this),animation:s,okText:l[0]!=null&&l[0],cancelText:l[1]!=null&&l[1],onCancel:f?f.bind(this):false,extraClass:c},i)}}]);return t}(u.Component);l.default.render(a.default.createElement(y,null),g)},function(e,t,n){"use strict";function d(e){return e&&e.__esModule?e:{"default":e}}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(800);var s=d(i);var o=n(801);var u=d(o);var a=n(802);var f=d(a);var l=n(803);var c=d(l);var h=n(804);var p=d(h);var y={show:false,animation:"fade",title:"",content:"",width:"auto",height:"auto",align:"center",contentOffset:[0,0],maskOffset:[0,0],extraClass:"",okText:"ç¡®å®",cancelText:"åæ¶",onOk:function(){},onCancel:function(){}};var b={show:u.default.bool,animation:u.default.oneOfType([u.default.string,u.default.shape({animation:u.default.arrayOf(u.default.string).isRequired,duration:u.default.number.isRequired})]),title:u.default.oneOfType([u.default.element,u.default.string]),width:u.default.oneOfType([u.default.number,u.default.string]),height:u.default.oneOfType([u.default.number,u.default.string]),align:u.default.oneOf(["top","center","bottom"]),contentOffset:u.default.arrayOf(u.default.number),maskOffset:u.default.arrayOf(u.default.number),extraClass:u.default.string,okText:u.default.string,cancelText:u.default.string,onOk:u.default.oneOfType([u.default.bool,u.default.func]),onCancel:u.default.oneOfType([u.default.bool,u.default.func]),children:u.default.oneOfType([u.default.object,u.default.array,u.default.string])};var w=function(e){function t(){v(this,t);return m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}g(t,e);r(t,[{key:"render",value:function(){var t=this.props,n=t.show,r=t.title,i=t.animation,o=t.width,u=t.height,a=t.align,l=t.contentOffset,h=t.maskOffset,d=t.extraClass,v=t.okText,m=t.cancelText,g=t.onOk,y=t.onCancel,b=t.children;var w=y?s.default.createElement(c.default,{onTap:y,touchClass:"yo-btn-touch"},s.default.createElement("button",{className:"yo-btn yo-btn-dialog yo-btn-l"},m)):null;var E=g?s.default.createElement(c.default,{onTap:g,touchClass:"yo-btn-touch"},s.default.createElement("button",{className:"yo-btn yo-btn-dialog yo-btn-l"},v)):null;return s.default.createElement(f.default,{align:a,show:n,width:o,height:u,animation:i||"",contentOffset:l,maskOffset:h,onMaskTap:function(){}},s.default.createElement("div",{className:(0,p.default)("yo-dialog",d)},s.default.createElement("header",{className:"hd"},s.default.createElement("h2",{className:"title"},r)),s.default.createElement("div",{className:"bd"},b),s.default.createElement("footer",{className:"ft"},w,E)))}}]);return t}(i.Component);t.default=w;w.defaultProps=y;w.propTypes=b},function(e,t,n){e.exports=n(789)(50105647)},function(e,t,n){e.exports=n(789)(53685779)},function(e,t,n){e.exports=n(789)(105836751)},function(e,t,n){e.exports=n(789)(84692118)},function(e,t,n){e.exports=n(789)(58139855)},function(e,t,n){e.exports=n(789)(78757299)},function(e,t,n){e.exports=n(789)(105527087)},function(e,t,n){e.exports=n(808)},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:true});n(796);var r=n(798);var i=s(r);t.default=i.default},function(e,t,n){e.exports=n(810)},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:true});n(796);var r=n(811);var i=s(r);t.default=i.default},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(800);var s=l(i);var o=n(801);var u=l(o);var a=n(805);var f=l(a);var d=null;var v=document.createElement("div"),m={show:false},g={show:u.default.bool};document.body.appendChild(v);var y=function(e){function t(e){c(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={show:e.show,content:""};n._timer=null;d=n;return n}p(t,e);r(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this._timer);document.body.removeChild(v)}},{key:"render",value:function(){var t=this.state,n=t.show,r=t.content;return s.default.createElement("div",{className:"yo-toast",style:{display:n?null:"none"}},r)}}]);return t}(i.Component);y.propTypes=g;y.defaultProps=m;f.default.render(s.default.createElement(y,null),v);t.default={show:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"no content";var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2e3;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};d.setState({content:t,show:true},i);if(!!d.timer){clearTimeout(d.timer);d.timer=null}d.timer=setTimeout(function(){return n.hide()},r);return this},hide:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(){};if(!!d.timer){clearTimeout(d.timer);d.timer=null}d.setState({show:false},t);return this}}},function(e,t,n){"use strict";function r(e){var t=document.getElementsByTagName("script");var r=void 0;for(var i=t.length-1;!r&&i>=0;i--){var s=t[i].src;if(s&&s.indexOf(e)!==-1){r=s}}if(r){n.p=r.split(e)[0]+e}}Object.defineProperty(t,"__esModule",{value:true});t.default=r},function(e,t,n){"use strict";function O(e){return e&&e.__esModule?e:{"default":e}}var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var s=n(814);var o=O(s);var u=n(382);var a=O(u);var f=n(815);var l=O(f);var c=n(322);var h=O(c);var p=n(321);var d=O(p);var v=n(816);var m=O(v);var g=n(817);var y=O(g);var b=n(818);var w=O(b);var E=n(819);var S=O(E);var x=n(820);var T=O(x);n(784);n(821);var N=n(822);var C=n(320);var k=O(C);var L=n(226);var A=O(L);var M=new o.default("localStorage","mobileAgentBuy_");var _=new o.default("sessionStorage","mobileAgentBuy_");var D=n(826);String.prototype.includes=String.prototype.includes||function(e){return this.indexOf(e)>-1};Array.prototype.includes=Array.prototype.includes||function(e){return this.indexOf(e)>-1};var P=i({base64encode:a.default.base64encode,base64decode:a.default.base64decode,Timer:y.default,Countdown:m.default,market:new w.default,LocalControl:S.default,randomPop:new T.default,event:new l.default,domainTouch:new d.default,domainHy:new h.default,checkId:A.default,loading:{show:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"æ­£å¨å è½½";var n=arguments[1];var r=arguments[2];N.loading.show({modalExtraClass:"yo-loading-train",text:t,maskOffset:[n||0,r||0]})},hide:N.loading.hide},capitalize:function(t){if(typeof t!=="string"||t.length===0)return t;return t.substr(0,1).toUpperCase()+(t||"").substr(1).toLowerCase()},getToggleClass:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var i=n;var s=" g-hide";if(r===true)s=" g-hidden";if(!t)i+=s;i=i.trim();return i},qunarLogin:function(){return new Promise(function(e,t){function r(t){e.apply(null,arguments)}function i(e){t.apply(null,arguments)}var n={useUcApi:true,useDefault:true,success:r,fail:i};hysdk.login(n)})},qunarLogout:function(){return new Promise(function(e,t){hysdk.logout({success:function(r){if(r.ret)e.apply(null,arguments);else t.apply(null,arguments)}})})},qunarCheckLogin:function(){return new Promise(function(e,t){hysdk.checkLogin({success:function(r){if(r.state){e(r)}else{t(r)}}})})},getQunarUserInfoByHysdk:function(){return new Promise(function(e,t){hysdk.getUserInfo({success:function(r){if(r.ret){e(r.data)}else t(r.errmsg,r)}})})},getQunarUserInfo:function(){return new Promise(function(e,t){hysdk.train.getQunarUserInfo({success:e,fail:t})})},postRequest:function(t,n){console.log(t,n);n&&(n.fromHy=true);return new Promise(function(e,r){function i(){r("æå¡å¨æªååºï¼è¯·ç¨ååè¯[FAIL:TIMEOUT]")}hysdk.train.qunarRequest({serviceType:t,param:n,success:function(s){Common.postRequestLogs(t,n,s);console.log(t+" success:",arguments);if(s.bstatus&&s.bstatus.code==0){e(s.data)}else{r(s.bstatus&&s.bstatus.des,s)}},fail:function(i){Common.postRequestLogs(t,n,i);console.log(t+" fail:",arguments);var s=i&&i.errmsg;s=s||"æå¡å¨ç¹å¿ï¼è¯·ç¨ååè¯[FAIL:UNKNOWN]";r(s,i)}});setTimeout(i,10*1e3)})},storeInfo:function(t,n,r){var s=M.get(t),o;o=s;o=o||{};if(r){o=n}else{o=i(o,n)}M.set(t,o)},getStoredInfo:function(t){return M.get(t)||{}},sessionStoreInfo:function(t,n,r){var s=_.get(t),o;o=s;o=o||{};if(r){o=n}else{o=i(o,n)}_.set(t,o)},getSessionStoredInfo:function(t){return _.get(t)||{}},may12306LoggedIn:function(){var t=this.getUserInfo()||{};return!!(t.user_name&&t.pwd)},getUserInfo:function(){var t=this.getStoredInfo("loginUser");if(t&&t.name){var n=this.getStoredInfo(t.name+"_userInfo01");if(n&&n.user_name){return n}else{return null}}else{return null}},getCookie:function(t){function i(){if(typeof r.QN241==="string"){r.QN241=decodeURIComponent(r.QN241);try{r.QN241=JSON.parse(r.QN241)}catch(e){}}if(typeof r.QN270==="string"){r.QN270=decodeURIComponent(r.QN270)}}t=t||document.cookie||"";var n=/^|;\s*([^=]+)\s*=\s*([^;$]*)/g;var r={};t.replace(n,function(e,t,n){if(t)r[t]=n});i();return r},continueLoading:function(){hysdk.onLoadingClose({success:function(t,n){n({data:true})}})},serialize:function(t,n){t=t||{};var r,i,s=[];if(!(n&&n.length>0)){n=[];for(var o in t){n.push(o)}}n.forEach(function(e){r=t[e];if(P.isObject(r)){r=P.base64encode(JSON.stringify(r))}else if(P.isArray(r)){r.forEach(function(t){s.push(e+"="+t)});return}s.push(e+"="+r)});i=s.join("&");if(i)i="?"+i;return i},_isType:function(t,n){n=this.capitalize(n);return{}.toString.call(t)==="[object "+n+"]"},isEmptyString:function(t){return!(t&&t.length>0)},isArray:function(t){return this._isType(t,"Array")},isArrayNotEmpty:function(t){return this.isArray(t)&&t.length>=1},isObject:function(t){return this._isType(t,"Object")},isObjectNotEmpty:function(t){if(this.isObject(t)){for(var n in t){console.log(n);return true}return false}return false},isDate:function(t){return this._isType(t,"Date")},isNumber:function(t){return this._isType(t,"Number")},openTrainapp1:function(t,n,r){var s="/app/1.0/index.html?hybridid=flight_train_app1#";var o=location.origin+s+t;o+=this.serialize(n||{});o=encodeURI(o);n=i(r||{},{url:o,loadview:"hold"});hysdk.openWebView(n)},openSchemeOrUrl:function(t,n){function s(){t=t||"";var e=/^([^:/]*):?\/\/(hy\?)*/;var n="";var r=true;t=t.replace(e,function(e,i,s){if(i){n=i+":"}else{if(s||t.includes("//railway")||t.includes("//flight")||t.includes("//hotel")||t.includes("//cc")||t.includes("//car"))n=P.getQunarProtocol();else n=location.protocol}if(!s)r=false;return n+"//"+(s||"")});if(/^qunar/i.test(t))r=true;return r}function o(e){function n(e){function n(){document.documentElement.removeChild(t)}var t=document.createElement("iframe");t.style.display="none";document.documentElement.appendChild(t);t.src=e;setTimeout(n,500)}function r(e){var t=P.getQueryStringObj(e);u(t)}function i(e){var t=e.indexOf("url="),n;if(t>-1){n=e.substr(t+4);if(n.includes("://")){n=encodeURIComponent(n);return e.substr(0,t+4)+n}}return e}e=i(e);var t=/qunar[i|a]phone:\/\/hy\?/.test(e);t?r(e):n(e)}function u(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};hysdk.openWebView(e)}var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};t+=this.assembleParams(n);var i=s();if(i)o(t);else u({url:t,loadview:"hold",navigation:r})},getQunarProtocol:function(){var t=(navigator.userAgent.toLowerCase().match(/qunar(\w*)[ia]phone(\w*)/)||["qunaraphone"])[0]+":";return t},doNothing:function(){},formatDateTime:function(t,n,r){function l(e){if(r)return e;return("0"+e).substr(-2)}n=n||"yyyy-MM-dd hh:mm:ss";t=t||new Date;if(!this.isDate(t))t=this.parseDateTime(t);var i=["æ¥","ä¸","äº","ä¸","å","äº","å­"];var s={};var o=n;var u="gi",a;s["YYYY"]=t.getFullYear();s["YY"]=t.getFullYear().toString().substr(-2);s["MM"]=l(t.getMonth()+1);s["dd"]=l(t.getDate());s["hh"]=l(t.getHours());s["mm"]=l(t.getMinutes());s["ss"]=l(t.getSeconds());s["week"]=i[t.getDay()];for(var f in s){if(f==="mm"||f==="MM")u="g";else u="gi";a=new RegExp(f,u);o=o.replace(a,s[f])}return o},parseDateTime:function(t){function s(e){var t=[];e.some(function(e){if(!e)return true;t.push(+e);return false});t[1]=t[1]-1;return new Date(Date.UTC.apply(null,t)-8*60*60*1e3)}if(this.isDate(t))return t;if(this.isNumber(t))return new Date(t);var n,r,i=/[- :/]/;if(/^\d+$/.test(t))r="yyyyMMddhhmmss";else if(i.test(t))r="yyyy-MM-dd hh:mm:ss";switch(r){case"yyyyMMddhhmmss":t.replace(/^(\d{4})(\d{2})(\d{2})?(\d{2})?(\d{2})?(\d{2})?$/,function(){n=[].slice.call(arguments,1,7)});break;case"yyyy-MM-dd hh:mm:ss":n=t.split(i);break}return s(n)},dateAddByDays:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=+(new Date(t));var i=r+n*24*3600*1e3;i=new Date(i);return i.toISOString().slice(0,10)},getQueryStringObj:function(t){var n={};t.replace(/(\?|&)([^?&#]+)=([^?&#]*)(?=&|#|$)/gi,function(e,t,r,i){n[r]=decodeURIComponent(i)});return n},environment:function(t){var n=/^https?:\/\/([^/]+)\/.*$/;var r=t&&t.replace(n,"$1")||"";var i=r.toLowerCase()||location.host.toLowerCase();var s="unrecognized";var o=/^fetrain([a-z])\.beta/;if(i==="hy.train.qunar.com")s=["online"];else if(i==="hytrain.beta.qunar.com")s=["dev"];else if(o.test(i))s=["beta",i.match(o)[1].toLowerCase()];return s},fetchJsonp:function(t,n){function i(e){return e.json()}var r=this.domainTouch.inAccordWithHyEnvironment(t);return D(r,n).then(i)},classifyObj:function(t,n,r){function s(e,t){return e}var i={};if(typeof r!=="function")r=s;t.forEach(function(e,s){i[e[n]]=i[e[n]]||[];i[e[n]].push(r(e,s,t))});return i},formatTime:function(){function s(e){return[Math.floor(e/86400),Math.floor(e%86400/3600),Math.floor(e%3600/60),Math.floor(e%60)]}function o(e){return e<10&&e>=0?"0"+e:e}function u(e){return e.map(o).join(":")}var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"EN";t=Number(t);if(Number.isNaN(t))return"";var r=s(t);switch(n){case"CN":return r[0]>0?r[0]+"å¤©"+r[1]+"æ¶"+r[2]+"å":r[1]>0?r[1]+"æ¶"+r[2]+"å"+r[3]+"ç§":r[2]>0?r[2]+"å"+r[3]+"ç§":r[3]+"ç§";case"EN":var i=r[0]*24+r[1];return i>0?u([i,r[1],r[2]]):u(r.slice(2));default:return""}},highlightFilter:function(t){function o(e,t,n){var r=new RegExp(e,"g");return e?t.replace(r,"<"+n+">$&</"+n+">"):t}var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"span";var s=n;if(typeof n==="string"&&typeof i==="string"){switch(typeof t==="undefined"?"undefined":r(t)){case"string":case"number":s=o(t,s,i);break;case"object":if(t instanceof Array){t.forEach(function(e){s=o(e,s,i)})}break;default:return s}}return s},assembleParams:function(t){return(typeof t==="undefined"?"undefined":r(t))==="object"?"?"+Object.entries(t).map(function(e){return e[0]+"="+encodeURIComponent(e[1])}).join("&"):""},getAppVersion:function(t){function r(e,t){hysdk.getDeviceInfo({success:e,fail:t.bind(null,"get App version fail")})}function i(e){var n=true;if(e.atomversion&&e.atomversion.train<t)n=false;return n?Promise.resolve(e):Promise.reject("Android version is too low")}var n=new Promise(r);return t?n.then(i):n},versionNotLowerThan:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return(new Promise(function(e,t){hysdk.getDeviceInfo({success:e,fail:t.bind(null,"get App version fail")})})).then(function(e){var r=0;var i=false;var s="unkown os";var o=hysdk.sniff.os;if(o==="android"){r=Common.deepGet(e,"atomversion.train",0);i=+r>=n;s="Android atomversion.train is lower than "+n}else if(o==="ios"){r=+e.vid;i=+r>=t;s="iOS vid is lower than "+t}if(!i){Console.log(s)}return i},function(){return false})},versionNotLowerThanQPVersion:function(t,n,r){return(new Promise(function(e,t){hysdk.getDeviceInfo({hybridId:r?"train_rn_ios":"train_rn_android",success:e,fail:t.bind(null,"get App version fail")})})).then(function(e){var i=false;var s=0;var o="unkown os";if(r){s=+e.qpVersion;i=s>=t;o="iOS qpVersion is lower than "+t}else{s=+e.qpVersion;i=s>=n;o="android qpVersion is lower than "+n}if(!i){Console.log(o)}return i},function(){return false})},watch:function(t,n,r){var i=(location.href.match(/#\/?(\w+)/)||[])[1]||"unknownView";var s="sino_"+i+"_";var o={key:s+t,isSuccessful:n===false?false:true,duration:r||0,timeStamp:+(new Date)};var u="//touch.qunar.com/h5/train/TrainMonitor";u+=P.serialize(o);this.imgWatcher=new Image;this.imgWatcher.src=u;if(window.universal){this.sentWatchersSoFar=this.sentWatchersSoFar||[];this.sentWatchersSoFar.push(o)}},printWatcher:function(){if(window.universal)return this.sentWatchersSoFar;else return"namespace universal doesnt exist thus watchers sent are not kept for memory optimization, remove comment in src/test/index.js"},getConfig:function(){function i(e,n){hysdk.train.getConfig({keys:t,success:e,fail:n})}function s(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};console.log("decideSwitch:",arguments);return new Promise(function(t,r){e[n]==="true"?t(e):r(n+"  =>  switch is closed")})}var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;t=t instanceof Array?t:[t];var r=new Promise(i);return n?r.then(s):r},transformFieldName:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"oldKey";var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"newKey";if(n in t){var s={};s[r]=t[n];s=i(s,t);delete s[n];return s}else{return t}},gotoShare:function(t){function n(){console.log("configShareParams");return new Promise(function(e,n){var s=i({success:e,fail:n},t);if(t.imageUrl&&!s.imgUrl){s.imgUrl=t.imageUrl}hysdk.onMenuShare(s);r(e)})}function r(e){console.log("showShareItems",arguments);hysdk.showShareItems({success:e})}function s(){function e(e,n){var r=i({success:e,fail:n},t);if(t.imgUrl&&!r.imageUrl){r.imageUrl=t.imgUrl}if(r.timeLineImageUrl){r.timeLineImageUrl=t.timeLineImageUrl+"?random="+Date.now()}hysdk.train.share(r)}console.log("trainPluginShare");return new Promise(e)}console.log("util.gotoShare:",t);if(t.shareTypes)return s();else return n()},createWechatAuth2Link:function(t,n){var r={appid:t,redirect_uri:encodeURIComponent(n),response_type:"code",scope:"snsapi_userinfo",state:"123"};var i=["appid","redirect_uri","response_type","scope","state"];var s="https://open.weixin.qq.com/connect/oauth2/authorize";s+=P.serialize(r,i);s+="#wechat_redirect";return s},compareObject:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];if(P.isObject(t)&&P.isObject(n)){r=P.isArray(r)?r:[r];return r.every(function(e){return t[e]===n[e]})}else{return false}},updateInnerCat:function(t,n){hysdk.train.updateInnerCat({value:t,level:n})},superWatch:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;P.watch(t,n);window.QAVReport&&window.QAVReport.set({message:"train/train_sino_hy/"+t.replace(/_/g,"/")+"/"+n})},adaptationForApp:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:80011135;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:60001166;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var i=hysdk,s=i.sniff,o=s.appVersion;var u=false;switch(s.os){case"ios":u=+o>=t;break;case"android":u=+o>=n;break;default:u=false}if(r){return u?Promise.resolve():Promise.reject(s.os+" App version is too low")}else{return u}},closeThenOpenView:function(t){return new Promise(function(e,n){hysdk.train.closeThenOpenView({success:e,fail:n,scheme:t})})},validate:function(t,n){switch(typeof n==="undefined"?"undefined":r(n)){case"function":return n(t);case"object":if(n.test){return n.test(t)}else{Console.warn("validate rule is not valid regular expression");return false};default:return true}},encodeMD5:function(t,n){var r=function(r,i){if(!t)i("md5 encode content not set");var s=function(t){var i=t.result;if(n)i=i.toLowerCase();return r(i)};var o=function(){return i("md5 encode fail")};QunarAPI.train.calculateMD5({toMD5:t,success:s,fail:o})};return new Promise(r)},loginQunar:function(){return new Promise(function(e,t){hysdk.login({shouldOpenLogin:true,success:e,fail:t})})},calendar:function(t){return new Promise(function(e,n){hysdk.train.calendar(i({success:e,fail:n},t))})},createAppCommonParam:function(t,n){if(t&&t.osVersion){delete t.versioninfo;var r=i(t,{t:"h_hlist",un:n.userName});if(t.atomversion){r.catom="com.mqunar.atom.hotel_"+t.atomversion.hotel}r=JSON.stringify(r);return r}else return null},promisify:function H(e){function H(e){return new Promise(function(t,n){e.then(function(){if(arguments.length>1){Console.error("Promise ä¸æ¯æ resolve å¤ä¸ªåæ°",e)}t.apply(undefined,arguments)},function(){if(arguments.length>1){Console.error("Promise ä¸æ¯æ reject å¤ä¸ªåæ°",e)}n.apply(undefined,arguments)})})}if(e.then){return H(e)}if(typeof e==="function"){return function(){return H(e.apply(Common,arguments))}}return Promise.resolve(e)},rAF:function B(e){var B=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){return e(Date.now())},1e3/60)};return B(e)},numberToPercent:function(t,n){if(isNaN(t)){return t}if(n===undefined)n=1;return(t*100).toFixed(n)+"%"},trainPlugin:function(t,n){return new Promise(function(e,r){n=i({},n,{success:e,fail:r});hysdk.train[t](n)})},componentErrorHandle:function(t){return function(e,n){P.watch(t+"_runTimeError",false);var r=(location.hash||"").slice(0,300);Common.postLog({key:"sino_reactRuntimeError",data:{hash:r,wrapper:t,error:e,errorInfo:n}})}},queueTrainPlugin:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return n.reduce(function(e,n){return e.then(function(e){return P.trainPlugin(t,n).then(function(t){e.push(t);return e},function(t){return Promise.reject({resultArray:e,error:t})})})},Promise.resolve([]))},certTypeNameToCodeMap:{"èº«ä»½è¯":"NI","å°èè¯":"TB","æ¤ç§":"PP","æ¸¯æ¾³éè¡è¯":"GA","å¶ä»":"ID"},seatTypeMap:{D:"qt_num",E:"qt_num",F:"srrb_num",G:"qt_num",A:"qt_num",B:"qt_num",C:"qt_num",L:"qt_num",M:"zy_num",O:"ze_num",H:"qt_num",I:"qt_num",J:"qt_num",K:"qt_num",Q:"qt_num",P:"tz_num",S:"qt_num",3:"yw_num",2:"rz_num",1:"yz_num",0:"wz_num",7:"qt_num",6:"gr_num",5:"qt_num",4:"rw_num",9:"swz_num",8:"qt_num"},formatToThousands:function(t){t=""+t;return t.replace(/(\d+?)(?=(\d{3})+$)/g,"$1,")},randomInt:function(t,n){if(!Number.isSafeInteger(t)){throw new Error("æ¹æ³randomIntç¬¬ä¸ä¸ªåæ°éä¸ºåæ³æ´æ°")}if(!Number.isSafeInteger(n)){n=t;t=0}var r=[Math.min(t,n),Math.max(t,n)];t=r[0];n=r[1];return t+Math.random()*(n-t)<<0}},k.default);window.util=P},function(e,t){"use strict";var n=function(){};n.prototype={getItem:function(t){var n,r=0;QunarAPI.train.getData({key:t,success:function(t){n=t}});while(n==undefined){r++;if(r>1e4){return null}}return n},setItem:function(t,n){var r,i=0;QunarAPI.train.restoreData({key:t,value:n,success:function(t){r=t}});while(r==undefined){i++;if(i>1e4){return null}}return r}};var r=function(t,r){t=t||"sessionStorage";var i=null,s=(new Date).valueOf();if(t=="localStorage"||t=="sessionStorage"){try{if(window[t]&&window[t].setItem("test"+s,"test")==undefined){window[t].removeItem("test"+s);this.isSupported=true;i=window[t]}else{this.isSupported=false;i={}}}catch(o){i={}}}else if(t=="nativeStoreage"){i=new n}else{i={}}this.storage=i;this.prefix=r||""};r.prototype={get:function(t){return this.storage.getItem(this.prefix+t)?JSON.parse(this.storage.getItem(this.prefix+t)):null},set:function(t,n){this.storage.setItem(this.prefix+t,JSON.stringify(n))}};e.exports=r},function(e,t){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var s=function(){function e(){i(this,e);this.eventsAndHandlers={}}r(e,[{key:"on",value:function(t,n){this.eventsAndHandlers[t]=this.eventsAndHandlers[t]||[];this.eventsAndHandlers[t].push(n)}},{key:"trigger",value:function(t,r){var i=this.eventsAndHandlers[t]||[];var s=n({name:t},r||{});i.forEach(function(e){if(typeof e==="function")e(s)})}},{key:"off",value:function(t,n){}}]);return e}();t.default=s},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(817);var s=o(i);var l=function(e){function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"EN";var r=arguments[2];var i=arguments[3];u(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,e,i));s.strType=n;return s}f(t,e);r(t,[{key:"_dataFormat",value:function(t){var n=this.maxTimes-t*this.step;n=n<0?0:n;return{str:util.formatTime(n,this.strType),total:n}}}]);return t}(s.default);t.default=l},function(e,t){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Infinity;var i=arguments[2];r(this,e);this.step=t;this.maxTimes=n;this.immediately=i!==false;this.startTime=null;this.state="pending";this.progressAction=function(){};this.doneAction=function(){}}n(e,[{key:"progress",value:function(t){this._isFunc(t)&&(this.progressAction=t);return this}},{key:"done",value:function(t){this._isFunc(t)&&(this.doneAction=t);this.state==="done"&&this.doneAction();return this}},{key:"start",value:function(){if(this.state!=="pending")return this;this.state="progressing";this._recordStartTime();this.immediately&&this._canto();this.maxTimes>=1&&this._goOn()}},{key:"stop",value:function(){clearInterval(this.timeHandler)}},{key:"restart",value:function(){this.state="pending";this.start()}},{key:"_isFunc",value:function(t){return typeof t==="function"}},{key:"_recordStartTime",value:function(){this.startTime=Date.now()}},{key:"_calculateInterval",value:function(){var t=(Date.now()-this.startTime)/this.step/1e3;return Math.round(t)}},{key:"_dataFormat",value:function(t){return t}},{key:"_canto",value:function(){var t=this._calculateInterval();if(t>=this.maxTimes){this.state="done";this.stop();this.doneAction(this._dataFormat(t))}else{this.progressAction(this._dataFormat(t))}}},{key:"_goOn",value:function(){this.timeHandler=setInterval(this._canto.bind(this),this.step*1e3)}}]);return e}();t.default=i},function(e,t){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=function(){function e(){r(this,e)}n(e,[{key:"go",value:function(){this._judgeOS()._getAppInfo().then(this._goto,this._error)}},{key:"_judgeOS",value:function(){this.os=hysdk.sniff.os;return this}},{key:"_getAppInfo",value:function(){switch(this.os){case"ios":return util.getAppVersion();case"android":return new Promise(function(e,t){hysdk.train.market({success:e,fail:t})});default:return new Promise}}},{key:"_goto",value:function(t){function i(){var e=Common.getPhoneSchema()+"hy?url="+n["10010"];Common.sendSchema(e)}var n={10010:"https://itunes.apple.com/us/app/itunes-u/id395096736?action=write-review&mt=8",12306:"https://itunes.apple.com/us/app/itunes-u/id1121517793?action=write-review&mt=8"};var r=t.pid;r&&i()}},{key:"_error",value:function(t){Console.error("_getAppInfo Error:",t.errmsg||t)}}]);return e}();t.default=i},function(e,t){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=function(){function e(t,n,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;r(this,e);if(t===undefined)throw new Error('parameter "FuncKey" is required!');this.funcKey=t;this.executekey=n||window.location.href.split("?")[0];this.maxCount=Number.isInteger(s)?s:1;this.serverTime=!!i&&i||0}n(e,[{key:"judge",value:function(){function t(e,t){var n=this._getStorage()||0;var r=this._setStorage.bind(this,n+1);n<this.maxCount?e(r):t('ACTION: "'+this.funcKey+"\" can't be executed")}return new Promise(t.bind(this))}},{key:"judgeTime",value:function(){function t(e,t){var n=this._getStorage()||0;var r=this._setStorage.bind(this,this.serverTime);if(n===0){e(r)}else if(n<this.serverTime){e(r)}else{t('ACTION: "'+this.funcKey+"\" can't be executed")}}return new Promise(t.bind(this))}},{key:"reset",value:function(){this._setStorage(0)}},{key:"_getStorage",value:function(){return util.getStoredInfo(this.funcKey)[this.executekey]}},{key:"_setStorage",value:function(t){var n={};n[this.executekey]=t;util.storeInfo(this.funcKey,n)}}]);return e}();t.default=i},function(e,t){"use strict";function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=function(){function e(){r(this,e);this.popSet=[];this.waitingQueue=[]}n(e,[{key:"register",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:util.doNothing;console.log("RandomPop---register",this,t,n,this.popSet,this.waitingQueue);n=Number(n);this.popSet.push({name:t,weight:n,showAction:r});this.noWaiting(t);return this}},{key:"pop",value:function(t){t===undefined?this._RandomPop():this._pop(t);return this}},{key:"reset",value:function(){this.popSet=[];this.waitingQueue=[];return this}},{key:"resetPopSet",value:function(){this.popSet=[];return this}},{key:"wait",value:function(t){if(!this.waitingQueue.includes(t)){this.waitingQueue.push(t)}return this}},{key:"relay",value:function(t,n){this.waitingQueue=this.waitingQueue.map(function(e){if(e===t)return n;else return e})}},{key:"noWaiting",value:function(t){var n=this.waitingQueue.findIndex(function(e){return e===t});if(n>-1){this.waitingQueue.splice(n,1);this.status==="pending"&&this._RandomPop()}}},{key:"_pop",value:function(t){function n(e){return e.name===t}this.popSet.find(n).showAction()}},{key:"_RandomPop",value:function(){function n(e){var t=e.map(function(e){return e.weight});var n=t.reduce(function(e,t){return e+t},0);var r=Math.random()*n,i=0,s=0,o=t.length;for(;s<o;s++){if(t[s]>r){i=s;break}else{r=r-t[s]}}return i}console.log("RandomPop----_RandomPop",this,this.waitingQueue,this.popSet);if(this.waitingQueue.length>0){this.status="pending"}else{if(this.popSet.length===0)return;var t=n(this.popSet);this.popSet[t].showAction();this.reset()}}}]);return e}();t.default=i},function(e,t){"use strict";(function(){function r(e){var t=document.activeElement;e=e||document.body;if(t&&n(e,t)&&typeof t.blur==="function"){t.blur()}}function i(t){if(e.indexOf(t.target.tagName.toUpperCase())===-1){r()}}var e=["INPUT","TEXTAREA"];var t=document.documentElement.clientHeight;var n=document.compareDocumentPosition?function(e,t){return!!(e.compareDocumentPosition(t)&16)}:function(e,t){return e!==t&&(e.contains?e.contains(t):true)};document.body.addEventListener("touchstart",i,false);window.addEventListener("resize",function(){var e=document.documentElement.clientHeight;if(e===t){r()}},false)})()},function(e,t,n){e.exports=n(823)},function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:true});t.loading=undefined;n(796);var r=n(824);var i=u(r);var s=n(825);var o=u(s);t.default=i.default;t.loading=o.default},function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var i=n(800);var s=l(i);var o=n(801);var u=l(o);var a=n(804);var f=l(a);var d={text:u.default.string,extraClass:u.default.string};var v={text:"",extraClass:""};var m=function(e){function t(){c(this,t);return h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}p(t,e);r(t,[{key:"render",value:function(){var t=this.props;return s.default.createElement("div",{className:(0,f.default)("yo-loading",t.extraClass)},s.default.createElement("i",{className:"yo-ico"}),!!t.text.toString().length&&s.default.createElement("span",{className:"text"},t.text))}}]);return t}(i.Component);t.default=m;m.propTypes=d;m.defaultProps=v},function(e,t,n){"use strict";function v(e){return e&&e.__esModule?e:{"default":e}}function m