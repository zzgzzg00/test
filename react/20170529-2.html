<!DOCTYPE html>
<html>
<head>
    <title></title>
    <style>
        *{
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        button{
            padding: 0 10px;
        }
        .red{
            color: #ff0000;
        }
    </style>
</head>
<body>

<div id="container"></div>
<script src="./common/JSXTransformer.js"></script>
<script src="./common/react15.js"></script>
<script src="./common/react-dom15.js"></script>
<script src="./common/redux.js"></script>
<script src="./common/react-redux.js"></script>
<script type="text/jsx">
    const {Component,PropTypes}=React;
    const {combineReducers,createStore}=Redux;
    const {Provider,connect}=ReactRedux;
    const Test1=(props)=>(<p className={props.className} style={props.styleObj.tab1}>test1</p>);
    const Test2=(props)=>(<p style={props.styleObj.tab2}>test2</p>);
    const Test3=(props)=>(<p style={props.styleObj.tab3}>test3</p>);
    const Buttons=(props)=>(
        <p>
            <button onClick={props.clickHandle.bind(null,1)}>tab1</button>
            <button onClick={props.clickHandle.bind(null,2)}>tab2</button>
            <button onClick={props.clickHandle.bind(null,3)}>tab3</button>
        </p>
    );

    const initState={
        styleObj:{
            tab1:{display:'none'},
            tab2:{display:'none'},
            tab3:{display:'none'}
        }
    }

    const styleReduce=function(state={tab1:{display:'none'},tab2:{display:'none'},tab3:{display:'none'}},action){
        const {type,styleObj}=action;
        const _state={
            tab1:{display:'none'},
            tab2:{display:'none'},
            tab3:{display:'none'}
        };
        switch(type){
            case 'change':
                return Object.assign({},_state,styleObj);
            default:
                return state;
        }
    }

    const reduce=combineReducers({
        styleObj:styleReduce
    });

    const store=createStore(reduce,initState);

    const styleActionCreator=styleObj=>({type:'change',styleObj});

    const Test=(props)=>(
        <div>
            <Test1 {...props}/>
            <Test2 {...props}/>
            <Test3 {...props}/>
            <Buttons {...props}/>
        </div>
    );

    const stateMapToProps=(state)=>({styleObj:state.styleObj});

    const dispatchMapToProps=function(dispatch){
        return {
            clickHandle(v,e){
                const m={[`tab${v}`]:{display:'block'}};
                dispatch(styleActionCreator(m));
            }
        }
    }

    const TestContainer=connect(stateMapToProps,dispatchMapToProps)(Test);

    const App=(props)=>(
        <Provider store={store}>
            <TestContainer className={'red'}/>
        </Provider>
    );
    ReactDOM.render(<App />,document.querySelector('#container'));
</script>
</body>
</html>