<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script src="../common/JSXTransformer.js"></script>
<script src="../common/react16.3.js"></script>
<script src="../common/react-dom16.3.js"></script>
<script src="../common/react-router-dom.js"></script>
<script type="text/jsx">
    const {Component,PureComponent}=React;
    class ElectricityFees extends Component{
        constructor(props) {
            super(props);
            props.rooms.forEach((item,i) => {
                this[`refs${i}`] = React.createRef();
            });
            this.calcAccount = this.calcAccount.bind(this);
        }
        calcAccount(){
            const self = this;
            console.log(this);
            this.props.rooms.forEach((index,i) => {
                const a=self[`refs${i}`].current;
                a.test()
            });
        };
        render() {
            const key = 'name';
            return (
                <React.Fragment>
                    {
                        this.props.rooms.map((_,i) => {
                            return (
                                <ElectricityTemp name={`${_}${key}`} ref={this[`refs${i}`]}/>
                            )
                        })
                    }
                    <button onClick={this.calcAccount}>结算</button>
                </React.Fragment>
            )
        }
    }
    ElectricityFees.defaultProps={
        rooms:[1,1,2,3,4]
    }
    class ElectricityTemp extends Component{
        test(){
            console.log(this.props.name);
        }
        render() {
            return (
                    <div>
                    </div>
            );
        }
    }
    ReactDOM.render(<ElectricityFees />,document.body);
</script>
</body>
</html>