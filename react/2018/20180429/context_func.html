<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script src="../../common/JSXTransformer.js"></script>
<script src="../../common/react16.3.js"></script>
<script src="../../common/react-dom16.3.js"></script>
<script type="text/jsx">
    React.__spread=Object.assign;
    const withContext=(Component,Consumer)=>(props)=>(
        <Consumer>
            {
                function addConsumer(data){
                    const _data={...data,...props};
                    return(
                        <Component {..._data} />
                    )
                }
            }
        </Consumer>
    );
    const {PureComponent}=React;
    const {Provider,Consumer}=React.createContext();
    const Show=props=>(
        <div onClick={props.change}>{props.context}-{props.index}</div>
    )
    const ShowConsumer=withContext(Show,Consumer);
    class App extends PureComponent{
        constructor(props){
            super(props);
            this.change=()=>this.setState(preState=>({context:preState.context+1}));
            this.state={
                context:0,
                change:this.change
            }
        }
        render(){
            return(
                <Provider value={this.state}>
                    <ShowConsumer index={'index_1'}/>
                    <ShowConsumer index={'index_2'}/>
                    <ShowConsumer index={'index_3'}/>
                </Provider>
            )
        }
    }
    ReactDOM.render(<App />,document.body);
</script>
</body>
</html>