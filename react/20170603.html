<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
    <style>
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        .mask{
            position: fixed;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,.5);
        }
        .dialog{
            width: 80%;
            position: absolute;
            left: 10%;
            top: 50%;
            background-color: #fff0df;
            transform:translateY(-50%);
        }
    </style>
</head>
<body>
<script src="./common/JSXTransformer.js"></script>
<script src="./common/react15.js"></script>
<script src="./common/react-dom15.js"></script>
<script src="./common/redux.js"></script>
<script src="./common/react-redux.js"></script>
<script type="text/jsx">
    const {Component}=React;
    /**
    class Dialog extends Component{
        constructor(props){
            super(props);
            console.log('constructor');
        }
        componentDidMount(){
            console.log('didmount');
        }
        render(){
            const props=this.props;
            if(props.show){
                return(
                    <div>
                        <div className={'mask'}></div>
                        <div className={'dialog'}>
                            <h2>{props.title}</h2>
                            <div>{props.children}</div>
                        </div>
                    </div>
                )
            }else{
                return null;
            }
        }
    }*/

    /**
        return null不渲染元素
        仅触发一次componentDidMount和constructor
    */
    const Dialog=props=>{
        if(props.show){
            return(
                <div>
                    <div className={'mask'}></div>
                    <div className={'dialog'}>
                        <h2>{props.title}</h2>
                        <div>{props.children}</div>
                    </div>
                </div>
            )
        }else{
            return null;
        }
    };
    class App extends Component{
        constructor(props){
            super(props);
            this.state={
                showDialog:true
            }
            this.intervalHandle=null;
        }
        componentDidMount(){
            this.intervalHandle=window.setInterval(
                ()=>this.setState(
                    preState=>({showDialog:!preState.showDialog})
                ),
            1000);
        }
        componentWillUnmount(){
            if(this.intervalHandle){
                window.clearInterval(this.intervalHandle);
            }
        }
        render(){
            return(
                <Dialog title={'zzg test'} show={this.state.showDialog}>
                    <p>测试1</p>
                    <p>测试2</p>
                </Dialog>
            )
        }
    }
    ReactDOM.render(<App />,document.body);
</script>
</body>
</html>