<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
<div id="root"></div>
<script src="./common/react15.js"></script>
<script src="./common/react-dom15.js"></script>
<!--<script src="https://unpkg.com/react@15/dist/react.min.js"></script>
<script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js"></script>-->
<script src="./common/JSXTransformer.js"></script>
<script src="./common/react-redux.js"></script>
<script src="./common/redux.js"></script>
<script type="text/jsx">
    const {Component,PropTypes}=React;
    const {Provider,connect}=ReactRedux;
    const {createStore}=Redux;
    class Counter extends Component {
        static get propTypes(){
            return {
                value: PropTypes.number.isRequired,
                onIncreaseClick: PropTypes.func.isRequired
            }
        }
        render() {
            const { value, onIncreaseClick } = this.props
            return (
                <div>
                    <span>{value}</span>
                    <button onClick={onIncreaseClick}>Increase</button>
                </div>
            )
        }
    }

    // Action
    const increaseAction = { type: 'increase' }

    // Reducer
    function counter(state = { count: 0 }, action) {
        const count = state.count
        switch (action.type) {
            case 'increase':
                return { count: count + 1 }
            default:
                return state
        }
    }

    // Store
    const store = createStore(counter)

    // Map Redux state to component props
    function mapStateToProps(state) {
        return {
            value: state.count
        }
    }

    // Map Redux actions to component props
    function mapDispatchToProps(dispatch) {
        return {
            onIncreaseClick: () => dispatch(increaseAction)
        }
    }

    // Connected Component
    const App = connect(
        mapStateToProps,
        mapDispatchToProps
    )(Counter)

    ReactDOM.render(
        <Provider store={store}>
            <App />
        </Provider>,
        document.getElementById('root')
    )
</script>
</body>
</html>