<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=no" />
    <meta name="format-detection"content="telephone=no"/>
    <meta charset="utf-8" />
    <style>
        *{
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        li{
            list-style: none;
        }
        .qn_banner{
            position: relative;
            overflow: hidden;
        }
        .qn_banner li{
            position: absolute;
            top: 0;
            z-index: 1;
            height: 100%;
            -webkit-transform:translateX(100%);
            transition:-webkit-transform .5s ease-in 0s;
            background: #fbfbfb url(//simg2.qunarzz.com/hotel/homesearch/Camal_walk_loading.gif) no-repeat center center;
        }
        .qn_banner .active{
            -webkit-transform:translateX(0);
            z-index: 3;
        }
        .qn_banner .afteractive{
            z-index: 2;
            -webkit-transform:translateX(-100%);
        }
        .qn_banner li img{
            width: 100%;
        }
    </style>
</head>
<body>
<script>
    function Banner(imgsrcs,container,rato,dur){
        var me=this;
        this.index=0;
        this.dur=dur;
        this.length=imgsrcs.length;
        this.runHandle=null;
        this.lis=imgsrcs.map(function(item,index){
            var li=document.createElement('li'),
                img=document.createElement('img');
            if(index == 0){
                li.className='active'
            }
            img.style.visibility='hidden';
            img.onload=me.show.bind(me,img);
            img.src=item.url;
            img.setAttribute('skip',item.skip);
            img.onclick=function(){
                window.location.href=this.getAttribute('skip');
            }
            img.addEventListener('touchmove',function(e){
                me.move();
            },false);
            img.addEventListener('touchend',function(e){
                me.start(2*me.dur);
            },false);
            img.setAttribute('index',index);
            li.appendChild(img);
            return li;
        });
        var ul=document.createElement('ul');
        ul.className='qn_banner';
        var width=window.innerWidth
                    || (document.documentElement && document.documentElement.clientWidth)
                    || document.body.clientWidth;
        ul.style.height=width*(1/rato)+'px'
        this.lis.forEach(function(item){
            ul.appendChild(item);
        });
        container.appendChild(ul);
        if(me.length==1){
            return;
        }
        this.start(dur);
    }
    Banner.prototype.start=function(dur){
        var me=this;
        this.runHandle=window.setTimeout(function(){
            me.run();
        },dur);
    }
    Banner.prototype.stop=function(){
        var me=this;
        if(me.runHandle){
            window.clearTimeout(me.runHandle);
            me.runHandle=null;
        }
    }
    Banner.prototype.show=function(img){
        img.style.visibility='visible';
    }
    Banner.prototype.findNextIndex=function(){
        return (this.index+1)%this.length;
    }
    Banner.prototype.findPreviousIndex=function(){
        var index=this.index-1;
        if(index<0){
            index+=this.length
        }
        return index%this.length;
    }
    Banner.prototype.move=function(){
        var me=this;
        me.stop();
    }
    Banner.prototype.run=function(){
        var me=this;
        this.lis[this.index].className='afteractive';
        var afteractive=this.lis[this.index];
        this.index=this.findNextIndex();
        this.lis[this.index].className='active';
        window.setTimeout(function(){
            afteractive.className='';
            me.start(me.dur-500);
        },500)
    }
    var arr=[{
        url:'20161214-3.jpg'
    },{
        url:'20170603-3.jpg'
    },{
        url:'leshi_header.jpg'
    }];
    arr.forEach(function(item){
        item.url= 'https://s.qunarzz.com/open_m_train/active/discovery/'+item.url;
        item.skip='http://www.baidu.com'
    })
    new Banner(arr,document.body,641/341,2000);
</script>
</body>
</html>