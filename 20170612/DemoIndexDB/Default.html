<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script>
        var localDatabase = {};
        var dbName = "employeeDb";
        var osTableName = "employees";
        var records = [];

        // dummy data
        var employeeData = [
        { recid: 7, fname: 'Susan', lname: 'Ottie', email: 'jdoe1@gmail.com', sdate: '4/3/2012' },
        { recid: 8, fname: 'Frank', lname: 'Silver', email: 'jdoe2@gmail.com', sdate: '4/3/2012' },
        { recid: 9, fname: 'Francis', lname: 'Gatos', email: 'jdoe3@gmail.com', sdate: '4/3/2012' },
        { recid: 10, fname: 'Mark', lname: 'Welldo', email: 'jdoe4@gmail.com', sdate: '4/3/2012' },
        { recid: 11, fname: 'Thomas', lname: 'Bahh', email: 'jdoe@gmail.com', sdate: '4/3/2012' },
        { recid: 12, fname: 'Susan', lname: 'Ottie', email: 'jdo5e@gmail.com', sdate: '4/3/2012' },
        { recid: 13, fname: 'Kelly', lname: 'Silver', email: 'jdoe6@gmail.com', sdate: '4/3/2012' },
        { recid: 14, fname: 'Francis', lname: 'Gatos', email: 'jdoe7@gmail.com', sdate: '4/3/2012' },
        { recid: 15, fname: 'Mark', lname: 'Welldo', email: 'jdoe8@gmail.com', sdate: '4/3/2012' },
        { recid: 16, fname: 'Thomas', lname: 'Bahh', email: 'jdo9e@gmail.com', sdate: '4/3/2012' },
        { recid: 17, fname: 'Susan', lname: 'Ottie', email: 'jdoe0@gmail.com', sdate: '4/3/2012' },
        { recid: 18, fname: 'James', lname: 'Silver', email: 'jdoe11@gmail.com', sdate: '4/3/2012' },
        { recid: 19, fname: 'Francis', lname: 'Gatos', email: 'jdoe12@gmail.com', sdate: '4/3/2012' },
        { recid: 20, fname: 'Mark', lname: 'Welldo', email: 'jdoe13@gmail.com', sdate: '4/3/2012' },
        { recid: 21, fname: 'Thomas', lname: 'Bahh', email: 'jdoe14@gmail.com', sdate: '4/3/2012' },
        { recid: 22, fname: 'Susan', lname: 'Ottie', email: 'jdoe15@gmail.com', sdate: '4/3/2012' },
        { recid: 23, fname: 'Jane', lname: 'Silver', email: 'jdoe16@gmail.com', sdate: '4/3/2012' },
        { recid: 24, fname: 'Francis', lname: 'Gatos', email: 'jdoe17@gmail.com', sdate: '4/3/2012' },
        { recid: 25, fname: 'Mark', lname: 'Welldo', email: 'jdoe18@gmail.com', sdate: '4/3/2012' },
        { recid: 26, fname: 'Thomas', lname: 'Bahh', email: 'jdoe19@gmail.com', sdate: '4/3/2012' },
        { recid: 27, fname: 'Susan', lname: 'Ottie', email: 'jdoe20@gmail.com', sdate: '4/3/2012' },
        { recid: 28, fname: 'Marie', lname: 'Silver', email: 'jdoe21@gmail.com', sdate: '4/3/2012' },
        { recid: 29, fname: 'Francis', lname: 'Gatos', email: 'jdoe22@gmail.com', sdate: '4/3/2012' },
        { recid: 30, fname: 'Mark', lname: 'Welldo', email: 'jdoe23@gmail.com', sdate: '4/3/2012' },
        { recid: 31, fname: 'Thomas', lname: 'Bahh', email: 'jdoe24@gmail.com', sdate: '4/3/2012' }
    ];
    </script>

    <title>IndexedDB Demo</title>
    <link href="Styles/w2ui-1.2.min.css" rel="stylesheet" />
    <script src="Scripts/jquery-1_10_2_min.js"></script>
    <script src="Scripts/w2ui-1.2.min.js"></script>
    <script src="Scripts/IndexedDBActions.js"></script>       
</head>

<body>
    <div id="grid" style="width: 100%; height: 350px;"></div>

    <div id="console" style="overflow: auto; margin-top: 5px; border: solid; color: white; border-color: black; border-width: 5px; background-color: #111; height: 260px; width: 99.3%; -webkit-border-radius: 15px 15px 15px 15px; -moz-border-radius: 15px 15px 15px 15px; -o-border-radius: 15px 15px 15px 15px; border-radius: 15px 15px 15px 15px;">
    </div>  
</body>

<script>
    $(function () {    
        $("#write_me").empty();

        $('#grid').w2grid({
            name: 'grid',
            header: 'List of Names',
            recordsPerPage: 10,
            show: {
                footer: true,
                toolbar: true,
                toolbarReload: false,
                toolbarColumns: false,
                toolbarSearch: false,
                toolbarAdd: false,
                toolbarSave: false
            },

            toolbar: {
                items: [                                 
                    { type: 'button', id: 'btnCreateDB', caption: 'Create', img: 'icon-page' },                   
                    { type: 'button', id: 'btnOpenDB', caption: 'Open', img: 'icon-page' },
                    { type: 'button', id: 'btnCloseDB', caption: 'Close', img: 'icon-page' },
                    { type: 'button', id: 'btnDeleteDB', caption: 'Delete', img: 'icon-page' },
                    { type: 'break', id: 'break5' },                                  
                    { type: 'button', id: 'btnLoadData', caption: 'Create Data', img: 'icon-page' },
                     { type: 'button', id: 'btnAddMillionRecords', caption: 'Add 10k', img: 'icon-page' },                    
                    { type: 'break', id: 'break7' },
                    { type: 'button', id: 'btnSelectAllEmployees', caption: 'Fetch All', img: 'icon-page' },
                    { type: 'button', id: 'btnUpdateEmployee', caption: 'Update #7', img: 'icon-page' },
                    { type: 'button', id: 'btnDeleteEmployee', caption: 'Delete #7', img: 'icon-page' },
                    { type: 'button', id: 'btnFetchEmployee', caption: 'Fetch #8', img: 'icon-page' },
                    { type: 'button', id: 'btnFetchSurnameEmployee', caption: 'Fetch \'Silver\'', img: 'icon-page' },
                    { type: 'button', id: 'btnFetchSurnameAndEmailEmployee', caption: 'Fetch Mult.', img: 'icon-page' },
                    // { type: 'button', id: 'btnMultIndexFilter', caption: 'Fetch Mult Index', img: 'icon-page' },
                    
                    { type: 'button', id: 'btnAddEmployee', caption: 'Add #1', img: 'icon-page' },
                    { type: 'button', id: 'btnDuplicateEmployeeEmail', caption: 'Add Duplic.', img: 'icon-page' },
                    { type: 'button', id: 'btnCountRecords', caption: 'Count', img: 'icon-page' },
                    
                    { type: 'button', id: 'btnClearEmployees', caption: 'Clear Data', img: 'icon-page' },
                    { type: 'break', id: 'break9' }                   
                ],

                onClick: function (target, data) {                  
                    switch (target) {
                        case "btnCreateDB":
                            createDatabase();
                            break;
                        case "btnOpenDB":
                            openDatabase();
                            break;
                        case "btnCloseDB":
                            closeDatabase();
                            break;                            
                        case "btnLoadData": 
                            populateDatabase();
                            break;
                        case "btnClearEmployees": 
                            clearAllEmployees();                            
                            break;
                        case "btnSelectAllEmployees":
                            fetchAllEmployees();
                            break;
                        case "btnUpdateEmployee":
                            updateEmployee();
                            break;
                        case "btnDeleteEmployee":
                            deleteEmployee();
                            break;
                        case "btnFetchEmployee":
                            fetchEmployee();
                            break;
                        case "btnFetchSurnameEmployee":
                            fetchSurnameSilverEmployees();
                            break;                            
                        case "btnAddEmployee":
                            addEmployee();
                            break;
                        case "btnDuplicateEmployeeEmail":
                            addDuplicateEmailEmployeeEmail();
                            break;                                                        
                        default:
                            break;
                        case "btnDeleteDB":
                            deleteDatabase();
                            break;
                        case "btnFetchSurnameAndEmailEmployee":
                            fetchMultiFilterByEmailAndSurname();
                            break;
                        case "btnAddMillionRecords":
                            add10kRecordsToDB();
                            break;
                        case "btnCountRecords":
                            countRecords();
                            break;
                        case "btnMultIndexFilter":
                            filterMultipleIndexFields();
                            break;
                            
                    }
                }
            },
            columns: [
                { field: 'recid', caption: 'ID', size: '5%', sortable: true },
                { field: 'fname', caption: 'First Name', size: '25%' },
                { field: 'lname', caption: 'Last Name', size: '25%' },
                { field: 'email', caption: 'Email', size: '30%' },
                { field: 'sdate', caption: 'Start Date', size: '15%', editable: { type: 'date' } },
            ]            
        });     
    });
</script>
</html>
