<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=no" />
    <meta name="format-detection"content="telephone=no"/>
    <meta charset="utf-8" />
    <style>

    </style>
</head>
<body>
<script>
    function de(){
        var res,rej;
        var p=new Promise(function(resolve,reject){
            res=resolve;
            rej=reject;
        });
        p.resolve=res;
        p.reject=rej;
        return p;
    }
    var d=de();
    d.then(function(){
        d.then(function(){
           console.log('c');
        });
        console.log('a');
    });

    d.then(function(){
        console.log('b');
    });
    window.setTimeout(function(){
        console.log('d');
    },0);
    /**
     * 第一事件队列 当前代码
     * d.resolve在第一事件队列加入任务队列 a b
     * 在a中在已有的任务队列再次加入任务队列 c
     * 第一事件队列完毕 执行第二事件队列 d
     * */
    d.resolve();//a b c d
</script>
</body>
</html>