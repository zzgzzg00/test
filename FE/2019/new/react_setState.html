<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script src="../../common/JSXTransformer.js"></script>
<script src="../../common/react16.8.js"></script>
<script src="../../common/react-dom16.8.js"></script>
<script type="text/jsx">
    /**
     * setState 是由 React 的生命周期函数或者事件处理函数中同步调用，
     * 这种情况下 setState 不会立即同步更新 state 和重新渲染，
     * 但是，如果调用 setState 由其他条件引发，就不是这样了
     * */
    const {Component}=React;
    class App extends Component{
        constructor(){
            super(...arguments);
            this.state={
                index:0
            }
            this.clickHandle=this.clickHandle.bind(this);
        }
        componentDidMount(){
            this.setState({
                index:1
            },()=>console.log(`over ${this.state.index}`));
            console.log(this.state.index);
        }
        clickHandle(){
            this.setState({
                index:2
            })
            console.log(this.state.index);
        }
        render(){
            return(
                <p onClick={this.clickHandle}>xx</p>
            )
        }
    }
    ReactDOM.render(<App />,document.body);
</script>
</body>
</html>