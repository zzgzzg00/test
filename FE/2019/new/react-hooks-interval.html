<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script src="../../common/JSXTransformer.js"></script>
<script src="../../common/react16.8.js"></script>
<script src="../../common/react-dom16.8.js"></script>
<script type="text/jsx">
    const {useState,useEffect,useRef}=React;
    const useInterval=_count=>{
        /**
         * _count不发生变化导致组件不在渲染 从而setCount不在生效
         * 故count除了第一次发生一次变化为2后 不再发生变化
         * */
        const [count,setCount]=useState(_count);
        console.log(count);//此处也只执行到2不再打印
        useEffect(()=>{
            //可以为
            //const id=setInterval(()=>{setCount(count=>count+1);},1000);
            return ()=>{
                clearInterval(id);
            }
        },[_count]);
        return count;
    }
    const App=props=>{
        const [c,setC]=useState(1);
        const count=useInterval(c);
        return <p>1-{count}</p>
    }


    /*function Counter() {
        let [count, setCount] = useState(0);

        useInterval(() => {
            // Your custom logic here
            setCount(count + 1);
        }, 1000);

        return <h1>{count}</h1>;
    }
    function useInterval(callback, delay) {
        const savedCallback = useRef();

        // Remember the latest callback.
        useEffect(() => {
            savedCallback.current = callback;
        });

        // Set up the interval.
        useEffect(() => {
            function tick() {
                savedCallback.current();
            }
            if (delay !== null) {
                let id = setInterval(tick, delay);
                return () => clearInterval(id);
            }
        }, [delay]);
    }*/
    ReactDOM.render(<App />,document.body);
</script>
</body>
</html>