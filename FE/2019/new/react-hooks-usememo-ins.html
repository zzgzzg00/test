<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script src="../../common/JSXTransformer.js"></script>
<script src="../../common/react@16.8.5.js"></script>
<script src="../../common/react-dom@16.8.4.js"></script>
<script type="text/jsx">
    const {useMemo,useState,useCallback}=React;
    /**
     *  如果需要对 props 进行加工，可以利用 useMemo 对加工过程进行缓存，仅当依赖变化时才重新执行
     * */
    const Sub=props=>{
        const renderFun=useMemo(()=>{
            return count=>count+1;
        },[]);
        return(
            <p>{renderFun(props.count)}</p>
        )
    }
    const App=props=>{
        const [count,setCount]=useState(0);
        const handleClick=useCallback(()=>{
            const random=(Math.random()*1000)<<0;
            setCount(random);
        },[]);
        return(
            <div>
                <Sub count={count}/>
                <p onClick={handleClick}>{count}</p>
            </div>
        )
    }
    ReactDOM.render(<App />,document.body);
</script>
</body>
</html>