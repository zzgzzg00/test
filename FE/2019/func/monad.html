<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script src="./lib.js"></script>
<script>
    /**
     * pointed functor 是实现了 of 方法的 functor。
     * */
    /**
     * monad 是可以变扁（flatten）的 pointed functor。
     * */
    class Maybe{
        constructor(value){
            this.value=value;
        }
        static of(value){
            return new Maybe(value);
        }
        get isNothing(){
            return this.value == null;
        }
        map(fun){
            return this.isNothing?Maybe.of(null):Maybe.of(fun(this.value));
        }
        join(){
            return this.value;
        }
    }

    function createMaybe(obj){
        return Maybe.of(obj);
    }
    const getProp=curry(function(key,maybe){
        return maybe.map(value=>value[key]);
    });
    const mjoin=maybe=>maybe.join();
    const getProps=compose(mjoin,getProp('role'),getProp('name'),createMaybe);
    const result=getProps({
        name:{
            role:'n'
        }
    });
    console.log(result);
    const result2=getProps();
    console.log(result2);
</script>
</body>
</html>