<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    function wrapPromise(fun){
        return function addParams(...params) {
            return new Promise((resolve,reject)=>{
                try{
                    const value=fun(...params);
                    resolve({
                        status:0,
                        value
                    })
                }catch(e){
                    reject({
                        status:1,
                        value:new Error('no trace mode')
                    })
                }
            });
        }
    }
    function wrapTryCatch(fun){
        return function addParams(param) {
            try{
                const value=fun(param);
                return value;
            }catch(e){

            }
            return param;
        }
    }
    const jsonStringify=wrapTryCatch(JSON.stringify);
    const jsonParse=wrapTryCatch(JSON.parse);
    const setItem=wrapPromise(function(key,value,type='localStorage'){
        value=jsonStringify(value);
        window[type].setItem(key,value);
        return value;
    })
    const getItem=wrapPromise(function(key,type='localStorage'){
        let value=window[type].getItem(key);
        value=jsonParse(value);
        return value;
    })
    const removeItem=wrapPromise(function(key,type='localStorage'){
        window[type].removeItem(key);
        return key;
    })
    setItem('a',{a:1})
        .then(console.log);
    getItem('a')
        .then(({value})=>console.log(value));
</script>
</body>
</html>