<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script src="../common/JSXTransformer.js"></script>
<script src="../common/react16.6.js"></script>
<script src="../common/react-dom16.6.js"></script>
<script type="text/jsx">
    const {Component,Fragment}=React;
    const Show=props=>{
        console.log('pure');
        return(
            <p>{props.contents}</p>
        )
    }
    /**
     * only rerenders if props change
     * 当props没有变化时将不在执行Show方法直接渲染
     * ShowTest每次setState是都会执行
     * */
    const PureShow=React.memo(Show);
    const ShowTest=props=>{
        console.log('test');
        return(
            <p>{props.contents}</p>
        )
    }
    class App extends Component{
        constructor(props){
            super(props);
            this.index=0;
            this.state={
                contents:'test'
            }
            this.changeHandle=this.changeHandle.bind(this);
        }
        changeHandle(){
            const index=this.index;
            this.setState({
                contents:`test${index}`
            })
        }
        render(){
            return(
                <Fragment>
                    <PureShow contents={this.state.contents} />
                    <ShowTest contents={this.state.contents} />
                    <input type="button" value="change" onClick={this.changeHandle} />
                </Fragment>
            )
        }
    }
    ReactDOM.render(<App />,document.body);
</script>
</body>
</html>