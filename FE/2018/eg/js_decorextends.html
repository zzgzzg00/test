<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    class Test{
        constructor(con){
            this.state={
                con
            };
            console.log(`start ${this.state.con}`);
            setTimeout(()=>{
                this.setState({
                    con:'con'
                })
            },2000);
        }
        render(){
            console.log(this.state.con);
        }
    }

    class Test2{
        constructor(data){
            this.state={
                ...data
            };
            console.log(`start ${JSON.stringify(this.state,null,4)}`);
            setTimeout(()=>{
                this.setState({
                    ...data
                })
            },4000);
        }
        render(){
            console.log(this.state);
        }
    }

    function Component(Comp){
        return class extends Comp{
            constructor(con){
                super(con);
            }
            setState(data){
                Object.assign(this.state,data);
                this.render();
            }
        }
    }
    const TestComponent=Component(Test);
    new TestComponent('aaa');

    const Test2Component=Component(Test2);
    new Test2Component({a:1,b:2,c:3});
</script>
</body>
</html>