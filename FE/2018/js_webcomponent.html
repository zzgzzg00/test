<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        /*组件为被定义时隐藏*/
        :root{
            --color:red;
        }
        my-test:not(:defined) {
            display: none;
        }
    </style>
</head>
<body>
<template id="test">
    <style>
        :host{
            color: var(--color);
        }
    </style>
    <!--会将组件内对应的slot插入到模版的slot-->
    <div>
        <div>
            <h4>others</h4>
            <slot></slot>
        </div>
        <div>
            <h4>A</h4>
            <slot name="A"></slot>
        </div>
        <div>
            <h4>B</h4>
            <slot name="B"></slot>
        </div>
    </div>
</template>
<my-test>
    <div>c</div>
    <div>d</div>
    <div slot="A">aa</div>
    <div slot="A">ab</div>
    <div slot="B">ba</div>
    <div slot="B">bb</div>
</my-test>
<script>
    class Test extends HTMLElement{
        constructor(){
            super();
            const temp=document.querySelector('#test');
            const shadowRoot=this.attachShadow({mode:'open'});
            const clone=document.importNode(temp.content,true);
            shadowRoot.appendChild(clone);
        }
        //dom渲染
        connectedCallback(e){
            console.log('connectedCallback');
            setTimeout(()=>this.setAttribute('awesome','green'),1000);
            this.addEventListener('click',()=>alert(1),{passive:false});
            setTimeout(()=>this.outerHTML='',4000);
        }
        //dom移除
        disconnectedCallback(){
            console.log('disconnectedCallback');
        }
        //监听变化的属性
        static get observedAttributes() {
            return ['awesome'];
        }
        //属性变化事件
        attributeChangedCallback(attrName, oldVal, newVal){
            console.log(attrName, oldVal, newVal);
            this.style.color=newVal;
        }
    }
    customElements.define('my-test',Test);
</script>
</body>
</html>